<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../grafana-agent/ rel=prev><link href=../loki-canary/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>Grafana Helm Chart - Helm Charts Hub</title><link rel=stylesheet href=../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-C5YHK472VS"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-C5YHK472VS",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-C5YHK472VS",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#grafana-helm-chart class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../.. title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Helm Charts Hub </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Grafana Helm Chart </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Helm Charts Hub </a> </li> <li class=md-tabs__item> <a href=../../chart-list/ class=md-tabs__link> Chart 列表 </a> </li> <li class=md-tabs__item> <a href=../../bitnami/ class=md-tabs__link> Bitnami </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Grafana </a> </li> <li class=md-tabs__item> <a href=../../ingress-nginx/ class=md-tabs__link> Ingress nginx </a> </li> <li class=md-tabs__item> <a href=../../prometheus-community/ class=md-tabs__link> Prometheus community </a> </li> <li class=md-tabs__item> <a href=../../sir5kong/ class=md-tabs__link> Sir5kong </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Helm Charts Hub </label> <div class=md-nav__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Helm Charts Hub </a> </li> <li class=md-nav__item> <a href=../../chart-list/ class=md-nav__link> Chart 列表 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../bitnami/ >Bitnami</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Bitnami data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Bitnami </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../bitnami/airflow/ class=md-nav__link> Airflow </a> </li> <li class=md-nav__item> <a href=../../bitnami/apache/ class=md-nav__link> Apache </a> </li> <li class=md-nav__item> <a href=../../bitnami/apisix/ class=md-nav__link> Apisix </a> </li> <li class=md-nav__item> <a href=../../bitnami/appsmith/ class=md-nav__link> Appsmith </a> </li> <li class=md-nav__item> <a href=../../bitnami/argo-cd/ class=md-nav__link> Argo cd </a> </li> <li class=md-nav__item> <a href=../../bitnami/argo-workflows/ class=md-nav__link> Argo workflows </a> </li> <li class=md-nav__item> <a href=../../bitnami/aspnet-core/ class=md-nav__link> Aspnet core </a> </li> <li class=md-nav__item> <a href=../../bitnami/cassandra/ class=md-nav__link> Cassandra </a> </li> <li class=md-nav__item> <a href=../../bitnami/cert-manager/ class=md-nav__link> Cert manager </a> </li> <li class=md-nav__item> <a href=../../bitnami/clickhouse/ class=md-nav__link> Clickhouse </a> </li> <li class=md-nav__item> <a href=../../bitnami/common/ class=md-nav__link> Bitnami Common Library Chart </a> </li> <li class=md-nav__item> <a href=../../bitnami/concourse/ class=md-nav__link> Concourse </a> </li> <li class=md-nav__item> <a href=../../bitnami/consul/ class=md-nav__link> Consul </a> </li> <li class=md-nav__item> <a href=../../bitnami/contour/ class=md-nav__link> Contour </a> </li> <li class=md-nav__item> <a href=../../bitnami/discourse/ class=md-nav__link> Discourse </a> </li> <li class=md-nav__item> <a href=../../bitnami/dokuwiki/ class=md-nav__link> Dokuwiki </a> </li> <li class=md-nav__item> <a href=../../bitnami/drupal/ class=md-nav__link> Drupal </a> </li> <li class=md-nav__item> <a href=../../bitnami/ejbca/ class=md-nav__link> Ejbca </a> </li> <li class=md-nav__item> <a href=../../bitnami/elasticsearch/ class=md-nav__link> Elasticsearch </a> </li> <li class=md-nav__item> <a href=../../bitnami/etcd/ class=md-nav__link> Etcd </a> </li> <li class=md-nav__item> <a href=../../bitnami/external-dns/ class=md-nav__link> External dns </a> </li> <li class=md-nav__item> <a href=../../bitnami/flink/ class=md-nav__link> Flink </a> </li> <li class=md-nav__item> <a href=../../bitnami/fluent-bit/ class=md-nav__link> Fluent bit </a> </li> <li class=md-nav__item> <a href=../../bitnami/fluentd/ class=md-nav__link> Fluentd </a> </li> <li class=md-nav__item> <a href=../../bitnami/flux/ class=md-nav__link> Flux </a> </li> <li class=md-nav__item> <a href=../../bitnami/ghost/ class=md-nav__link> Ghost </a> </li> <li class=md-nav__item> <a href=../../bitnami/gitea/ class=md-nav__link> Gitea </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-loki/ class=md-nav__link> Grafana loki </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-mimir/ class=md-nav__link> Grafana mimir </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-operator/ class=md-nav__link> Grafana operator </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-tempo/ class=md-nav__link> Grafana tempo </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../../bitnami/haproxy/ class=md-nav__link> Haproxy </a> </li> <li class=md-nav__item> <a href=../../bitnami/harbor/ class=md-nav__link> Harbor </a> </li> <li class=md-nav__item> <a href=../../bitnami/influxdb/ class=md-nav__link> Influxdb </a> </li> <li class=md-nav__item> <a href=../../bitnami/jaeger/ class=md-nav__link> Jaeger </a> </li> <li class=md-nav__item> <a href=../../bitnami/jasperreports/ class=md-nav__link> Jasperreports </a> </li> <li class=md-nav__item> <a href=../../bitnami/jenkins/ class=md-nav__link> Jenkins </a> </li> <li class=md-nav__item> <a href=../../bitnami/joomla/ class=md-nav__link> Joomla </a> </li> <li class=md-nav__item> <a href=../../bitnami/jupyterhub/ class=md-nav__link> Jupyterhub </a> </li> <li class=md-nav__item> <a href=../../bitnami/kafka/ class=md-nav__link> Kafka </a> </li> <li class=md-nav__item> <a href=../../bitnami/keycloak/ class=md-nav__link> Keycloak </a> </li> <li class=md-nav__item> <a href=../../bitnami/kiam/ class=md-nav__link> Kiam </a> </li> <li class=md-nav__item> <a href=../../bitnami/kibana/ class=md-nav__link> Kibana </a> </li> <li class=md-nav__item> <a href=../../bitnami/kong/ class=md-nav__link> Kong </a> </li> <li class=md-nav__item> <a href=../../bitnami/kube-prometheus/ class=md-nav__link> Kube prometheus </a> </li> <li class=md-nav__item> <a href=../../bitnami/kube-state-metrics/ class=md-nav__link> Kube state metrics </a> </li> <li class=md-nav__item> <a href=../../bitnami/kubeapps/ class=md-nav__link> Kubeapps </a> </li> <li class=md-nav__item> <a href=../../bitnami/kubernetes-event-exporter/ class=md-nav__link> Kubernetes event exporter </a> </li> <li class=md-nav__item> <a href=../../bitnami/logstash/ class=md-nav__link> Logstash </a> </li> <li class=md-nav__item> <a href=../../bitnami/magento/ class=md-nav__link> Magento </a> </li> <li class=md-nav__item> <a href=../../bitnami/mariadb-galera/ class=md-nav__link> Mariadb galera </a> </li> <li class=md-nav__item> <a href=../../bitnami/mariadb/ class=md-nav__link> Mariadb </a> </li> <li class=md-nav__item> <a href=../../bitnami/mastodon/ class=md-nav__link> Mastodon </a> </li> <li class=md-nav__item> <a href=../../bitnami/matomo/ class=md-nav__link> Matomo </a> </li> <li class=md-nav__item> <a href=../../bitnami/mediawiki/ class=md-nav__link> Mediawiki </a> </li> <li class=md-nav__item> <a href=../../bitnami/memcached/ class=md-nav__link> Memcached </a> </li> <li class=md-nav__item> <a href=../../bitnami/metallb/ class=md-nav__link> Metallb </a> </li> <li class=md-nav__item> <a href=../../bitnami/metrics-server/ class=md-nav__link> Metrics server </a> </li> <li class=md-nav__item> <a href=../../bitnami/minio/ class=md-nav__link> Minio </a> </li> <li class=md-nav__item> <a href=../../bitnami/mongodb-sharded/ class=md-nav__link> Mongodb sharded </a> </li> <li class=md-nav__item> <a href=../../bitnami/mongodb/ class=md-nav__link> Mongodb </a> </li> <li class=md-nav__item> <a href=../../bitnami/moodle/ class=md-nav__link> Moodle </a> </li> <li class=md-nav__item> <a href=../../bitnami/multus-cni/ class=md-nav__link> Multus cni </a> </li> <li class=md-nav__item> <a href=../../bitnami/mxnet/ class=md-nav__link> Mxnet </a> </li> <li class=md-nav__item> <a href=../../bitnami/mysql/ class=md-nav__link> Mysql </a> </li> <li class=md-nav__item> <a href=../../bitnami/nats/ class=md-nav__link> Nats </a> </li> <li class=md-nav__item> <a href=../../bitnami/nginx-ingress-controller/ class=md-nav__link> Nginx ingress controller </a> </li> <li class=md-nav__item> <a href=../../bitnami/nginx/ class=md-nav__link> Nginx </a> </li> <li class=md-nav__item> <a href=../../bitnami/node-exporter/ class=md-nav__link> Node exporter </a> </li> <li class=md-nav__item> <a href=../../bitnami/oauth2-proxy/ class=md-nav__link> Oauth2 proxy </a> </li> <li class=md-nav__item> <a href=../../bitnami/odoo/ class=md-nav__link> Odoo </a> </li> <li class=md-nav__item> <a href=../../bitnami/opencart/ class=md-nav__link> Opencart </a> </li> <li class=md-nav__item> <a href=../../bitnami/osclass/ class=md-nav__link> Osclass </a> </li> <li class=md-nav__item> <a href=../../bitnami/parse/ class=md-nav__link> Parse </a> </li> <li class=md-nav__item> <a href=../../bitnami/phpbb/ class=md-nav__link> Phpbb </a> </li> <li class=md-nav__item> <a href=../../bitnami/phpmyadmin/ class=md-nav__link> Phpmyadmin </a> </li> <li class=md-nav__item> <a href=../../bitnami/pinniped/ class=md-nav__link> Pinniped </a> </li> <li class=md-nav__item> <a href=../../bitnami/postgresql-ha/ class=md-nav__link> Postgresql ha </a> </li> <li class=md-nav__item> <a href=../../bitnami/postgresql/ class=md-nav__link> Postgresql </a> </li> <li class=md-nav__item> <a href=../../bitnami/prestashop/ class=md-nav__link> Prestashop </a> </li> <li class=md-nav__item> <a href=../../bitnami/prometheus/ class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../../bitnami/pytorch/ class=md-nav__link> Pytorch </a> </li> <li class=md-nav__item> <a href=../../bitnami/rabbitmq-cluster-operator/ class=md-nav__link> Rabbitmq cluster operator </a> </li> <li class=md-nav__item> <a href=../../bitnami/rabbitmq/ class=md-nav__link> Rabbitmq </a> </li> <li class=md-nav__item> <a href=../../bitnami/redis-cluster/ class=md-nav__link> Redis cluster </a> </li> <li class=md-nav__item> <a href=../../bitnami/redis/ class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=../../bitnami/redmine/ class=md-nav__link> Redmine </a> </li> <li class=md-nav__item> <a href=../../bitnami/schema-registry/ class=md-nav__link> Schema registry </a> </li> <li class=md-nav__item> <a href=../../bitnami/sealed-secrets/ class=md-nav__link> Sealed secrets </a> </li> <li class=md-nav__item> <a href=../../bitnami/solr/ class=md-nav__link> Solr </a> </li> <li class=md-nav__item> <a href=../../bitnami/sonarqube/ class=md-nav__link> Sonarqube </a> </li> <li class=md-nav__item> <a href=../../bitnami/spark/ class=md-nav__link> Spark </a> </li> <li class=md-nav__item> <a href=../../bitnami/spring-cloud-dataflow/ class=md-nav__link> Spring cloud dataflow </a> </li> <li class=md-nav__item> <a href=../../bitnami/suitecrm/ class=md-nav__link> Suitecrm </a> </li> <li class=md-nav__item> <a href=../../bitnami/supabase/ class=md-nav__link> Supabase </a> </li> <li class=md-nav__item> <a href=../../bitnami/tensorflow-resnet/ class=md-nav__link> Tensorflow resnet </a> </li> <li class=md-nav__item> <a href=../../bitnami/thanos/ class=md-nav__link> Thanos </a> </li> <li class=md-nav__item> <a href=../../bitnami/tomcat/ class=md-nav__link> Tomcat </a> </li> <li class=md-nav__item> <a href=../../bitnami/vault/ class=md-nav__link> Vault </a> </li> <li class=md-nav__item> <a href=../../bitnami/wavefront-hpa-adapter/ class=md-nav__link> Wavefront hpa adapter </a> </li> <li class=md-nav__item> <a href=../../bitnami/wavefront-prometheus-storage-adapter/ class=md-nav__link> Wavefront prometheus storage adapter </a> </li> <li class=md-nav__item> <a href=../../bitnami/whereabouts/ class=md-nav__link> Whereabouts </a> </li> <li class=md-nav__item> <a href=../../bitnami/wildfly/ class=md-nav__link> Wildfly </a> </li> <li class=md-nav__item> <a href=../../bitnami/wordpress/ class=md-nav__link> Wordpress </a> </li> <li class=md-nav__item> <a href=../../bitnami/zookeeper/ class=md-nav__link> Zookeeper </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Grafana</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Grafana data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Grafana </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../agent-operator/ class=md-nav__link> grafana-agent-operator </a> </li> <li class=md-nav__item> <a href=../enterprise-logs-simple/ class=md-nav__link> enterprise-logs-simple </a> </li> <li class=md-nav__item> <a href=../enterprise-logs/ class=md-nav__link> Grafana Enterprise Logs Helm Chart </a> </li> <li class=md-nav__item> <a href=../enterprise-metrics/ class=md-nav__link> Grafana Enterprise Metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../fluent-bit/ class=md-nav__link> Fluent Bit Loki chart </a> </li> <li class=md-nav__item> <a href=../grafana-agent/ class=md-nav__link> Grafana Agent chart </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Grafana Helm Chart <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Grafana Helm Chart </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#get-repo-info class=md-nav__link> Get Repo Info </a> </li> <li class=md-nav__item> <a href=#installing-the-chart class=md-nav__link> Installing the Chart </a> </li> <li class=md-nav__item> <a href=#uninstalling-the-chart class=md-nav__link> Uninstalling the Chart </a> </li> <li class=md-nav__item> <a href=#upgrading-an-existing-release-to-a-new-major-version class=md-nav__link> Upgrading an existing Release to a new major version </a> <nav class=md-nav aria-label="Upgrading an existing Release to a new major version"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-400-and-3121 class=md-nav__link> To 4.0.0 (And 3.12.1) </a> </li> <li class=md-nav__item> <a href=#to-500 class=md-nav__link> To 5.0.0 </a> </li> <li class=md-nav__item> <a href=#to-600 class=md-nav__link> To 6.0.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-ingress-with-path class=md-nav__link> Example ingress with path </a> </li> <li class=md-nav__item> <a href=#example-of-extravolumemounts class=md-nav__link> Example of extraVolumeMounts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#import-dashboards class=md-nav__link> Import dashboards </a> </li> <li class=md-nav__item> <a href=#base64-dashboards class=md-nav__link> BASE64 dashboards </a> <nav class=md-nav aria-label="BASE64 dashboards"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gerrit-use-case class=md-nav__link> Gerrit use case </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sidecar-for-dashboards class=md-nav__link> Sidecar for dashboards </a> </li> <li class=md-nav__item> <a href=#sidecar-for-datasources class=md-nav__link> Sidecar for datasources </a> </li> <li class=md-nav__item> <a href=#sidecar-for-notifiers class=md-nav__link> Sidecar for notifiers </a> </li> <li class=md-nav__item> <a href=#provision-alert-rules-contact-points-notification-policies-and-notification-templates class=md-nav__link> Provision alert rules, contact points, notification policies and notification templates </a> <nav class=md-nav aria-label="Provision alert rules, contact points, notification policies and notification templates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#important-notes-on-file-provisioning class=md-nav__link> Important notes on file provisioning </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-serve-grafana-with-a-path-prefix-grafana class=md-nav__link> How to serve Grafana with a path prefix (/grafana) </a> </li> <li class=md-nav__item> <a href=#how-to-securely-reference-secrets-in-grafanaini class=md-nav__link> How to securely reference secrets in grafana.ini </a> <nav class=md-nav aria-label="How to securely reference secrets in grafana.ini"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#extrasecretmounts-using-a-container-storage-interface-csi-provider class=md-nav__link> extraSecretMounts using a Container Storage Interface (CSI) provider </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#image-renderer-plug-in class=md-nav__link> Image Renderer Plug-In </a> <nav class=md-nav aria-label="Image Renderer Plug-In"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#image-renderer-networkpolicy class=md-nav__link> Image Renderer NetworkPolicy </a> </li> <li class=md-nav__item> <a href=#high-availability-for-unified-alerting class=md-nav__link> High Availability for unified alerting </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../loki-canary/ class=md-nav__link> loki-canary </a> </li> <li class=md-nav__item> <a href=../loki-distributed/ class=md-nav__link> loki-distributed </a> </li> <li class=md-nav__item> <a href=../loki-stack/ class=md-nav__link> Loki-Stack Helm Chart </a> </li> <li class=md-nav__item> <a href=../mimir-distributed/ class=md-nav__link> Notice of relocation </a> </li> <li class=md-nav__item> <a href=../promtail/ class=md-nav__link> promtail </a> </li> <li class=md-nav__item> <a href=../rollout-operator/ class=md-nav__link> Grafana rollout-operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../synthetic-monitoring-agent/ class=md-nav__link> synthetic-monitoring-agent </a> </li> <li class=md-nav__item> <a href=../tempo-distributed/ class=md-nav__link> tempo-distributed </a> </li> <li class=md-nav__item> <a href=../tempo-vulture/ class=md-nav__link> tempo-vulture </a> </li> <li class=md-nav__item> <a href=../tempo/ class=md-nav__link> tempo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5 type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../ingress-nginx/ >Ingress nginx</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Ingress nginx" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Ingress nginx </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ingress-nginx/ingress-nginx/ class=md-nav__link> ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_6 type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../prometheus-community/ >Prometheus community</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Prometheus community" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Prometheus community </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager-snmp-notifier/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager/ class=md-nav__link> Alertmanager </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/jiralert/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-prometheus-stack/ class=md-nav__link> kube-prometheus-stack </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-state-metrics/ class=md-nav__link> kube-state-metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prom-label-proxy/ class=md-nav__link> prom-label-proxy </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-adapter/ class=md-nav__link> Prometheus Adapter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-blackbox-exporter/ class=md-nav__link> Prometheus Blackbox Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-cloudwatch-exporter/ class=md-nav__link> Prometheus Cloudwatch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-conntrack-stats-exporter/ class=md-nav__link> Conntrack Stats Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-consul-exporter/ class=md-nav__link> Prometheus Consul Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-couchdb-exporter/ class=md-nav__link> prometheus-couchdb-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-druid-exporter/ class=md-nav__link> Prometheus Druid Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-elasticsearch-exporter/ class=md-nav__link> Elasticsearch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-fastly-exporter/ class=md-nav__link> Prometheus Fastly Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-json-exporter/ class=md-nav__link> prometheus-json-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-kafka-exporter/ class=md-nav__link> prometheus-kafka-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mongodb-exporter/ class=md-nav__link> Prometheus MongoDB Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mysql-exporter/ class=md-nav__link> Prometheus Mysql Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nats-exporter/ class=md-nav__link> Prometheus NATS Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nginx-exporter/ class=md-nav__link> prometheus-nginx-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-node-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-admission-webhook/ class=md-nav__link> Prometheus Operator Admission Webhook </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-crds/ class=md-nav__link> Prometheus Operator CRDs </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pgbouncer-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingdom-exporter/ class=md-nav__link> Prometheus Pingdom Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingmesh-exporter/ class=md-nav__link> Prometheus Pingmesh Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-postgres-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pushgateway/ class=md-nav__link> Prometheus Pushgateway </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-rabbitmq-exporter/ class=md-nav__link> prometheus-rabbitmq-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-redis-exporter/ class=md-nav__link> prometheus-redis-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-smartctl-exporter/ class=md-nav__link> Prometheus smartctl Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-snmp-exporter/ class=md-nav__link> Prometheus SNMP Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-stackdriver-exporter/ class=md-nav__link> Stackdriver Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-statsd-exporter/ class=md-nav__link> prometheus-statsd-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-to-sd/ class=md-nav__link> prometheus-to-sd </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-windows-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus/ class=md-nav__link> Prometheus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../sir5kong/ >Sir5kong</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Sir5kong data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Sir5kong </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sir5kong/commonapp/ class=md-nav__link> commonapp helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/kafka/ class=md-nav__link> Kafka helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/nginx/ class=md-nav__link> nginx helm chart </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#get-repo-info class=md-nav__link> Get Repo Info </a> </li> <li class=md-nav__item> <a href=#installing-the-chart class=md-nav__link> Installing the Chart </a> </li> <li class=md-nav__item> <a href=#uninstalling-the-chart class=md-nav__link> Uninstalling the Chart </a> </li> <li class=md-nav__item> <a href=#upgrading-an-existing-release-to-a-new-major-version class=md-nav__link> Upgrading an existing Release to a new major version </a> <nav class=md-nav aria-label="Upgrading an existing Release to a new major version"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-400-and-3121 class=md-nav__link> To 4.0.0 (And 3.12.1) </a> </li> <li class=md-nav__item> <a href=#to-500 class=md-nav__link> To 5.0.0 </a> </li> <li class=md-nav__item> <a href=#to-600 class=md-nav__link> To 6.0.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-ingress-with-path class=md-nav__link> Example ingress with path </a> </li> <li class=md-nav__item> <a href=#example-of-extravolumemounts class=md-nav__link> Example of extraVolumeMounts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#import-dashboards class=md-nav__link> Import dashboards </a> </li> <li class=md-nav__item> <a href=#base64-dashboards class=md-nav__link> BASE64 dashboards </a> <nav class=md-nav aria-label="BASE64 dashboards"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gerrit-use-case class=md-nav__link> Gerrit use case </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sidecar-for-dashboards class=md-nav__link> Sidecar for dashboards </a> </li> <li class=md-nav__item> <a href=#sidecar-for-datasources class=md-nav__link> Sidecar for datasources </a> </li> <li class=md-nav__item> <a href=#sidecar-for-notifiers class=md-nav__link> Sidecar for notifiers </a> </li> <li class=md-nav__item> <a href=#provision-alert-rules-contact-points-notification-policies-and-notification-templates class=md-nav__link> Provision alert rules, contact points, notification policies and notification templates </a> <nav class=md-nav aria-label="Provision alert rules, contact points, notification policies and notification templates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#important-notes-on-file-provisioning class=md-nav__link> Important notes on file provisioning </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-serve-grafana-with-a-path-prefix-grafana class=md-nav__link> How to serve Grafana with a path prefix (/grafana) </a> </li> <li class=md-nav__item> <a href=#how-to-securely-reference-secrets-in-grafanaini class=md-nav__link> How to securely reference secrets in grafana.ini </a> <nav class=md-nav aria-label="How to securely reference secrets in grafana.ini"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#extrasecretmounts-using-a-container-storage-interface-csi-provider class=md-nav__link> extraSecretMounts using a Container Storage Interface (CSI) provider </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#image-renderer-plug-in class=md-nav__link> Image Renderer Plug-In </a> <nav class=md-nav aria-label="Image Renderer Plug-In"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#image-renderer-networkpolicy class=md-nav__link> Image Renderer NetworkPolicy </a> </li> <li class=md-nav__item> <a href=#high-availability-for-unified-alerting class=md-nav__link> High Availability for unified alerting </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=grafana-helm-chart>Grafana Helm Chart<a class=headerlink href=#grafana-helm-chart title="Permanent link">&para;</a></h1> <ul> <li>Installs the web dashboarding system <a href=http://grafana.org/ >Grafana</a></li> </ul> <h2 id=get-repo-info>Get Repo Info<a class=headerlink href=#get-repo-info title="Permanent link">&para;</a></h2> <div class="language-console highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=go>helm repo add grafana https://helm-charts.itboon.top/grafana</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=go>helm repo update</span>
</span></code></pre></div> <p><em>See <a href=https://helm.sh/docs/helm/helm_repo/ >helm repo</a> for command documentation.</em></p> <h2 id=installing-the-chart>Installing the Chart<a class=headerlink href=#installing-the-chart title="Permanent link">&para;</a></h2> <p>To install the chart with the release name <code>my-release</code>:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=go>helm install my-release grafana/grafana</span>
</span></code></pre></div> <h2 id=uninstalling-the-chart>Uninstalling the Chart<a class=headerlink href=#uninstalling-the-chart title="Permanent link">&para;</a></h2> <p>To uninstall/delete the my-release deployment:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=go>helm delete my-release</span>
</span></code></pre></div> <p>The command removes all the Kubernetes components associated with the chart and deletes the release.</p> <h2 id=upgrading-an-existing-release-to-a-new-major-version>Upgrading an existing Release to a new major version<a class=headerlink href=#upgrading-an-existing-release-to-a-new-major-version title="Permanent link">&para;</a></h2> <p>A major chart version change (like v1.2.3 -&gt; v2.0.0) indicates that there is an incompatible breaking change needing manual actions.</p> <h3 id=to-400-and-3121>To 4.0.0 (And 3.12.1)<a class=headerlink href=#to-400-and-3121 title="Permanent link">&para;</a></h3> <p>This version requires Helm &gt;= 2.12.0.</p> <h3 id=to-500>To 5.0.0<a class=headerlink href=#to-500 title="Permanent link">&para;</a></h3> <p>You have to add --force to your helm upgrade command as the labels of the chart have changed.</p> <h3 id=to-600>To 6.0.0<a class=headerlink href=#to-600 title="Permanent link">&para;</a></h3> <p>This version requires Helm &gt;= 3.1.0.</p> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Parameter</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>replicas</code></td> <td>Number of nodes</td> <td><code>1</code></td> </tr> <tr> <td><code>podDisruptionBudget.minAvailable</code></td> <td>Pod disruption minimum available</td> <td><code>nil</code></td> </tr> <tr> <td><code>podDisruptionBudget.maxUnavailable</code></td> <td>Pod disruption maximum unavailable</td> <td><code>nil</code></td> </tr> <tr> <td><code>deploymentStrategy</code></td> <td>Deployment strategy</td> <td><code>{ "type": "RollingUpdate" }</code></td> </tr> <tr> <td><code>livenessProbe</code></td> <td>Liveness Probe settings</td> <td><code>{ "httpGet": { "path": "/api/health", "port": 3000 } "initialDelaySeconds": 60, "timeoutSeconds": 30, "failureThreshold": 10 }</code></td> </tr> <tr> <td><code>readinessProbe</code></td> <td>Readiness Probe settings</td> <td><code>{ "httpGet": { "path": "/api/health", "port": 3000 } }</code></td> </tr> <tr> <td><code>securityContext</code></td> <td>Deployment securityContext</td> <td><code>{"runAsUser": 472, "runAsGroup": 472, "fsGroup": 472}</code></td> </tr> <tr> <td><code>priorityClassName</code></td> <td>Name of Priority Class to assign pods</td> <td><code>nil</code></td> </tr> <tr> <td><code>image.repository</code></td> <td>Image repository</td> <td><code>grafana/grafana</code></td> </tr> <tr> <td><code>image.tag</code></td> <td>Overrides the Grafana image tag whose default is the chart appVersion (<code>Must be &gt;= 5.0.0</code>)</td> <td>``</td> </tr> <tr> <td><code>image.sha</code></td> <td>Image sha (optional)</td> <td>``</td> </tr> <tr> <td><code>image.pullPolicy</code></td> <td>Image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>image.pullSecrets</code></td> <td>Image pull secrets (can be templated)</td> <td><code>[]</code></td> </tr> <tr> <td><code>service.enabled</code></td> <td>Enable grafana service</td> <td><code>true</code></td> </tr> <tr> <td><code>service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>service.port</code></td> <td>Kubernetes port where service is exposed</td> <td><code>80</code></td> </tr> <tr> <td><code>service.portName</code></td> <td>Name of the port on the service</td> <td><code>service</code></td> </tr> <tr> <td><code>service.appProtocol</code></td> <td>Adds the appProtocol field to the service</td> <td>``</td> </tr> <tr> <td><code>service.targetPort</code></td> <td>Internal service is port</td> <td><code>3000</code></td> </tr> <tr> <td><code>service.nodePort</code></td> <td>Kubernetes service nodePort</td> <td><code>nil</code></td> </tr> <tr> <td><code>service.annotations</code></td> <td>Service annotations (can be templated)</td> <td><code>{}</code></td> </tr> <tr> <td><code>service.labels</code></td> <td>Custom labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>service.clusterIP</code></td> <td>internal cluster service IP</td> <td><code>nil</code></td> </tr> <tr> <td><code>service.loadBalancerIP</code></td> <td>IP address to assign to load balancer (if supported)</td> <td><code>nil</code></td> </tr> <tr> <td><code>service.loadBalancerSourceRanges</code></td> <td>list of IP CIDRs allowed access to lb (if supported)</td> <td><code>[]</code></td> </tr> <tr> <td><code>service.externalIPs</code></td> <td>service external IP addresses</td> <td><code>[]</code></td> </tr> <tr> <td><code>headlessService</code></td> <td>Create a headless service</td> <td><code>false</code></td> </tr> <tr> <td><code>extraExposePorts</code></td> <td>Additional service ports for sidecar containers</td> <td><code>[]</code></td> </tr> <tr> <td><code>hostAliases</code></td> <td>adds rules to the pod's /etc/hosts</td> <td><code>[]</code></td> </tr> <tr> <td><code>ingress.enabled</code></td> <td>Enables Ingress</td> <td><code>false</code></td> </tr> <tr> <td><code>ingress.annotations</code></td> <td>Ingress annotations (values are templated)</td> <td><code>{}</code></td> </tr> <tr> <td><code>ingress.labels</code></td> <td>Custom labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>ingress.path</code></td> <td>Ingress accepted path</td> <td><code>/</code></td> </tr> <tr> <td><code>ingress.pathType</code></td> <td>Ingress type of path</td> <td><code>Prefix</code></td> </tr> <tr> <td><code>ingress.hosts</code></td> <td>Ingress accepted hostnames</td> <td><code>["chart-example.local"]</code></td> </tr> <tr> <td><code>ingress.extraPaths</code></td> <td>Ingress extra paths to prepend to every host configuration. Useful when configuring <a href=https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/ingress/annotation/#actions>custom actions with AWS ALB Ingress Controller</a>. Requires <code>ingress.hosts</code> to have one or more host entries.</td> <td><code>[]</code></td> </tr> <tr> <td><code>ingress.tls</code></td> <td>Ingress TLS configuration</td> <td><code>[]</code></td> </tr> <tr> <td><code>ingress.ingressClassName</code></td> <td>Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18</td> <td><code>""</code></td> </tr> <tr> <td><code>resources</code></td> <td>CPU/Memory resource requests/limits</td> <td><code>{}</code></td> </tr> <tr> <td><code>nodeSelector</code></td> <td>Node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>tolerations</code></td> <td>Toleration labels for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>affinity</code></td> <td>Affinity settings for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>extraInitContainers</code></td> <td>Init containers to add to the grafana pod</td> <td><code>{}</code></td> </tr> <tr> <td><code>extraContainers</code></td> <td>Sidecar containers to add to the grafana pod</td> <td><code>""</code></td> </tr> <tr> <td><code>extraContainerVolumes</code></td> <td>Volumes that can be mounted in sidecar containers</td> <td><code>[]</code></td> </tr> <tr> <td><code>extraLabels</code></td> <td>Custom labels for all manifests</td> <td><code>{}</code></td> </tr> <tr> <td><code>schedulerName</code></td> <td>Name of the k8s scheduler (other than default)</td> <td><code>nil</code></td> </tr> <tr> <td><code>persistence.enabled</code></td> <td>Use persistent volume to store data</td> <td><code>false</code></td> </tr> <tr> <td><code>persistence.type</code></td> <td>Type of persistence (<code>pvc</code> or <code>statefulset</code>)</td> <td><code>pvc</code></td> </tr> <tr> <td><code>persistence.size</code></td> <td>Size of persistent volume claim</td> <td><code>10Gi</code></td> </tr> <tr> <td><code>persistence.existingClaim</code></td> <td>Use an existing PVC to persist data (can be templated)</td> <td><code>nil</code></td> </tr> <tr> <td><code>persistence.storageClassName</code></td> <td>Type of persistent volume claim</td> <td><code>nil</code></td> </tr> <tr> <td><code>persistence.accessModes</code></td> <td>Persistence access modes</td> <td><code>[ReadWriteOnce]</code></td> </tr> <tr> <td><code>persistence.annotations</code></td> <td>PersistentVolumeClaim annotations</td> <td><code>{}</code></td> </tr> <tr> <td><code>persistence.finalizers</code></td> <td>PersistentVolumeClaim finalizers</td> <td><code>[ "kubernetes.io/pvc-protection" ]</code></td> </tr> <tr> <td><code>persistence.extraPvcLabels</code></td> <td>Extra labels to apply to a PVC.</td> <td><code>{}</code></td> </tr> <tr> <td><code>persistence.subPath</code></td> <td>Mount a sub dir of the persistent volume (can be templated)</td> <td><code>nil</code></td> </tr> <tr> <td><code>persistence.inMemory.enabled</code></td> <td>If persistence is not enabled, whether to mount the local storage in-memory to improve performance</td> <td><code>false</code></td> </tr> <tr> <td><code>persistence.inMemory.sizeLimit</code></td> <td>SizeLimit for the in-memory local storage</td> <td><code>nil</code></td> </tr> <tr> <td><code>initChownData.enabled</code></td> <td>If false, don't reset data ownership at startup</td> <td>true</td> </tr> <tr> <td><code>initChownData.image.repository</code></td> <td>init-chown-data container image repository</td> <td><code>busybox</code></td> </tr> <tr> <td><code>initChownData.image.tag</code></td> <td>init-chown-data container image tag</td> <td><code>1.31.1</code></td> </tr> <tr> <td><code>initChownData.image.sha</code></td> <td>init-chown-data container image sha (optional)</td> <td><code>""</code></td> </tr> <tr> <td><code>initChownData.image.pullPolicy</code></td> <td>init-chown-data container image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>initChownData.resources</code></td> <td>init-chown-data pod resource requests &amp; limits</td> <td><code>{}</code></td> </tr> <tr> <td><code>schedulerName</code></td> <td>Alternate scheduler name</td> <td><code>nil</code></td> </tr> <tr> <td><code>env</code></td> <td>Extra environment variables passed to pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>envValueFrom</code></td> <td>Environment variables from alternate sources. See the API docs on <a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.17/#envvarsource-v1-core>EnvVarSource</a> for format details. Can be templated</td> <td><code>{}</code></td> </tr> <tr> <td><code>envFromSecret</code></td> <td>Name of a Kubernetes secret (must be manually created in the same namespace) containing values to be added to the environment. Can be templated</td> <td><code>""</code></td> </tr> <tr> <td><code>envFromSecrets</code></td> <td>List of Kubernetes secrets (must be manually created in the same namespace) containing values to be added to the environment. Can be templated</td> <td><code>[]</code></td> </tr> <tr> <td><code>envFromConfigMaps</code></td> <td>List of Kubernetes ConfigMaps (must be manually created in the same namespace) containing values to be added to the environment. Can be templated</td> <td><code>[]</code></td> </tr> <tr> <td><code>envRenderSecret</code></td> <td>Sensible environment variables passed to pods and stored as secret. (passed through <a href=https://helm.sh/docs/howto/charts_tips_and_tricks/#using-the-tpl-function>tpl</a>)</td> <td><code>{}</code></td> </tr> <tr> <td><code>enableServiceLinks</code></td> <td>Inject Kubernetes services as environment variables.</td> <td><code>true</code></td> </tr> <tr> <td><code>extraSecretMounts</code></td> <td>Additional grafana server secret mounts</td> <td><code>[]</code></td> </tr> <tr> <td><code>extraVolumeMounts</code></td> <td>Additional grafana server volume mounts</td> <td><code>[]</code></td> </tr> <tr> <td><code>createConfigmap</code></td> <td>Enable creating the grafana configmap</td> <td><code>true</code></td> </tr> <tr> <td><code>extraConfigmapMounts</code></td> <td>Additional grafana server configMap volume mounts (values are templated)</td> <td><code>[]</code></td> </tr> <tr> <td><code>extraEmptyDirMounts</code></td> <td>Additional grafana server emptyDir volume mounts</td> <td><code>[]</code></td> </tr> <tr> <td><code>plugins</code></td> <td>Plugins to be loaded along with Grafana</td> <td><code>[]</code></td> </tr> <tr> <td><code>datasources</code></td> <td>Configure grafana datasources (passed through tpl)</td> <td><code>{}</code></td> </tr> <tr> <td><code>alerting</code></td> <td>Configure grafana alerting (passed through tpl)</td> <td><code>{}</code></td> </tr> <tr> <td><code>notifiers</code></td> <td>Configure grafana notifiers</td> <td><code>{}</code></td> </tr> <tr> <td><code>dashboardProviders</code></td> <td>Configure grafana dashboard providers</td> <td><code>{}</code></td> </tr> <tr> <td><code>dashboards</code></td> <td>Dashboards to import</td> <td><code>{}</code></td> </tr> <tr> <td><code>dashboardsConfigMaps</code></td> <td>ConfigMaps reference that contains dashboards</td> <td><code>{}</code></td> </tr> <tr> <td><code>grafana.ini</code></td> <td>Grafana's primary configuration</td> <td><code>{}</code></td> </tr> <tr> <td><code>global.imagePullSecrets</code></td> <td>Global image pull secrets (can be templated). Allows either an array of {name: pullSecret} maps (k8s-style), or an array of strings (more common helm-style).</td> <td><code>[]</code></td> </tr> <tr> <td><code>ldap.enabled</code></td> <td>Enable LDAP authentication</td> <td><code>false</code></td> </tr> <tr> <td><code>ldap.existingSecret</code></td> <td>The name of an existing secret containing the <code>ldap.toml</code> file, this must have the key <code>ldap-toml</code>.</td> <td><code>""</code></td> </tr> <tr> <td><code>ldap.config</code></td> <td>Grafana's LDAP configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>annotations</code></td> <td>Deployment annotations</td> <td><code>{}</code></td> </tr> <tr> <td><code>labels</code></td> <td>Deployment labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>podAnnotations</code></td> <td>Pod annotations</td> <td><code>{}</code></td> </tr> <tr> <td><code>podLabels</code></td> <td>Pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>podPortName</code></td> <td>Name of the grafana port on the pod</td> <td><code>grafana</code></td> </tr> <tr> <td><code>lifecycleHooks</code></td> <td>Lifecycle hooks for podStart and preStop <a href=https://kubernetes.io/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/#define-poststart-and-prestop-handlers>Example</a></td> <td><code>{}</code></td> </tr> <tr> <td><code>sidecar.image.repository</code></td> <td>Sidecar image repository</td> <td><code>quay.io/kiwigrid/k8s-sidecar</code></td> </tr> <tr> <td><code>sidecar.image.tag</code></td> <td>Sidecar image tag</td> <td><code>1.24.3</code></td> </tr> <tr> <td><code>sidecar.image.sha</code></td> <td>Sidecar image sha (optional)</td> <td><code>""</code></td> </tr> <tr> <td><code>sidecar.imagePullPolicy</code></td> <td>Sidecar image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>sidecar.resources</code></td> <td>Sidecar resources</td> <td><code>{}</code></td> </tr> <tr> <td><code>sidecar.securityContext</code></td> <td>Sidecar securityContext</td> <td><code>{}</code></td> </tr> <tr> <td><code>sidecar.enableUniqueFilenames</code></td> <td>Sets the kiwigrid/k8s-sidecar UNIQUE_FILENAMES environment variable. If set to <code>true</code> the sidecar will create unique filenames where duplicate data keys exist between ConfigMaps and/or Secrets within the same or multiple Namespaces.</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.alerts.enabled</code></td> <td>Enables the cluster wide search for alerts and adds/updates/deletes them in grafana</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.alerts.label</code></td> <td>Label that config maps with alerts should have to be added</td> <td><code>grafana_alert</code></td> </tr> <tr> <td><code>sidecar.alerts.labelValue</code></td> <td>Label value that config maps with alerts should have to be added</td> <td><code>""</code></td> </tr> <tr> <td><code>sidecar.alerts.searchNamespace</code></td> <td>Namespaces list. If specified, the sidecar will search for alerts config-maps inside these namespaces. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces.</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.alerts.watchMethod</code></td> <td>Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</td> <td><code>WATCH</code></td> </tr> <tr> <td><code>sidecar.alerts.resource</code></td> <td>Should the sidecar looks into secrets, configmaps or both.</td> <td><code>both</code></td> </tr> <tr> <td><code>sidecar.alerts.reloadURL</code></td> <td>Full url of datasource configuration reload API endpoint, to invoke after a config-map change</td> <td><code>"http://localhost:3000/api/admin/provisioning/alerting/reload"</code></td> </tr> <tr> <td><code>sidecar.alerts.skipReload</code></td> <td>Enabling this omits defining the REQ_URL and REQ_METHOD environment variables</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.alerts.initDatasources</code></td> <td>Set to true to deploy the datasource sidecar as an initContainer in addition to a container. This is needed if skipReload is true, to load any alerts defined at startup time.</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.alerts.extraMounts</code></td> <td>Additional alerts sidecar volume mounts.</td> <td><code>[]</code></td> </tr> <tr> <td><code>sidecar.dashboards.enabled</code></td> <td>Enables the cluster wide search for dashboards and adds/updates/deletes them in grafana</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.dashboards.SCProvider</code></td> <td>Enables creation of sidecar provider</td> <td><code>true</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.name</code></td> <td>Unique name of the grafana provider</td> <td><code>sidecarProvider</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.orgid</code></td> <td>Id of the organisation, to which the dashboards should be added</td> <td><code>1</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.folder</code></td> <td>Logical folder in which grafana groups dashboards</td> <td><code>""</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.disableDelete</code></td> <td>Activate to avoid the deletion of imported dashboards</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.allowUiUpdates</code></td> <td>Allow updating provisioned dashboards from the UI</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.type</code></td> <td>Provider type</td> <td><code>file</code></td> </tr> <tr> <td><code>sidecar.dashboards.provider.foldersFromFilesStructure</code></td> <td>Allow Grafana to replicate dashboard structure from filesystem.</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.dashboards.watchMethod</code></td> <td>Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</td> <td><code>WATCH</code></td> </tr> <tr> <td><code>sidecar.skipTlsVerify</code></td> <td>Set to true to skip tls verification for kube api calls</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.dashboards.label</code></td> <td>Label that config maps with dashboards should have to be added</td> <td><code>grafana_dashboard</code></td> </tr> <tr> <td><code>sidecar.dashboards.labelValue</code></td> <td>Label value that config maps with dashboards should have to be added</td> <td><code>""</code></td> </tr> <tr> <td><code>sidecar.dashboards.folder</code></td> <td>Folder in the pod that should hold the collected dashboards (unless <code>sidecar.dashboards.defaultFolderName</code> is set). This path will be mounted.</td> <td><code>/tmp/dashboards</code></td> </tr> <tr> <td><code>sidecar.dashboards.folderAnnotation</code></td> <td>The annotation the sidecar will look for in configmaps to override the destination folder for files</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.dashboards.defaultFolderName</code></td> <td>The default folder name, it will create a subfolder under the <code>sidecar.dashboards.folder</code> and put dashboards in there instead</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.dashboards.searchNamespace</code></td> <td>Namespaces list. If specified, the sidecar will search for dashboards config-maps inside these namespaces. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces.</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.dashboards.script</code></td> <td>Absolute path to shell script to execute after a configmap got reloaded.</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.dashboards.reloadURL</code></td> <td>Full url of dashboards configuration reload API endpoint, to invoke after a config-map change</td> <td><code>"http://localhost:3000/api/admin/provisioning/dashboards/reload"</code></td> </tr> <tr> <td><code>sidecar.dashboards.skipReload</code></td> <td>Enabling this omits defining the REQ_URL and REQ_METHOD environment variables</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.dashboards.resource</code></td> <td>Should the sidecar looks into secrets, configmaps or both.</td> <td><code>both</code></td> </tr> <tr> <td><code>sidecar.dashboards.extraMounts</code></td> <td>Additional dashboard sidecar volume mounts.</td> <td><code>[]</code></td> </tr> <tr> <td><code>sidecar.datasources.enabled</code></td> <td>Enables the cluster wide search for datasources and adds/updates/deletes them in grafana</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.datasources.label</code></td> <td>Label that config maps with datasources should have to be added</td> <td><code>grafana_datasource</code></td> </tr> <tr> <td><code>sidecar.datasources.labelValue</code></td> <td>Label value that config maps with datasources should have to be added</td> <td><code>""</code></td> </tr> <tr> <td><code>sidecar.datasources.searchNamespace</code></td> <td>Namespaces list. If specified, the sidecar will search for datasources config-maps inside these namespaces. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces.</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.datasources.watchMethod</code></td> <td>Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</td> <td><code>WATCH</code></td> </tr> <tr> <td><code>sidecar.datasources.resource</code></td> <td>Should the sidecar looks into secrets, configmaps or both.</td> <td><code>both</code></td> </tr> <tr> <td><code>sidecar.datasources.reloadURL</code></td> <td>Full url of datasource configuration reload API endpoint, to invoke after a config-map change</td> <td><code>"http://localhost:3000/api/admin/provisioning/datasources/reload"</code></td> </tr> <tr> <td><code>sidecar.datasources.skipReload</code></td> <td>Enabling this omits defining the REQ_URL and REQ_METHOD environment variables</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.datasources.initDatasources</code></td> <td>Set to true to deploy the datasource sidecar as an initContainer in addition to a container. This is needed if skipReload is true, to load any datasources defined at startup time.</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.notifiers.enabled</code></td> <td>Enables the cluster wide search for notifiers and adds/updates/deletes them in grafana</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.notifiers.label</code></td> <td>Label that config maps with notifiers should have to be added</td> <td><code>grafana_notifier</code></td> </tr> <tr> <td><code>sidecar.notifiers.labelValue</code></td> <td>Label value that config maps with notifiers should have to be added</td> <td><code>""</code></td> </tr> <tr> <td><code>sidecar.notifiers.searchNamespace</code></td> <td>Namespaces list. If specified, the sidecar will search for notifiers config-maps (or secrets) inside these namespaces. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces.</td> <td><code>nil</code></td> </tr> <tr> <td><code>sidecar.notifiers.watchMethod</code></td> <td>Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</td> <td><code>WATCH</code></td> </tr> <tr> <td><code>sidecar.notifiers.resource</code></td> <td>Should the sidecar looks into secrets, configmaps or both.</td> <td><code>both</code></td> </tr> <tr> <td><code>sidecar.notifiers.reloadURL</code></td> <td>Full url of notifier configuration reload API endpoint, to invoke after a config-map change</td> <td><code>"http://localhost:3000/api/admin/provisioning/notifications/reload"</code></td> </tr> <tr> <td><code>sidecar.notifiers.skipReload</code></td> <td>Enabling this omits defining the REQ_URL and REQ_METHOD environment variables</td> <td><code>false</code></td> </tr> <tr> <td><code>sidecar.notifiers.initNotifiers</code></td> <td>Set to true to deploy the notifier sidecar as an initContainer in addition to a container. This is needed if skipReload is true, to load any notifiers defined at startup time.</td> <td><code>false</code></td> </tr> <tr> <td><code>smtp.existingSecret</code></td> <td>The name of an existing secret containing the SMTP credentials.</td> <td><code>""</code></td> </tr> <tr> <td><code>smtp.userKey</code></td> <td>The key in the existing SMTP secret containing the username.</td> <td><code>"user"</code></td> </tr> <tr> <td><code>smtp.passwordKey</code></td> <td>The key in the existing SMTP secret containing the password.</td> <td><code>"password"</code></td> </tr> <tr> <td><code>admin.existingSecret</code></td> <td>The name of an existing secret containing the admin credentials (can be templated).</td> <td><code>""</code></td> </tr> <tr> <td><code>admin.userKey</code></td> <td>The key in the existing admin secret containing the username.</td> <td><code>"admin-user"</code></td> </tr> <tr> <td><code>admin.passwordKey</code></td> <td>The key in the existing admin secret containing the password.</td> <td><code>"admin-password"</code></td> </tr> <tr> <td><code>serviceAccount.autoMount</code></td> <td>Automount the service account token in the pod</td> <td><code>true</code></td> </tr> <tr> <td><code>serviceAccount.annotations</code></td> <td>ServiceAccount annotations</td> <td></td> </tr> <tr> <td><code>serviceAccount.create</code></td> <td>Create service account</td> <td><code>true</code></td> </tr> <tr> <td><code>serviceAccount.labels</code></td> <td>ServiceAccount labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>serviceAccount.name</code></td> <td>Service account name to use, when empty will be set to created account if <code>serviceAccount.create</code> is set else to <code>default</code></td> <td>``</td> </tr> <tr> <td><code>serviceAccount.nameTest</code></td> <td>Service account name to use for test, when empty will be set to created account if <code>serviceAccount.create</code> is set else to <code>default</code></td> <td><code>nil</code></td> </tr> <tr> <td><code>rbac.create</code></td> <td>Create and use RBAC resources</td> <td><code>true</code></td> </tr> <tr> <td><code>rbac.namespaced</code></td> <td>Creates Role and Rolebinding instead of the default ClusterRole and ClusteRoleBindings for the grafana instance</td> <td><code>false</code></td> </tr> <tr> <td><code>rbac.useExistingRole</code></td> <td>Set to a rolename to use existing role - skipping role creating - but still doing serviceaccount and rolebinding to the rolename set here.</td> <td><code>nil</code></td> </tr> <tr> <td><code>rbac.pspEnabled</code></td> <td>Create PodSecurityPolicy (with <code>rbac.create</code>, grant roles permissions as well)</td> <td><code>false</code></td> </tr> <tr> <td><code>rbac.pspUseAppArmor</code></td> <td>Enforce AppArmor in created PodSecurityPolicy (requires <code>rbac.pspEnabled</code>)</td> <td><code>false</code></td> </tr> <tr> <td><code>rbac.extraRoleRules</code></td> <td>Additional rules to add to the Role</td> <td>[]</td> </tr> <tr> <td><code>rbac.extraClusterRoleRules</code></td> <td>Additional rules to add to the ClusterRole</td> <td>[]</td> </tr> <tr> <td><code>command</code></td> <td>Define command to be executed by grafana container at startup</td> <td><code>nil</code></td> </tr> <tr> <td><code>args</code></td> <td>Define additional args if command is used</td> <td><code>nil</code></td> </tr> <tr> <td><code>testFramework.enabled</code></td> <td>Whether to create test-related resources</td> <td><code>true</code></td> </tr> <tr> <td><code>testFramework.image</code></td> <td><code>test-framework</code> image repository.</td> <td><code>bats/bats</code></td> </tr> <tr> <td><code>testFramework.tag</code></td> <td><code>test-framework</code> image tag.</td> <td><code>v1.4.1</code></td> </tr> <tr> <td><code>testFramework.imagePullPolicy</code></td> <td><code>test-framework</code> image pull policy.</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>testFramework.securityContext</code></td> <td><code>test-framework</code> securityContext</td> <td><code>{}</code></td> </tr> <tr> <td><code>downloadDashboards.env</code></td> <td>Environment variables to be passed to the <code>download-dashboards</code> container</td> <td><code>{}</code></td> </tr> <tr> <td><code>downloadDashboards.envFromSecret</code></td> <td>Name of a Kubernetes secret (must be manually created in the same namespace) containing values to be added to the environment. Can be templated</td> <td><code>""</code></td> </tr> <tr> <td><code>downloadDashboards.resources</code></td> <td>Resources of <code>download-dashboards</code> container</td> <td><code>{}</code></td> </tr> <tr> <td><code>downloadDashboardsImage.repository</code></td> <td>Curl docker image repo</td> <td><code>curlimages/curl</code></td> </tr> <tr> <td><code>downloadDashboardsImage.tag</code></td> <td>Curl docker image tag</td> <td><code>7.73.0</code></td> </tr> <tr> <td><code>downloadDashboardsImage.sha</code></td> <td>Curl docker image sha (optional)</td> <td><code>""</code></td> </tr> <tr> <td><code>downloadDashboardsImage.pullPolicy</code></td> <td>Curl docker image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>namespaceOverride</code></td> <td>Override the deployment namespace</td> <td><code>""</code> (<code>Release.Namespace</code>)</td> </tr> <tr> <td><code>serviceMonitor.enabled</code></td> <td>Use servicemonitor from prometheus operator</td> <td><code>false</code></td> </tr> <tr> <td><code>serviceMonitor.namespace</code></td> <td>Namespace this servicemonitor is installed in</td> <td></td> </tr> <tr> <td><code>serviceMonitor.interval</code></td> <td>How frequently Prometheus should scrape</td> <td><code>1m</code></td> </tr> <tr> <td><code>serviceMonitor.path</code></td> <td>Path to scrape</td> <td><code>/metrics</code></td> </tr> <tr> <td><code>serviceMonitor.scheme</code></td> <td>Scheme to use for metrics scraping</td> <td><code>http</code></td> </tr> <tr> <td><code>serviceMonitor.tlsConfig</code></td> <td>TLS configuration block for the endpoint</td> <td><code>{}</code></td> </tr> <tr> <td><code>serviceMonitor.labels</code></td> <td>Labels for the servicemonitor passed to Prometheus Operator</td> <td><code>{}</code></td> </tr> <tr> <td><code>serviceMonitor.scrapeTimeout</code></td> <td>Timeout after which the scrape is ended</td> <td><code>30s</code></td> </tr> <tr> <td><code>serviceMonitor.relabelings</code></td> <td>MetricRelabelConfigs to apply to samples before ingestion.</td> <td><code>[]</code></td> </tr> <tr> <td><code>revisionHistoryLimit</code></td> <td>Number of old ReplicaSets to retain</td> <td><code>10</code></td> </tr> <tr> <td><code>imageRenderer.enabled</code></td> <td>Enable the image-renderer deployment &amp; service</td> <td><code>false</code></td> </tr> <tr> <td><code>imageRenderer.image.repository</code></td> <td>image-renderer Image repository</td> <td><code>grafana/grafana-image-renderer</code></td> </tr> <tr> <td><code>imageRenderer.image.tag</code></td> <td>image-renderer Image tag</td> <td><code>latest</code></td> </tr> <tr> <td><code>imageRenderer.image.sha</code></td> <td>image-renderer Image sha (optional)</td> <td><code>""</code></td> </tr> <tr> <td><code>imageRenderer.image.pullPolicy</code></td> <td>image-renderer ImagePullPolicy</td> <td><code>Always</code></td> </tr> <tr> <td><code>imageRenderer.env</code></td> <td>extra env-vars for image-renderer</td> <td><code>{}</code></td> </tr> <tr> <td><code>imageRenderer.envValueFrom</code></td> <td>Environment variables for image-renderer from alternate sources. See the API docs on <a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.17/#envvarsource-v1-core>EnvVarSource</a> for format details. Can be templated</td> <td><code>{}</code></td> </tr> <tr> <td><code>imageRenderer.serviceAccountName</code></td> <td>image-renderer deployment serviceAccountName</td> <td><code>""</code></td> </tr> <tr> <td><code>imageRenderer.securityContext</code></td> <td>image-renderer deployment securityContext</td> <td><code>{}</code></td> </tr> <tr> <td><code>imageRenderer.hostAliases</code></td> <td>image-renderer deployment Host Aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>imageRenderer.priorityClassName</code></td> <td>image-renderer deployment priority class</td> <td><code>''</code></td> </tr> <tr> <td><code>imageRenderer.service.enabled</code></td> <td>Enable the image-renderer service</td> <td><code>true</code></td> </tr> <tr> <td><code>imageRenderer.service.portName</code></td> <td>image-renderer service port name</td> <td><code>http</code></td> </tr> <tr> <td><code>imageRenderer.service.port</code></td> <td>image-renderer port used by deployment</td> <td><code>8081</code></td> </tr> <tr> <td><code>imageRenderer.service.targetPort</code></td> <td>image-renderer service port used by service</td> <td><code>8081</code></td> </tr> <tr> <td><code>imageRenderer.appProtocol</code></td> <td>Adds the appProtocol field to the service</td> <td>``</td> </tr> <tr> <td><code>imageRenderer.grafanaSubPath</code></td> <td>Grafana sub path to use for image renderer callback url</td> <td><code>''</code></td> </tr> <tr> <td><code>imageRenderer.podPortName</code></td> <td>name of the image-renderer port on the pod</td> <td><code>http</code></td> </tr> <tr> <td><code>imageRenderer.revisionHistoryLimit</code></td> <td>number of image-renderer replica sets to keep</td> <td><code>10</code></td> </tr> <tr> <td><code>imageRenderer.networkPolicy.limitIngress</code></td> <td>Enable a NetworkPolicy to limit inbound traffic from only the created grafana pods</td> <td><code>true</code></td> </tr> <tr> <td><code>imageRenderer.networkPolicy.limitEgress</code></td> <td>Enable a NetworkPolicy to limit outbound traffic to only the created grafana pods</td> <td><code>false</code></td> </tr> <tr> <td><code>imageRenderer.resources</code></td> <td>Set resource limits for image-renderer pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>imageRenderer.nodeSelector</code></td> <td>Node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>imageRenderer.tolerations</code></td> <td>Toleration labels for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>imageRenderer.affinity</code></td> <td>Affinity settings for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>networkPolicy.enabled</code></td> <td>Enable creation of NetworkPolicy resources.</td> <td><code>false</code></td> </tr> <tr> <td><code>networkPolicy.allowExternal</code></td> <td>Don't require client label for connections</td> <td><code>true</code></td> </tr> <tr> <td><code>networkPolicy.explicitNamespacesSelector</code></td> <td>A Kubernetes LabelSelector to explicitly select namespaces from which traffic could be allowed</td> <td><code>{}</code></td> </tr> <tr> <td><code>networkPolicy.ingress</code></td> <td>Enable the creation of an ingress network policy</td> <td><code>true</code></td> </tr> <tr> <td><code>networkPolicy.egress.enabled</code></td> <td>Enable the creation of an egress network policy</td> <td><code>false</code></td> </tr> <tr> <td><code>networkPolicy.egress.ports</code></td> <td>An array of ports to allow for the egress</td> <td><code>[]</code></td> </tr> <tr> <td><code>enableKubeBackwardCompatibility</code></td> <td>Enable backward compatibility of kubernetes where pod's defintion version below 1.13 doesn't have the enableServiceLinks option</td> <td><code>false</code></td> </tr> </tbody> </table> <h3 id=example-ingress-with-path>Example ingress with path<a class=headerlink href=#example-ingress-with-path title="Permanent link">&para;</a></h3> <p>With grafana 6.3 and above</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nt>grafana.ini</span><span class=p>:</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>server</span><span class=p>:</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>domain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">monitoring.example.com</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=nt>root_url</span><span class=p>:</span><span class=w> </span><span class=s>&quot;%(protocol)s://%(domain)s/grafana&quot;</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>    </span><span class=nt>serve_from_sub_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=nt>ingress</span><span class=p>:</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;monitoring.example.com&quot;</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>  </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/grafana&quot;</span>
</span></code></pre></div> <h3 id=example-of-extravolumemounts>Example of extraVolumeMounts<a class=headerlink href=#example-of-extravolumemounts title="Permanent link">&para;</a></h3> <p>Volume can be type persistentVolumeClaim or hostPath but not both at same time. If neither existingClaim or hostPath argument is given then type is emptyDir.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>extraVolumeMounts</span><span class=p>:</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">plugins</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/grafana/plugins</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=nt>subPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">configs/grafana/plugins</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>existingClaim</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">existing-grafana-claim</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dashboards</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>    </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/grafana/dashboards</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>    </span><span class=nt>hostPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/usr/shared/grafana/dashboards</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div> <h2 id=import-dashboards>Import dashboards<a class=headerlink href=#import-dashboards title="Permanent link">&para;</a></h2> <p>There are a few methods to import dashboards to Grafana. Below are some examples and explanations as to how to use each method:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>dashboards</span><span class=p>:</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>default</span><span class=p>:</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=nt>some-dashboard</span><span class=p>:</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>      </span><span class=nt>json</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>        </span><span class=no>{</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>          </span><span class=no>&quot;annotations&quot;:</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>          </span><span class=no>...</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>          </span><span class=no># Complete json file here</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>          </span><span class=no>...</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>          </span><span class=no>&quot;title&quot;: &quot;Some Dashboard&quot;,</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>          </span><span class=no>&quot;uid&quot;: &quot;abcd1234&quot;,</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>          </span><span class=no>&quot;version&quot;: 1</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>        </span><span class=no>}</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>    </span><span class=nt>custom-dashboard</span><span class=p>:</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>      </span><span class=c1># This is a path to a file inside the dashboards directory inside the chart directory</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dashboards/custom-dashboard.json</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>    </span><span class=nt>prometheus-stats</span><span class=p>:</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>      </span><span class=c1># Ref: https://grafana.com/dashboards/2</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>      </span><span class=nt>gnetId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>      </span><span class=nt>revision</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>      </span><span class=nt>datasource</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Prometheus</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>    </span><span class=nt>loki-dashboard-quick-search</span><span class=p>:</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>      </span><span class=nt>gnetId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">12019</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>      </span><span class=nt>revision</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>      </span><span class=nt>datasource</span><span class=p>:</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DS_PROMETHEUS</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Prometheus</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DS_LOKI</span>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Loki</span>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a><span class=w>    </span><span class=nt>local-dashboard</span><span class=p>:</span>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://raw.githubusercontent.com/user/repository/master/dashboards/dashboard.json</span>
</span></code></pre></div> <h2 id=base64-dashboards>BASE64 dashboards<a class=headerlink href=#base64-dashboards title="Permanent link">&para;</a></h2> <p>Dashboards could be stored on a server that does not return JSON directly and instead of it returns a Base64 encoded file (e.g. Gerrit) A new parameter has been added to the url use case so if you specify a b64content value equals to true after the url entry a Base64 decoding is applied before save the file to disk. If this entry is not set or is equals to false not decoding is applied to the file before saving it to disk.</p> <h3 id=gerrit-use-case>Gerrit use case<a class=headerlink href=#gerrit-use-case title="Permanent link">&para;</a></h3> <p>Gerrit API for download files has the following schema: <a href=https://yourgerritserver/a/{project-name}/branches/{branch-id}/files/{file-id}/content>https://yourgerritserver/a/{project-name}/branches/{branch-id}/files/{file-id}/content</a> where {project-name} and {file-id} usually has '/' in their values and so they MUST be replaced by %2F so if project-name is user/repo, branch-id is master and file-id is equals to dir1/dir2/dashboard the url value is <a href=https://yourgerritserver/a/user%2Frepo/branches/master/files/dir1%2Fdir2%2Fdashboard/content>https://yourgerritserver/a/user%2Frepo/branches/master/files/dir1%2Fdir2%2Fdashboard/content</a></p> <h2 id=sidecar-for-dashboards>Sidecar for dashboards<a class=headerlink href=#sidecar-for-dashboards title="Permanent link">&para;</a></h2> <p>If the parameter <code>sidecar.dashboards.enabled</code> is set, a sidecar container is deployed in the grafana pod. This container watches all configmaps (or secrets) in the cluster and filters out the ones with a label as defined in <code>sidecar.dashboards.label</code>. The files defined in those configmaps are written to a folder and accessed by grafana. Changes to the configmaps are monitored and the imported dashboards are deleted/updated.</p> <p>A recommendation is to use one configmap per dashboard, as a reduction of multiple dashboards inside one configmap is currently not properly mirrored in grafana.</p> <p>Example dashboard config:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sample-grafana-dashboard</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>     </span><span class=nt>grafana_dashboard</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1&quot;</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=nt>data</span><span class=p>:</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span><span class=nt>k8s-dashboard.json</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>  </span><span class="p p-Indicator">[</span><span class=nv>...</span><span class="p p-Indicator">]</span>
</span></code></pre></div> <h2 id=sidecar-for-datasources>Sidecar for datasources<a class=headerlink href=#sidecar-for-datasources title="Permanent link">&para;</a></h2> <p>If the parameter <code>sidecar.datasources.enabled</code> is set, an init container is deployed in the grafana pod. This container lists all secrets (or configmaps, though not recommended) in the cluster and filters out the ones with a label as defined in <code>sidecar.datasources.label</code>. The files defined in those secrets are written to a folder and accessed by grafana on startup. Using these yaml files, the data sources in grafana can be imported.</p> <p>Should you aim for reloading datasources in Grafana each time the config is changed, set <code>sidecar.datasources.skipReload: false</code> and adjust <code>sidecar.datasources.reloadURL</code> to <code>http://&lt;svc-name&gt;.&lt;namespace&gt;.svc.cluster.local/api/admin/provisioning/datasources/reload</code>.</p> <p>Secrets are recommended over configmaps for this usecase because datasources usually contain private data like usernames and passwords. Secrets are the more appropriate cluster resource to manage those.</p> <p>Example values to add a postgres datasource as a kubernetes secret: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">grafana-datasources</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>    </span><span class=nt>grafana_datasource</span><span class=p>:</span><span class=w> </span><span class=s>&#39;true&#39;</span><span class=w> </span><span class=c1># default value for: sidecar.datasources.label</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=nt>stringData</span><span class=p>:</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>  </span><span class=nt>pg-db.yaml</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>    </span><span class=no>apiVersion: 1</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>    </span><span class=no>datasources:</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>      </span><span class=no>- name: My pg db datasource</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>        </span><span class=no>type: postgres</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=w>        </span><span class=no>url: my-postgresql-db:5432</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=w>        </span><span class=no>user: db-readonly-user</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=w>        </span><span class=no>secureJsonData:</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=w>          </span><span class=no>password: &#39;SUperSEcretPa$$word&#39;</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=w>        </span><span class=no>jsonData:</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=w>          </span><span class=no>database: my_datase</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=w>          </span><span class=no>sslmode: &#39;disable&#39; # disable/require/verify-ca/verify-full</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a><span class=w>          </span><span class=no>maxOpenConns: 0 # Grafana v5.4+</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a><span class=w>          </span><span class=no>maxIdleConns: 2 # Grafana v5.4+</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=w>          </span><span class=no>connMaxLifetime: 14400 # Grafana v5.4+</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a><span class=w>          </span><span class=no>postgresVersion: 1000 # 903=9.3, 904=9.4, 905=9.5, 906=9.6, 1000=10</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a><span class=w>          </span><span class=no>timescaledb: false</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a><span class=w>        </span><span class=no># &lt;bool&gt; allow users to edit datasources from the UI.</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a><span class=w>        </span><span class=no>editable: false</span>
</span></code></pre></div></p> <p>Example values to add a datasource adapted from <a href=http://docs.grafana.org/administration/provisioning/#example-datasource-config-file>Grafana</a>:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>datasources</span><span class=p>:</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w> </span><span class=nt>datasources.yaml</span><span class=p>:</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>   </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>   </span><span class=nt>datasources</span><span class=p>:</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>      </span><span class=c1># &lt;string, required&gt; name of the datasource. Required</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Graphite</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>      </span><span class=c1># &lt;string, required&gt; datasource type. Required</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">graphite</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>      </span><span class=c1># &lt;string, required&gt; access mode. proxy or direct (Server or Browser in the UI). Required</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>      </span><span class=nt>access</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">proxy</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>      </span><span class=c1># &lt;int&gt; org id. will default to orgId 1 if not specified</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>      </span><span class=nt>orgId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>      </span><span class=c1># &lt;string&gt; url</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8080</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=w>      </span><span class=c1># &lt;string&gt; database password, if used</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=w>      </span><span class=nt>password</span><span class=p>:</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=w>      </span><span class=c1># &lt;string&gt; database user, if used</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>      </span><span class=nt>user</span><span class=p>:</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=w>      </span><span class=c1># &lt;string&gt; database name, if used</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>      </span><span class=nt>database</span><span class=p>:</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>      </span><span class=c1># &lt;bool&gt; enable/disable basic auth</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>      </span><span class=nt>basicAuth</span><span class=p>:</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>      </span><span class=c1># &lt;string&gt; basic auth username</span>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>      </span><span class=nt>basicAuthUser</span><span class=p>:</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>      </span><span class=c1># &lt;string&gt; basic auth password</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=w>      </span><span class=nt>basicAuthPassword</span><span class=p>:</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=w>      </span><span class=c1># &lt;bool&gt; enable/disable with credentials headers</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>      </span><span class=nt>withCredentials</span><span class=p>:</span>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=w>      </span><span class=c1># &lt;bool&gt; mark as default datasource. Max one per org</span>
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=w>      </span><span class=nt>isDefault</span><span class=p>:</span>
</span><span id=__span-8-31><a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=w>      </span><span class=c1># &lt;map&gt; fields that will be converted to json and stored in json_data</span>
</span><span id=__span-8-32><a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a><span class=w>      </span><span class=nt>jsonData</span><span class=p>:</span>
</span><span id=__span-8-33><a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a><span class=w>         </span><span class=nt>graphiteVersion</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1.1&quot;</span>
</span><span id=__span-8-34><a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=w>         </span><span class=nt>tlsAuth</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-35><a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a><span class=w>         </span><span class=nt>tlsAuthWithCACert</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-36><a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a><span class=w>      </span><span class=c1># &lt;string&gt; json object of data that will be encrypted.</span>
</span><span id=__span-8-37><a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a><span class=w>      </span><span class=nt>secureJsonData</span><span class=p>:</span>
</span><span id=__span-8-38><a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a><span class=w>        </span><span class=nt>tlsCACert</span><span class=p>:</span><span class=w> </span><span class=s>&quot;...&quot;</span>
</span><span id=__span-8-39><a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a><span class=w>        </span><span class=nt>tlsClientCert</span><span class=p>:</span><span class=w> </span><span class=s>&quot;...&quot;</span>
</span><span id=__span-8-40><a id=__codelineno-8-40 name=__codelineno-8-40 href=#__codelineno-8-40></a><span class=w>        </span><span class=nt>tlsClientKey</span><span class=p>:</span><span class=w> </span><span class=s>&quot;...&quot;</span>
</span><span id=__span-8-41><a id=__codelineno-8-41 name=__codelineno-8-41 href=#__codelineno-8-41></a><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-8-42><a id=__codelineno-8-42 name=__codelineno-8-42 href=#__codelineno-8-42></a><span class=w>      </span><span class=c1># &lt;bool&gt; allow users to edit datasources from the UI.</span>
</span><span id=__span-8-43><a id=__codelineno-8-43 name=__codelineno-8-43 href=#__codelineno-8-43></a><span class=w>      </span><span class=nt>editable</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div> <h2 id=sidecar-for-notifiers>Sidecar for notifiers<a class=headerlink href=#sidecar-for-notifiers title="Permanent link">&para;</a></h2> <p>If the parameter <code>sidecar.notifiers.enabled</code> is set, an init container is deployed in the grafana pod. This container lists all secrets (or configmaps, though not recommended) in the cluster and filters out the ones with a label as defined in <code>sidecar.notifiers.label</code>. The files defined in those secrets are written to a folder and accessed by grafana on startup. Using these yaml files, the notification channels in grafana can be imported. The secrets must be created before <code>helm install</code> so that the notifiers init container can list the secrets.</p> <p>Secrets are recommended over configmaps for this usecase because alert notification channels usually contain private data like SMTP usernames and passwords. Secrets are the more appropriate cluster resource to manage those.</p> <p>Example datasource config adapted from <a href=https://grafana.com/docs/grafana/latest/administration/provisioning/#alert-notification-channels>Grafana</a>:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>notifiers</span><span class=p>:</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">notification-channel-1</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">slack</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">notifier1</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=c1># either</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>    </span><span class=nt>org_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>    </span><span class=c1># or</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>    </span><span class=nt>org_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Main Org.</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>    </span><span class=nt>is_default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>    </span><span class=nt>send_reminder</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>    </span><span class=nt>frequency</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=w>    </span><span class=nt>disable_resolve_message</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=w>    </span><span class=c1># See `Supported Settings` section for settings supporter for each</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=w>    </span><span class=c1># alert notification type.</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>    </span><span class=nt>settings</span><span class=p>:</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>      </span><span class=nt>recipient</span><span class=p>:</span><span class=w> </span><span class=s>&#39;XXX&#39;</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>      </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=s>&#39;xoxb&#39;</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>      </span><span class=nt>uploadImage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://slack.com</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=nt>delete_notifiers</span><span class=p>:</span>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">notification-channel-1</span>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=w>    </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">notifier1</span>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=w>    </span><span class=nt>org_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">notification-channel-2</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=w>    </span><span class=c1># default org_id: 1</span>
</span></code></pre></div> <h2 id=provision-alert-rules-contact-points-notification-policies-and-notification-templates>Provision alert rules, contact points, notification policies and notification templates<a class=headerlink href=#provision-alert-rules-contact-points-notification-policies-and-notification-templates title="Permanent link">&para;</a></h2> <p>There are two methods to provision alerting configuration in Grafana. Below are some examples and explanations as to how to use each method:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>alerting</span><span class=p>:</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>team1-alert-rules.yaml</span><span class=p>:</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alerting/team1/rules.yaml</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=nt>team2-alert-rules.yaml</span><span class=p>:</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alerting/team2/rules.yaml</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=nt>team3-alert-rules.yaml</span><span class=p>:</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alerting/team3/rules.yaml</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>  </span><span class=nt>notification-policies.yaml</span><span class=p>:</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>    </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alerting/shared/notification-policies.yaml</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>  </span><span class=nt>notification-templates.yaml</span><span class=p>:</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>    </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alerting/shared/notification-templates.yaml</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>  </span><span class=nt>contactpoints.yaml</span><span class=p>:</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>    </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>    </span><span class=nt>contactPoints</span><span class=p>:</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>orgId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Slack channel</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default-receiver</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=w>            </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">slack</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=w>            </span><span class=nt>settings</span><span class=p>:</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a><span class=w>              </span><span class=c1># Webhook URL to be filled in</span>
</span><span id=__span-10-22><a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a><span class=w>              </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span><span id=__span-10-23><a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a><span class=w>              </span><span class=c1># We need to escape double curly braces for the tpl function.</span>
</span><span id=__span-10-24><a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a><span class=w>              </span><span class=nt>text</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>`{{</span><span class=nv> </span><span class=s>template</span><span class=nv> </span><span class=s>&quot;default.message&quot;</span><span class=nv> </span><span class=s>.</span><span class=nv> </span><span class=s>}}`</span><span class=nv> </span><span class=s>}}&#39;</span>
</span><span id=__span-10-25><a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a><span class=w>              </span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>`{{</span><span class=nv> </span><span class=s>template</span><span class=nv> </span><span class=s>&quot;default.title&quot;</span><span class=nv> </span><span class=s>.</span><span class=nv> </span><span class=s>}}`</span><span class=nv> </span><span class=s>}}&#39;</span>
</span></code></pre></div> <p>There are two possibilities:</p> <ul> <li>Inlining the file contents as described in the example <code>values.yaml</code> and the official <a href=https://grafana.com/docs/grafana/next/alerting/set-up/provision-alerting-resources/file-provisioning/ >Grafana documentation</a>.</li> <li>Importing a file using a relative path starting from the chart root directory.</li> </ul> <h3 id=important-notes-on-file-provisioning>Important notes on file provisioning<a class=headerlink href=#important-notes-on-file-provisioning title="Permanent link">&para;</a></h3> <ul> <li>The chart supports importing YAML and JSON files.</li> <li>The filename must be unique, otherwise one volume mount will overwrite the other.</li> <li>In case of inlining, double curly braces that arise from the Grafana configuration format and are not intended as templates for the chart must be escaped.</li> <li>The number of total files under <code>alerting:</code> is not limited. Each file will end up as a volume mount in the corresponding provisioning folder of the deployed Grafana instance.</li> <li>The file size for each import is limited by what the function <code>.Files.Get</code> can handle, which suffices for most cases.</li> </ul> <h2 id=how-to-serve-grafana-with-a-path-prefix-grafana>How to serve Grafana with a path prefix (/grafana)<a class=headerlink href=#how-to-serve-grafana-with-a-path-prefix-grafana title="Permanent link">&para;</a></h2> <p>In order to serve Grafana with a prefix (e.g., <a href=http://example.com/grafana>http://example.com/grafana</a>), add the following to your values.yaml.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>ingress</span><span class=p>:</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span><span class=w> </span><span class=s>&quot;nginx&quot;</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nt>nginx.ingress.kubernetes.io/rewrite-target</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/$1</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=nt>nginx.ingress.kubernetes.io/use-regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>  </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/grafana/?(.*)</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">k8s.example.dev</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=nt>grafana.ini</span><span class=p>:</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>  </span><span class=nt>server</span><span class=p>:</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>    </span><span class=nt>root_url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:3000/grafana</span><span class=w> </span><span class=c1># this host can be localhost</span>
</span></code></pre></div> <h2 id=how-to-securely-reference-secrets-in-grafanaini>How to securely reference secrets in grafana.ini<a class=headerlink href=#how-to-securely-reference-secrets-in-grafanaini title="Permanent link">&para;</a></h2> <p>This example uses Grafana <a href=https://grafana.com/docs/grafana/latest/administration/configuration/#file-provider>file providers</a> for secret values and the <code>extraSecretMounts</code> configuration flag (Additional grafana server secret mounts) to mount the secrets.</p> <p>In grafana.ini:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>grafana.ini</span><span class=p>:</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class="p p-Indicator">[</span><span class=nv>auth.generic_oauth</span><span class="p p-Indicator">]</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">enabled = true</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">client_id = $__file{/etc/secrets/auth_generic_oauth/client_id}</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">client_secret = $__file{/etc/secrets/auth_generic_oauth/client_secret}</span>
</span></code></pre></div> <p>Existing secret, or created along with helm:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nn>---</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">auth-generic-oauth-secret</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=nt>stringData</span><span class=p>:</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>  </span><span class=nt>client_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>  </span><span class=nt>client_secret</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</span></code></pre></div> <p>Include in the <code>extraSecretMounts</code> configuration flag:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>extraSecretMounts</span><span class=p>:</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">auth-generic-oauth-secret-mount</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">auth-generic-oauth-secret</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=nt>defaultMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0440</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/secrets/auth_generic_oauth</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div> <h3 id=extrasecretmounts-using-a-container-storage-interface-csi-provider>extraSecretMounts using a Container Storage Interface (CSI) provider<a class=headerlink href=#extrasecretmounts-using-a-container-storage-interface-csi-provider title="Permanent link">&para;</a></h3> <p>This example uses a CSI driver e.g. retrieving secrets using <a href=https://github.com/Azure/secrets-store-csi-driver-provider-azure>Azure Key Vault Provider</a></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>extraSecretMounts</span><span class=p>:</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets-store-inline</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/run/secrets</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=nt>csi</span><span class=p>:</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>      </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets-store.csi.k8s.io</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>      </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>      </span><span class=nt>volumeAttributes</span><span class=p>:</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>        </span><span class=nt>secretProviderClass</span><span class=p>:</span><span class=w> </span><span class=s>&quot;my-provider&quot;</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>      </span><span class=nt>nodePublishSecretRef</span><span class=p>:</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">akv-creds</span>
</span></code></pre></div> <h2 id=image-renderer-plug-in>Image Renderer Plug-In<a class=headerlink href=#image-renderer-plug-in title="Permanent link">&para;</a></h2> <p>This chart supports enabling <a href=https://github.com/grafana/grafana-image-renderer/blob/master/README.md#run-in-docker>remote image rendering</a></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nt>imageRenderer</span><span class=p>:</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div> <h3 id=image-renderer-networkpolicy>Image Renderer NetworkPolicy<a class=headerlink href=#image-renderer-networkpolicy title="Permanent link">&para;</a></h3> <p>By default the image-renderer pods will have a network policy which only allows ingress traffic from the created grafana instance</p> <h3 id=high-availability-for-unified-alerting>High Availability for unified alerting<a class=headerlink href=#high-availability-for-unified-alerting title="Permanent link">&para;</a></h3> <p>If you want to run Grafana in a high availability cluster you need to enable the headless service by setting <code>headlessService: true</code> in your <code>values.yaml</code> file.</p> <p>As next step you have to setup the <code>grafana.ini</code> in your <code>values.yaml</code> in a way that it will make use of the headless service to obtain all the IPs of the cluster. You should replace <code>{{ Name }}</code> with the name of your helm deployment.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nt>grafana.ini</span><span class=p>:</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">unified_alerting</span><span class="p p-Indicator">:</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>    </span><span class=nt>ha_peers</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>Name</span><span class=w> </span><span class="p p-Indicator">}}</span><span class="l l-Scalar l-Scalar-Plain">-headless:9094</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>    </span><span class=nt>ha_listen_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${POD_IP}:9094</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>    </span><span class=nt>ha_advertise_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${POD_IP}:9094</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=w>  </span><span class=nt>alerting</span><span class=p>:</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../grafana-agent/ class="md-footer__link md-footer__link--prev" aria-label="上一页: Grafana Agent chart" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> Grafana Agent chart </div> </div> </a> <a href=../loki-canary/ class="md-footer__link md-footer__link--next" aria-label="下一页: loki-canary" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> loki-canary </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>