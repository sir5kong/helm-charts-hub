<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../mimir-distributed/ rel=prev><link href=../rollout-operator/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>promtail - Helm Charts Hub</title><link rel=stylesheet href=../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-C5YHK472VS"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-C5YHK472VS",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-C5YHK472VS",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#promtail class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../.. title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Helm Charts Hub </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> promtail </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Helm Charts Hub </a> </li> <li class=md-tabs__item> <a href=../../chart-list/ class=md-tabs__link> Chart 列表 </a> </li> <li class=md-tabs__item> <a href=../../bitnami/ class=md-tabs__link> Bitnami </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Grafana </a> </li> <li class=md-tabs__item> <a href=../../ingress-nginx/ class=md-tabs__link> Ingress nginx </a> </li> <li class=md-tabs__item> <a href=../../prometheus-community/ class=md-tabs__link> Prometheus community </a> </li> <li class=md-tabs__item> <a href=../../sir5kong/ class=md-tabs__link> Sir5kong </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Helm Charts Hub </label> <div class=md-nav__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Helm Charts Hub </a> </li> <li class=md-nav__item> <a href=../../chart-list/ class=md-nav__link> Chart 列表 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../bitnami/ >Bitnami</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Bitnami data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Bitnami </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../bitnami/airflow/ class=md-nav__link> Airflow </a> </li> <li class=md-nav__item> <a href=../../bitnami/apache/ class=md-nav__link> Apache </a> </li> <li class=md-nav__item> <a href=../../bitnami/apisix/ class=md-nav__link> Apisix </a> </li> <li class=md-nav__item> <a href=../../bitnami/appsmith/ class=md-nav__link> Appsmith </a> </li> <li class=md-nav__item> <a href=../../bitnami/argo-cd/ class=md-nav__link> Argo cd </a> </li> <li class=md-nav__item> <a href=../../bitnami/argo-workflows/ class=md-nav__link> Argo workflows </a> </li> <li class=md-nav__item> <a href=../../bitnami/aspnet-core/ class=md-nav__link> Aspnet core </a> </li> <li class=md-nav__item> <a href=../../bitnami/cassandra/ class=md-nav__link> Cassandra </a> </li> <li class=md-nav__item> <a href=../../bitnami/cert-manager/ class=md-nav__link> Cert manager </a> </li> <li class=md-nav__item> <a href=../../bitnami/clickhouse/ class=md-nav__link> Clickhouse </a> </li> <li class=md-nav__item> <a href=../../bitnami/common/ class=md-nav__link> Bitnami Common Library Chart </a> </li> <li class=md-nav__item> <a href=../../bitnami/concourse/ class=md-nav__link> Concourse </a> </li> <li class=md-nav__item> <a href=../../bitnami/consul/ class=md-nav__link> Consul </a> </li> <li class=md-nav__item> <a href=../../bitnami/contour/ class=md-nav__link> Contour </a> </li> <li class=md-nav__item> <a href=../../bitnami/discourse/ class=md-nav__link> Discourse </a> </li> <li class=md-nav__item> <a href=../../bitnami/dokuwiki/ class=md-nav__link> Dokuwiki </a> </li> <li class=md-nav__item> <a href=../../bitnami/drupal/ class=md-nav__link> Drupal </a> </li> <li class=md-nav__item> <a href=../../bitnami/ejbca/ class=md-nav__link> Ejbca </a> </li> <li class=md-nav__item> <a href=../../bitnami/elasticsearch/ class=md-nav__link> Elasticsearch </a> </li> <li class=md-nav__item> <a href=../../bitnami/etcd/ class=md-nav__link> Etcd </a> </li> <li class=md-nav__item> <a href=../../bitnami/external-dns/ class=md-nav__link> External dns </a> </li> <li class=md-nav__item> <a href=../../bitnami/flink/ class=md-nav__link> Flink </a> </li> <li class=md-nav__item> <a href=../../bitnami/fluent-bit/ class=md-nav__link> Fluent bit </a> </li> <li class=md-nav__item> <a href=../../bitnami/fluentd/ class=md-nav__link> Fluentd </a> </li> <li class=md-nav__item> <a href=../../bitnami/flux/ class=md-nav__link> Flux </a> </li> <li class=md-nav__item> <a href=../../bitnami/ghost/ class=md-nav__link> Ghost </a> </li> <li class=md-nav__item> <a href=../../bitnami/gitea/ class=md-nav__link> Gitea </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-loki/ class=md-nav__link> Grafana loki </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-mimir/ class=md-nav__link> Grafana mimir </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-operator/ class=md-nav__link> Grafana operator </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana-tempo/ class=md-nav__link> Grafana tempo </a> </li> <li class=md-nav__item> <a href=../../bitnami/grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../../bitnami/haproxy/ class=md-nav__link> Haproxy </a> </li> <li class=md-nav__item> <a href=../../bitnami/harbor/ class=md-nav__link> Harbor </a> </li> <li class=md-nav__item> <a href=../../bitnami/influxdb/ class=md-nav__link> Influxdb </a> </li> <li class=md-nav__item> <a href=../../bitnami/jaeger/ class=md-nav__link> Jaeger </a> </li> <li class=md-nav__item> <a href=../../bitnami/jasperreports/ class=md-nav__link> Jasperreports </a> </li> <li class=md-nav__item> <a href=../../bitnami/jenkins/ class=md-nav__link> Jenkins </a> </li> <li class=md-nav__item> <a href=../../bitnami/joomla/ class=md-nav__link> Joomla </a> </li> <li class=md-nav__item> <a href=../../bitnami/jupyterhub/ class=md-nav__link> Jupyterhub </a> </li> <li class=md-nav__item> <a href=../../bitnami/kafka/ class=md-nav__link> Kafka </a> </li> <li class=md-nav__item> <a href=../../bitnami/keycloak/ class=md-nav__link> Keycloak </a> </li> <li class=md-nav__item> <a href=../../bitnami/kiam/ class=md-nav__link> Kiam </a> </li> <li class=md-nav__item> <a href=../../bitnami/kibana/ class=md-nav__link> Kibana </a> </li> <li class=md-nav__item> <a href=../../bitnami/kong/ class=md-nav__link> Kong </a> </li> <li class=md-nav__item> <a href=../../bitnami/kube-prometheus/ class=md-nav__link> Kube prometheus </a> </li> <li class=md-nav__item> <a href=../../bitnami/kube-state-metrics/ class=md-nav__link> Kube state metrics </a> </li> <li class=md-nav__item> <a href=../../bitnami/kubeapps/ class=md-nav__link> Kubeapps </a> </li> <li class=md-nav__item> <a href=../../bitnami/kubernetes-event-exporter/ class=md-nav__link> Kubernetes event exporter </a> </li> <li class=md-nav__item> <a href=../../bitnami/logstash/ class=md-nav__link> Logstash </a> </li> <li class=md-nav__item> <a href=../../bitnami/magento/ class=md-nav__link> Magento </a> </li> <li class=md-nav__item> <a href=../../bitnami/mariadb-galera/ class=md-nav__link> Mariadb galera </a> </li> <li class=md-nav__item> <a href=../../bitnami/mariadb/ class=md-nav__link> Mariadb </a> </li> <li class=md-nav__item> <a href=../../bitnami/mastodon/ class=md-nav__link> Mastodon </a> </li> <li class=md-nav__item> <a href=../../bitnami/matomo/ class=md-nav__link> Matomo </a> </li> <li class=md-nav__item> <a href=../../bitnami/mediawiki/ class=md-nav__link> Mediawiki </a> </li> <li class=md-nav__item> <a href=../../bitnami/memcached/ class=md-nav__link> Memcached </a> </li> <li class=md-nav__item> <a href=../../bitnami/metallb/ class=md-nav__link> Metallb </a> </li> <li class=md-nav__item> <a href=../../bitnami/metrics-server/ class=md-nav__link> Metrics server </a> </li> <li class=md-nav__item> <a href=../../bitnami/minio/ class=md-nav__link> Minio </a> </li> <li class=md-nav__item> <a href=../../bitnami/mongodb-sharded/ class=md-nav__link> Mongodb sharded </a> </li> <li class=md-nav__item> <a href=../../bitnami/mongodb/ class=md-nav__link> Mongodb </a> </li> <li class=md-nav__item> <a href=../../bitnami/moodle/ class=md-nav__link> Moodle </a> </li> <li class=md-nav__item> <a href=../../bitnami/multus-cni/ class=md-nav__link> Multus cni </a> </li> <li class=md-nav__item> <a href=../../bitnami/mxnet/ class=md-nav__link> Mxnet </a> </li> <li class=md-nav__item> <a href=../../bitnami/mysql/ class=md-nav__link> Mysql </a> </li> <li class=md-nav__item> <a href=../../bitnami/nats/ class=md-nav__link> Nats </a> </li> <li class=md-nav__item> <a href=../../bitnami/nginx-ingress-controller/ class=md-nav__link> Nginx ingress controller </a> </li> <li class=md-nav__item> <a href=../../bitnami/nginx/ class=md-nav__link> Nginx </a> </li> <li class=md-nav__item> <a href=../../bitnami/node-exporter/ class=md-nav__link> Node exporter </a> </li> <li class=md-nav__item> <a href=../../bitnami/oauth2-proxy/ class=md-nav__link> Oauth2 proxy </a> </li> <li class=md-nav__item> <a href=../../bitnami/odoo/ class=md-nav__link> Odoo </a> </li> <li class=md-nav__item> <a href=../../bitnami/opencart/ class=md-nav__link> Opencart </a> </li> <li class=md-nav__item> <a href=../../bitnami/osclass/ class=md-nav__link> Osclass </a> </li> <li class=md-nav__item> <a href=../../bitnami/parse/ class=md-nav__link> Parse </a> </li> <li class=md-nav__item> <a href=../../bitnami/phpbb/ class=md-nav__link> Phpbb </a> </li> <li class=md-nav__item> <a href=../../bitnami/phpmyadmin/ class=md-nav__link> Phpmyadmin </a> </li> <li class=md-nav__item> <a href=../../bitnami/pinniped/ class=md-nav__link> Pinniped </a> </li> <li class=md-nav__item> <a href=../../bitnami/postgresql-ha/ class=md-nav__link> Postgresql ha </a> </li> <li class=md-nav__item> <a href=../../bitnami/postgresql/ class=md-nav__link> Postgresql </a> </li> <li class=md-nav__item> <a href=../../bitnami/prestashop/ class=md-nav__link> Prestashop </a> </li> <li class=md-nav__item> <a href=../../bitnami/prometheus/ class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../../bitnami/pytorch/ class=md-nav__link> Pytorch </a> </li> <li class=md-nav__item> <a href=../../bitnami/rabbitmq-cluster-operator/ class=md-nav__link> Rabbitmq cluster operator </a> </li> <li class=md-nav__item> <a href=../../bitnami/rabbitmq/ class=md-nav__link> Rabbitmq </a> </li> <li class=md-nav__item> <a href=../../bitnami/redis-cluster/ class=md-nav__link> Redis cluster </a> </li> <li class=md-nav__item> <a href=../../bitnami/redis/ class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=../../bitnami/redmine/ class=md-nav__link> Redmine </a> </li> <li class=md-nav__item> <a href=../../bitnami/schema-registry/ class=md-nav__link> Schema registry </a> </li> <li class=md-nav__item> <a href=../../bitnami/sealed-secrets/ class=md-nav__link> Sealed secrets </a> </li> <li class=md-nav__item> <a href=../../bitnami/solr/ class=md-nav__link> Solr </a> </li> <li class=md-nav__item> <a href=../../bitnami/sonarqube/ class=md-nav__link> Sonarqube </a> </li> <li class=md-nav__item> <a href=../../bitnami/spark/ class=md-nav__link> Spark </a> </li> <li class=md-nav__item> <a href=../../bitnami/spring-cloud-dataflow/ class=md-nav__link> Spring cloud dataflow </a> </li> <li class=md-nav__item> <a href=../../bitnami/suitecrm/ class=md-nav__link> Suitecrm </a> </li> <li class=md-nav__item> <a href=../../bitnami/supabase/ class=md-nav__link> Supabase </a> </li> <li class=md-nav__item> <a href=../../bitnami/tensorflow-resnet/ class=md-nav__link> Tensorflow resnet </a> </li> <li class=md-nav__item> <a href=../../bitnami/thanos/ class=md-nav__link> Thanos </a> </li> <li class=md-nav__item> <a href=../../bitnami/tomcat/ class=md-nav__link> Tomcat </a> </li> <li class=md-nav__item> <a href=../../bitnami/vault/ class=md-nav__link> Vault </a> </li> <li class=md-nav__item> <a href=../../bitnami/wavefront-hpa-adapter/ class=md-nav__link> Wavefront hpa adapter </a> </li> <li class=md-nav__item> <a href=../../bitnami/wavefront-prometheus-storage-adapter/ class=md-nav__link> Wavefront prometheus storage adapter </a> </li> <li class=md-nav__item> <a href=../../bitnami/whereabouts/ class=md-nav__link> Whereabouts </a> </li> <li class=md-nav__item> <a href=../../bitnami/wildfly/ class=md-nav__link> Wildfly </a> </li> <li class=md-nav__item> <a href=../../bitnami/wordpress/ class=md-nav__link> Wordpress </a> </li> <li class=md-nav__item> <a href=../../bitnami/zookeeper/ class=md-nav__link> Zookeeper </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Grafana</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Grafana data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Grafana </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../agent-operator/ class=md-nav__link> grafana-agent-operator </a> </li> <li class=md-nav__item> <a href=../enterprise-logs-simple/ class=md-nav__link> enterprise-logs-simple </a> </li> <li class=md-nav__item> <a href=../enterprise-logs/ class=md-nav__link> Grafana Enterprise Logs Helm Chart </a> </li> <li class=md-nav__item> <a href=../enterprise-metrics/ class=md-nav__link> Grafana Enterprise Metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../fluent-bit/ class=md-nav__link> Fluent Bit Loki chart </a> </li> <li class=md-nav__item> <a href=../grafana-agent/ class=md-nav__link> Grafana Agent chart </a> </li> <li class=md-nav__item> <a href=../grafana/ class=md-nav__link> Grafana Helm Chart </a> </li> <li class=md-nav__item> <a href=../loki-canary/ class=md-nav__link> loki-canary </a> </li> <li class=md-nav__item> <a href=../loki-distributed/ class=md-nav__link> loki-distributed </a> </li> <li class=md-nav__item> <a href=../loki-stack/ class=md-nav__link> Loki-Stack Helm Chart </a> </li> <li class=md-nav__item> <a href=../mimir-distributed/ class=md-nav__link> Notice of relocation </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> promtail <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> promtail </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#source-code class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=#chart-repo class=md-nav__link> Chart Repo </a> </li> <li class=md-nav__item> <a href=#upgrading class=md-nav__link> Upgrading </a> <nav class=md-nav aria-label=Upgrading> <ul class=md-nav__list> <li class=md-nav__item> <a href=#from-chart-versions-300 class=md-nav__link> From Chart Versions &gt;= 3.0.0 </a> </li> <li class=md-nav__item> <a href=#from-chart-versions-300_1 class=md-nav__link> From Chart Versions &lt; 3.0.0 </a> <nav class=md-nav aria-label="From Chart Versions < 3.0.0"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notable-changes class=md-nav__link> Notable Changes </a> <nav class=md-nav aria-label="Notable Changes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#option-1 class=md-nav__link> Option 1 </a> </li> <li class=md-nav__item> <a href=#option-2 class=md-nav__link> Option 2 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#syslog-support class=md-nav__link> Syslog Support </a> </li> <li class=md-nav__item> <a href=#journald-support class=md-nav__link> Journald Support </a> </li> <li class=md-nav__item> <a href=#push-api-support class=md-nav__link> Push API Support </a> </li> <li class=md-nav__item> <a href=#customize-client-config-options class=md-nav__link> Customize client config options </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../rollout-operator/ class=md-nav__link> Grafana rollout-operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../synthetic-monitoring-agent/ class=md-nav__link> synthetic-monitoring-agent </a> </li> <li class=md-nav__item> <a href=../tempo-distributed/ class=md-nav__link> tempo-distributed </a> </li> <li class=md-nav__item> <a href=../tempo-vulture/ class=md-nav__link> tempo-vulture </a> </li> <li class=md-nav__item> <a href=../tempo/ class=md-nav__link> tempo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5 type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../ingress-nginx/ >Ingress nginx</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Ingress nginx" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Ingress nginx </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ingress-nginx/ingress-nginx/ class=md-nav__link> ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_6 type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../prometheus-community/ >Prometheus community</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Prometheus community" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Prometheus community </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager-snmp-notifier/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager/ class=md-nav__link> Alertmanager </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/jiralert/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-prometheus-stack/ class=md-nav__link> kube-prometheus-stack </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-state-metrics/ class=md-nav__link> kube-state-metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prom-label-proxy/ class=md-nav__link> prom-label-proxy </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-adapter/ class=md-nav__link> Prometheus Adapter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-blackbox-exporter/ class=md-nav__link> Prometheus Blackbox Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-cloudwatch-exporter/ class=md-nav__link> Prometheus Cloudwatch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-conntrack-stats-exporter/ class=md-nav__link> Conntrack Stats Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-consul-exporter/ class=md-nav__link> Prometheus Consul Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-couchdb-exporter/ class=md-nav__link> prometheus-couchdb-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-druid-exporter/ class=md-nav__link> Prometheus Druid Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-elasticsearch-exporter/ class=md-nav__link> Elasticsearch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-fastly-exporter/ class=md-nav__link> Prometheus Fastly Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-json-exporter/ class=md-nav__link> prometheus-json-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-kafka-exporter/ class=md-nav__link> prometheus-kafka-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mongodb-exporter/ class=md-nav__link> Prometheus MongoDB Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mysql-exporter/ class=md-nav__link> Prometheus Mysql Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nats-exporter/ class=md-nav__link> Prometheus NATS Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nginx-exporter/ class=md-nav__link> prometheus-nginx-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-node-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-admission-webhook/ class=md-nav__link> Prometheus Operator Admission Webhook </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-crds/ class=md-nav__link> Prometheus Operator CRDs </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pgbouncer-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingdom-exporter/ class=md-nav__link> Prometheus Pingdom Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingmesh-exporter/ class=md-nav__link> Prometheus Pingmesh Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-postgres-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pushgateway/ class=md-nav__link> Prometheus Pushgateway </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-rabbitmq-exporter/ class=md-nav__link> prometheus-rabbitmq-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-redis-exporter/ class=md-nav__link> prometheus-redis-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-smartctl-exporter/ class=md-nav__link> Prometheus smartctl Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-snmp-exporter/ class=md-nav__link> Prometheus SNMP Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-stackdriver-exporter/ class=md-nav__link> Stackdriver Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-statsd-exporter/ class=md-nav__link> prometheus-statsd-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-to-sd/ class=md-nav__link> prometheus-to-sd </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-windows-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus/ class=md-nav__link> Prometheus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../sir5kong/ >Sir5kong</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Sir5kong data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Sir5kong </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sir5kong/commonapp/ class=md-nav__link> commonapp helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/kafka/ class=md-nav__link> Kafka helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/nginx/ class=md-nav__link> nginx helm chart </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#source-code class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=#chart-repo class=md-nav__link> Chart Repo </a> </li> <li class=md-nav__item> <a href=#upgrading class=md-nav__link> Upgrading </a> <nav class=md-nav aria-label=Upgrading> <ul class=md-nav__list> <li class=md-nav__item> <a href=#from-chart-versions-300 class=md-nav__link> From Chart Versions &gt;= 3.0.0 </a> </li> <li class=md-nav__item> <a href=#from-chart-versions-300_1 class=md-nav__link> From Chart Versions &lt; 3.0.0 </a> <nav class=md-nav aria-label="From Chart Versions < 3.0.0"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notable-changes class=md-nav__link> Notable Changes </a> <nav class=md-nav aria-label="Notable Changes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#option-1 class=md-nav__link> Option 1 </a> </li> <li class=md-nav__item> <a href=#option-2 class=md-nav__link> Option 2 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#syslog-support class=md-nav__link> Syslog Support </a> </li> <li class=md-nav__item> <a href=#journald-support class=md-nav__link> Journald Support </a> </li> <li class=md-nav__item> <a href=#push-api-support class=md-nav__link> Push API Support </a> </li> <li class=md-nav__item> <a href=#customize-client-config-options class=md-nav__link> Customize client config options </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=promtail>promtail<a class=headerlink href=#promtail title="Permanent link">&para;</a></h1> <p><img alt="Version: 6.11.5" src="https://img.shields.io/badge/Version-6.11.5-informational?style=flat-square"> <img alt="Type: application" src="https://img.shields.io/badge/Type-application-informational?style=flat-square"> <img alt="AppVersion: 2.8.2" src="https://img.shields.io/badge/AppVersion-2.8.2-informational?style=flat-square"></p> <p>Promtail is an agent which ships the contents of local logs to a Loki instance</p> <h2 id=source-code>Source Code<a class=headerlink href=#source-code title="Permanent link">&para;</a></h2> <ul> <li><a href=https://github.com/grafana/loki>https://github.com/grafana/loki</a></li> <li><a href=https://grafana.com/oss/loki/ >https://grafana.com/oss/loki/</a></li> <li><a href=https://grafana.com/docs/loki/latest/ >https://grafana.com/docs/loki/latest/</a></li> </ul> <h2 id=chart-repo>Chart Repo<a class=headerlink href=#chart-repo title="Permanent link">&para;</a></h2> <p>Add the following repo to use the chart:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=go>helm repo add grafana https://helm-charts.itboon.top/grafana</span>
</span></code></pre></div> <h2 id=upgrading>Upgrading<a class=headerlink href=#upgrading title="Permanent link">&para;</a></h2> <p>A major chart version change indicates that there is an incompatible breaking change needing manual actions.</p> <h3 id=from-chart-versions-300>From Chart Versions &gt;= 3.0.0<a class=headerlink href=#from-chart-versions-300 title="Permanent link">&para;</a></h3> <ul> <li>Customizeable initContainer added.</li> </ul> <h3 id=from-chart-versions-300_1>From Chart Versions &lt; 3.0.0<a class=headerlink href=#from-chart-versions-300_1 title="Permanent link">&para;</a></h3> <h4 id=notable-changes>Notable Changes<a class=headerlink href=#notable-changes title="Permanent link">&para;</a></h4> <ul> <li>Helm 3 is required</li> <li>Labels have been updated to follow the official Kubernetes <a href=https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/ >label recommendations</a></li> <li>The default scrape configs have been updated to take new and old labels into consideration</li> <li>The config file must be specified as string which can be templated. See below for details</li> <li>The config file is now stored in a Secret and no longer in a ConfigMap because it may contain sensitive data, such as basic auth credentials</li> </ul> <p>Due to the label changes, an existing installation cannot be upgraded without manual interaction. There are basically two options:</p> <h5 id=option-1>Option 1<a class=headerlink href=#option-1 title="Permanent link">&para;</a></h5> <p>Uninstall the old release and re-install the new one. There will be no data loss. Promtail will cleanly shut down and write the <code>positions.yaml</code>. The new release which will pick up again from the existing <code>positions.yaml</code>.</p> <h5 id=option-2>Option 2<a class=headerlink href=#option-2 title="Permanent link">&para;</a></h5> <ul> <li>Add new selector labels to the existing pods:</li> </ul> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>kubectl label pods -n &lt;namespace&gt; -l app=promtail,release=&lt;release&gt; app.kubernetes.io/name=promtail app.kubernetes.io/instance=&lt;release&gt;
</span></code></pre></div> <ul> <li>Perform a non-cascading deletion of the DaemonSet which will keep the pods running:</li> </ul> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>kubectl delete daemonset -n &lt;namespace&gt; -l app=promtail,release=&lt;release&gt; --cascade=false
</span></code></pre></div> <ul> <li>Perform a regular Helm upgrade on the existing release. The new DaemonSet will pick up the existing pods and perform a rolling upgrade.</li> </ul> <h2 id=values>Values<a class=headerlink href=#values title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Key</th> <th>Type</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>affinity</td> <td>object</td> <td><code>{}</code></td> <td>Affinity configuration for pods</td> </tr> <tr> <td>annotations</td> <td>object</td> <td><code>{}</code></td> <td>Annotations for the DaemonSet</td> </tr> <tr> <td>config</td> <td>object</td> <td>See <code>values.yaml</code></td> <td>Section for crafting Promtails config file. The only directly relevant value is <code>config.file</code> which is a templated string that references the other values and snippets below this key.</td> </tr> <tr> <td>config.clients</td> <td>list</td> <td>See <code>values.yaml</code></td> <td>The config of clients of the Promtail server Must be reference in <code>config.file</code> to configure <code>clients</code></td> </tr> <tr> <td>config.enableTracing</td> <td>bool</td> <td><code>false</code></td> <td>The config to enable tracing</td> </tr> <tr> <td>config.file</td> <td>string</td> <td>See <code>values.yaml</code></td> <td>Config file contents for Promtail. Must be configured as string. It is templated so it can be assembled from reusable snippets in order to avoid redundancy.</td> </tr> <tr> <td>config.logLevel</td> <td>string</td> <td><code>"info"</code></td> <td>The log level of the Promtail server Must be reference in <code>config.file</code> to configure <code>server.log_level</code> See default config in <code>values.yaml</code></td> </tr> <tr> <td>config.positions</td> <td>object</td> <td><code>{"filename":"/run/promtail/positions.yaml"}</code></td> <td>Configures where Promtail will save it's positions file, to resume reading after restarts. Must be referenced in <code>config.file</code> to configure <code>positions</code></td> </tr> <tr> <td>config.serverPort</td> <td>int</td> <td><code>3101</code></td> <td>The port of the Promtail server Must be reference in <code>config.file</code> to configure <code>server.http_listen_port</code> See default config in <code>values.yaml</code></td> </tr> <tr> <td>config.snippets</td> <td>object</td> <td>See <code>values.yaml</code></td> <td>A section of reusable snippets that can be reference in <code>config.file</code>. Custom snippets may be added in order to reduce redundancy. This is especially helpful when multiple <code>kubernetes_sd_configs</code> are use which usually have large parts in common.</td> </tr> <tr> <td>config.snippets.extraLimitsConfig</td> <td>string</td> <td>empty</td> <td>You can put here any keys that will be directly added to the config file's 'limits_config' block.</td> </tr> <tr> <td>config.snippets.extraRelabelConfigs</td> <td>list</td> <td><code>[]</code></td> <td>You can put here any additional relabel_configs to "kubernetes-pods" job</td> </tr> <tr> <td>config.snippets.extraScrapeConfigs</td> <td>string</td> <td>empty</td> <td>You can put here any additional scrape configs you want to add to the config file.</td> </tr> <tr> <td>config.snippets.extraServerConfigs</td> <td>string</td> <td>empty</td> <td>You can put here any keys that will be directly added to the config file's 'server' block.</td> </tr> <tr> <td>configmap.enabled</td> <td>bool</td> <td><code>false</code></td> <td>If enabled, promtail config will be created as a ConfigMap instead of a secret</td> </tr> <tr> <td>containerSecurityContext</td> <td>object</td> <td><code>{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true}</code></td> <td>The security context for containers</td> </tr> <tr> <td>daemonset.enabled</td> <td>bool</td> <td><code>true</code></td> <td>Deploys Promtail as a DaemonSet</td> </tr> <tr> <td>defaultVolumeMounts</td> <td>list</td> <td>See <code>values.yaml</code></td> <td>Default volume mounts. Corresponds to <code>volumes</code>.</td> </tr> <tr> <td>defaultVolumes</td> <td>list</td> <td>See <code>values.yaml</code></td> <td>Default volumes that are mounted into pods. In most cases, these should not be changed. Use <code>extraVolumes</code>/<code>extraVolumeMounts</code> for additional custom volumes.</td> </tr> <tr> <td>deployment.autoscaling.enabled</td> <td>bool</td> <td><code>false</code></td> <td>Creates a HorizontalPodAutoscaler for the deployment</td> </tr> <tr> <td>deployment.autoscaling.maxReplicas</td> <td>int</td> <td><code>10</code></td> <td></td> </tr> <tr> <td>deployment.autoscaling.minReplicas</td> <td>int</td> <td><code>1</code></td> <td></td> </tr> <tr> <td>deployment.autoscaling.strategy</td> <td>object</td> <td><code>{"type":"RollingUpdate"}</code></td> <td>Set deployment object update strategy</td> </tr> <tr> <td>deployment.autoscaling.targetCPUUtilizationPercentage</td> <td>int</td> <td><code>80</code></td> <td></td> </tr> <tr> <td>deployment.autoscaling.targetMemoryUtilizationPercentage</td> <td>string</td> <td><code>nil</code></td> <td></td> </tr> <tr> <td>deployment.enabled</td> <td>bool</td> <td><code>false</code></td> <td>Deploys Promtail as a Deployment</td> </tr> <tr> <td>deployment.replicaCount</td> <td>int</td> <td><code>1</code></td> <td></td> </tr> <tr> <td>enableServiceLinks</td> <td>bool</td> <td><code>true</code></td> <td>Configure enableServiceLinks in pod</td> </tr> <tr> <td>extraArgs</td> <td>list</td> <td><code>[]</code></td> <td></td> </tr> <tr> <td>extraContainers</td> <td>object</td> <td><code>{}</code></td> <td></td> </tr> <tr> <td>extraEnv</td> <td>list</td> <td><code>[]</code></td> <td>Extra environment variables. Set up tracing enviroment variables here if .Values.config.enableTracing is true. Tracing currently only support configure via environment variables. See: <a href=https://grafana.com/docs/loki/latest/clients/promtail/configuration/#tracing_config>https://grafana.com/docs/loki/latest/clients/promtail/configuration/#tracing_config</a> <a href=https://www.jaegertracing.io/docs/1.16/client-features/ >https://www.jaegertracing.io/docs/1.16/client-features/</a></td> </tr> <tr> <td>extraEnvFrom</td> <td>list</td> <td><code>[]</code></td> <td>Extra environment variables from secrets or configmaps</td> </tr> <tr> <td>extraObjects</td> <td>list</td> <td><code>[]</code></td> <td>Extra K8s manifests to deploy</td> </tr> <tr> <td>extraPorts</td> <td>object</td> <td><code>{}</code></td> <td>Configure additional ports and services. For each configured port, a corresponding service is created. See values.yaml for details</td> </tr> <tr> <td>extraVolumeMounts</td> <td>list</td> <td><code>[]</code></td> <td></td> </tr> <tr> <td>extraVolumes</td> <td>list</td> <td><code>[]</code></td> <td></td> </tr> <tr> <td>fullnameOverride</td> <td>string</td> <td><code>nil</code></td> <td>Overrides the chart's computed fullname</td> </tr> <tr> <td>httpPathPrefix</td> <td>string</td> <td><code>""</code></td> <td>Base path to server all API routes fro</td> </tr> <tr> <td>image.pullPolicy</td> <td>string</td> <td><code>"IfNotPresent"</code></td> <td>Docker image pull policy</td> </tr> <tr> <td>image.registry</td> <td>string</td> <td><code>"docker.io"</code></td> <td>The Docker registry</td> </tr> <tr> <td>image.repository</td> <td>string</td> <td><code>"grafana/promtail"</code></td> <td>Docker image repository</td> </tr> <tr> <td>image.tag</td> <td>string</td> <td><code>nil</code></td> <td>Overrides the image tag whose default is the chart's appVersion</td> </tr> <tr> <td>imagePullSecrets</td> <td>list</td> <td><code>[]</code></td> <td>Image pull secrets for Docker images</td> </tr> <tr> <td>initContainer</td> <td>list</td> <td><code>[]</code></td> <td></td> </tr> <tr> <td>livenessProbe</td> <td>object</td> <td><code>{}</code></td> <td>Liveness probe</td> </tr> <tr> <td>nameOverride</td> <td>string</td> <td><code>nil</code></td> <td>Overrides the chart's name</td> </tr> <tr> <td>namespace</td> <td>string</td> <td><code>nil</code></td> <td>The name of the Namespace to deploy If not set, <code>.Release.Namespace</code> is used</td> </tr> <tr> <td>networkPolicy.enabled</td> <td>bool</td> <td><code>false</code></td> <td>Specifies whether Network Policies should be created</td> </tr> <tr> <td>networkPolicy.k8sApi.cidrs</td> <td>list</td> <td><code>[]</code></td> <td>Specifies specific network CIDRs you want to limit access to</td> </tr> <tr> <td>networkPolicy.k8sApi.port</td> <td>int</td> <td><code>8443</code></td> <td>Specify the k8s API endpoint port</td> </tr> <tr> <td>networkPolicy.metrics.cidrs</td> <td>list</td> <td><code>[]</code></td> <td>Specifies specific network CIDRs which are allowed to access the metrics port. In case you use namespaceSelector, you also have to specify your kubelet networks here. The metrics ports are also used for probes.</td> </tr> <tr> <td>networkPolicy.metrics.namespaceSelector</td> <td>object</td> <td><code>{}</code></td> <td>Specifies the namespaces which are allowed to access the metrics port</td> </tr> <tr> <td>networkPolicy.metrics.podSelector</td> <td>object</td> <td><code>{}</code></td> <td>Specifies the Pods which are allowed to access the metrics port. As this is cross-namespace communication, you also neeed the namespaceSelector.</td> </tr> <tr> <td>nodeSelector</td> <td>object</td> <td><code>{}</code></td> <td>Node selector for pods</td> </tr> <tr> <td>podAnnotations</td> <td>object</td> <td><code>{}</code></td> <td>Pod annotations</td> </tr> <tr> <td>podLabels</td> <td>object</td> <td><code>{}</code></td> <td>Pod labels</td> </tr> <tr> <td>podSecurityContext</td> <td>object</td> <td><code>{"runAsGroup":0,"runAsUser":0}</code></td> <td>The security context for pods</td> </tr> <tr> <td>podSecurityPolicy</td> <td>object</td> <td>See <code>values.yaml</code></td> <td>PodSecurityPolicy configuration.</td> </tr> <tr> <td>priorityClassName</td> <td>string</td> <td><code>nil</code></td> <td>The name of the PriorityClass</td> </tr> <tr> <td>rbac.create</td> <td>bool</td> <td><code>true</code></td> <td>Specifies whether RBAC resources are to be created</td> </tr> <tr> <td>rbac.pspEnabled</td> <td>bool</td> <td><code>false</code></td> <td>Specifies whether a PodSecurityPolicy is to be created</td> </tr> <tr> <td>readinessProbe</td> <td>object</td> <td>See <code>values.yaml</code></td> <td>Readiness probe</td> </tr> <tr> <td>resources</td> <td>object</td> <td><code>{}</code></td> <td>Resource requests and limits</td> </tr> <tr> <td>secret.annotations</td> <td>object</td> <td><code>{}</code></td> <td>Annotations for the Secret</td> </tr> <tr> <td>secret.labels</td> <td>object</td> <td><code>{}</code></td> <td>Labels for the Secret</td> </tr> <tr> <td>serviceAccount.annotations</td> <td>object</td> <td><code>{}</code></td> <td>Annotations for the service account</td> </tr> <tr> <td>serviceAccount.create</td> <td>bool</td> <td><code>true</code></td> <td>Specifies whether a ServiceAccount should be created</td> </tr> <tr> <td>serviceAccount.imagePullSecrets</td> <td>list</td> <td><code>[]</code></td> <td>Image pull secrets for the service account</td> </tr> <tr> <td>serviceAccount.name</td> <td>string</td> <td><code>nil</code></td> <td>The name of the ServiceAccount to use. If not set and <code>create</code> is true, a name is generated using the fullname template</td> </tr> <tr> <td>serviceMonitor.annotations</td> <td>object</td> <td><code>{}</code></td> <td>ServiceMonitor annotations</td> </tr> <tr> <td>serviceMonitor.enabled</td> <td>bool</td> <td><code>false</code></td> <td>If enabled, ServiceMonitor resources for Prometheus Operator are created</td> </tr> <tr> <td>serviceMonitor.interval</td> <td>string</td> <td><code>nil</code></td> <td>ServiceMonitor scrape interval</td> </tr> <tr> <td>serviceMonitor.labels</td> <td>object</td> <td><code>{}</code></td> <td>Additional ServiceMonitor labels</td> </tr> <tr> <td>serviceMonitor.metricRelabelings</td> <td>list</td> <td><code>[]</code></td> <td>ServiceMonitor relabel configs to apply to samples as the last step before ingestion <a href=https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig>https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig</a> (defines <code>metric_relabel_configs</code>)</td> </tr> <tr> <td>serviceMonitor.namespace</td> <td>string</td> <td><code>nil</code></td> <td>Alternative namespace for ServiceMonitor resources</td> </tr> <tr> <td>serviceMonitor.namespaceSelector</td> <td>object</td> <td><code>{}</code></td> <td>Namespace selector for ServiceMonitor resources</td> </tr> <tr> <td>serviceMonitor.prometheusRule</td> <td>object</td> <td><code>{"additionalLabels":{},"enabled":false,"rules":[]}</code></td> <td>Prometheus rules will be deployed for alerting purposes</td> </tr> <tr> <td>serviceMonitor.relabelings</td> <td>list</td> <td><code>[]</code></td> <td>ServiceMonitor relabel configs to apply to samples before scraping <a href=https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig>https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig</a> (defines <code>relabel_configs</code>)</td> </tr> <tr> <td>serviceMonitor.scheme</td> <td>string</td> <td><code>"http"</code></td> <td>ServiceMonitor will use http by default, but you can pick https as well</td> </tr> <tr> <td>serviceMonitor.scrapeTimeout</td> <td>string</td> <td><code>nil</code></td> <td>ServiceMonitor scrape timeout in Go duration format (e.g. 15s)</td> </tr> <tr> <td>serviceMonitor.targetLabels</td> <td>list</td> <td><code>[]</code></td> <td>ServiceMonitor will add labels from the service to the Prometheus metric <a href=https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec>https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec</a></td> </tr> <tr> <td>serviceMonitor.tlsConfig</td> <td>string</td> <td><code>nil</code></td> <td>ServiceMonitor will use these tlsConfig settings to make the health check requests</td> </tr> <tr> <td>sidecar.configReloader.config.serverPort</td> <td>int</td> <td><code>9533</code></td> <td>The port of the config-reloader server</td> </tr> <tr> <td>sidecar.configReloader.containerSecurityContext</td> <td>object</td> <td><code>{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true}</code></td> <td>The security context for containers for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.enabled</td> <td>bool</td> <td><code>false</code></td> <td></td> </tr> <tr> <td>sidecar.configReloader.extraArgs</td> <td>list</td> <td><code>[]</code></td> <td></td> </tr> <tr> <td>sidecar.configReloader.extraEnv</td> <td>list</td> <td><code>[]</code></td> <td>Extra environment variables for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.extraEnvFrom</td> <td>list</td> <td><code>[]</code></td> <td>Extra environment variables from secrets or configmaps for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.image.pullPolicy</td> <td>string</td> <td><code>"IfNotPresent"</code></td> <td>Docker image pull policy for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.image.registry</td> <td>string</td> <td><code>"docker.io"</code></td> <td>The Docker registry for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.image.repository</td> <td>string</td> <td><code>"jimmidyson/configmap-reload"</code></td> <td>Docker image repository for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.image.tag</td> <td>string</td> <td><code>"v0.8.0"</code></td> <td>Docker image tag for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.livenessProbe</td> <td>object</td> <td><code>{}</code></td> <td>Liveness probe for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.readinessProbe</td> <td>object</td> <td><code>{}</code></td> <td>Readiness probe for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.resources</td> <td>object</td> <td><code>{}</code></td> <td>Resource requests and limits for sidecar config-reloader</td> </tr> <tr> <td>sidecar.configReloader.serviceMonitor.enabled</td> <td>bool</td> <td><code>true</code></td> <td></td> </tr> <tr> <td>tolerations</td> <td>list</td> <td><code>[{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/control-plane","operator":"Exists"}]</code></td> <td>Tolerations for pods. By default, pods will be scheduled on master/control-plane nodes.</td> </tr> <tr> <td>updateStrategy</td> <td>object</td> <td><code>{}</code></td> <td>The update strategy for the DaemonSet</td> </tr> </tbody> </table> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h2> <p>The config file for Promtail must be configured as string. This is necessary because the contents are passed through the <code>tpl</code> function. With this, the file can be templated and assembled from reusable YAML snippets. It is common to have multiple <code>kubernetes_sd_configs</code> that, in turn, usually need the same <code>pipeline_stages</code>. Thus, extracting reusable snippets helps reduce redundancy and avoid copy/paste errors. See `values.yaml´ for details. Also, the following examples make use of this feature.</p> <p>For additional reference, please refer to Promtail's docs:</p> <p><a href=https://grafana.com/docs/loki/latest/clients/promtail/configuration/ >https://grafana.com/docs/loki/latest/clients/promtail/configuration/</a></p> <h3 id=syslog-support>Syslog Support<a class=headerlink href=#syslog-support title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nt>extraPorts</span><span class=p>:</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>syslog</span><span class=p>:</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tcp-syslog</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1514</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>    </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>      </span><span class=nt>externalTrafficPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Local</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>      </span><span class=nt>loadBalancerIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">123.234.123.234</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>  </span><span class=nt>snippets</span><span class=p>:</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>    </span><span class=nt>extraScrapeConfigs</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>      </span><span class=no># Add an additional scrape config for syslog</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>      </span><span class=no>- job_name: syslog</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>        </span><span class=no>syslog:</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>          </span><span class=no>listen_address: 0.0.0.0:{{ .Values.extraPorts.syslog.containerPort }}</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>          </span><span class=no>labels:</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>            </span><span class=no>job: syslog</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>        </span><span class=no>relabel_configs:</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>          </span><span class=no>- source_labels:</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>              </span><span class=no>- __syslog_message_hostname</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=w>            </span><span class=no>target_label: hostname</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=w>          </span><span class=no># example label values: kernel, CRON, kubelet</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=w>          </span><span class=no>- source_labels:</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=w>              </span><span class=no>- __syslog_message_app_name</span>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=w>            </span><span class=no>target_label: app</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=w>          </span><span class=no># example label values: debug, notice, informational, warning, error</span>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=w>          </span><span class=no>- source_labels:</span>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=w>              </span><span class=no>- __syslog_message_severity</span>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a><span class=w>            </span><span class=no>target_label: level</span>
</span></code></pre></div> <p>Find additional source labels in the Promtail's docs:</p> <p><a href=https://grafana.com/docs/loki/latest/clients/promtail/configuration/#syslog>https://grafana.com/docs/loki/latest/clients/promtail/configuration/#syslog</a></p> <h3 id=journald-support>Journald Support<a class=headerlink href=#journald-support title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>snippets</span><span class=p>:</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nt>extraScrapeConfigs</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>      </span><span class=no># Add an additional scrape config for syslog</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>      </span><span class=no>- job_name: journal</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>        </span><span class=no>journal:</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>          </span><span class=no>path: /var/log/journal</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>          </span><span class=no>max_age: 12h</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>          </span><span class=no>labels:</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>            </span><span class=no>job: systemd-journal</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>        </span><span class=no>relabel_configs:</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>          </span><span class=no>- source_labels:</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>              </span><span class=no>- __journal__hostname</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>            </span><span class=no>target_label: hostname</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=w>          </span><span class=no># example label values: kubelet.service, containerd.service</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>          </span><span class=no>- source_labels:</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=w>              </span><span class=no>- __journal__systemd_unit</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=w>            </span><span class=no>target_label: unit</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=w>          </span><span class=no># example label values: debug, notice, info, warning, error</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=w>          </span><span class=no>- source_labels:</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=w>              </span><span class=no>- __journal_priority_keyword</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=w>            </span><span class=no>target_label: level</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=c1># Mount journal directory and machine-id file into promtail pods</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a><span class=nt>extraVolumes</span><span class=p>:</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">journal</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class=w>    </span><span class=nt>hostPath</span><span class=p>:</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/journal</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machine-id</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a><span class=w>    </span><span class=nt>hostPath</span><span class=p>:</span>
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/machine-id</span>
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a>
</span><span id=__span-4-35><a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a><span class=nt>extraVolumeMounts</span><span class=p>:</span>
</span><span id=__span-4-36><a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">journal</span>
</span><span id=__span-4-37><a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a><span class=w>    </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/journal</span>
</span><span id=__span-4-38><a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-4-39><a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machine-id</span>
</span><span id=__span-4-40><a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a><span class=w>    </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/machine-id</span>
</span><span id=__span-4-41><a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div> <p>Find additional configuration options in Promtail's docs:</p> <p><a href=https://grafana.com/docs/loki/latest/clients/promtail/configuration/#journal>https://grafana.com/docs/loki/latest/clients/promtail/configuration/#journal</a></p> <p>More journal source labels can be found here <a href=https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html>https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html</a>.</p> <blockquote> <p>Note that each message from the journal may have a different set of fields and software may write an arbitrary set of custom fields for their logged messages. <a href=https://github.com/grafana/loki/issues/2048#issuecomment-626234611>(related issue)</a></p> </blockquote> <p>The machine-id needs to be available in the container as it is required for scraping. This is described in Promtail's scraping docs:</p> <p><a href=https://grafana.com/docs/loki/latest/clients/promtail/scraping/#journal-scraping-linux-only>https://grafana.com/docs/loki/latest/clients/promtail/scraping/#journal-scraping-linux-only</a></p> <h3 id=push-api-support>Push API Support<a class=headerlink href=#push-api-support title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>extraPorts</span><span class=p>:</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>httpPush</span><span class=p>:</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http-push</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3500</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=nt>grpcPush</span><span class=p>:</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">grpc-push</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3600</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>  </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=no>server:</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>      </span><span class=no>log_level: {{ .Values.config.logLevel }}</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>      </span><span class=no>http_listen_port: {{ .Values.config.serverPort }}</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>    </span><span class=no>clients:</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>      </span><span class=no>- url: {{ .Values.config.lokiAddress }}</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>    </span><span class=no>positions:</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>      </span><span class=no>filename: /run/promtail/positions.yaml</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>    </span><span class=no>scrape_configs:</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>      </span><span class=no>{{- tpl .Values.config.snippets.scrapeConfigs . | nindent 2 }}</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>      </span><span class=no>- job_name: push1</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>        </span><span class=no>loki_push_api:</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>          </span><span class=no>server:</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>            </span><span class=no>http_listen_port: {{ .Values.extraPorts.httpPush.containerPort }}</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=w>            </span><span class=no>grpc_listen_port: {{ .Values.extraPorts.grpcPush.containerPort }}</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=w>          </span><span class=no>labels:</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=w>            </span><span class=no>pushserver: push1</span>
</span></code></pre></div> <h3 id=customize-client-config-options>Customize client config options<a class=headerlink href=#customize-client-config-options title="Permanent link">&para;</a></h3> <p>By default, promtail send logs scraped to <code>loki</code> server at <code>http://loki-gateway/loki/api/v1/push</code>. If you want to customize clients or add additional options to <code>loki</code>, please use the <code>clients</code> section. For example, to enable HTTP basic auth and include OrgID header, you can use:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>clients</span><span class=p>:</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://loki.server/loki/api/v1/push</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>      </span><span class=nt>tenant_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>      </span><span class=nt>basic_auth</span><span class=p>:</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>        </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">loki</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>        </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secret</span>
</span></code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../mimir-distributed/ class="md-footer__link md-footer__link--prev" aria-label="上一页: Notice of relocation" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> Notice of relocation </div> </div> </a> <a href=../rollout-operator/ class="md-footer__link md-footer__link--next" aria-label="下一页: Grafana rollout-operator Helm Chart" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> Grafana rollout-operator Helm Chart </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>