
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../loki-canary/">
      
      
        <link rel="next" href="../loki-stack/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>loki-distributed - Helm Charts Hub</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#loki-distributed" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Helm Charts Hub
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              loki-distributed
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sir5kong/helm-charts-hub" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sir5kong/helm-charts-hub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Helm Charts Hub
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../chart-list/" class="md-tabs__link">
      Chart 列表
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../bitnami/" class="md-tabs__link">
        Bitnami
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Grafana
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ingress-nginx/" class="md-tabs__link">
        Ingress nginx
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../prometheus-community/" class="md-tabs__link">
        Prometheus community
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../sir5kong/" class="md-tabs__link">
        Sir5kong
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Helm Charts Hub
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sir5kong/helm-charts-hub" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sir5kong/helm-charts-hub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Helm Charts Hub
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../chart-list/" class="md-nav__link">
        Chart 列表
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../bitnami/">Bitnami</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Bitnami" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Bitnami
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/apache/" class="md-nav__link">
        Apache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/apisix/" class="md-nav__link">
        Apisix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/appsmith/" class="md-nav__link">
        Appsmith
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/argo-cd/" class="md-nav__link">
        Argo cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/argo-workflows/" class="md-nav__link">
        Argo workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/aspnet-core/" class="md-nav__link">
        Aspnet core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/cassandra/" class="md-nav__link">
        Cassandra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/cert-manager/" class="md-nav__link">
        Cert manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/clickhouse/" class="md-nav__link">
        Clickhouse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/common/" class="md-nav__link">
        Bitnami Common Library Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/concourse/" class="md-nav__link">
        Concourse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/consul/" class="md-nav__link">
        Consul
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/contour/" class="md-nav__link">
        Contour
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/discourse/" class="md-nav__link">
        Discourse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/dokuwiki/" class="md-nav__link">
        Dokuwiki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/drupal/" class="md-nav__link">
        Drupal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/ejbca/" class="md-nav__link">
        Ejbca
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/elasticsearch/" class="md-nav__link">
        Elasticsearch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/etcd/" class="md-nav__link">
        Etcd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/external-dns/" class="md-nav__link">
        External dns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/flink/" class="md-nav__link">
        Flink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/fluent-bit/" class="md-nav__link">
        Fluent bit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/fluentd/" class="md-nav__link">
        Fluentd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/flux/" class="md-nav__link">
        Flux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/ghost/" class="md-nav__link">
        Ghost
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/gitea/" class="md-nav__link">
        Gitea
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/grafana-loki/" class="md-nav__link">
        Grafana loki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/grafana-mimir/" class="md-nav__link">
        Grafana mimir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/grafana-operator/" class="md-nav__link">
        Grafana operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/grafana-tempo/" class="md-nav__link">
        Grafana tempo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/grafana/" class="md-nav__link">
        Grafana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/haproxy/" class="md-nav__link">
        Haproxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/harbor/" class="md-nav__link">
        Harbor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/influxdb/" class="md-nav__link">
        Influxdb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/jaeger/" class="md-nav__link">
        Jaeger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/jasperreports/" class="md-nav__link">
        Jasperreports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/jenkins/" class="md-nav__link">
        Jenkins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/joomla/" class="md-nav__link">
        Joomla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/jupyterhub/" class="md-nav__link">
        Jupyterhub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kafka/" class="md-nav__link">
        Kafka
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/keycloak/" class="md-nav__link">
        Keycloak
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kiam/" class="md-nav__link">
        Kiam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kibana/" class="md-nav__link">
        Kibana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kong/" class="md-nav__link">
        Kong
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kube-prometheus/" class="md-nav__link">
        Kube prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kube-state-metrics/" class="md-nav__link">
        Kube state metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/kubernetes-event-exporter/" class="md-nav__link">
        Kubernetes event exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/logstash/" class="md-nav__link">
        Logstash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/magento/" class="md-nav__link">
        Magento
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mariadb-galera/" class="md-nav__link">
        Mariadb galera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mariadb/" class="md-nav__link">
        Mariadb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mastodon/" class="md-nav__link">
        Mastodon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/matomo/" class="md-nav__link">
        Matomo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mediawiki/" class="md-nav__link">
        Mediawiki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/memcached/" class="md-nav__link">
        Memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/metallb/" class="md-nav__link">
        Metallb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/metrics-server/" class="md-nav__link">
        Metrics server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/minio/" class="md-nav__link">
        Minio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mongodb-sharded/" class="md-nav__link">
        Mongodb sharded
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mongodb/" class="md-nav__link">
        Mongodb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/moodle/" class="md-nav__link">
        Moodle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/multus-cni/" class="md-nav__link">
        Multus cni
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mxnet/" class="md-nav__link">
        Mxnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/mysql/" class="md-nav__link">
        Mysql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/nats/" class="md-nav__link">
        Nats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/nginx-ingress-controller/" class="md-nav__link">
        Nginx ingress controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/nginx/" class="md-nav__link">
        Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/node-exporter/" class="md-nav__link">
        Node exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/oauth2-proxy/" class="md-nav__link">
        Oauth2 proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/odoo/" class="md-nav__link">
        Odoo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/opencart/" class="md-nav__link">
        Opencart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/osclass/" class="md-nav__link">
        Osclass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/parse/" class="md-nav__link">
        Parse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/phpbb/" class="md-nav__link">
        Phpbb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/phpmyadmin/" class="md-nav__link">
        Phpmyadmin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/pinniped/" class="md-nav__link">
        Pinniped
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/postgresql-ha/" class="md-nav__link">
        Postgresql ha
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/postgresql/" class="md-nav__link">
        Postgresql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/prestashop/" class="md-nav__link">
        Prestashop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/rabbitmq-cluster-operator/" class="md-nav__link">
        Rabbitmq cluster operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/rabbitmq/" class="md-nav__link">
        Rabbitmq
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/redis-cluster/" class="md-nav__link">
        Redis cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/redmine/" class="md-nav__link">
        Redmine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/schema-registry/" class="md-nav__link">
        Schema registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/sealed-secrets/" class="md-nav__link">
        Sealed secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/solr/" class="md-nav__link">
        Solr
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/sonarqube/" class="md-nav__link">
        Sonarqube
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/spring-cloud-dataflow/" class="md-nav__link">
        Spring cloud dataflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/suitecrm/" class="md-nav__link">
        Suitecrm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/supabase/" class="md-nav__link">
        Supabase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/tensorflow-resnet/" class="md-nav__link">
        Tensorflow resnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/thanos/" class="md-nav__link">
        Thanos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/tomcat/" class="md-nav__link">
        Tomcat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/wavefront-hpa-adapter/" class="md-nav__link">
        Wavefront hpa adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/wavefront-prometheus-storage-adapter/" class="md-nav__link">
        Wavefront prometheus storage adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/whereabouts/" class="md-nav__link">
        Whereabouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/wildfly/" class="md-nav__link">
        Wildfly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/wordpress/" class="md-nav__link">
        Wordpress
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bitnami/zookeeper/" class="md-nav__link">
        Zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Grafana</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Grafana" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Grafana
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../agent-operator/" class="md-nav__link">
        grafana-agent-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../enterprise-logs-simple/" class="md-nav__link">
        enterprise-logs-simple
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../enterprise-logs/" class="md-nav__link">
        Grafana Enterprise Logs Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../enterprise-metrics/" class="md-nav__link">
        Grafana Enterprise Metrics Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fluent-bit/" class="md-nav__link">
        Fluent Bit Loki chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-agent/" class="md-nav__link">
        Grafana Agent chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana/" class="md-nav__link">
        Grafana Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../loki-canary/" class="md-nav__link">
        loki-canary
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          loki-distributed
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        loki-distributed
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chart-repo" class="md-nav__link">
    Chart Repo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading" class="md-nav__link">
    Upgrading
  </a>
  
    <nav class="md-nav" aria-label="Upgrading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrading-an-existing-release-to-a-new-major-version" class="md-nav__link">
    Upgrading an existing Release to a new major version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-068x-to-0690" class="md-nav__link">
    From 0.68.x to 0.69.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-041x-to-0420" class="md-nav__link">
    From 0.41.x to 0.42.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-034x-to-0350" class="md-nav__link">
    From 0.34.x to 0.35.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-030x-to-0310" class="md-nav__link">
    From 0.30.x to 0.31.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#values" class="md-nav__link">
    Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-and-file-locations" class="md-nav__link">
    Directory and File Locations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration-using-memberlist-boltdb-shipper-and-s3-for-storage" class="md-nav__link">
    Example configuration using memberlist, boltdb-shipper, and S3 for storage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gateway" class="md-nav__link">
    Gateway
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    Caching
  </a>
  
    <nav class="md-nav" aria-label="Caching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memcached-chunks" class="md-nav__link">
    memcached-chunks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memcached-frontend" class="md-nav__link">
    memcached-frontend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memcached-index-queries" class="md-nav__link">
    memcached-index-queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memcached-index-writes" class="md-nav__link">
    memcached-index-writes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compactor" class="md-nav__link">
    Compactor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ruler" class="md-nav__link">
    Ruler
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../loki-stack/" class="md-nav__link">
        Loki-Stack Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mimir-distributed/" class="md-nav__link">
        Notice of relocation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../promtail/" class="md-nav__link">
        promtail
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rollout-operator/" class="md-nav__link">
        Grafana rollout-operator Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../synthetic-monitoring-agent/" class="md-nav__link">
        synthetic-monitoring-agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tempo-distributed/" class="md-nav__link">
        tempo-distributed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tempo-vulture/" class="md-nav__link">
        tempo-vulture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tempo/" class="md-nav__link">
        tempo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../ingress-nginx/">Ingress nginx</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ingress nginx" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Ingress nginx
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ingress-nginx/ingress-nginx/" class="md-nav__link">
        ingress-nginx
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../prometheus-community/">Prometheus community</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Prometheus community" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Prometheus community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/alertmanager-snmp-notifier/" class="md-nav__link">
        Prometheus SNMP Notifier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/alertmanager/" class="md-nav__link">
        Alertmanager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/jiralert/" class="md-nav__link">
        Prometheus SNMP Notifier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/kube-prometheus-stack/" class="md-nav__link">
        kube-prometheus-stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/kube-state-metrics/" class="md-nav__link">
        kube-state-metrics Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prom-label-proxy/" class="md-nav__link">
        prom-label-proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-adapter/" class="md-nav__link">
        Prometheus Adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-blackbox-exporter/" class="md-nav__link">
        Prometheus Blackbox Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-cloudwatch-exporter/" class="md-nav__link">
        Prometheus Cloudwatch Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-conntrack-stats-exporter/" class="md-nav__link">
        Conntrack Stats Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-consul-exporter/" class="md-nav__link">
        Prometheus Consul Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-couchdb-exporter/" class="md-nav__link">
        prometheus-couchdb-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-druid-exporter/" class="md-nav__link">
        Prometheus Druid Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-elasticsearch-exporter/" class="md-nav__link">
        Elasticsearch Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-fastly-exporter/" class="md-nav__link">
        Prometheus Fastly Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-json-exporter/" class="md-nav__link">
        prometheus-json-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-kafka-exporter/" class="md-nav__link">
        prometheus-kafka-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-mongodb-exporter/" class="md-nav__link">
        Prometheus MongoDB Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-mysql-exporter/" class="md-nav__link">
        Prometheus Mysql Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-nats-exporter/" class="md-nav__link">
        Prometheus NATS Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-nginx-exporter/" class="md-nav__link">
        prometheus-nginx-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-node-exporter/" class="md-nav__link">
        Prometheus `Node Exporter`
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-operator-admission-webhook/" class="md-nav__link">
        Prometheus Operator Admission Webhook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-operator-crds/" class="md-nav__link">
        Prometheus Operator CRDs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pgbouncer-exporter/" class="md-nav__link">
        Prometheus Postgres Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pingdom-exporter/" class="md-nav__link">
        Prometheus Pingdom Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pingmesh-exporter/" class="md-nav__link">
        Prometheus Pingmesh Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-postgres-exporter/" class="md-nav__link">
        Prometheus Postgres Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pushgateway/" class="md-nav__link">
        Prometheus Pushgateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-rabbitmq-exporter/" class="md-nav__link">
        prometheus-rabbitmq-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-redis-exporter/" class="md-nav__link">
        prometheus-redis-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-smartctl-exporter/" class="md-nav__link">
        Prometheus smartctl Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-snmp-exporter/" class="md-nav__link">
        Prometheus SNMP Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-stackdriver-exporter/" class="md-nav__link">
        Stackdriver Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-statsd-exporter/" class="md-nav__link">
        prometheus-statsd-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-to-sd/" class="md-nav__link">
        prometheus-to-sd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-windows-exporter/" class="md-nav__link">
        Prometheus `Node Exporter`
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../sir5kong/">Sir5kong</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Sir5kong" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Sir5kong
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/commonapp/" class="md-nav__link">
        commonapp helm chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/ingress-nginx/" class="md-nav__link">
        ingress-nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/kafka/" class="md-nav__link">
        Kafka helm chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/nginx/" class="md-nav__link">
        nginx helm chart
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chart-repo" class="md-nav__link">
    Chart Repo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading" class="md-nav__link">
    Upgrading
  </a>
  
    <nav class="md-nav" aria-label="Upgrading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrading-an-existing-release-to-a-new-major-version" class="md-nav__link">
    Upgrading an existing Release to a new major version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-068x-to-0690" class="md-nav__link">
    From 0.68.x to 0.69.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-041x-to-0420" class="md-nav__link">
    From 0.41.x to 0.42.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-034x-to-0350" class="md-nav__link">
    From 0.34.x to 0.35.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-030x-to-0310" class="md-nav__link">
    From 0.30.x to 0.31.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#values" class="md-nav__link">
    Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-and-file-locations" class="md-nav__link">
    Directory and File Locations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration-using-memberlist-boltdb-shipper-and-s3-for-storage" class="md-nav__link">
    Example configuration using memberlist, boltdb-shipper, and S3 for storage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gateway" class="md-nav__link">
    Gateway
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    Caching
  </a>
  
    <nav class="md-nav" aria-label="Caching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memcached-chunks" class="md-nav__link">
    memcached-chunks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memcached-frontend" class="md-nav__link">
    memcached-frontend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memcached-index-queries" class="md-nav__link">
    memcached-index-queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memcached-index-writes" class="md-nav__link">
    memcached-index-writes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compactor" class="md-nav__link">
    Compactor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ruler" class="md-nav__link">
    Ruler
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="loki-distributed">loki-distributed<a class="headerlink" href="#loki-distributed" title="Permanent link">&para;</a></h1>
<p><img alt="Version: 0.69.16" src="https://img.shields.io/badge/Version-0.69.16-informational?style=flat-square" /> <img alt="Type: application" src="https://img.shields.io/badge/Type-application-informational?style=flat-square" /> <img alt="AppVersion: 2.8.2" src="https://img.shields.io/badge/AppVersion-2.8.2-informational?style=flat-square" /></p>
<p>Helm chart for Grafana Loki in microservices mode</p>
<h2 id="source-code">Source Code<a class="headerlink" href="#source-code" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/grafana/loki">https://github.com/grafana/loki</a></li>
<li><a href="https://grafana.com/oss/loki/">https://grafana.com/oss/loki/</a></li>
<li><a href="https://grafana.com/docs/loki/latest/">https://grafana.com/docs/loki/latest/</a></li>
</ul>
<h2 id="chart-repo">Chart Repo<a class="headerlink" href="#chart-repo" title="Permanent link">&para;</a></h2>
<p>Add the following repo to use the chart:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="go">helm repo add grafana https://helm-charts.itboon.top/grafana</span>
</span></code></pre></div>
<h2 id="upgrading">Upgrading<a class="headerlink" href="#upgrading" title="Permanent link">&para;</a></h2>
<h3 id="upgrading-an-existing-release-to-a-new-major-version">Upgrading an existing Release to a new major version<a class="headerlink" href="#upgrading-an-existing-release-to-a-new-major-version" title="Permanent link">&para;</a></h3>
<p>Major version upgrades listed here indicate that there is an incompatible breaking change needing manual actions.</p>
<h3 id="from-068x-to-0690">From 0.68.x to 0.69.0<a class="headerlink" href="#from-068x-to-0690" title="Permanent link">&para;</a></h3>
<p>The in-memory <code>fifocache</code> has been renamed to more general <code>embedded_cache</code>, which currently doesn't have a <code>max_size_items</code> attribute.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="no">chunk_store_config:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">      </span><span class="no">chunk_cache_config:</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="no">embedded_cache:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">          </span><span class="no">enabled: false</span>
</span></code></pre></div></p>
<p><code>compactor_address</code> has to be explicitly set in the <code>common</code> section of the config.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="no">common:</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">      </span><span class="no">compactor_address: {{ include &quot;loki.compactorFullname&quot; . }}:3100</span>
</span></code></pre></div></p>
<h3 id="from-041x-to-0420">From 0.41.x to 0.42.0<a class="headerlink" href="#from-041x-to-0420" title="Permanent link">&para;</a></h3>
<p>All containers were previously named "loki". This version changes the container names to make the chart compatible with the loki-mixin. Now the container names correctly reflect the component (querier, distributor, ingester, ...). If you are using custom prometheus rules that use the container name you probably have to change them.</p>
<h3 id="from-034x-to-0350">From 0.34.x to 0.35.0<a class="headerlink" href="#from-034x-to-0350" title="Permanent link">&para;</a></h3>
<p>This version updates the <code>Ingress</code> API Version of the Loki Gateway component to <code>networking.k8s.io/v1</code> of course given that the cluster supports it. Here it's important to notice the change in the <code>values.yml</code> with regards to the ingress configuration section and its new structure.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">gateway</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="c1"># Newly added optional property</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nt">ingressClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">hosts</span><span class="p">:</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gateway.loki.example.com</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">          </span><span class="c1"># New data structure introduced</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">            </span><span class="c1"># Newly added optional property</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
</span></code></pre></div></p>
<h3 id="from-030x-to-0310">From 0.30.x to 0.31.0<a class="headerlink" href="#from-030x-to-0310" title="Permanent link">&para;</a></h3>
<p>This version updates the <code>podManagementPolicy</code> of running the Loki components as <code>StatefulSet</code>'s to <code>Parallel</code> instead of the default <code>OrderedReady</code> in order to allow better scalability for Loki e.g. in case the pods weren't terminated gracefully. This change requires a manual action deleting the existing StatefulSets before upgrading with Helm.
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Delete the Ingesters StatefulSets</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>kubectl<span class="w"> </span>delete<span class="w"> </span>statefulset<span class="w"> </span>RELEASE_NAME-loki-distributed-ingester<span class="w"> </span>-n<span class="w"> </span>LOKI_NAMESPACE<span class="w"> </span>--cascade<span class="o">=</span>orphan
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># Delete the Queriers StatefulSets</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>kubectl<span class="w"> </span>delete<span class="w"> </span>statefulset<span class="w"> </span>RELEASE_NAME-loki-distributed-querier<span class="w"> </span>-n<span class="w"> </span>LOKI_NAMESPACE<span class="w"> </span>--cascade<span class="o">=</span>orphan
</span></code></pre></div></p>
<h2 id="values">Values<a class="headerlink" href="#values" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>compactor.affinity</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specify the compactor affinity</td>
</tr>
<tr>
<td>compactor.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>compactor.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether compactor should be enabled</td>
</tr>
<tr>
<td>compactor.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the compactor</td>
</tr>
<tr>
<td>compactor.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the compactor pods</td>
</tr>
<tr>
<td>compactor.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the compactor pods</td>
</tr>
<tr>
<td>compactor.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the compactor pods</td>
</tr>
<tr>
<td>compactor.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the compactor pods</td>
</tr>
<tr>
<td>compactor.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the compactor pods</td>
</tr>
<tr>
<td>compactor.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the compactor image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>compactor.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the compactor image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>compactor.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the compactor image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>compactor.initContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Init containers to add to the compactor pods</td>
</tr>
<tr>
<td>compactor.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for compactor pods</td>
</tr>
<tr>
<td>compactor.persistence.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for compactor PVCs</td>
</tr>
<tr>
<td>compactor.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs for the compactor</td>
</tr>
<tr>
<td>compactor.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent disk</td>
</tr>
<tr>
<td>compactor.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>compactor.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for compactor pods</td>
</tr>
<tr>
<td>compactor.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for compactor pods</td>
</tr>
<tr>
<td>compactor.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for compactor pods</td>
</tr>
<tr>
<td>compactor.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the compactor</td>
</tr>
<tr>
<td>compactor.serviceAccount.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for the compactor service account</td>
</tr>
<tr>
<td>compactor.serviceAccount.automountServiceAccountToken</td>
<td>bool</td>
<td><code>true</code></td>
<td>Set this toggle to false to opt out of automounting API credentials for the service account</td>
</tr>
<tr>
<td>compactor.serviceAccount.create</td>
<td>bool</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td>compactor.serviceAccount.imagePullSecrets</td>
<td>list</td>
<td><code>[]</code></td>
<td>Image pull secrets for the compactor service account</td>
</tr>
<tr>
<td>compactor.serviceAccount.name</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the ServiceAccount to use for the compactor. If not set and create is true, a name is generated by appending "-compactor" to the common ServiceAccount.</td>
</tr>
<tr>
<td>compactor.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for compactor service</td>
</tr>
<tr>
<td>compactor.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the compactor to shutdown before it is killed</td>
</tr>
<tr>
<td>compactor.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for compactor pods</td>
</tr>
<tr>
<td>distributor.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for distributor pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>distributor.appProtocol</td>
<td>object</td>
<td><code>{"grpc":""}</code></td>
<td>Adds the appProtocol field to the distributor service. This allows distributor to work with istio protocol selection.</td>
</tr>
<tr>
<td>distributor.appProtocol.grpc</td>
<td>string</td>
<td><code>""</code></td>
<td>Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"</td>
</tr>
<tr>
<td>distributor.autoscaling.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable autoscaling for the distributor</td>
</tr>
<tr>
<td>distributor.autoscaling.maxReplicas</td>
<td>int</td>
<td><code>3</code></td>
<td>Maximum autoscaling replicas for the distributor</td>
</tr>
<tr>
<td>distributor.autoscaling.minReplicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Minimum autoscaling replicas for the distributor</td>
</tr>
<tr>
<td>distributor.autoscaling.targetCPUUtilizationPercentage</td>
<td>int</td>
<td><code>60</code></td>
<td>Target CPU utilisation percentage for the distributor</td>
</tr>
<tr>
<td>distributor.autoscaling.targetMemoryUtilizationPercentage</td>
<td>string</td>
<td><code>nil</code></td>
<td>Target memory utilisation percentage for the distributor</td>
</tr>
<tr>
<td>distributor.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>distributor.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the distributor</td>
</tr>
<tr>
<td>distributor.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the distributor pods</td>
</tr>
<tr>
<td>distributor.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the distributor pods</td>
</tr>
<tr>
<td>distributor.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the distributor pods</td>
</tr>
<tr>
<td>distributor.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the distributor pods</td>
</tr>
<tr>
<td>distributor.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the distributor pods</td>
</tr>
<tr>
<td>distributor.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the distributor image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>distributor.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the distributor image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>distributor.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the distributor image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>distributor.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>distributor.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for distributor pods</td>
</tr>
<tr>
<td>distributor.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for distributor pods</td>
</tr>
<tr>
<td>distributor.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for distributor pods</td>
</tr>
<tr>
<td>distributor.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for distributor pods</td>
</tr>
<tr>
<td>distributor.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the distributor</td>
</tr>
<tr>
<td>distributor.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the distributor</td>
</tr>
<tr>
<td>distributor.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for distributor service</td>
</tr>
<tr>
<td>distributor.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the distributor to shutdown before it is killed</td>
</tr>
<tr>
<td>distributor.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for distributor pods</td>
</tr>
<tr>
<td>fullnameOverride</td>
<td>string</td>
<td><code>nil</code></td>
<td>Overrides the chart's computed fullname</td>
</tr>
<tr>
<td>gateway.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for gateway pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>gateway.autoscaling.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable autoscaling for the gateway</td>
</tr>
<tr>
<td>gateway.autoscaling.maxReplicas</td>
<td>int</td>
<td><code>3</code></td>
<td>Maximum autoscaling replicas for the gateway</td>
</tr>
<tr>
<td>gateway.autoscaling.minReplicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Minimum autoscaling replicas for the gateway</td>
</tr>
<tr>
<td>gateway.autoscaling.targetCPUUtilizationPercentage</td>
<td>int</td>
<td><code>60</code></td>
<td>Target CPU utilisation percentage for the gateway</td>
</tr>
<tr>
<td>gateway.autoscaling.targetMemoryUtilizationPercentage</td>
<td>string</td>
<td><code>nil</code></td>
<td>Target memory utilisation percentage for the gateway</td>
</tr>
<tr>
<td>gateway.basicAuth.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enables basic authentication for the gateway</td>
</tr>
<tr>
<td>gateway.basicAuth.existingSecret</td>
<td>string</td>
<td><code>nil</code></td>
<td>Existing basic auth secret to use. Must contain '.htpasswd'</td>
</tr>
<tr>
<td>gateway.basicAuth.htpasswd</td>
<td>string</td>
<td>See values.yaml</td>
<td>Uses the specified username and password to compute a htpasswd using Sprig's <code>htpasswd</code> function. The value is templated using <code>tpl</code>. Override this to use a custom htpasswd, e.g. in case the default causes high CPU load.</td>
</tr>
<tr>
<td>gateway.basicAuth.password</td>
<td>string</td>
<td><code>nil</code></td>
<td>The basic auth password for the gateway</td>
</tr>
<tr>
<td>gateway.basicAuth.username</td>
<td>string</td>
<td><code>nil</code></td>
<td>The basic auth username for the gateway</td>
</tr>
<tr>
<td>gateway.containerSecurityContext</td>
<td>object</td>
<td><code>{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true}</code></td>
<td>The SecurityContext for gateway containers</td>
</tr>
<tr>
<td>gateway.deploymentStrategy</td>
<td>object</td>
<td><code>{"type":"RollingUpdate"}</code></td>
<td>See <code>kubectl explain deployment.spec.strategy</code> for more, ref: <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy">https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy</a></td>
</tr>
<tr>
<td>gateway.dnsConfig</td>
<td>object</td>
<td><code>{}</code></td>
<td>DNSConfig for gateway pods</td>
</tr>
<tr>
<td>gateway.enabled</td>
<td>bool</td>
<td><code>true</code></td>
<td>Specifies whether the gateway should be enabled</td>
</tr>
<tr>
<td>gateway.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the gateway</td>
</tr>
<tr>
<td>gateway.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the gateway pods</td>
</tr>
<tr>
<td>gateway.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the gateway pods</td>
</tr>
<tr>
<td>gateway.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the gateway pods</td>
</tr>
<tr>
<td>gateway.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the gateway pods</td>
</tr>
<tr>
<td>gateway.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the gateway pods</td>
</tr>
<tr>
<td>gateway.image.pullPolicy</td>
<td>string</td>
<td><code>"IfNotPresent"</code></td>
<td>The gateway image pull policy</td>
</tr>
<tr>
<td>gateway.image.registry</td>
<td>string</td>
<td><code>"docker.io"</code></td>
<td>The Docker registry for the gateway image</td>
</tr>
<tr>
<td>gateway.image.repository</td>
<td>string</td>
<td><code>"nginxinc/nginx-unprivileged"</code></td>
<td>The gateway image repository</td>
</tr>
<tr>
<td>gateway.image.tag</td>
<td>string</td>
<td><code>"1.20.2-alpine"</code></td>
<td>The gateway image tag</td>
</tr>
<tr>
<td>gateway.ingress.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for the gateway ingress</td>
</tr>
<tr>
<td>gateway.ingress.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether an ingress for the gateway should be created</td>
</tr>
<tr>
<td>gateway.ingress.hosts</td>
<td>list</td>
<td><code>[{"host":"gateway.loki.example.com","paths":[{"path":"/"}]}]</code></td>
<td>Hosts configuration for the gateway ingress</td>
</tr>
<tr>
<td>gateway.ingress.ingressClassName</td>
<td>string</td>
<td><code>""</code></td>
<td>Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18 For example: <code>ingressClassName: nginx</code></td>
</tr>
<tr>
<td>gateway.ingress.tls</td>
<td>list</td>
<td><code>[]</code></td>
<td>TLS configuration for the gateway ingress</td>
</tr>
<tr>
<td>gateway.livenessProbe.httpGet.path</td>
<td>string</td>
<td><code>"/"</code></td>
<td></td>
</tr>
<tr>
<td>gateway.livenessProbe.httpGet.port</td>
<td>string</td>
<td><code>"http"</code></td>
<td></td>
</tr>
<tr>
<td>gateway.livenessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>30</code></td>
<td></td>
</tr>
<tr>
<td>gateway.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>gateway.nginxConfig.file</td>
<td>string</td>
<td>See values.yaml</td>
<td>Config file contents for Nginx. Passed through the <code>tpl</code> function to allow templating</td>
</tr>
<tr>
<td>gateway.nginxConfig.httpSnippet</td>
<td>string</td>
<td><code>""</code></td>
<td>Allows appending custom configuration to the http block</td>
</tr>
<tr>
<td>gateway.nginxConfig.logFormat</td>
<td>string</td>
<td>See values.yaml</td>
<td>NGINX log format</td>
</tr>
<tr>
<td>gateway.nginxConfig.resolver</td>
<td>string</td>
<td><code>""</code></td>
<td>Allows overriding the DNS resolver address nginx will use.</td>
</tr>
<tr>
<td>gateway.nginxConfig.serverSnippet</td>
<td>string</td>
<td><code>""</code></td>
<td>Allows appending custom configuration to the server block</td>
</tr>
<tr>
<td>gateway.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for gateway pods</td>
</tr>
<tr>
<td>gateway.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for gateway pods</td>
</tr>
<tr>
<td>gateway.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for gateway pods</td>
</tr>
<tr>
<td>gateway.podSecurityContext</td>
<td>object</td>
<td><code>{"fsGroup":101,"runAsGroup":101,"runAsNonRoot":true,"runAsUser":101}</code></td>
<td>The SecurityContext for gateway containers</td>
</tr>
<tr>
<td>gateway.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for gateway pods</td>
</tr>
<tr>
<td>gateway.readinessProbe.httpGet.path</td>
<td>string</td>
<td><code>"/"</code></td>
<td></td>
</tr>
<tr>
<td>gateway.readinessProbe.httpGet.port</td>
<td>string</td>
<td><code>"http"</code></td>
<td></td>
</tr>
<tr>
<td>gateway.readinessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>15</code></td>
<td></td>
</tr>
<tr>
<td>gateway.readinessProbe.timeoutSeconds</td>
<td>int</td>
<td><code>1</code></td>
<td></td>
</tr>
<tr>
<td>gateway.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the gateway</td>
</tr>
<tr>
<td>gateway.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the gateway</td>
</tr>
<tr>
<td>gateway.service.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for the gateway service</td>
</tr>
<tr>
<td>gateway.service.appProtocol</td>
<td>string</td>
<td><code>nil</code></td>
<td>Set appProtocol for the service</td>
</tr>
<tr>
<td>gateway.service.clusterIP</td>
<td>string</td>
<td><code>nil</code></td>
<td>ClusterIP of the gateway service</td>
</tr>
<tr>
<td>gateway.service.labels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for gateway service</td>
</tr>
<tr>
<td>gateway.service.loadBalancerIP</td>
<td>string</td>
<td><code>nil</code></td>
<td>Load balancer IPO address if service type is LoadBalancer</td>
</tr>
<tr>
<td>gateway.service.loadBalancerSourceRanges</td>
<td>list</td>
<td><code>[]</code></td>
<td>Load balancer allow traffic from CIDR list if service type is LoadBalancer</td>
</tr>
<tr>
<td>gateway.service.nodePort</td>
<td>string</td>
<td><code>nil</code></td>
<td>Node port if service type is NodePort</td>
</tr>
<tr>
<td>gateway.service.port</td>
<td>int</td>
<td><code>80</code></td>
<td>Port of the gateway service</td>
</tr>
<tr>
<td>gateway.service.type</td>
<td>string</td>
<td><code>"ClusterIP"</code></td>
<td>Type of the gateway service</td>
</tr>
<tr>
<td>gateway.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the gateway to shutdown before it is killed</td>
</tr>
<tr>
<td>gateway.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for gateway pods</td>
</tr>
<tr>
<td>gateway.verboseLogging</td>
<td>bool</td>
<td><code>true</code></td>
<td>Enable logging of 2xx and 3xx HTTP requests</td>
</tr>
<tr>
<td>global.clusterDomain</td>
<td>string</td>
<td><code>"cluster.local"</code></td>
<td>configures cluster domain ("cluster.local" by default)</td>
</tr>
<tr>
<td>global.dnsNamespace</td>
<td>string</td>
<td><code>"kube-system"</code></td>
<td>configures DNS service namespace</td>
</tr>
<tr>
<td>global.dnsService</td>
<td>string</td>
<td><code>"kube-dns"</code></td>
<td>configures DNS service name</td>
</tr>
<tr>
<td>global.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>Overrides the Docker registry globally for all images</td>
</tr>
<tr>
<td>global.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>Overrides the priorityClassName for all pods</td>
</tr>
<tr>
<td>imagePullSecrets</td>
<td>list</td>
<td><code>[]</code></td>
<td>Image pull secrets for Docker images</td>
</tr>
<tr>
<td>indexGateway.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for index-gateway pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>indexGateway.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the index-gateway should be enabled</td>
</tr>
<tr>
<td>indexGateway.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the index-gateway</td>
</tr>
<tr>
<td>indexGateway.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the index-gateway image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>indexGateway.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the index-gateway image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>indexGateway.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the index-gateway image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>indexGateway.initContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Init containers to add to the index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>indexGateway.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.persistence.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for index gateway PVCs</td>
</tr>
<tr>
<td>indexGateway.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which is required when using boltdb-shipper</td>
</tr>
<tr>
<td>indexGateway.persistence.inMemory</td>
<td>bool</td>
<td><code>false</code></td>
<td>Use emptyDir with ramdisk for storage. <strong>Please note that all data in indexGateway will be lost on pod restart</strong></td>
</tr>
<tr>
<td>indexGateway.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent or memory disk</td>
</tr>
<tr>
<td>indexGateway.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>indexGateway.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for index-gateway pods</td>
</tr>
<tr>
<td>indexGateway.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the index-gateway</td>
</tr>
<tr>
<td>indexGateway.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the index-gateway</td>
</tr>
<tr>
<td>indexGateway.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for index-gateway service</td>
</tr>
<tr>
<td>indexGateway.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>300</code></td>
<td>Grace period to allow the index-gateway to shutdown before it is killed.</td>
</tr>
<tr>
<td>indexGateway.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for index-gateway pods</td>
</tr>
<tr>
<td>ingester.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for ingester pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>ingester.appProtocol</td>
<td>object</td>
<td><code>{"grpc":""}</code></td>
<td>Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.</td>
</tr>
<tr>
<td>ingester.appProtocol.grpc</td>
<td>string</td>
<td><code>""</code></td>
<td>Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"</td>
</tr>
<tr>
<td>ingester.autoscaling.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable autoscaling for the ingester</td>
</tr>
<tr>
<td>ingester.autoscaling.maxReplicas</td>
<td>int</td>
<td><code>3</code></td>
<td>Maximum autoscaling replicas for the ingester</td>
</tr>
<tr>
<td>ingester.autoscaling.minReplicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Minimum autoscaling replicas for the ingester</td>
</tr>
<tr>
<td>ingester.autoscaling.targetCPUUtilizationPercentage</td>
<td>int</td>
<td><code>60</code></td>
<td>Target CPU utilisation percentage for the ingester</td>
</tr>
<tr>
<td>ingester.autoscaling.targetMemoryUtilizationPercentage</td>
<td>string</td>
<td><code>nil</code></td>
<td>Target memory utilisation percentage for the ingester</td>
</tr>
<tr>
<td>ingester.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>ingester.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the ingester</td>
</tr>
<tr>
<td>ingester.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the ingester pods</td>
</tr>
<tr>
<td>ingester.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the ingester pods</td>
</tr>
<tr>
<td>ingester.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the ingester pods</td>
</tr>
<tr>
<td>ingester.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the ingester pods</td>
</tr>
<tr>
<td>ingester.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the ingester pods</td>
</tr>
<tr>
<td>ingester.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the ingester image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>ingester.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the ingester image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>ingester.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the ingester image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>ingester.initContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Init containers to add to the ingester pods</td>
</tr>
<tr>
<td>ingester.kind</td>
<td>string</td>
<td><code>"StatefulSet"</code></td>
<td>Kind of deployment [StatefulSet/Deployment]</td>
</tr>
<tr>
<td>ingester.livenessProbe</td>
<td>object</td>
<td><code>{}</code></td>
<td>liveness probe settings for ingester pods. If empty use <code>loki.livenessProbe</code></td>
</tr>
<tr>
<td>ingester.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>ingester.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for ingester pods</td>
</tr>
<tr>
<td>ingester.persistence.claims</td>
<td>list</td>
<td><code>[{"name":"data","size":"10Gi","storageClass":null}]</code></td>
<td>List of the ingester PVCs <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/notationType" title="GitHub User: notationType">@notationType</a> -- list</td>
</tr>
<tr>
<td>ingester.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which is required when using boltdb-shipper</td>
</tr>
<tr>
<td>ingester.persistence.inMemory</td>
<td>bool</td>
<td><code>false</code></td>
<td>Use emptyDir with ramdisk for storage. <strong>Please note that all data in ingester will be lost on pod restart</strong></td>
</tr>
<tr>
<td>ingester.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for ingester pods</td>
</tr>
<tr>
<td>ingester.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for ingester pods</td>
</tr>
<tr>
<td>ingester.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for ingester pods</td>
</tr>
<tr>
<td>ingester.readinessProbe</td>
<td>object</td>
<td><code>{}</code></td>
<td>readiness probe settings for ingester pods. If empty, use <code>loki.readinessProbe</code></td>
</tr>
<tr>
<td>ingester.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the ingester</td>
</tr>
<tr>
<td>ingester.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the ingester</td>
</tr>
<tr>
<td>ingester.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for ingestor service</td>
</tr>
<tr>
<td>ingester.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>300</code></td>
<td>Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor, this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring all data and to successfully leave the member ring on shutdown.</td>
</tr>
<tr>
<td>ingester.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for ingester pods</td>
</tr>
<tr>
<td>ingester.topologySpreadConstraints</td>
<td>string</td>
<td>Defaults to allow skew no more then 1 node per AZ</td>
<td>topologySpread for ingester pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>ingress.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td></td>
</tr>
<tr>
<td>ingress.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td>ingress.hosts[0]</td>
<td>string</td>
<td><code>"loki.example.com"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.distributor[0]</td>
<td>string</td>
<td><code>"/api/prom/push"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.distributor[1]</td>
<td>string</td>
<td><code>"/loki/api/v1/push"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.querier[0]</td>
<td>string</td>
<td><code>"/api/prom/tail"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.querier[1]</td>
<td>string</td>
<td><code>"/loki/api/v1/tail"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.query-frontend[0]</td>
<td>string</td>
<td><code>"/loki/api"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.ruler[0]</td>
<td>string</td>
<td><code>"/api/prom/rules"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.ruler[1]</td>
<td>string</td>
<td><code>"/loki/api/v1/rules"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.ruler[2]</td>
<td>string</td>
<td><code>"/prometheus/api/v1/rules"</code></td>
<td></td>
</tr>
<tr>
<td>ingress.paths.ruler[3]</td>
<td>string</td>
<td><code>"/prometheus/api/v1/alerts"</code></td>
<td></td>
</tr>
<tr>
<td>loki.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>If set, these annotations are added to all of the Kubernetes controllers (Deployments, StatefulSets, etc) that this chart launches. Use this to implement something like the "Wave" controller or another controller that is monitoring top level deployment resources.</td>
</tr>
<tr>
<td>loki.appProtocol</td>
<td>string</td>
<td><code>""</code></td>
<td>Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"</td>
</tr>
<tr>
<td>loki.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Common command override for all pods (except gateway)</td>
</tr>
<tr>
<td>loki.config</td>
<td>string</td>
<td>See values.yaml</td>
<td>Config file contents for Loki</td>
</tr>
<tr>
<td>loki.containerSecurityContext</td>
<td>object</td>
<td><code>{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true}</code></td>
<td>The SecurityContext for Loki containers</td>
</tr>
<tr>
<td>loki.existingSecretForConfig</td>
<td>string</td>
<td><code>""</code></td>
<td>Specify an existing secret containing loki configuration. If non-empty, overrides <code>loki.config</code></td>
</tr>
<tr>
<td>loki.image.pullPolicy</td>
<td>string</td>
<td><code>"IfNotPresent"</code></td>
<td>Docker image pull policy</td>
</tr>
<tr>
<td>loki.image.registry</td>
<td>string</td>
<td><code>"docker.io"</code></td>
<td>The Docker registry</td>
</tr>
<tr>
<td>loki.image.repository</td>
<td>string</td>
<td><code>"grafana/loki"</code></td>
<td>Docker image repository</td>
</tr>
<tr>
<td>loki.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Overrides the image tag whose default is the chart's appVersion</td>
</tr>
<tr>
<td>loki.livenessProbe.httpGet.path</td>
<td>string</td>
<td><code>"/ready"</code></td>
<td></td>
</tr>
<tr>
<td>loki.livenessProbe.httpGet.port</td>
<td>string</td>
<td><code>"http"</code></td>
<td></td>
</tr>
<tr>
<td>loki.livenessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>300</code></td>
<td></td>
</tr>
<tr>
<td>loki.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Common annotations for all pods</td>
</tr>
<tr>
<td>loki.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Common labels for all pods</td>
</tr>
<tr>
<td>loki.podSecurityContext</td>
<td>object</td>
<td><code>{"fsGroup":10001,"runAsGroup":10001,"runAsNonRoot":true,"runAsUser":10001}</code></td>
<td>The SecurityContext for Loki pods</td>
</tr>
<tr>
<td>loki.readinessProbe.httpGet.path</td>
<td>string</td>
<td><code>"/ready"</code></td>
<td></td>
</tr>
<tr>
<td>loki.readinessProbe.httpGet.port</td>
<td>string</td>
<td><code>"http"</code></td>
<td></td>
</tr>
<tr>
<td>loki.readinessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>30</code></td>
<td></td>
</tr>
<tr>
<td>loki.readinessProbe.timeoutSeconds</td>
<td>int</td>
<td><code>1</code></td>
<td></td>
</tr>
<tr>
<td>loki.revisionHistoryLimit</td>
<td>int</td>
<td><code>10</code></td>
<td>The number of old ReplicaSets to retain to allow rollback</td>
</tr>
<tr>
<td>loki.schemaConfig</td>
<td>object</td>
<td><code>{"configs":[{"from":"2020-09-07","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v11","store":"boltdb-shipper"}]}</code></td>
<td>Check <a href="https://grafana.com/docs/loki/latest/configuration/#schema_config">https://grafana.com/docs/loki/latest/configuration/#schema_config</a> for more info on how to configure schemas</td>
</tr>
<tr>
<td>loki.server.http_listen_port</td>
<td>int</td>
<td><code>3100</code></td>
<td>HTTP server listen port</td>
</tr>
<tr>
<td>loki.serviceAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Common annotations for all loki services</td>
</tr>
<tr>
<td>loki.storageConfig</td>
<td>object</td>
<td><code>{"boltdb_shipper":{"active_index_directory":"/var/loki/index","cache_location":"/var/loki/cache","cache_ttl":"168h","shared_store":"filesystem"},"filesystem":{"directory":"/var/loki/chunks"}}</code></td>
<td>Check <a href="https://grafana.com/docs/loki/latest/configuration/#storage_config">https://grafana.com/docs/loki/latest/configuration/#storage_config</a> for more info on how to configure storages</td>
</tr>
<tr>
<td>loki.structuredConfig</td>
<td>object</td>
<td><code>{}</code></td>
<td>Structured loki configuration, takes precedence over <code>loki.config</code>, <code>loki.schemaConfig</code>, <code>loki.storageConfig</code></td>
</tr>
<tr>
<td>memcached.appProtocol</td>
<td>string</td>
<td><code>""</code></td>
<td>Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"</td>
</tr>
<tr>
<td>memcached.containerSecurityContext</td>
<td>object</td>
<td><code>{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true}</code></td>
<td>The SecurityContext for memcached containers</td>
</tr>
<tr>
<td>memcached.image.pullPolicy</td>
<td>string</td>
<td><code>"IfNotPresent"</code></td>
<td>Memcached Docker image pull policy</td>
</tr>
<tr>
<td>memcached.image.registry</td>
<td>string</td>
<td><code>"docker.io"</code></td>
<td>The Docker registry for the memcached</td>
</tr>
<tr>
<td>memcached.image.repository</td>
<td>string</td>
<td><code>"memcached"</code></td>
<td>Memcached Docker image repository</td>
</tr>
<tr>
<td>memcached.image.tag</td>
<td>string</td>
<td><code>"1.6.17-alpine"</code></td>
<td>Memcached Docker image tag</td>
</tr>
<tr>
<td>memcached.livenessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>10</code></td>
<td></td>
</tr>
<tr>
<td>memcached.livenessProbe.tcpSocket.port</td>
<td>string</td>
<td><code>"http"</code></td>
<td></td>
</tr>
<tr>
<td>memcached.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached pods</td>
</tr>
<tr>
<td>memcached.podSecurityContext</td>
<td>object</td>
<td><code>{"fsGroup":11211,"runAsGroup":11211,"runAsNonRoot":true,"runAsUser":11211}</code></td>
<td>The SecurityContext for memcached pods</td>
</tr>
<tr>
<td>memcached.readinessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>5</code></td>
<td></td>
</tr>
<tr>
<td>memcached.readinessProbe.tcpSocket.port</td>
<td>string</td>
<td><code>"http"</code></td>
<td></td>
</tr>
<tr>
<td>memcached.readinessProbe.timeoutSeconds</td>
<td>int</td>
<td><code>1</code></td>
<td></td>
</tr>
<tr>
<td>memcached.serviceAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Common annotations for all memcached services</td>
</tr>
<tr>
<td>memcachedChunks.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for memcached-chunks pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>memcachedChunks.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the Memcached chunks cache should be enabled</td>
</tr>
<tr>
<td>memcachedChunks.extraArgs</td>
<td>list</td>
<td><code>["-I 32m"]</code></td>
<td>Additional CLI args for memcached-chunks</td>
</tr>
<tr>
<td>memcachedChunks.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>memcachedChunks.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which will persist cached data through restarts</td>
</tr>
<tr>
<td>memcachedChunks.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent or memory disk</td>
</tr>
<tr>
<td>memcachedChunks.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>memcachedChunks.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedChunks.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for memcached-chunks</td>
</tr>
<tr>
<td>memcachedChunks.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for memcached-chunks</td>
</tr>
<tr>
<td>memcachedChunks.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-chunks service</td>
</tr>
<tr>
<td>memcachedChunks.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow memcached-chunks to shutdown before it is killed</td>
</tr>
<tr>
<td>memcachedChunks.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for memcached-chunks pods</td>
</tr>
<tr>
<td>memcachedExporter.containerSecurityContext</td>
<td>object</td>
<td><code>{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true}</code></td>
<td>The SecurityContext for memcachedExporter containers</td>
</tr>
<tr>
<td>memcachedExporter.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the Memcached Exporter should be enabled</td>
</tr>
<tr>
<td>memcachedExporter.image.pullPolicy</td>
<td>string</td>
<td><code>"IfNotPresent"</code></td>
<td>Memcached Exporter Docker image pull policy</td>
</tr>
<tr>
<td>memcachedExporter.image.registry</td>
<td>string</td>
<td><code>"docker.io"</code></td>
<td>The Docker registry for the Memcached Exporter</td>
</tr>
<tr>
<td>memcachedExporter.image.repository</td>
<td>string</td>
<td><code>"prom/memcached-exporter"</code></td>
<td>Memcached Exporter Docker image repository</td>
</tr>
<tr>
<td>memcachedExporter.image.tag</td>
<td>string</td>
<td><code>"v0.6.0"</code></td>
<td>Memcached Exporter Docker image tag</td>
</tr>
<tr>
<td>memcachedExporter.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-exporter pods</td>
</tr>
<tr>
<td>memcachedExporter.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Memcached Exporter resource requests and limits</td>
</tr>
<tr>
<td>memcachedFrontend.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for memcached-frontend pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>memcachedFrontend.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the Memcached frontend cache should be enabled</td>
</tr>
<tr>
<td>memcachedFrontend.extraArgs</td>
<td>list</td>
<td><code>["-I 32m"]</code></td>
<td>Additional CLI args for memcached-frontend</td>
</tr>
<tr>
<td>memcachedFrontend.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.maxUnavailable</td>
<td>int</td>
<td><code>1</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>memcachedFrontend.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which will persist cached data through restarts</td>
</tr>
<tr>
<td>memcachedFrontend.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent or memory disk</td>
</tr>
<tr>
<td>memcachedFrontend.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>memcachedFrontend.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedFrontend.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for memcached-frontend</td>
</tr>
<tr>
<td>memcachedFrontend.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for memcached-frontend</td>
</tr>
<tr>
<td>memcachedFrontend.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-frontend service</td>
</tr>
<tr>
<td>memcachedFrontend.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow memcached-frontend to shutdown before it is killed</td>
</tr>
<tr>
<td>memcachedFrontend.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for memcached-frontend pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for memcached-index-queries pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>memcachedIndexQueries.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the Memcached index queries cache should be enabled</td>
</tr>
<tr>
<td>memcachedIndexQueries.extraArgs</td>
<td>list</td>
<td><code>["-I 32m"]</code></td>
<td>Additional CLI args for memcached-index-queries</td>
</tr>
<tr>
<td>memcachedIndexQueries.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>memcachedIndexQueries.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which will persist cached data through restarts</td>
</tr>
<tr>
<td>memcachedIndexQueries.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent or memory disk</td>
</tr>
<tr>
<td>memcachedIndexQueries.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>memcachedIndexQueries.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexQueries.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for memcached-index-queries</td>
</tr>
<tr>
<td>memcachedIndexQueries.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for memcached-index-queries</td>
</tr>
<tr>
<td>memcachedIndexQueries.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-index-queries service</td>
</tr>
<tr>
<td>memcachedIndexQueries.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow memcached-index-queries to shutdown before it is killed</td>
</tr>
<tr>
<td>memcachedIndexQueries.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for memcached-index-queries pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for memcached-index-writes pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>memcachedIndexWrites.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the Memcached index writes cache should be enabled</td>
</tr>
<tr>
<td>memcachedIndexWrites.extraArgs</td>
<td>list</td>
<td><code>["-I 32m"]</code></td>
<td>Additional CLI args for memcached-index-writes</td>
</tr>
<tr>
<td>memcachedIndexWrites.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>memcachedIndexWrites.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which will persist cached data through restarts</td>
</tr>
<tr>
<td>memcachedIndexWrites.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent or memory disk</td>
</tr>
<tr>
<td>memcachedIndexWrites.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>memcachedIndexWrites.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for memcached-index-writes pods</td>
</tr>
<tr>
<td>memcachedIndexWrites.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for memcached-index-writes</td>
</tr>
<tr>
<td>memcachedIndexWrites.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for memcached-index-writes</td>
</tr>
<tr>
<td>memcachedIndexWrites.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for memcached-index-writes service</td>
</tr>
<tr>
<td>memcachedIndexWrites.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow memcached-index-writes to shutdown before it is killed</td>
</tr>
<tr>
<td>memcachedIndexWrites.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for memcached-index-writes pods</td>
</tr>
<tr>
<td>nameOverride</td>
<td>string</td>
<td><code>nil</code></td>
<td>Overrides the chart's name</td>
</tr>
<tr>
<td>networkPolicy.alertmanager.namespaceSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the namespace the alertmanager is running in</td>
</tr>
<tr>
<td>networkPolicy.alertmanager.podSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the alertmanager Pods. As this is cross-namespace communication, you also need the namespaceSelector.</td>
</tr>
<tr>
<td>networkPolicy.alertmanager.port</td>
<td>int</td>
<td><code>9093</code></td>
<td>Specify the alertmanager port used for alerting</td>
</tr>
<tr>
<td>networkPolicy.discovery.namespaceSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the namespace the discovery Pods are running in</td>
</tr>
<tr>
<td>networkPolicy.discovery.podSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the Pods labels used for discovery. As this is cross-namespace communication, you also need the namespaceSelector.</td>
</tr>
<tr>
<td>networkPolicy.discovery.port</td>
<td>string</td>
<td><code>nil</code></td>
<td>Specify the port used for discovery</td>
</tr>
<tr>
<td>networkPolicy.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether Network Policies should be created</td>
</tr>
<tr>
<td>networkPolicy.externalStorage.cidrs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Specifies specific network CIDRs you want to limit access to</td>
</tr>
<tr>
<td>networkPolicy.externalStorage.ports</td>
<td>list</td>
<td><code>[]</code></td>
<td>Specify the port used for external storage, e.g. AWS S3</td>
</tr>
<tr>
<td>networkPolicy.ingress.namespaceSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the namespaces which are allowed to access the http port</td>
</tr>
<tr>
<td>networkPolicy.ingress.podSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the Pods which are allowed to access the http port. As this is cross-namespace communication, you also need the namespaceSelector.</td>
</tr>
<tr>
<td>networkPolicy.metrics.cidrs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Specifies specific network CIDRs which are allowed to access the metrics port. In case you use namespaceSelector, you also have to specify your kubelet networks here. The metrics ports are also used for probes.</td>
</tr>
<tr>
<td>networkPolicy.metrics.namespaceSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the namespaces which are allowed to access the metrics port</td>
</tr>
<tr>
<td>networkPolicy.metrics.podSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Specifies the Pods which are allowed to access the metrics port. As this is cross-namespace communication, you also need the namespaceSelector.</td>
</tr>
<tr>
<td>prometheusRule.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>PrometheusRule annotations</td>
</tr>
<tr>
<td>prometheusRule.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>If enabled, a PrometheusRule resource for Prometheus Operator is created</td>
</tr>
<tr>
<td>prometheusRule.groups</td>
<td>list</td>
<td><code>[]</code></td>
<td>Contents of Prometheus rules file</td>
</tr>
<tr>
<td>prometheusRule.labels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Additional PrometheusRule labels</td>
</tr>
<tr>
<td>prometheusRule.namespace</td>
<td>string</td>
<td><code>nil</code></td>
<td>Alternative namespace for the PrometheusRule resource</td>
</tr>
<tr>
<td>querier.affinity</td>
<td>object</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for querier pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>querier.appProtocol</td>
<td>object</td>
<td><code>{"grpc":""}</code></td>
<td>Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.</td>
</tr>
<tr>
<td>querier.appProtocol.grpc</td>
<td>string</td>
<td><code>""</code></td>
<td>Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"</td>
</tr>
<tr>
<td>querier.autoscaling.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable autoscaling for the querier, this is only used if <code>indexGateway.enabled: true</code></td>
</tr>
<tr>
<td>querier.autoscaling.maxReplicas</td>
<td>int</td>
<td><code>3</code></td>
<td>Maximum autoscaling replicas for the querier</td>
</tr>
<tr>
<td>querier.autoscaling.minReplicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Minimum autoscaling replicas for the querier</td>
</tr>
<tr>
<td>querier.autoscaling.targetCPUUtilizationPercentage</td>
<td>int</td>
<td><code>60</code></td>
<td>Target CPU utilisation percentage for the querier</td>
</tr>
<tr>
<td>querier.autoscaling.targetMemoryUtilizationPercentage</td>
<td>string</td>
<td><code>nil</code></td>
<td>Target memory utilisation percentage for the querier</td>
</tr>
<tr>
<td>querier.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>querier.dnsConfig</td>
<td>object</td>
<td><code>{}</code></td>
<td>DNSConfig for querier pods</td>
</tr>
<tr>
<td>querier.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the querier</td>
</tr>
<tr>
<td>querier.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the querier pods</td>
</tr>
<tr>
<td>querier.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the querier pods</td>
</tr>
<tr>
<td>querier.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the querier pods</td>
</tr>
<tr>
<td>querier.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the querier pods</td>
</tr>
<tr>
<td>querier.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the querier pods</td>
</tr>
<tr>
<td>querier.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the querier image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>querier.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the querier image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>querier.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the querier image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>querier.initContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Init containers to add to the querier pods</td>
</tr>
<tr>
<td>querier.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>querier.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for querier pods</td>
</tr>
<tr>
<td>querier.persistence.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for querier PVCs</td>
</tr>
<tr>
<td>querier.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs for the querier cache</td>
</tr>
<tr>
<td>querier.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent disk</td>
</tr>
<tr>
<td>querier.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>querier.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for querier pods</td>
</tr>
<tr>
<td>querier.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for querier pods</td>
</tr>
<tr>
<td>querier.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for querier pods</td>
</tr>
<tr>
<td>querier.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the querier</td>
</tr>
<tr>
<td>querier.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the querier</td>
</tr>
<tr>
<td>querier.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for querier service</td>
</tr>
<tr>
<td>querier.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the querier to shutdown before it is killed</td>
</tr>
<tr>
<td>querier.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for querier pods</td>
</tr>
<tr>
<td>querier.topologySpreadConstraints</td>
<td>string</td>
<td>Defaults to allow skew no more then 1 node per AZ</td>
<td>topologySpread for querier pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>queryFrontend.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for query-frontend pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>queryFrontend.appProtocol</td>
<td>object</td>
<td><code>{"grpc":""}</code></td>
<td>Adds the appProtocol field to the queryFrontend service. This allows queryFrontend to work with istio protocol selection.</td>
</tr>
<tr>
<td>queryFrontend.appProtocol.grpc</td>
<td>string</td>
<td><code>""</code></td>
<td>Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"</td>
</tr>
<tr>
<td>queryFrontend.autoscaling.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable autoscaling for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.autoscaling.maxReplicas</td>
<td>int</td>
<td><code>3</code></td>
<td>Maximum autoscaling replicas for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.autoscaling.minReplicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Minimum autoscaling replicas for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.autoscaling.targetCPUUtilizationPercentage</td>
<td>int</td>
<td><code>60</code></td>
<td>Target CPU utilisation percentage for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.autoscaling.targetMemoryUtilizationPercentage</td>
<td>string</td>
<td><code>nil</code></td>
<td>Target memory utilisation percentage for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>queryFrontend.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the query-frontend image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>queryFrontend.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the query-frontend image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>queryFrontend.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the query-frontend image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>queryFrontend.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>queryFrontend.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for query-frontend pods</td>
</tr>
<tr>
<td>queryFrontend.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the query-frontend</td>
</tr>
<tr>
<td>queryFrontend.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for query-frontend service</td>
</tr>
<tr>
<td>queryFrontend.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the query-frontend to shutdown before it is killed</td>
</tr>
<tr>
<td>queryFrontend.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for query-frontend pods</td>
</tr>
<tr>
<td>queryScheduler.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for query-scheduler pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>queryScheduler.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the query-scheduler should be decoupled from the query-frontend</td>
</tr>
<tr>
<td>queryScheduler.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the query-scheduler</td>
</tr>
<tr>
<td>queryScheduler.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the query-scheduler image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>queryScheduler.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the query-scheduler image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>queryScheduler.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the query-scheduler image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>queryScheduler.maxUnavailable</td>
<td>int</td>
<td><code>1</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>queryScheduler.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for query-scheduler pods</td>
</tr>
<tr>
<td>queryScheduler.replicas</td>
<td>int</td>
<td><code>2</code></td>
<td>Number of replicas for the query-scheduler. It should be lower than <code>-querier.max-concurrent</code> to avoid generating back-pressure in queriers; it's also recommended that this value evenly divides the latter</td>
</tr>
<tr>
<td>queryScheduler.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the query-scheduler</td>
</tr>
<tr>
<td>queryScheduler.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for query-scheduler service</td>
</tr>
<tr>
<td>queryScheduler.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the query-scheduler to shutdown before it is killed</td>
</tr>
<tr>
<td>queryScheduler.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for query-scheduler pods</td>
</tr>
<tr>
<td>rbac.pspEnabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp.</td>
</tr>
<tr>
<td>rbac.sccEnabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to use the SecurityContextConstraints.</td>
</tr>
<tr>
<td>ruler.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for ruler pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>ruler.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>ruler.directories</td>
<td>object</td>
<td><code>{}</code></td>
<td>Directories containing rules files</td>
</tr>
<tr>
<td>ruler.dnsConfig</td>
<td>object</td>
<td><code>{}</code></td>
<td>DNSConfig for ruler pods</td>
</tr>
<tr>
<td>ruler.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the ruler should be enabled</td>
</tr>
<tr>
<td>ruler.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the ruler</td>
</tr>
<tr>
<td>ruler.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the ruler pods</td>
</tr>
<tr>
<td>ruler.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the ruler pods</td>
</tr>
<tr>
<td>ruler.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the ruler pods</td>
</tr>
<tr>
<td>ruler.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the ruler pods</td>
</tr>
<tr>
<td>ruler.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the ruler pods</td>
</tr>
<tr>
<td>ruler.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the ruler image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>ruler.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the ruler image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>ruler.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the ruler image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>ruler.initContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Init containers to add to the ruler pods</td>
</tr>
<tr>
<td>ruler.kind</td>
<td>string</td>
<td><code>"Deployment"</code></td>
<td>Kind of deployment [StatefulSet/Deployment]</td>
</tr>
<tr>
<td>ruler.maxUnavailable</td>
<td>string</td>
<td><code>nil</code></td>
<td>Pod Disruption Budget maxUnavailable</td>
</tr>
<tr>
<td>ruler.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for ruler pods</td>
</tr>
<tr>
<td>ruler.persistence.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for ruler PVCs</td>
</tr>
<tr>
<td>ruler.persistence.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable creating PVCs which is required when using recording rules</td>
</tr>
<tr>
<td>ruler.persistence.size</td>
<td>string</td>
<td><code>"10Gi"</code></td>
<td>Size of persistent disk</td>
</tr>
<tr>
<td>ruler.persistence.storageClass</td>
<td>string</td>
<td><code>nil</code></td>
<td>Storage class to be used. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If empty or set to null, no storageClassName spec is set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).</td>
</tr>
<tr>
<td>ruler.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for ruler pods</td>
</tr>
<tr>
<td>ruler.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for compactor pods</td>
</tr>
<tr>
<td>ruler.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for ruler pods</td>
</tr>
<tr>
<td>ruler.replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the ruler</td>
</tr>
<tr>
<td>ruler.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the ruler</td>
</tr>
<tr>
<td>ruler.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for ruler service</td>
</tr>
<tr>
<td>ruler.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>300</code></td>
<td>Grace period to allow the ruler to shutdown before it is killed</td>
</tr>
<tr>
<td>ruler.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for ruler pods</td>
</tr>
<tr>
<td>runtimeConfig</td>
<td>object</td>
<td><code>{}</code></td>
<td>Provides a reloadable runtime configuration file for some specific configuration</td>
</tr>
<tr>
<td>serviceAccount.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for the service account</td>
</tr>
<tr>
<td>serviceAccount.automountServiceAccountToken</td>
<td>bool</td>
<td><code>true</code></td>
<td>Set this toggle to false to opt out of automounting API credentials for the service account</td>
</tr>
<tr>
<td>serviceAccount.create</td>
<td>bool</td>
<td><code>true</code></td>
<td>Specifies whether a ServiceAccount should be created</td>
</tr>
<tr>
<td>serviceAccount.imagePullSecrets</td>
<td>list</td>
<td><code>[]</code></td>
<td>Image pull secrets for the service account</td>
</tr>
<tr>
<td>serviceAccount.name</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the ServiceAccount to use. If not set and create is true, a name is generated using the fullname template</td>
</tr>
<tr>
<td>serviceMonitor.annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>ServiceMonitor annotations</td>
</tr>
<tr>
<td>serviceMonitor.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>If enabled, ServiceMonitor resources for Prometheus Operator are created</td>
</tr>
<tr>
<td>serviceMonitor.interval</td>
<td>string</td>
<td><code>nil</code></td>
<td>ServiceMonitor scrape interval</td>
</tr>
<tr>
<td>serviceMonitor.labels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Additional ServiceMonitor labels</td>
</tr>
<tr>
<td>serviceMonitor.metricRelabelings</td>
<td>list</td>
<td><code>[]</code></td>
<td>ServiceMonitor metric relabel configs to apply to samples before ingestion <a href="https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint">https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint</a></td>
</tr>
<tr>
<td>serviceMonitor.namespace</td>
<td>string</td>
<td><code>nil</code></td>
<td>Alternative namespace for ServiceMonitor resources</td>
</tr>
<tr>
<td>serviceMonitor.namespaceSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Namespace selector for ServiceMonitor resources</td>
</tr>
<tr>
<td>serviceMonitor.relabelings</td>
<td>list</td>
<td><code>[]</code></td>
<td>ServiceMonitor relabel configs to apply to samples before scraping <a href="https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig">https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig</a></td>
</tr>
<tr>
<td>serviceMonitor.scheme</td>
<td>string</td>
<td><code>"http"</code></td>
<td>ServiceMonitor will use http by default, but you can pick https as well</td>
</tr>
<tr>
<td>serviceMonitor.scrapeTimeout</td>
<td>string</td>
<td><code>nil</code></td>
<td>ServiceMonitor scrape timeout in Go duration format (e.g. 15s)</td>
</tr>
<tr>
<td>serviceMonitor.targetLabels</td>
<td>list</td>
<td><code>[]</code></td>
<td>ServiceMonitor will add labels from the service to the Prometheus metric <a href="https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec">https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec</a></td>
</tr>
<tr>
<td>serviceMonitor.tlsConfig</td>
<td>string</td>
<td><code>nil</code></td>
<td>ServiceMonitor will use these tlsConfig settings to make the health check requests</td>
</tr>
<tr>
<td>tableManager.affinity</td>
<td>string</td>
<td>Hard node and soft zone anti-affinity</td>
<td>Affinity for table-manager pods. Passed through <code>tpl</code> and, thus, to be configured as string</td>
</tr>
<tr>
<td>tableManager.command</td>
<td>string</td>
<td><code>nil</code></td>
<td>Command to execute instead of defined in Docker image</td>
</tr>
<tr>
<td>tableManager.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Specifies whether the table-manager should be enabled</td>
</tr>
<tr>
<td>tableManager.extraArgs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Additional CLI args for the table-manager</td>
</tr>
<tr>
<td>tableManager.extraContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Containers to add to the table-manager pods</td>
</tr>
<tr>
<td>tableManager.extraEnv</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables to add to the table-manager pods</td>
</tr>
<tr>
<td>tableManager.extraEnvFrom</td>
<td>list</td>
<td><code>[]</code></td>
<td>Environment variables from secrets or configmaps to add to the table-manager pods</td>
</tr>
<tr>
<td>tableManager.extraVolumeMounts</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volume mounts to add to the table-manager pods</td>
</tr>
<tr>
<td>tableManager.extraVolumes</td>
<td>list</td>
<td><code>[]</code></td>
<td>Volumes to add to the table-manager pods</td>
</tr>
<tr>
<td>tableManager.image.registry</td>
<td>string</td>
<td><code>nil</code></td>
<td>The Docker registry for the table-manager image. Overrides <code>loki.image.registry</code></td>
</tr>
<tr>
<td>tableManager.image.repository</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image repository for the table-manager image. Overrides <code>loki.image.repository</code></td>
</tr>
<tr>
<td>tableManager.image.tag</td>
<td>string</td>
<td><code>nil</code></td>
<td>Docker image tag for the table-manager image. Overrides <code>loki.image.tag</code></td>
</tr>
<tr>
<td>tableManager.nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Node selector for table-manager pods</td>
</tr>
<tr>
<td>tableManager.podAnnotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Annotations for table-manager pods</td>
</tr>
<tr>
<td>tableManager.podLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for table-manager pods</td>
</tr>
<tr>
<td>tableManager.priorityClassName</td>
<td>string</td>
<td><code>nil</code></td>
<td>The name of the PriorityClass for table-manager pods</td>
</tr>
<tr>
<td>tableManager.resources</td>
<td>object</td>
<td><code>{}</code></td>
<td>Resource requests and limits for the table-manager</td>
</tr>
<tr>
<td>tableManager.serviceLabels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Labels for table-manager service</td>
</tr>
<tr>
<td>tableManager.terminationGracePeriodSeconds</td>
<td>int</td>
<td><code>30</code></td>
<td>Grace period to allow the table-manager to shutdown before it is killed</td>
</tr>
<tr>
<td>tableManager.tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Tolerations for table-manager pods</td>
</tr>
</tbody>
</table>
<h2 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h2>
<p>The chart supports the components shown in the following table.
Ingester, distributor, querier, and query-frontend are always installed.
The other components are optional.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Optional</th>
<th>Enabled by default</th>
</tr>
</thead>
<tbody>
<tr>
<td>gateway</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>ingester</td>
<td>❎</td>
<td>n/a</td>
</tr>
<tr>
<td>distributor</td>
<td>❎</td>
<td>n/a</td>
</tr>
<tr>
<td>querier</td>
<td>❎</td>
<td>n/a</td>
</tr>
<tr>
<td>query-frontend</td>
<td>❎</td>
<td>n/a</td>
</tr>
<tr>
<td>table-manager</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>compactor</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>ruler</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>index-gateway</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>memcached-chunks</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>memcached-frontend</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>memcached-index-queries</td>
<td>✅</td>
<td>❎</td>
</tr>
<tr>
<td>memcached-index-writes</td>
<td>✅</td>
<td>❎</td>
</tr>
</tbody>
</table>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p>This chart configures Loki in microservices mode.
It has been tested to work with <a href="https://grafana.com/docs/loki/latest/operations/storage/boltdb-shipper/">boltdb-shipper</a>
and <a href="https://grafana.com/docs/loki/latest/configuration/#memberlist_config">memberlist</a> while other storage and discovery options should work as well.
However, the chart does not support setting up Consul or Etcd for discovery,
and it is not intended to support these going forward.
They would have to be set up separately.
Instead, memberlist can be used which does not require a separate key/value store.
The chart creates a headless service for the memberlist which ingester, distributor, querier, and ruler are part of.</p>
<hr />
<p><strong>NOTE:</strong>
In its default configuration, the chart uses <code>boltdb-shipper</code> and <code>filesystem</code> as storage.
The reason for this is that the chart can be validated and installed in a CI pipeline.
However, this setup is not fully functional.
Querying will not be possible (or limited to the ingesters' in-memory caches) because that would otherwise require shared storage between ingesters and queriers
which the chart does not support and would require a volume that supports <code>ReadWriteMany</code> access mode anyways.
The recommendation is to use object storage, such as S3, GCS, MinIO, etc., or one of the other options documented at <a href="https://grafana.com/docs/loki/latest/storage/">https://grafana.com/docs/loki/latest/storage/</a>.</p>
<p>Alternatively, in order to quickly test Loki using the filestore, the <a href="https://github.com/grafana/helm-charts/tree/main/charts/loki">single binary chart</a> can be used.</p>
<hr />
<h3 id="directory-and-file-locations">Directory and File Locations<a class="headerlink" href="#directory-and-file-locations" title="Permanent link">&para;</a></h3>
<ul>
<li>Volumes are mounted to <code>/var/loki</code>. The various directories Loki needs should be configured as subdirectories (e. g. <code>/var/loki/index</code>, <code>/var/loki/cache</code>). Loki will create the directories automatically.</li>
<li>The config file is mounted to <code>/etc/loki/config/config.yaml</code> and passed as CLI arg.</li>
</ul>
<h3 id="example-configuration-using-memberlist-boltdb-shipper-and-s3-for-storage">Example configuration using memberlist, boltdb-shipper, and S3 for storage<a class="headerlink" href="#example-configuration-using-memberlist-boltdb-shipper-and-s3-for-storage" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="nt">structuredConfig</span><span class="p">:</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nt">ingester</span><span class="p">:</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">      </span><span class="c1"># Disable chunk transfer which is not possible with statefulsets</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">      </span><span class="c1"># and unnecessary for boltdb-shipper</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">      </span><span class="nt">max_transfer_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">      </span><span class="nt">chunk_idle_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">      </span><span class="nt">chunk_target_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1536000</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">      </span><span class="nt">max_chunk_age</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="nt">storage_config</span><span class="p">:</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">      </span><span class="nt">aws</span><span class="p">:</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="nt">s3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://eu-central-1</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">        </span><span class="nt">bucketnames</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-loki-s3-bucket</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">      </span><span class="nt">boltdb_shipper</span><span class="p">:</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">        </span><span class="nt">shared_store</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="nt">schema_config</span><span class="p">:</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">      </span><span class="nt">configs</span><span class="p">:</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2020-09-07</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">          </span><span class="nt">store</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boltdb-shipper</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">          </span><span class="nt">object_store</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">          </span><span class="nt">schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v11</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">          </span><span class="nt">index</span><span class="p">:</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">            </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">loki_index_</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">            </span><span class="nt">period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24h</span>
</span></code></pre></div>
<p>The above configuration selectively overrides default values found in the <code>loki.config</code> template file.</p>
<p>Using <code>loki.structuredConfig</code> it is possible to externally set most any configuration parameter (special considerations for elements of an array).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>helm upgrade loki-distributed --install -f values.yaml --set loki.structuredConfig.storage_config.aws.bucketnames=my-loki-bucket
</span></code></pre></div>
<p><code>loki.config</code>, <code>loki.schemaConfig</code> and <code>loki.storageConfig</code> may also be used in conjuction with <code>loki.structuredConfig</code>. Values found in <code>loki.structuredConfig</code> will take precedence. Array values, such as those found in <code>loki.schema_config</code> will be overridden wholesale and not amended to.</p>
<p>For <code>loki.schema_config</code> its generally expected that this will always be configured per usage as its values over time are in reference to the history of loki schema versions and schema configurations throughout the lifetime of a given loki instance.</p>
<p>Note that when using <code>loki.config</code> must be configured as string.
That's required because it is passed through the <code>tpl</code> function in order to support templating.</p>
<p>When using <code>loki.config</code> the passed in template must include template sections for <code>loki.schemaConfig</code> and <code>loki.storageConfig</code> for those to continue to work as expected.</p>
<p>Because the config file is templated, it is also possible to reference other values provided to helm e.g. externalize S3 bucket names:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="no">storage_config:</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">      </span><span class="no">aws:</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">        </span><span class="no">s3: s3://eu-central-1</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">        </span><span class="no">bucketnames: {{ .Values.bucketnames }}</span>
</span></code></pre></div>
<div class="language-console highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="go">helm upgrade loki-distributed --install -f values.yaml --set bucketnames=my-loki-bucket</span>
</span></code></pre></div>
<h2 id="gateway">Gateway<a class="headerlink" href="#gateway" title="Permanent link">&para;</a></h2>
<p>By default and inspired by Grafana's <a href="https://github.com/grafana/loki/tree/master/production/ksonnet/loki">Tanka setup</a>, the chart installs the gateway component which is an NGINX that exposes Loki's API
and automatically proxies requests to the correct Loki components (distributor, querier, query-frontend).
The gateway must be enabled if an Ingress is required, since the Ingress exposes the gateway only.
If the gateway is enabled, Grafana and log shipping agents, such as Promtail, should be configured to use the gateway.
If NetworkPolicies are enabled, they are more restrictive if the gateway is enabled.</p>
<h2 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h2>
<p>Loki exposes Prometheus metrics.
The chart can create ServiceMonitor objects for all Loki components.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">serviceMonitor</span><span class="p">:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<p>Furthermore, it is possible to add Prometheus rules:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">prometheusRule</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nt">groups</span><span class="p">:</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">loki-rules</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">      </span><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job:loki_request_duration_seconds_bucket:sum_rate</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">          </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job_route:loki_request_duration_seconds_bucket:sum_rate</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">          </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">          </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)</span>
</span></code></pre></div>
<h2 id="caching">Caching<a class="headerlink" href="#caching" title="Permanent link">&para;</a></h2>
<p>The chart can configure up to four Memcached instances for the various caches Lokis can use.
Configuration works the same for all caches.
The configuration of <code>memcached-chunks</code> below demonstrates setting additional options.</p>
<p>Exporters for the Memcached instances can be configured as well.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">memcachedExporter</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<h3 id="memcached-chunks">memcached-chunks<a class="headerlink" href="#memcached-chunks" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">memcachedChunks</span><span class="p">:</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="nt">extraArgs</span><span class="p">:</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-m 2048</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-I 2m</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-v</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">  </span><span class="nt">resources</span><span class="p">:</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="nt">requests</span><span class="p">:</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">      </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">      </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3Gi</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">    </span><span class="nt">limits</span><span class="p">:</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">      </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2&quot;</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">      </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3Gi</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w">    </span><span class="no">chunk_store_config:</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">      </span><span class="no">chunk_cache_config:</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">        </span><span class="no">memcached:</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="w">          </span><span class="no">batch_size: 100</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="w">          </span><span class="no">parallelism: 100</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="w">        </span><span class="no">memcached_client:</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="w">          </span><span class="no">consistent_hash: true</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="w">          </span><span class="no">host: {{ include &quot;loki.memcachedChunksFullname&quot; . }}</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="w">          </span><span class="no">service: memcached-client</span>
</span></code></pre></div>
<h3 id="memcached-frontend">memcached-frontend<a class="headerlink" href="#memcached-frontend" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">memcachedFrontend</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="no">query_range:</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">      </span><span class="no">cache_results: true</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">      </span><span class="no">results_cache:</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="no">cache:</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">          </span><span class="no">memcached_client:</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">            </span><span class="no">consistent_hash: true</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">            </span><span class="no">host: {{ include &quot;loki.memcachedFrontendFullname&quot; . }}</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">            </span><span class="no">max_idle_conns: 16</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">            </span><span class="no">service: memcached-client</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">            </span><span class="no">timeout: 500ms</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">            </span><span class="no">update_interval: 1m</span>
</span></code></pre></div>
<h3 id="memcached-index-queries">memcached-index-queries<a class="headerlink" href="#memcached-index-queries" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">memcachedIndexQueries</span><span class="p">:</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="no">storage_config:</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">      </span><span class="no">index_queries_cache_config:</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">        </span><span class="no">memcached:</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">          </span><span class="no">batch_size: 100</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">          </span><span class="no">parallelism: 100</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">        </span><span class="no">memcached_client:</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">          </span><span class="no">consistent_hash: true</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">          </span><span class="no">host: {{ include &quot;loki.memcachedIndexQueriesFullname&quot; . }}</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">          </span><span class="no">service: memcached-client</span>
</span></code></pre></div>
<h3 id="memcached-index-writes">memcached-index-writes<a class="headerlink" href="#memcached-index-writes" title="Permanent link">&para;</a></h3>
<p>NOTE: This cache is not used with <code>boltdb-shipper</code> and should not be enabled in that case.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">memcachedIndexWrite</span><span class="p">:</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="no">chunk_store_config:</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">      </span><span class="no">write_dedupe_cache_config:</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">        </span><span class="no">memcached:</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">          </span><span class="no">batch_size: 100</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">          </span><span class="no">parallelism: 100</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">        </span><span class="no">memcached_client:</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">          </span><span class="no">consistent_hash: true</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">          </span><span class="no">host: {{ include &quot;loki.memcachedIndexWritesFullname&quot; . }}</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">          </span><span class="no">service: memcached-client</span>
</span></code></pre></div>
<h2 id="compactor">Compactor<a class="headerlink" href="#compactor" title="Permanent link">&para;</a></h2>
<p>Compactor is an optional component which must explicitly be enabled.
The chart automatically sets the correct working directory as command-line arg.
The correct storage backend must be configured, e.g. <code>s3</code>.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">compactor</span><span class="p">:</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nt">loki</span><span class="p">:</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="no">compactor:</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">      </span><span class="no">shared_store: s3</span>
</span></code></pre></div>
<h2 id="ruler">Ruler<a class="headerlink" href="#ruler" title="Permanent link">&para;</a></h2>
<p>Ruler is an optional component which must explicitly be enabled.
In addition to installing the ruler, the chart also supports creating rules.
Rules files must be added to directories named after the tenants.
See <code>values.yaml</code> for a more detailed example.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">ruler</span><span class="p">:</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">  </span><span class="nt">directories</span><span class="p">:</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="nt">fake</span><span class="p">:</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">      </span><span class="nt">rules.txt</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">        </span><span class="no">groups:</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">          </span><span class="no">- name: should_fire</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">            </span><span class="no">rules:</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">              </span><span class="no">- alert: HighPercentageError</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">                </span><span class="no">expr: |</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">                  </span><span class="no">sum(rate({app=&quot;loki&quot;} |= &quot;error&quot; [5m])) by (job)</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">                    </span><span class="no">/</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="w">                  </span><span class="no">sum(rate({app=&quot;loki&quot;}[5m])) by (job)</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">                    </span><span class="no">&gt; 0.05</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="w">                </span><span class="no">for: 10m</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="w">                </span><span class="no">labels:</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">                  </span><span class="no">severity: warning</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="w">                </span><span class="no">annotations:</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="w">                  </span><span class="no">summary: High error percentage</span>
</span></code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../loki-canary/" class="md-footer__link md-footer__link--prev" aria-label="上一页: loki-canary" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  上一页
                </span>
                loki-canary
              </div>
            </div>
          </a>
        
        
          
          <a href="../loki-stack/" class="md-footer__link md-footer__link--next" aria-label="下一页: Loki-Stack Helm Chart" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  下一页
                </span>
                Loki-Stack Helm Chart
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>