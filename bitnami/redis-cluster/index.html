
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../rabbitmq/">
      
      
        <link rel="next" href="../redis/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Redis cluster - Helm Charts Hub</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bitnami-package-for-redisr-cluster" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Helm Charts Hub
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Redis cluster
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sir5kong/helm-charts-hub" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sir5kong/helm-charts-hub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Helm Charts Hub
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../chart-list/" class="md-tabs__link">
      Chart 列表
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Bitnami
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../grafana/" class="md-tabs__link">
        Grafana
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ingress-nginx/" class="md-tabs__link">
        Ingress nginx
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../prometheus-community/" class="md-tabs__link">
        Prometheus community
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../sir5kong/" class="md-tabs__link">
        Sir5kong
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Helm Charts Hub
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sir5kong/helm-charts-hub" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sir5kong/helm-charts-hub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Helm Charts Hub
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../chart-list/" class="md-nav__link">
        Chart 列表
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Bitnami</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Bitnami" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Bitnami
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apache/" class="md-nav__link">
        Apache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apisix/" class="md-nav__link">
        Apisix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appsmith/" class="md-nav__link">
        Appsmith
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-cd/" class="md-nav__link">
        Argo cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-workflows/" class="md-nav__link">
        Argo workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aspnet-core/" class="md-nav__link">
        Aspnet core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cassandra/" class="md-nav__link">
        Cassandra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cert-manager/" class="md-nav__link">
        Cert manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clickhouse/" class="md-nav__link">
        Clickhouse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        Bitnami Common Library Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concourse/" class="md-nav__link">
        Concourse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consul/" class="md-nav__link">
        Consul
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contour/" class="md-nav__link">
        Contour
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../discourse/" class="md-nav__link">
        Discourse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dokuwiki/" class="md-nav__link">
        Dokuwiki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../drupal/" class="md-nav__link">
        Drupal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ejbca/" class="md-nav__link">
        Ejbca
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch/" class="md-nav__link">
        Elasticsearch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../etcd/" class="md-nav__link">
        Etcd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../external-dns/" class="md-nav__link">
        External dns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flink/" class="md-nav__link">
        Flink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fluent-bit/" class="md-nav__link">
        Fluent bit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fluentd/" class="md-nav__link">
        Fluentd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flux/" class="md-nav__link">
        Flux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ghost/" class="md-nav__link">
        Ghost
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gitea/" class="md-nav__link">
        Gitea
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-loki/" class="md-nav__link">
        Grafana loki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-mimir/" class="md-nav__link">
        Grafana mimir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-operator/" class="md-nav__link">
        Grafana operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-tempo/" class="md-nav__link">
        Grafana tempo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana/" class="md-nav__link">
        Grafana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../haproxy/" class="md-nav__link">
        Haproxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../harbor/" class="md-nav__link">
        Harbor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../influxdb/" class="md-nav__link">
        Influxdb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jaeger/" class="md-nav__link">
        Jaeger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jasperreports/" class="md-nav__link">
        Jasperreports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jenkins/" class="md-nav__link">
        Jenkins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../joomla/" class="md-nav__link">
        Joomla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jupyterhub/" class="md-nav__link">
        Jupyterhub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kafka/" class="md-nav__link">
        Kafka
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keycloak/" class="md-nav__link">
        Keycloak
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kiam/" class="md-nav__link">
        Kiam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kibana/" class="md-nav__link">
        Kibana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kong/" class="md-nav__link">
        Kong
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kube-prometheus/" class="md-nav__link">
        Kube prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kube-state-metrics/" class="md-nav__link">
        Kube state metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes-event-exporter/" class="md-nav__link">
        Kubernetes event exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../logstash/" class="md-nav__link">
        Logstash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../magento/" class="md-nav__link">
        Magento
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb-galera/" class="md-nav__link">
        Mariadb galera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb/" class="md-nav__link">
        Mariadb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mastodon/" class="md-nav__link">
        Mastodon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../matomo/" class="md-nav__link">
        Matomo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mediawiki/" class="md-nav__link">
        Mediawiki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memcached/" class="md-nav__link">
        Memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metallb/" class="md-nav__link">
        Metallb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metrics-server/" class="md-nav__link">
        Metrics server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../minio/" class="md-nav__link">
        Minio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb-sharded/" class="md-nav__link">
        Mongodb sharded
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb/" class="md-nav__link">
        Mongodb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../moodle/" class="md-nav__link">
        Moodle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multus-cni/" class="md-nav__link">
        Multus cni
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mxnet/" class="md-nav__link">
        Mxnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql/" class="md-nav__link">
        Mysql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nats/" class="md-nav__link">
        Nats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nginx-ingress-controller/" class="md-nav__link">
        Nginx ingress controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nginx/" class="md-nav__link">
        Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-exporter/" class="md-nav__link">
        Node exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oauth2-proxy/" class="md-nav__link">
        Oauth2 proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../odoo/" class="md-nav__link">
        Odoo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../opencart/" class="md-nav__link">
        Opencart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../osclass/" class="md-nav__link">
        Osclass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parse/" class="md-nav__link">
        Parse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../phpbb/" class="md-nav__link">
        Phpbb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../phpmyadmin/" class="md-nav__link">
        Phpmyadmin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pinniped/" class="md-nav__link">
        Pinniped
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../postgresql-ha/" class="md-nav__link">
        Postgresql ha
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../postgresql/" class="md-nav__link">
        Postgresql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prestashop/" class="md-nav__link">
        Prestashop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rabbitmq-cluster-operator/" class="md-nav__link">
        Rabbitmq cluster operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rabbitmq/" class="md-nav__link">
        Rabbitmq
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Redis cluster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Redis cluster
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    TL;DR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choose-between-redis-helm-chart-and-redis-cluster-helm-chart" class="md-nav__link">
    Choose between Redis&reg; Helm Chart and Redis&reg; Cluster Helm Chart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-chart" class="md-nav__link">
    Installing the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstalling-the-chart" class="md-nav__link">
    Uninstalling the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
    <nav class="md-nav" aria-label="Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-parameters" class="md-nav__link">
    Global parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-cluster-common-parameters" class="md-nav__link">
    Redis&reg; Cluster Common parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-statefulset-parameters" class="md-nav__link">
    Redis&reg; statefulset parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-update-job-parameters" class="md-nav__link">
    Cluster update job parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-management-parameters" class="md-nav__link">
    Cluster management parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-sidecar-parameters" class="md-nav__link">
    Metrics sidecar parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sysctl-image-parameters" class="md-nav__link">
    Sysctl Image parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-and-installation-details" class="md-nav__link">
    Configuration and installation details
  </a>
  
    <nav class="md-nav" aria-label="Configuration and installation details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rolling-vs-immutable-tags" class="md-nav__link">
    Rolling VS Immutable tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-redis-version" class="md-nav__link">
    Use a different Redis&reg; version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-topology" class="md-nav__link">
    Cluster topology
  </a>
  
    <nav class="md-nav" aria-label="Cluster topology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-node-to-the-cluster" class="md-nav__link">
    Adding a new node to the cluster
  </a>
  
    <nav class="md-nav" aria-label="Adding a new node to the cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#external-access" class="md-nav__link">
    External Access
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scale-down-the-cluster" class="md-nav__link">
    Scale down the cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-password-file" class="md-nav__link">
    Using password file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-traffic-using-tls" class="md-nav__link">
    Securing traffic using TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sidecars-and-init-containers" class="md-nav__link">
    Sidecars and Init Containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-extra-environment-variables" class="md-nav__link">
    Adding extra environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#host-kernel-settings" class="md-nav__link">
    Host Kernel Settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-upgrade" class="md-nav__link">
    Helm Upgrade
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#persistence" class="md-nav__link">
    Persistence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networkpolicy" class="md-nav__link">
    NetworkPolicy
  </a>
  
    <nav class="md-nav" aria-label="NetworkPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-pods-affinity" class="md-nav__link">
    Setting Pod's affinity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading" class="md-nav__link">
    Upgrading
  </a>
  
    <nav class="md-nav" aria-label="Upgrading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-700" class="md-nav__link">
    To 7.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-600" class="md-nav__link">
    To 6.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-500" class="md-nav__link">
    To 5.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-400" class="md-nav__link">
    To 4.0.0
  </a>
  
    <nav class="md-nav" aria-label="To 4.0.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-changes-were-introduced-in-this-major-version" class="md-nav__link">
    What changes were introduced in this major version?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-when-upgrading-to-this-version" class="md-nav__link">
    Considerations when upgrading to this version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    Useful links
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-300" class="md-nav__link">
    To 3.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-200" class="md-nav__link">
    To 2.0.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redmine/" class="md-nav__link">
        Redmine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schema-registry/" class="md-nav__link">
        Schema registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sealed-secrets/" class="md-nav__link">
        Sealed secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../solr/" class="md-nav__link">
        Solr
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sonarqube/" class="md-nav__link">
        Sonarqube
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spring-cloud-dataflow/" class="md-nav__link">
        Spring cloud dataflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../suitecrm/" class="md-nav__link">
        Suitecrm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../supabase/" class="md-nav__link">
        Supabase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow-resnet/" class="md-nav__link">
        Tensorflow resnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../thanos/" class="md-nav__link">
        Thanos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tomcat/" class="md-nav__link">
        Tomcat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wavefront-hpa-adapter/" class="md-nav__link">
        Wavefront hpa adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wavefront-prometheus-storage-adapter/" class="md-nav__link">
        Wavefront prometheus storage adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../whereabouts/" class="md-nav__link">
        Whereabouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wildfly/" class="md-nav__link">
        Wildfly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wordpress/" class="md-nav__link">
        Wordpress
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../zookeeper/" class="md-nav__link">
        Zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../grafana/">Grafana</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Grafana" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Grafana
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/agent-operator/" class="md-nav__link">
        grafana-agent-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/enterprise-logs-simple/" class="md-nav__link">
        enterprise-logs-simple
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/enterprise-logs/" class="md-nav__link">
        Grafana Enterprise Logs Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/enterprise-metrics/" class="md-nav__link">
        Grafana Enterprise Metrics Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/fluent-bit/" class="md-nav__link">
        Fluent Bit Loki chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/grafana-agent/" class="md-nav__link">
        Grafana Agent chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/grafana/" class="md-nav__link">
        Grafana Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/loki-canary/" class="md-nav__link">
        loki-canary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/loki-distributed/" class="md-nav__link">
        loki-distributed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/loki-stack/" class="md-nav__link">
        Loki-Stack Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/mimir-distributed/" class="md-nav__link">
        Notice of relocation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/promtail/" class="md-nav__link">
        promtail
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/rollout-operator/" class="md-nav__link">
        Grafana rollout-operator Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/synthetic-monitoring-agent/" class="md-nav__link">
        synthetic-monitoring-agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/tempo-distributed/" class="md-nav__link">
        tempo-distributed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/tempo-vulture/" class="md-nav__link">
        tempo-vulture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/tempo/" class="md-nav__link">
        tempo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../ingress-nginx/">Ingress nginx</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ingress nginx" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Ingress nginx
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ingress-nginx/ingress-nginx/" class="md-nav__link">
        ingress-nginx
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../prometheus-community/">Prometheus community</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Prometheus community" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Prometheus community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/alertmanager-snmp-notifier/" class="md-nav__link">
        Prometheus SNMP Notifier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/alertmanager/" class="md-nav__link">
        Alertmanager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/jiralert/" class="md-nav__link">
        Prometheus SNMP Notifier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/kube-prometheus-stack/" class="md-nav__link">
        kube-prometheus-stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/kube-state-metrics/" class="md-nav__link">
        kube-state-metrics Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prom-label-proxy/" class="md-nav__link">
        prom-label-proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-adapter/" class="md-nav__link">
        Prometheus Adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-blackbox-exporter/" class="md-nav__link">
        Prometheus Blackbox Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-cloudwatch-exporter/" class="md-nav__link">
        Prometheus Cloudwatch Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-conntrack-stats-exporter/" class="md-nav__link">
        Conntrack Stats Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-consul-exporter/" class="md-nav__link">
        Prometheus Consul Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-couchdb-exporter/" class="md-nav__link">
        prometheus-couchdb-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-druid-exporter/" class="md-nav__link">
        Prometheus Druid Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-elasticsearch-exporter/" class="md-nav__link">
        Elasticsearch Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-fastly-exporter/" class="md-nav__link">
        Prometheus Fastly Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-json-exporter/" class="md-nav__link">
        prometheus-json-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-kafka-exporter/" class="md-nav__link">
        prometheus-kafka-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-mongodb-exporter/" class="md-nav__link">
        Prometheus MongoDB Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-mysql-exporter/" class="md-nav__link">
        Prometheus Mysql Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-nats-exporter/" class="md-nav__link">
        Prometheus NATS Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-nginx-exporter/" class="md-nav__link">
        prometheus-nginx-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-node-exporter/" class="md-nav__link">
        Prometheus `Node Exporter`
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-operator-admission-webhook/" class="md-nav__link">
        Prometheus Operator Admission Webhook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-operator-crds/" class="md-nav__link">
        Prometheus Operator CRDs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pgbouncer-exporter/" class="md-nav__link">
        Prometheus Postgres Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pingdom-exporter/" class="md-nav__link">
        Prometheus Pingdom Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pingmesh-exporter/" class="md-nav__link">
        Prometheus Pingmesh Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-postgres-exporter/" class="md-nav__link">
        Prometheus Postgres Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pushgateway/" class="md-nav__link">
        Prometheus Pushgateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-rabbitmq-exporter/" class="md-nav__link">
        prometheus-rabbitmq-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-redis-exporter/" class="md-nav__link">
        prometheus-redis-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-smartctl-exporter/" class="md-nav__link">
        Prometheus smartctl Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-snmp-exporter/" class="md-nav__link">
        Prometheus SNMP Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-stackdriver-exporter/" class="md-nav__link">
        Stackdriver Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-statsd-exporter/" class="md-nav__link">
        prometheus-statsd-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-to-sd/" class="md-nav__link">
        prometheus-to-sd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-windows-exporter/" class="md-nav__link">
        Prometheus `Node Exporter`
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../sir5kong/">Sir5kong</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Sir5kong" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Sir5kong
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/commonapp/" class="md-nav__link">
        commonapp helm chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/ingress-nginx/" class="md-nav__link">
        ingress-nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/kafka/" class="md-nav__link">
        Kafka helm chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/nginx/" class="md-nav__link">
        nginx helm chart
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    TL;DR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choose-between-redis-helm-chart-and-redis-cluster-helm-chart" class="md-nav__link">
    Choose between Redis&reg; Helm Chart and Redis&reg; Cluster Helm Chart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-chart" class="md-nav__link">
    Installing the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstalling-the-chart" class="md-nav__link">
    Uninstalling the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
    <nav class="md-nav" aria-label="Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-parameters" class="md-nav__link">
    Global parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-cluster-common-parameters" class="md-nav__link">
    Redis&reg; Cluster Common parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-statefulset-parameters" class="md-nav__link">
    Redis&reg; statefulset parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-update-job-parameters" class="md-nav__link">
    Cluster update job parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-management-parameters" class="md-nav__link">
    Cluster management parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-sidecar-parameters" class="md-nav__link">
    Metrics sidecar parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sysctl-image-parameters" class="md-nav__link">
    Sysctl Image parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-and-installation-details" class="md-nav__link">
    Configuration and installation details
  </a>
  
    <nav class="md-nav" aria-label="Configuration and installation details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rolling-vs-immutable-tags" class="md-nav__link">
    Rolling VS Immutable tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-redis-version" class="md-nav__link">
    Use a different Redis&reg; version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-topology" class="md-nav__link">
    Cluster topology
  </a>
  
    <nav class="md-nav" aria-label="Cluster topology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-node-to-the-cluster" class="md-nav__link">
    Adding a new node to the cluster
  </a>
  
    <nav class="md-nav" aria-label="Adding a new node to the cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#external-access" class="md-nav__link">
    External Access
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scale-down-the-cluster" class="md-nav__link">
    Scale down the cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-password-file" class="md-nav__link">
    Using password file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-traffic-using-tls" class="md-nav__link">
    Securing traffic using TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sidecars-and-init-containers" class="md-nav__link">
    Sidecars and Init Containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-extra-environment-variables" class="md-nav__link">
    Adding extra environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#host-kernel-settings" class="md-nav__link">
    Host Kernel Settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-upgrade" class="md-nav__link">
    Helm Upgrade
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#persistence" class="md-nav__link">
    Persistence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networkpolicy" class="md-nav__link">
    NetworkPolicy
  </a>
  
    <nav class="md-nav" aria-label="NetworkPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-pods-affinity" class="md-nav__link">
    Setting Pod's affinity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading" class="md-nav__link">
    Upgrading
  </a>
  
    <nav class="md-nav" aria-label="Upgrading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-700" class="md-nav__link">
    To 7.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-600" class="md-nav__link">
    To 6.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-500" class="md-nav__link">
    To 5.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-400" class="md-nav__link">
    To 4.0.0
  </a>
  
    <nav class="md-nav" aria-label="To 4.0.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-changes-were-introduced-in-this-major-version" class="md-nav__link">
    What changes were introduced in this major version?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-when-upgrading-to-this-version" class="md-nav__link">
    Considerations when upgrading to this version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    Useful links
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-300" class="md-nav__link">
    To 3.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-200" class="md-nav__link">
    To 2.0.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<!--- app-name: Redis&reg; Cluster -->

<h1 id="bitnami-package-for-redisr-cluster">Bitnami package for Redis(R) Cluster<a class="headerlink" href="#bitnami-package-for-redisr-cluster" title="Permanent link">&para;</a></h1>
<p>Redis(R) is an open source, scalable, distributed in-memory cache for applications. It can be used to store and serve data in the form of strings, hashes, lists, sets and sorted sets.</p>
<p><a href="http://redis.io">Overview of Redis&reg; Cluster</a></p>
<p>Disclaimer: Redis is a registered trademark of Redis Ltd. Any rights therein are reserved to Redis Ltd. Any use by Bitnami is for referential purposes only and does not indicate any sponsorship, endorsement, or affiliation between Redis Ltd.</p>
<h2 id="tldr">TL;DR<a class="headerlink" href="#tldr" title="Permanent link">&para;</a></h2>
<blockquote>
<p>使用加速地址添加仓库:</p>
</blockquote>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bitnami<span class="w"> </span><span class="s2">&quot;https://helm-charts.itboon.top/bitnami&quot;</span><span class="w"> </span>--force-update
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>helm<span class="w"> </span>update<span class="w"> </span>bitnami
</span></code></pre></div>
<div class="language-console highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="go">helm install my-release bitnami/redis-cluster</span>
</span></code></pre></div>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This chart bootstraps a <a href="https://github.com/bitnami/containers/tree/main/bitnami/redis">Redis&reg;</a> deployment on a <a href="https://kubernetes.io">Kubernetes</a> cluster using the <a href="https://helm.sh">Helm</a> package manager.</p>
<p>Bitnami charts can be used with <a href="https://kubeapps.dev/">Kubeapps</a> for deployment and management of Helm Charts in clusters.</p>
<h3 id="choose-between-redis-helm-chart-and-redis-cluster-helm-chart">Choose between Redis&reg; Helm Chart and Redis&reg; Cluster Helm Chart<a class="headerlink" href="#choose-between-redis-helm-chart-and-redis-cluster-helm-chart" title="Permanent link">&para;</a></h3>
<p>You can choose any of the two Redis&reg; Helm charts for deploying a Redis&reg; cluster.
While <a href="https://github.com/bitnami/charts/tree/main/bitnami/redis">Redis&reg; Helm Chart</a> will deploy a master-slave cluster using Redis&reg; Sentinel, the <a href="https://github.com/bitnami/charts/tree/main/bitnami/redis-cluster">Redis&reg; Cluster Helm Chart</a> will deploy a Redis&reg; Cluster with sharding.
The main features of each chart are the following:</p>
<table>
<thead>
<tr>
<th>Redis&reg;</th>
<th>Redis&reg; Cluster</th>
</tr>
</thead>
<tbody>
<tr>
<td>Supports multiple databases</td>
<td>Supports only one database. Better if you have a big dataset</td>
</tr>
<tr>
<td>Single write point (single master)</td>
<td>Multiple write points (multiple masters)</td>
</tr>
<tr>
<td><img alt="Redis&reg; Topology" src="img/redis-topology.png" /></td>
<td><img alt="Redis&reg; Cluster Topology" src="img/redis-cluster-topology.png" /></td>
</tr>
</tbody>
</table>
<p>Looking to use Redisreg; Cluster in production? Try <a href="https://bitnami.com/enterprise">VMware Application Catalog</a>, the enterprise edition of Bitnami Application Catalog.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Kubernetes 1.19+</li>
<li>Helm 3.2.0+</li>
<li>PV provisioner support in the underlying infrastructure</li>
</ul>
<h2 id="installing-the-chart">Installing the Chart<a class="headerlink" href="#installing-the-chart" title="Permanent link">&para;</a></h2>
<p>To install the chart with the release name <code>my-release</code>:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="go">helm install my-release bitnami/redis-cluster</span>
</span></code></pre></div>
<p>The command deploys Redis&reg; on the Kubernetes cluster in the default configuration. The <a href="#parameters">Parameters</a> section lists the parameters that can be configured during installation.</p>
<p>NOTE: if you get a timeout error waiting for the hook to complete increase the default timeout (300s) to a higher one, for example:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="go">helm install --timeout 600s myrelease bitnami/redis-cluster</span>
</span></code></pre></div>
<blockquote>
<p><strong>Tip</strong>: List all releases using <code>helm list</code></p>
</blockquote>
<h2 id="uninstalling-the-chart">Uninstalling the Chart<a class="headerlink" href="#uninstalling-the-chart" title="Permanent link">&para;</a></h2>
<p>To uninstall/delete the <code>my-release</code> deployment:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="go">helm delete my-release</span>
</span></code></pre></div>
<p>The command removes all the Kubernetes components associated with the chart and deletes the release.</p>
<h2 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h2>
<h3 id="global-parameters">Global parameters<a class="headerlink" href="#global-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>global.imageRegistry</code></td>
<td>Global Docker image registry</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.imagePullSecrets</code></td>
<td>Global Docker registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>global.storageClass</code></td>
<td>Global StorageClass for Persistent Volume(s)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.redis.password</code></td>
<td>Redis&reg; password (overrides <code>password</code>)</td>
<td><code>""</code></td>
</tr>
</tbody>
</table>
<h3 id="redis-cluster-common-parameters">Redis&reg; Cluster Common parameters<a class="headerlink" href="#redis-cluster-common-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nameOverride</code></td>
<td>String to partially override common.names.fullname template (will maintain the release name)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>fullnameOverride</code></td>
<td>String to fully override common.names.fullname template</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>clusterDomain</code></td>
<td>Kubernetes Cluster Domain</td>
<td><code>cluster.local</code></td>
</tr>
<tr>
<td><code>commonAnnotations</code></td>
<td>Annotations to add to all deployed objects</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>commonLabels</code></td>
<td>Labels to add to all deployed objects</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>extraDeploy</code></td>
<td>Array of extra objects to deploy with the release (evaluated as a template)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>diagnosticMode.enabled</code></td>
<td>Enable diagnostic mode (all probes will be disabled and the command will be overridden)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>diagnosticMode.command</code></td>
<td>Command to override all containers in the deployment</td>
<td><code>["sleep"]</code></td>
</tr>
<tr>
<td><code>diagnosticMode.args</code></td>
<td>Args to override all containers in the deployment</td>
<td><code>["infinity"]</code></td>
</tr>
<tr>
<td><code>image.registry</code></td>
<td>Redis&reg; cluster image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>image.repository</code></td>
<td>Redis&reg; cluster image repository</td>
<td><code>bitnami/redis-cluster</code></td>
</tr>
<tr>
<td><code>image.tag</code></td>
<td>Redis&reg; cluster image tag (immutable tags are recommended)</td>
<td><code>7.0.11-debian-11-r21</code></td>
</tr>
<tr>
<td><code>image.digest</code></td>
<td>Redis&reg; cluster image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>image.pullPolicy</code></td>
<td>Redis&reg; cluster image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>image.debug</code></td>
<td>Enable image debug mode</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>networkPolicy.enabled</code></td>
<td>Enable NetworkPolicy</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>networkPolicy.allowExternal</code></td>
<td>The Policy model to apply. Don't require client label for connections</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>networkPolicy.ingressNSMatchLabels</code></td>
<td>Allow connections from other namespacess. Just set label for namespace and set label for pods (optional).</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>networkPolicy.ingressNSPodMatchLabels</code></td>
<td>For other namespaces match by pod labels and namespace labels</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>serviceAccount.create</code></td>
<td>Specifies whether a ServiceAccount should be created</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>serviceAccount.name</code></td>
<td>The name of the ServiceAccount to create</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>serviceAccount.annotations</code></td>
<td>Annotations for Cassandra Service Account</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>serviceAccount.automountServiceAccountToken</code></td>
<td>Automount API credentials for a service account.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>rbac.create</code></td>
<td>Specifies whether RBAC resources should be created</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>rbac.role.rules</code></td>
<td>Rules to create. It follows the role specification</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>podSecurityContext.enabled</code></td>
<td>Enable Redis&reg; pod Security Context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>podSecurityContext.fsGroup</code></td>
<td>Group ID for the pods</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>podSecurityContext.runAsUser</code></td>
<td>User ID for the pods</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>podSecurityContext.sysctls</code></td>
<td>Set namespaced sysctls for the pods</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>podDisruptionBudget</code></td>
<td>Limits the number of pods of the replicated application that are down simultaneously from voluntary disruptions</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>minAvailable</code></td>
<td>Min number of pods that must still be available after the eviction</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>maxUnavailable</code></td>
<td>Max number of pods that can be unavailable after the eviction</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>containerSecurityContext.enabled</code></td>
<td>Enable Containers' Security Context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>containerSecurityContext.runAsUser</code></td>
<td>User ID for the containers.</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>containerSecurityContext.runAsNonRoot</code></td>
<td>Run container as non root</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>usePassword</code></td>
<td>Use password authentication</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>password</code></td>
<td>Redis&reg; password (ignored if existingSecret set)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>existingSecret</code></td>
<td>Name of existing secret object (for password authentication)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>existingSecretPasswordKey</code></td>
<td>Name of key containing password to be retrieved from the existing secret</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>usePasswordFile</code></td>
<td>Mount passwords as files instead of environment variables</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>tls.enabled</code></td>
<td>Enable TLS support for replication traffic</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>tls.authClients</code></td>
<td>Require clients to authenticate or not</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>tls.autoGenerated</code></td>
<td>Generate automatically self-signed TLS certificates</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>tls.existingSecret</code></td>
<td>The name of the existing secret that contains the TLS certificates</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>tls.certificatesSecret</code></td>
<td>DEPRECATED. Use tls.existingSecret instead</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>tls.certFilename</code></td>
<td>Certificate filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>tls.certKeyFilename</code></td>
<td>Certificate key filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>tls.certCAFilename</code></td>
<td>CA Certificate filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>tls.dhParamsFilename</code></td>
<td>File containing DH params (in order to support DH based ciphers)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.ports.redis</code></td>
<td>Kubernetes Redis service port</td>
<td><code>6379</code></td>
</tr>
<tr>
<td><code>service.nodePorts.redis</code></td>
<td>Node port for Redis</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.extraPorts</code></td>
<td>Extra ports to expose in the service (normally used with the <code>sidecar</code> value)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>service.annotations</code></td>
<td>Provide any additional annotations which may be required.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>service.labels</code></td>
<td>Additional labels for redis service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>service.type</code></td>
<td>Service type for default redis service</td>
<td><code>ClusterIP</code></td>
</tr>
<tr>
<td><code>service.clusterIP</code></td>
<td>Service Cluster IP</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.loadBalancerIP</code></td>
<td>Load balancer IP if <code>service.type</code> is <code>LoadBalancer</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.loadBalancerSourceRanges</code></td>
<td>Service Load Balancer sources</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>service.externalTrafficPolicy</code></td>
<td>Service external traffic policy</td>
<td><code>Cluster</code></td>
</tr>
<tr>
<td><code>service.sessionAffinity</code></td>
<td>Session Affinity for Kubernetes service, can be "None" or "ClientIP"</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>service.sessionAffinityConfig</code></td>
<td>Additional settings for the sessionAffinity</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>service.headless.annotations</code></td>
<td>Annotations for the headless service.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>persistence.enabled</code></td>
<td>Enable persistence on Redis&reg;</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>persistence.path</code></td>
<td>Path to mount the volume at, to use other images Redis&reg; images.</td>
<td><code>/bitnami/redis/data</code></td>
</tr>
<tr>
<td><code>persistence.subPath</code></td>
<td>The subdirectory of the volume to mount to, useful in dev environments and one PV for multiple services</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>persistence.storageClass</code></td>
<td>Storage class of backing PVC</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>persistence.annotations</code></td>
<td>Persistent Volume Claim annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>persistence.accessModes</code></td>
<td>Persistent Volume Access Modes</td>
<td><code>["ReadWriteOnce"]</code></td>
</tr>
<tr>
<td><code>persistence.size</code></td>
<td>Size of data volume</td>
<td><code>8Gi</code></td>
</tr>
<tr>
<td><code>persistence.matchLabels</code></td>
<td>Persistent Volume selectors</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>persistence.matchExpressions</code></td>
<td>matchExpressions Persistent Volume selectors</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>persistentVolumeClaimRetentionPolicy.enabled</code></td>
<td>Controls if and how PVCs are deleted during the lifecycle of a StatefulSet</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>persistentVolumeClaimRetentionPolicy.whenScaled</code></td>
<td>Volume retention behavior when the replica count of the StatefulSet is reduced</td>
<td><code>Retain</code></td>
</tr>
<tr>
<td><code>persistentVolumeClaimRetentionPolicy.whenDeleted</code></td>
<td>Volume retention behavior that applies when the StatefulSet is deleted</td>
<td><code>Retain</code></td>
</tr>
<tr>
<td><code>volumePermissions.enabled</code></td>
<td>Enable init container that changes volume permissions in the registry (for cases where the default k8s <code>runAsUser</code> and <code>fsUser</code> values do not work)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.registry</code></td>
<td>Init container volume-permissions image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.repository</code></td>
<td>Init container volume-permissions image repository</td>
<td><code>bitnami/bitnami-shell</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.tag</code></td>
<td>Init container volume-permissions image tag</td>
<td><code>11-debian-11-r127</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.digest</code></td>
<td>Init container volume-permissions image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.pullPolicy</code></td>
<td>Init container volume-permissions image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>volumePermissions.containerSecurityContext.enabled</code></td>
<td>Enable Containers' Security Context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>volumePermissions.containerSecurityContext.runAsUser</code></td>
<td>User ID for the containers.</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>volumePermissions.containerSecurityContext.privileged</code></td>
<td>Run container as privileged</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>volumePermissions.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>volumePermissions.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>podSecurityPolicy.create</code></td>
<td>Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="redis-statefulset-parameters">Redis&reg; statefulset parameters<a class="headerlink" href="#redis-statefulset-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>redis.command</code></td>
<td>Redis&reg; entrypoint string. The command <code>redis-server</code> is executed if this is not provided</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.args</code></td>
<td>Arguments for the provided command if needed</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.updateStrategy.type</code></td>
<td>Argo Workflows statefulset strategy type</td>
<td><code>RollingUpdate</code></td>
</tr>
<tr>
<td><code>redis.updateStrategy.rollingUpdate.partition</code></td>
<td>Partition update strategy</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>redis.podManagementPolicy</code></td>
<td>Statefulset Pod management policy, it needs to be Parallel to be able to complete the cluster join</td>
<td><code>Parallel</code></td>
</tr>
<tr>
<td><code>redis.hostAliases</code></td>
<td>Deployment pod host aliases</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.hostNetwork</code></td>
<td>Host networking requested for this pod. Use the host's network namespace.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>redis.useAOFPersistence</code></td>
<td>Whether to use AOF Persistence mode or not</td>
<td><code>yes</code></td>
</tr>
<tr>
<td><code>redis.containerPorts.redis</code></td>
<td>Redis&reg; port</td>
<td><code>6379</code></td>
</tr>
<tr>
<td><code>redis.containerPorts.bus</code></td>
<td>The busPort should be obtained adding 10000 to the redisPort. By default: 10000 + 6379 = 16379</td>
<td><code>16379</code></td>
</tr>
<tr>
<td><code>redis.lifecycleHooks</code></td>
<td>LifecycleHook to set additional configuration before or after startup. Evaluated as a template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.extraVolumes</code></td>
<td>Extra volumes to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.extraVolumeMounts</code></td>
<td>Extra volume mounts to add to the container</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.customLivenessProbe</code></td>
<td>Override default liveness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.customReadinessProbe</code></td>
<td>Override default readiness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.customStartupProbe</code></td>
<td>Custom startupProbe that overrides the default one</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.initContainers</code></td>
<td>Extra init containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.sidecars</code></td>
<td>Extra sidecar containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.podLabels</code></td>
<td>Additional labels for Redis&reg; pod</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.priorityClassName</code></td>
<td>Redis&reg; Master pod priorityClassName</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.defaultConfigOverride</code></td>
<td>Optional default Redis&reg; configuration for the nodes</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.configmap</code></td>
<td>Additional Redis&reg; configuration for the nodes</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.extraEnvVars</code></td>
<td>An array to add extra environment variables</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.extraEnvVarsCM</code></td>
<td>ConfigMap with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.extraEnvVarsSecret</code></td>
<td>Secret with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.podAnnotations</code></td>
<td>Redis&reg; additional annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.schedulerName</code></td>
<td>Use an alternate scheduler, e.g. "stork".</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.shareProcessNamespace</code></td>
<td>Enable shared process namespace in a pod.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>redis.livenessProbe.enabled</code></td>
<td>Enable livenessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>redis.livenessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.livenessProbe.periodSeconds</code></td>
<td>Period seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.livenessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.livenessProbe.failureThreshold</code></td>
<td>Failure threshold for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.livenessProbe.successThreshold</code></td>
<td>Success threshold for livenessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>redis.readinessProbe.enabled</code></td>
<td>Enable readinessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>redis.readinessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.readinessProbe.periodSeconds</code></td>
<td>Period seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.readinessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for readinessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>redis.readinessProbe.failureThreshold</code></td>
<td>Failure threshold for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.readinessProbe.successThreshold</code></td>
<td>Success threshold for readinessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.enabled</code></td>
<td>Enable startupProbe</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.path</code></td>
<td>Path to check for startupProbe</td>
<td><code>/</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for startupProbe</td>
<td><code>300</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.periodSeconds</code></td>
<td>Period seconds for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.timeoutSeconds</code></td>
<td>Timeout seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.failureThreshold</code></td>
<td>Failure threshold for startupProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>redis.startupProbe.successThreshold</code></td>
<td>Success threshold for startupProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>redis.podAffinityPreset</code></td>
<td>Redis&reg; pod affinity preset. Ignored if <code>redis.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.podAntiAffinityPreset</code></td>
<td>Redis&reg; pod anti-affinity preset. Ignored if <code>redis.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>soft</code></td>
</tr>
<tr>
<td><code>redis.nodeAffinityPreset.type</code></td>
<td>Redis&reg; node affinity preset type. Ignored if <code>redis.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.nodeAffinityPreset.key</code></td>
<td>Redis&reg; node label key to match Ignored if <code>redis.affinity</code> is set.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>redis.nodeAffinityPreset.values</code></td>
<td>Redis&reg; node label values to match. Ignored if <code>redis.affinity</code> is set.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.affinity</code></td>
<td>Affinity settings for Redis&reg; pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.nodeSelector</code></td>
<td>Node labels for Redis&reg; pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>redis.tolerations</code></td>
<td>Tolerations for Redis&reg; pods assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>redis.topologySpreadConstraints</code></td>
<td>Pod topology spread constraints for Redis&reg; pod</td>
<td><code>[]</code></td>
</tr>
</tbody>
</table>
<h3 id="cluster-update-job-parameters">Cluster update job parameters<a class="headerlink" href="#cluster-update-job-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>updateJob.activeDeadlineSeconds</code></td>
<td>Number of seconds the Job to create the cluster will be waiting for the Nodes to be ready.</td>
<td><code>600</code></td>
</tr>
<tr>
<td><code>updateJob.command</code></td>
<td>Container command (using container default if not set)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.args</code></td>
<td>Container args (using container default if not set)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.hostAliases</code></td>
<td>Deployment pod host aliases</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.annotations</code></td>
<td>Job annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>updateJob.podAnnotations</code></td>
<td>Job pod annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>updateJob.podLabels</code></td>
<td>Pod extra labels</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>updateJob.extraEnvVars</code></td>
<td>An array to add extra environment variables</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.extraEnvVarsCM</code></td>
<td>ConfigMap containing extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>updateJob.extraEnvVarsSecret</code></td>
<td>Secret containing extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>updateJob.extraVolumes</code></td>
<td>Extra volumes to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.extraVolumeMounts</code></td>
<td>Extra volume mounts to add to the container</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.initContainers</code></td>
<td>Extra init containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.podAffinityPreset</code></td>
<td>Update job pod affinity preset. Ignored if <code>updateJob.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>updateJob.podAntiAffinityPreset</code></td>
<td>Update job pod anti-affinity preset. Ignored if <code>updateJob.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>soft</code></td>
</tr>
<tr>
<td><code>updateJob.nodeAffinityPreset.type</code></td>
<td>Update job node affinity preset type. Ignored if <code>updateJob.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>updateJob.nodeAffinityPreset.key</code></td>
<td>Update job node label key to match Ignored if <code>updateJob.affinity</code> is set.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>updateJob.nodeAffinityPreset.values</code></td>
<td>Update job node label values to match. Ignored if <code>updateJob.affinity</code> is set.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.affinity</code></td>
<td>Affinity for update job pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>updateJob.nodeSelector</code></td>
<td>Node labels for update job pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>updateJob.tolerations</code></td>
<td>Tolerations for update job pods assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>updateJob.priorityClassName</code></td>
<td>Priority class name</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>updateJob.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>updateJob.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="cluster-management-parameters">Cluster management parameters<a class="headerlink" href="#cluster-management-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cluster.init</code></td>
<td>Enable the initialization of the Redis&reg; Cluster</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>cluster.nodes</code></td>
<td>The number of master nodes should always be &gt;= 3, otherwise cluster creation will fail</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>cluster.replicas</code></td>
<td>Number of replicas for every master in the cluster</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>cluster.externalAccess.enabled</code></td>
<td>Enable access to the Redis</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>cluster.externalAccess.service.type</code></td>
<td>Type for the services used to expose every Pod</td>
<td><code>LoadBalancer</code></td>
</tr>
<tr>
<td><code>cluster.externalAccess.service.port</code></td>
<td>Port for the services used to expose every Pod</td>
<td><code>6379</code></td>
</tr>
<tr>
<td><code>cluster.externalAccess.service.loadBalancerIP</code></td>
<td>Array of load balancer IPs for each Redis&reg; node. Length must be the same as cluster.nodes</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>cluster.externalAccess.service.loadBalancerSourceRanges</code></td>
<td>Service Load Balancer sources</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>cluster.externalAccess.service.annotations</code></td>
<td>Annotations to add to the services used to expose every Pod of the Redis&reg; Cluster</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>cluster.update.addNodes</code></td>
<td>Boolean to specify if you want to add nodes after the upgrade</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>cluster.update.currentNumberOfNodes</code></td>
<td>Number of currently deployed Redis&reg; nodes</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>cluster.update.currentNumberOfReplicas</code></td>
<td>Number of currently deployed Redis&reg; replicas</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>cluster.update.newExternalIPs</code></td>
<td>External IPs obtained from the services for the new nodes to add to the cluster</td>
<td><code>[]</code></td>
</tr>
</tbody>
</table>
<h3 id="metrics-sidecar-parameters">Metrics sidecar parameters<a class="headerlink" href="#metrics-sidecar-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metrics.enabled</code></td>
<td>Start a side-car prometheus exporter</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.image.registry</code></td>
<td>Redis&reg; exporter image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>metrics.image.repository</code></td>
<td>Redis&reg; exporter image name</td>
<td><code>bitnami/redis-exporter</code></td>
</tr>
<tr>
<td><code>metrics.image.tag</code></td>
<td>Redis&reg; exporter image tag</td>
<td><code>1.51.0-debian-11-r0</code></td>
</tr>
<tr>
<td><code>metrics.image.digest</code></td>
<td>Redis&reg; exporter image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.image.pullPolicy</code></td>
<td>Redis&reg; exporter image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>metrics.image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.resources</code></td>
<td>Metrics exporter resource requests and limits</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.extraArgs</code></td>
<td>Extra arguments for the binary; possible values <a href="https://github.com/oliver006/redis_exporter">here</a></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.extraEnvVars</code></td>
<td>Array with extra environment variables to add to Redis&reg; exporter</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.podAnnotations</code></td>
<td>Additional annotations for Metrics exporter pod</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.podLabels</code></td>
<td>Additional labels for Metrics exporter pod</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.containerSecurityContext.enabled</code></td>
<td>Enable Metrics Containers' Security Context</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.containerSecurityContext.allowPrivilegeEscalation</code></td>
<td>Allow Privilege Escalation for metrics container</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.enabled</code></td>
<td>If <code>true</code>, creates a Prometheus Operator ServiceMonitor (also requires <code>metrics.enabled</code> to be <code>true</code>)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.namespace</code></td>
<td>Optional namespace which Prometheus is running in</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.interval</code></td>
<td>How frequently to scrape metrics (use by default, falling back to Prometheus' default)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.scrapeTimeout</code></td>
<td>Timeout after which the scrape is ended</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.selector</code></td>
<td>Prometheus instance selector labels</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.labels</code></td>
<td>ServiceMonitor extra labels</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.annotations</code></td>
<td>ServiceMonitor annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.jobLabel</code></td>
<td>The name of the label on the target service to use as the job name in prometheus.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.relabelings</code></td>
<td>RelabelConfigs to apply to samples before scraping</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.metricRelabelings</code></td>
<td>MetricRelabelConfigs to apply to samples before ingestion</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.prometheusRule.enabled</code></td>
<td>Set this to true to create prometheusRules for Prometheus operator</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.prometheusRule.additionalLabels</code></td>
<td>Additional labels that can be used so prometheusRules will be discovered by Prometheus</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.prometheusRule.namespace</code></td>
<td>namespace where prometheusRules resource should be created</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.prometheusRule.rules</code></td>
<td>Create specified <a href="https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/">rules</a>, check values for an example.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.priorityClassName</code></td>
<td>Metrics exporter pod priorityClassName</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.service.type</code></td>
<td>Kubernetes Service type (redis metrics)</td>
<td><code>ClusterIP</code></td>
</tr>
<tr>
<td><code>metrics.service.loadBalancerIP</code></td>
<td>Use serviceLoadBalancerIP to request a specific static IP, otherwise leave blank</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.service.annotations</code></td>
<td>Annotations for the services to monitor.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.service.labels</code></td>
<td>Additional labels for the metrics service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.service.clusterIP</code></td>
<td>Service Cluster IP</td>
<td><code>""</code></td>
</tr>
</tbody>
</table>
<h3 id="sysctl-image-parameters">Sysctl Image parameters<a class="headerlink" href="#sysctl-image-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sysctlImage.enabled</code></td>
<td>Enable an init container to modify Kernel settings</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>sysctlImage.command</code></td>
<td>sysctlImage command to execute</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>sysctlImage.registry</code></td>
<td>sysctlImage Init container registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>sysctlImage.repository</code></td>
<td>sysctlImage Init container repository</td>
<td><code>bitnami/bitnami-shell</code></td>
</tr>
<tr>
<td><code>sysctlImage.tag</code></td>
<td>sysctlImage Init container tag</td>
<td><code>11-debian-11-r127</code></td>
</tr>
<tr>
<td><code>sysctlImage.digest</code></td>
<td>sysctlImage Init container digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>sysctlImage.pullPolicy</code></td>
<td>sysctlImage Init container pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>sysctlImage.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>sysctlImage.mountHostSys</code></td>
<td>Mount the host <code>/sys</code> folder to <code>/host-sys</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>sysctlImage.containerSecurityContext.enabled</code></td>
<td>Enable Containers' Security Context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>sysctlImage.containerSecurityContext.runAsUser</code></td>
<td>User ID for the containers.</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>sysctlImage.containerSecurityContext.privileged</code></td>
<td>Run privileged as privileged</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>sysctlImage.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>sysctlImage.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<p>Specify each parameter using the <code>--set key=value[,key=value]</code> argument to <code>helm install</code>. For example,</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="go">helm install my-release \</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="go">  --set password=secretpassword \</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="go">    bitnami/redis-cluster</span>
</span></code></pre></div>
<p>The above command sets the Redis&reg; server password to <code>secretpassword</code>.</p>
<blockquote>
<p>NOTE: Once this chart is deployed, it is not possible to change the application's access credentials, such as usernames or passwords, using Helm. To change these application credentials after deployment, delete any persistent volumes (PVs) used by the chart and re-deploy it, or use the application's built-in administrative tools if available.</p>
</blockquote>
<p>Alternatively, a YAML file that specifies the values for the parameters can be provided while installing the chart. For example,</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="go">helm install my-release -f values.yaml bitnami/redis-cluster</span>
</span></code></pre></div>
<blockquote>
<p><strong>Tip</strong>: You can use the default <a href="values.yaml">values.yaml</a>
<strong>Note for minikube users</strong>: Current versions of minikube (v0.24.1 at the time of writing) provision <code>hostPath</code> persistent volumes that are only writable by root. Using chart defaults cause pod failure for the Redis&reg; pod as it attempts to write to the <code>/bitnami</code> directory. See minikube issue <a href="https://github.com/kubernetes/minikube/issues/1990">1990</a> for more information.</p>
</blockquote>
<h2 id="configuration-and-installation-details">Configuration and installation details<a class="headerlink" href="#configuration-and-installation-details" title="Permanent link">&para;</a></h2>
<h3 id="rolling-vs-immutable-tags"><a href="https://docs.bitnami.com/containers/how-to/understand-rolling-tags-containers/">Rolling VS Immutable tags</a><a class="headerlink" href="#rolling-vs-immutable-tags" title="Permanent link">&para;</a></h3>
<p>It is strongly recommended to use immutable tags in a production environment. This ensures your deployment does not change automatically if the same tag is updated with a different image.</p>
<p>Bitnami will release a new chart updating its containers if a new version of the main container, significant changes, or critical vulnerabilities exist.</p>
<h3 id="use-a-different-redis-version">Use a different Redis&reg; version<a class="headerlink" href="#use-a-different-redis-version" title="Permanent link">&para;</a></h3>
<p>To modify the application version used in this chart, specify a different version of the image using the <code>image.tag</code> parameter and/or a different repository using the <code>image.repository</code> parameter. Refer to the <a href="https://docs.bitnami.com/kubernetes/infrastructure/redis-cluster/configuration/change-image-version/">chart documentation for more information on these parameters and how to use them with images from a private registry</a>.</p>
<h3 id="cluster-topology">Cluster topology<a class="headerlink" href="#cluster-topology" title="Permanent link">&para;</a></h3>
<p>To successfully set the cluster up, it will need to have at least 3 master nodes. The total number of nodes is calculated like- <code>nodes = numOfMasterNodes + numOfMasterNodes * replicas</code>. Hence, the defaults <code>cluster.nodes = 6</code> and <code>cluster.replicas = 1</code> means, 3 master and 3 replica nodes will be deployed by the chart.</p>
<p>By default the Redis&reg; Cluster is not accessible from outside the Kubernetes cluster, to access the Redis&reg; Cluster from outside you have to set <code>cluster.externalAccess.enabled=true</code> at deployment time. It will create in the first installation only 6 LoadBalancer services, one for each Redis&reg; node, once you have the external IPs of each service you will need to perform an upgrade passing those IPs to the <code>cluster.externalAccess.service.loadbalancerIP</code> array.</p>
<p>The replicas will be read-only replicas of the masters. By default only one service is exposed (when not using the external access mode). You will connect your client to the exposed service, regardless you need to read or write. When a write operation arrives to a replica it will redirect the client to the proper master node. For example, using <code>redis-cli</code> you will need to provide the <code>-c</code> flag for <code>redis-cli</code> to follow the redirection automatically.</p>
<p>Using the external access mode, you can connect to any of the pods and the slaves will redirect the client in the same way as explained before, but the all the IPs will be public.</p>
<p>In case the master crashes, one of his slaves will be promoted to master. The slots stored by the crashed master will be unavailable until the slave finish the promotion. If a master and all his slaves crash, the cluster will be down until one of them is up again. To avoid downtime, it is possible to configure the number of Redis&reg; nodes with <code>cluster.nodes</code> and the number of replicas that will be assigned to each master with <code>cluster.replicas</code>. For example:</p>
<ul>
<li><code>cluster.nodes=9</code> ( 3 master plus 2 replicas for each master)</li>
<li><code>cluster.replicas=2</code></li>
</ul>
<p>Providing the values above, the cluster will have 3 masters and, each master, will have 2 replicas.</p>
<blockquote>
<p>NOTE: By default <code>cluster.init</code> will be set to <code>true</code> in order to initialize the Redis&reg; Cluster in the first installation. If for testing purposes you only want to deploy or upgrade the nodes but avoiding the creation of the cluster you can set <code>cluster.init</code> to <code>false</code>.</p>
</blockquote>
<h4 id="adding-a-new-node-to-the-cluster">Adding a new node to the cluster<a class="headerlink" href="#adding-a-new-node-to-the-cluster" title="Permanent link">&para;</a></h4>
<p>There is a job that will be executed using a <code>post-upgrade</code> hook that will allow you to add a new node. To use it, you should provide some parameters to the upgrade:</p>
<ul>
<li>Pass as <code>password</code> the password used in the installation time. If you did not provide a password follow the instructions from the NOTES.txt to get the generated password.</li>
<li>Set the desired number of nodes at <code>cluster.nodes</code>.</li>
<li>Set the number of current nodes at <code>cluster.update.currentNumberOfNodes</code>.</li>
<li>Set to true <code>cluster.update.addNodes</code>.</li>
</ul>
<p>The following will be an example to add one more node:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="go">helm upgrade --timeout 600s &lt;release&gt; --set &quot;password=${REDIS_PASSWORD},cluster.nodes=7,cluster.update.addNodes=true,cluster.update.currentNumberOfNodes=6&quot; bitnami/redis-cluster</span>
</span></code></pre></div>
<p>Where <code>REDIS_PASSWORD</code> is the password obtained with the command that appears after the first installation of the Helm Chart.
The cluster will continue up while restarting pods one by one as the quorum is not lost.</p>
<h5 id="external-access">External Access<a class="headerlink" href="#external-access" title="Permanent link">&para;</a></h5>
<p>If you are using external access, to add a new node you will need to perform two upgrades. First upgrade the release to add a new Redis&reg; node and to get a LoadBalancerIP service. For example:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="go">helm upgrade &lt;release&gt; --set &quot;password=${REDIS_PASSWORD},cluster.externalAccess.enabled=true,cluster.externalAccess.service.type=LoadBalancer,cluster.externalAccess.service.loadBalancerIP[0]=&lt;loadBalancerip-0&gt;,cluster.externalAccess.service.loadBalancerIP[1]=&lt;loadbalanacerip-1&gt;,cluster.externalAccess.service.loadBalancerIP[2]=&lt;loadbalancerip-2&gt;,cluster.externalAccess.service.loadBalancerIP[3]=&lt;loadbalancerip-3&gt;,cluster.externalAccess.service.loadBalancerIP[4]=&lt;loadbalancerip-4&gt;,cluster.externalAccess.service.loadBalancerIP[5]=&lt;loadbalancerip-5&gt;,cluster.externalAccess.service.loadBalancerIP[6]=,cluster.nodes=7,cluster.init=false bitnami/redis-cluster</span>
</span></code></pre></div>
<blockquote>
<p>Important here to provide the loadBalancerIP parameters for the new nodes empty to not get an index error.</p>
</blockquote>
<p>As we want to add a new node, we are setting <code>cluster.nodes=7</code> and we leave empty the LoadBalancerIP for the new node, so the cluster will provide the correct one.
<code>REDIS_PASSWORD</code> is the password obtained with the command that appears after the first installation of the Helm Chart.
At this point, you will have a new Redis&reg; Pod that will remain in <code>crashLoopBackOff</code> state until we provide the LoadBalancerIP for the new service.
Now, wait until the cluster provides the new LoadBalancerIP for the new service and perform the second upgrade:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="go">helm upgrade &lt;release&gt; --set &quot;password=${REDIS_PASSWORD},cluster.externalAccess.enabled=true,cluster.externalAccess.service.type=LoadBalancer,cluster.externalAccess.service.loadBalancerIP[0]=&lt;loadbalancerip-0&gt;,cluster.externalAccess.service.loadBalancerIP[1]=&lt;loadbalancerip-1&gt;,cluster.externalAccess.service.loadBalancerIP[2]=&lt;loadbalancerip-2&gt;,cluster.externalAccess.service.loadBalancerIP[3]=&lt;loadbalancerip-3&gt;,cluster.externalAccess.service.loadBalancerIP[4]=&lt;loadbalancerip-4&gt;,cluster.externalAccess.service.loadBalancerIP[5]=&lt;loadbalancerip-5&gt;,cluster.externalAccess.service.loadBalancerIP[6]=&lt;loadbalancerip-6&gt;,cluster.nodes=7,cluster.init=false,cluster.update.addNodes=true,cluster.update.newExternalIPs[0]=&lt;load-balancerip-6&gt;&quot; bitnami/redis-cluster</span>
</span></code></pre></div>
<p>Note we are providing the new IPs at <code>cluster.update.newExternalIPs</code>, the flag <code>cluster.update.addNodes=true</code> to enable the creation of the Job that adds a new node and now we are setting the LoadBalancerIP of the new service instead of leave it empty.</p>
<blockquote>
<p>NOTE: To avoid the creation of the Job that initializes the Redis&reg; Cluster again, you will need to provide <code>cluster.init=false</code>.</p>
</blockquote>
<h4 id="scale-down-the-cluster">Scale down the cluster<a class="headerlink" href="#scale-down-the-cluster" title="Permanent link">&para;</a></h4>
<p>To scale down the Redis&reg; Cluster, follow these steps:</p>
<p>First perform a normal upgrade setting the <code>cluster.nodes</code> value to the desired number of nodes. It should not be less than <code>6</code> and the difference between current number of nodes and the desired should be less or equal to <code>cluster.replicas</code> to avoid removing master node an its slaves at the same time. Also it is needed to provide the password using the <code>password</code>. For example, having more than 6 nodes, to scale down the cluster to 6 nodes:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="go">helm upgrade --timeout 600s &lt;release&gt; --set &quot;password=${REDIS_PASSWORD},cluster.nodes=6&quot; .</span>
</span></code></pre></div>
<p>The cluster will continue working during the update as long as the quorum is not lost.</p>
<blockquote>
<p>NOTE: To avoid the creation of the Job that initializes the Redis&reg; Cluster again, you will need to provide <code>cluster.init=false</code>.</p>
</blockquote>
<p>Once all the nodes are ready, get the list of nodes in the cluster using the <code>CLUSTER NODES</code> command. You will see references to the ones that were removed. Write down the node IDs of the nodes that show <code>fail</code>. In the following example the cluster scaled down from 7 to 6 nodes.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="go">redis-cli -a $REDIS_PASSWORD CLUSTER NODES</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="go">...</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="go">b23bcffa1fd64368d445c1d9bd9aeb92641105f7 10.0.0.70:6379@16379 slave,fail - 1645633139060 0 0 connected</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="go">...</span>
</span></code></pre></div>
<p>In each cluster node, execute the following command. Replace the NODE_ID placeholder.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="go">redis-cli -a $REDIS_PASSWORD CLUSTER FORGET NODE_ID</span>
</span></code></pre></div>
<p>In the previous example the commands would look like this in each cluster node:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="go">redis-cli -a $REDIS_PASSWORD CLUSTER FORGET b23bcffa1fd64368d445c1d9bd9aeb92641105f7</span>
</span></code></pre></div>
<h3 id="using-password-file">Using password file<a class="headerlink" href="#using-password-file" title="Permanent link">&para;</a></h3>
<p>To use a password file for Redis&reg; you need to create a secret containing the password.</p>
<blockquote>
<p><em>NOTE</em>: It is important that the file with the password must be called <code>redis-password</code></p>
</blockquote>
<p>And then deploy the Helm Chart using the secret name as parameter:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>usePassword=true
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>usePasswordFile=true
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>existingSecret=redis-password-secret
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>metrics.enabled=true
</span></code></pre></div>
<h3 id="securing-traffic-using-tls">Securing traffic using TLS<a class="headerlink" href="#securing-traffic-using-tls" title="Permanent link">&para;</a></h3>
<p>TLS support can be enabled in the chart by specifying the <code>tls.</code> parameters while creating a release. The following parameters should be configured to properly enable the TLS support in the cluster:</p>
<ul>
<li><code>tls.enabled</code>: Enable TLS support. Defaults to <code>false</code></li>
<li><code>tls.existingSecret</code>: Name of the secret that contains the certificates. No defaults.</li>
<li><code>tls.certFilename</code>: Certificate filename. No defaults.</li>
<li><code>tls.certKeyFilename</code>: Certificate key filename. No defaults.</li>
<li><code>tls.certCAFilename</code>: CA Certificate filename. No defaults.</li>
</ul>
<p>For example:</p>
<p>First, create the secret with the certificates files:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="go">kubectl create secret generic certificates-tls-secret --from-file=./cert.pem --from-file=./cert.key --from-file=./ca.pem</span>
</span></code></pre></div>
<p>Then, use the following parameters:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="go">tls.enabled=&quot;true&quot;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="go">tls.existingSecret=&quot;certificates-tls-secret&quot;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="go">tls.certFilename=&quot;cert.pem&quot;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="go">tls.certKeyFilename=&quot;cert.key&quot;</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="go">tls.certCAFilename=&quot;ca.pem&quot;</span>
</span></code></pre></div>
<h3 id="sidecars-and-init-containers">Sidecars and Init Containers<a class="headerlink" href="#sidecars-and-init-containers" title="Permanent link">&para;</a></h3>
<p>If you have a need for additional containers to run within the same pod as Redis&reg; (e.g. an additional metrics or logging exporter), you can do so via the <code>sidecars</code> config parameter. Simply define your container according to the Kubernetes container spec.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">sidecars</span><span class="p">:</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-image-name</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-image</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">portname</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">      </span><span class="w w-Error"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1234</span>
</span></code></pre></div>
<p>Similarly, you can add extra init containers using the <code>initContainers</code> parameter.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">initContainers</span><span class="p">:</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-image-name</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-image</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">portname</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">        </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1234</span>
</span></code></pre></div>
<h3 id="adding-extra-environment-variables">Adding extra environment variables<a class="headerlink" href="#adding-extra-environment-variables" title="Permanent link">&para;</a></h3>
<p>In case you want to add extra environment variables (useful for advanced operations like custom init scripts), you can use the <code>extraEnvVars</code> property.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">extraEnvVars</span><span class="p">:</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_WHATEVER</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value</span>
</span></code></pre></div>
<p>Alternatively, you can use a ConfigMap or a Secret with the environment variables. To do so, use the <code>extraEnvVarsCM</code> or the <code>extraEnvVarsSecret</code> values.</p>
<h3 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h3>
<p>The chart optionally can start a metrics exporter for <a href="https://prometheus.io">prometheus</a>. The metrics endpoint (port 9121) is exposed in the service. Metrics can be scraped from within the cluster using something similar as the described in the <a href="https://github.com/prometheus/prometheus/blob/master/documentation/examples/prometheus-kubernetes.yml">example Prometheus scrape configuration</a>. If metrics are to be scraped from outside the cluster, the Kubernetes API proxy can be utilized to access the endpoint.</p>
<h3 id="host-kernel-settings">Host Kernel Settings<a class="headerlink" href="#host-kernel-settings" title="Permanent link">&para;</a></h3>
<p>Redis&reg; may require some changes in the kernel of the host machine to work as expected, in particular increasing the <code>somaxconn</code> value and disabling transparent huge pages.
To do so, you can set up a privileged initContainer with the <code>sysctlImage</code> config values, for example:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">sysctlImage</span><span class="p">:</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">  </span><span class="nt">mountHostSys</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">  </span><span class="nt">command</span><span class="p">:</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|-</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">      </span><span class="no">sysctl -w net.core.somaxconn=10000</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">      </span><span class="no">echo never &gt; /host-sys/kernel/mm/transparent_hugepage/enabled</span>
</span></code></pre></div>
<p>Alternatively, for Kubernetes 1.12+ you can set <code>podSecurityContext.sysctls</code> which will configure sysctls for master and slave pods. Example:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">podSecurityContext</span><span class="p">:</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="nt">sysctls</span><span class="p">:</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">net.core.somaxconn</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10000&quot;</span>
</span></code></pre></div>
<p>Note that this will not disable transparent huge tables.</p>
<h2 id="helm-upgrade">Helm Upgrade<a class="headerlink" href="#helm-upgrade" title="Permanent link">&para;</a></h2>
<p>By default <code>cluster.init</code> will be set to <code>true</code> in order to initialize the Redis&reg; Cluster in the first installation. If for testing purposes you only want to deploy or upgrade the nodes but avoiding the creation of the cluster you can set <code>cluster.init</code> to <code>false</code>.</p>
<h2 id="persistence">Persistence<a class="headerlink" href="#persistence" title="Permanent link">&para;</a></h2>
<p>By default, the chart mounts a <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">Persistent Volume</a> at the <code>/bitnami</code> path. The volume is created using dynamic volume provisioning.</p>
<p>If persistence is disabled, an emptyDir volume is used. <strong>This is only recommended for testing environments</strong> because the required information included in the nodes.conf file is missing. This file contains the relationship between the nodes and the cluster. For example, if any node is down or faulty, when it starts again, it is a self-proclaimed master and also acts as an independent node outside the main cluster as it doesn't have the necessary information to connect to it.</p>
<p>To reconnect the failed node, run the following:</p>
<p>See nodes.sh</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="gp">$ </span>cat<span class="w"> </span>/bitnami/redis/data/nodes.sh
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="go">declare -A host_2_ip_array=([redis-node-0]=&quot;192.168.192.6&quot; [redis-node-1]=&quot;192.168.192.2&quot; [redis-node-2]=&quot;192.168.192.4&quot; [redis-node-3]=&quot;192.168.192.5&quot; [redis-node-4]=&quot;192.168.192.3&quot; [redis-node-5]=&quot;192.168.192.7&quot; )</span>
</span></code></pre></div>
<p>Run redis-cli and run <a href="https://redis.io/commands/cluster-meet/">CLUSTER MEET</a> to any other node in the cluster. Now the node has connected to the main cluster.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="gp">$ </span><span class="nv">REDISCLI_AUTH</span><span class="o">=</span>bitnami<span class="w"> </span>redis-cli
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="go">127.0.0.1:6379&gt; cluster meet 192.168.192.7 6379</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="go">OK</span>
</span></code></pre></div>
<p>See <a href="https://github.com/bitnami/charts/issues/15075">#15075</a></p>
<h2 id="networkpolicy">NetworkPolicy<a class="headerlink" href="#networkpolicy" title="Permanent link">&para;</a></h2>
<p>To enable network policy for Redis&reg;, install
<a href="https://kubernetes.io/docs/tasks/administer-cluster/declare-network-policy#before-you-begin">a networking plugin that implements the Kubernetes NetworkPolicy spec</a>,
and set <code>networkPolicy.enabled</code> to <code>true</code>.</p>
<p>For Kubernetes v1.5 &amp; v1.6, you must also turn on NetworkPolicy by setting
the DefaultDeny namespace annotation. Note: this will enforce policy for <em>all</em> pods in the namespace:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="go">kubectl annotate namespace default &quot;net.beta.kubernetes.io/network-policy={\&quot;ingress\&quot;:{\&quot;isolation\&quot;:\&quot;DefaultDeny\&quot;}}&quot;</span>
</span></code></pre></div>
<p>With NetworkPolicy enabled, only pods with the generated client label will be
able to connect to Redis&reg;. This label will be displayed in the output
after a successful install.</p>
<p>With <code>networkPolicy.ingressNSMatchLabels</code> pods from other namespaces can connect to redis. Set <code>networkPolicy.ingressNSPodMatchLabels</code> to match pod labels in matched namespace. For example, for a namespace labeled <code>redis=external</code> and pods in that namespace labeled <code>redis-client=true</code> the fields should be set:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">networkPolicy</span><span class="p">:</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="nt">ingressNSMatchLabels</span><span class="p">:</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="nt">redis</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">  </span><span class="nt">ingressNSPodMatchLabels</span><span class="p">:</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="nt">redis-client</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<h3 id="setting-pods-affinity">Setting Pod's affinity<a class="headerlink" href="#setting-pods-affinity" title="Permanent link">&para;</a></h3>
<p>This chart allows you to set your custom affinity using the <code>XXX.affinity</code> paremeter(s). Find more information about Pod's affinity in the <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity">kubernetes documentation</a>.</p>
<p>As an alternative, you can use of the preset configurations for pod affinity, pod anti-affinity, and node affinity available at the <a href="https://github.com/bitnami/charts/tree/main/bitnami/common#affinities">bitnami/common</a> chart. To do so, set the <code>XXX.podAffinityPreset</code>, <code>XXX.podAntiAffinityPreset</code>, or <code>XXX.nodeAffinityPreset</code> parameters.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<p>Find more information about how to deal with common errors related to Bitnami's Helm charts in <a href="https://docs.bitnami.com/general/how-to/troubleshoot-helm-chart-issues">this troubleshooting guide</a>.</p>
<h2 id="upgrading">Upgrading<a class="headerlink" href="#upgrading" title="Permanent link">&para;</a></h2>
<h3 id="to-700">To 7.0.0<a class="headerlink" href="#to-700" title="Permanent link">&para;</a></h3>
<p>This major release renames several values in this chart and adds missing features, in order to be inline with the rest of assets in the Bitnami charts repository.</p>
<p>Since this version performs changes in the statefulset, in order to upgrade from previous versions you need to delete the statefulset object before the upgrade.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="go">kubectl delete statefulset &lt;statefulsetName&gt;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="go">helm upgrade &lt;release-name&gt;  bitnami/redis-cluster --set redis.password=&lt;REDIS_PASSWORD&gt;</span>
</span></code></pre></div>
<h3 id="to-600">To 6.0.0<a class="headerlink" href="#to-600" title="Permanent link">&para;</a></h3>
<p>The cluster initialization job have been removed. Instead, the pod with index 0 from the statefulset will handle the initialization of the cluster.</p>
<p>As consequence, the <code>initJob</code> configuration section have been removed.</p>
<h3 id="to-500">To 5.0.0<a class="headerlink" href="#to-500" title="Permanent link">&para;</a></h3>
<p>This major version updates the Redis&reg; docker image version used from <code>6.0</code> to <code>6.2</code>, the new stable version. There are no major changes in the chart and there shouldn't be any breaking changes in it as <code>6.2</code> breaking changes center around some command and behaviour changes. For more information, please refer to <a href="https://raw.githubusercontent.com/redis/redis/6.2/00-RELEASENOTES">Redis&reg; 6.2 release notes</a>.</p>
<h3 id="to-400">To 4.0.0<a class="headerlink" href="#to-400" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/helm/charts#status-of-the-project">On November 13, 2020, Helm v2 support was formally finished</a>, this major version is the result of the required changes applied to the Helm Chart to be able to incorporate the different features added in Helm v3 and to be consistent with the Helm project itself regarding the Helm v2 EOL.</p>
<h4 id="what-changes-were-introduced-in-this-major-version">What changes were introduced in this major version?<a class="headerlink" href="#what-changes-were-introduced-in-this-major-version" title="Permanent link">&para;</a></h4>
<ul>
<li>Previous versions of this Helm Chart use <code>apiVersion: v1</code> (installable by both Helm 2 and 3), this Helm Chart was updated to <code>apiVersion: v2</code> (installable by Helm 3 only). <a href="https://helm.sh/docs/topics/charts/#the-apiversion-field">Here</a> you can find more information about the <code>apiVersion</code> field.</li>
<li>Move dependency information from the <em>requirements.yaml</em> to the <em>Chart.yaml</em></li>
<li>After running <code>helm dependency update</code>, a <em>Chart.lock</em> file is generated containing the same structure used in the previous <em>requirements.lock</em></li>
<li>The different fields present in the <em>Chart.yaml</em> file has been ordered alphabetically in a homogeneous way for all the Bitnami Helm Charts</li>
</ul>
<h4 id="considerations-when-upgrading-to-this-version">Considerations when upgrading to this version<a class="headerlink" href="#considerations-when-upgrading-to-this-version" title="Permanent link">&para;</a></h4>
<ul>
<li>If you want to upgrade to this version from a previous one installed with Helm v3, you shouldn't face any issues</li>
<li>If you want to upgrade to this version using Helm v2, this scenario is not supported as this version doesn't support Helm v2 anymore</li>
<li>If you installed the previous version with Helm v2 and wants to upgrade to this version with Helm v3, please refer to the <a href="https://helm.sh/docs/topics/v2_v3_migration/#migration-use-cases">official Helm documentation</a> about migrating from Helm v2 to v3</li>
</ul>
<h4 id="useful-links">Useful links<a class="headerlink" href="#useful-links" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://docs.bitnami.com/tutorials/resolve-helm2-helm3-post-migration-issues/">https://docs.bitnami.com/tutorials/resolve-helm2-helm3-post-migration-issues/</a></li>
<li><a href="https://helm.sh/docs/topics/v2_v3_migration/">https://helm.sh/docs/topics/v2_v3_migration/</a></li>
<li><a href="https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/">https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/</a></li>
</ul>
<h3 id="to-300">To 3.0.0<a class="headerlink" href="#to-300" title="Permanent link">&para;</a></h3>
<p>This version of the chart adapts the chart to the most recent Bitnami best practices and standards. Most of the Redis&reg; parameters were moved to the <code>redis</code> values section (such as extraEnvVars, sidecars, and so on). No major issues are expected during the upgrade.</p>
<h3 id="to-200">To 2.0.0<a class="headerlink" href="#to-200" title="Permanent link">&para;</a></h3>
<p>The version <code>1.0.0</code> was using a label in the Statefulset's volumeClaimTemplate that didn't allow to upgrade the chart. The version <code>2.0.0</code> fixed that issue. Also it adds more docs in the README.md.</p>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p>Copyright &copy; 2023 VMware, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../rabbitmq/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Rabbitmq" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  上一页
                </span>
                Rabbitmq
              </div>
            </div>
          </a>
        
        
          
          <a href="../redis/" class="md-footer__link md-footer__link--next" aria-label="下一页: Redis" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  下一页
                </span>
                Redis
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>