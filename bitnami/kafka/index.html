<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../jupyterhub/ rel=prev><link href=../keycloak/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>Kafka - Helm Charts Hub</title><link rel=stylesheet href=../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-C5YHK472VS"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-C5YHK472VS",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-C5YHK472VS",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#apache-kafka-packaged-by-bitnami class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../.. title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Helm Charts Hub </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Kafka </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Helm Charts Hub </a> </li> <li class=md-tabs__item> <a href=../../chart-list/ class=md-tabs__link> Chart 列表 </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Bitnami </a> </li> <li class=md-tabs__item> <a href=../../grafana/ class=md-tabs__link> Grafana </a> </li> <li class=md-tabs__item> <a href=../../ingress-nginx/ class=md-tabs__link> Ingress nginx </a> </li> <li class=md-tabs__item> <a href=../../prometheus-community/ class=md-tabs__link> Prometheus community </a> </li> <li class=md-tabs__item> <a href=../../sir5kong/ class=md-tabs__link> Sir5kong </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Helm Charts Hub </label> <div class=md-nav__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Helm Charts Hub </a> </li> <li class=md-nav__item> <a href=../../chart-list/ class=md-nav__link> Chart 列表 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Bitnami</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Bitnami data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Bitnami </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../airflow/ class=md-nav__link> Airflow </a> </li> <li class=md-nav__item> <a href=../apache/ class=md-nav__link> Apache </a> </li> <li class=md-nav__item> <a href=../apisix/ class=md-nav__link> Apisix </a> </li> <li class=md-nav__item> <a href=../appsmith/ class=md-nav__link> Appsmith </a> </li> <li class=md-nav__item> <a href=../argo-cd/ class=md-nav__link> Argo cd </a> </li> <li class=md-nav__item> <a href=../argo-workflows/ class=md-nav__link> Argo workflows </a> </li> <li class=md-nav__item> <a href=../aspnet-core/ class=md-nav__link> Aspnet core </a> </li> <li class=md-nav__item> <a href=../cassandra/ class=md-nav__link> Cassandra </a> </li> <li class=md-nav__item> <a href=../cert-manager/ class=md-nav__link> Cert manager </a> </li> <li class=md-nav__item> <a href=../clickhouse/ class=md-nav__link> Clickhouse </a> </li> <li class=md-nav__item> <a href=../common/ class=md-nav__link> Bitnami Common Library Chart </a> </li> <li class=md-nav__item> <a href=../concourse/ class=md-nav__link> Concourse </a> </li> <li class=md-nav__item> <a href=../consul/ class=md-nav__link> Consul </a> </li> <li class=md-nav__item> <a href=../contour/ class=md-nav__link> Contour </a> </li> <li class=md-nav__item> <a href=../discourse/ class=md-nav__link> Discourse </a> </li> <li class=md-nav__item> <a href=../dokuwiki/ class=md-nav__link> Dokuwiki </a> </li> <li class=md-nav__item> <a href=../drupal/ class=md-nav__link> Drupal </a> </li> <li class=md-nav__item> <a href=../ejbca/ class=md-nav__link> Ejbca </a> </li> <li class=md-nav__item> <a href=../elasticsearch/ class=md-nav__link> Elasticsearch </a> </li> <li class=md-nav__item> <a href=../etcd/ class=md-nav__link> Etcd </a> </li> <li class=md-nav__item> <a href=../external-dns/ class=md-nav__link> External dns </a> </li> <li class=md-nav__item> <a href=../flink/ class=md-nav__link> Flink </a> </li> <li class=md-nav__item> <a href=../fluent-bit/ class=md-nav__link> Fluent bit </a> </li> <li class=md-nav__item> <a href=../fluentd/ class=md-nav__link> Fluentd </a> </li> <li class=md-nav__item> <a href=../flux/ class=md-nav__link> Flux </a> </li> <li class=md-nav__item> <a href=../ghost/ class=md-nav__link> Ghost </a> </li> <li class=md-nav__item> <a href=../gitea/ class=md-nav__link> Gitea </a> </li> <li class=md-nav__item> <a href=../grafana-loki/ class=md-nav__link> Grafana loki </a> </li> <li class=md-nav__item> <a href=../grafana-mimir/ class=md-nav__link> Grafana mimir </a> </li> <li class=md-nav__item> <a href=../grafana-operator/ class=md-nav__link> Grafana operator </a> </li> <li class=md-nav__item> <a href=../grafana-tempo/ class=md-nav__link> Grafana tempo </a> </li> <li class=md-nav__item> <a href=../grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../haproxy/ class=md-nav__link> Haproxy </a> </li> <li class=md-nav__item> <a href=../harbor/ class=md-nav__link> Harbor </a> </li> <li class=md-nav__item> <a href=../influxdb/ class=md-nav__link> Influxdb </a> </li> <li class=md-nav__item> <a href=../jaeger/ class=md-nav__link> Jaeger </a> </li> <li class=md-nav__item> <a href=../jasperreports/ class=md-nav__link> Jasperreports </a> </li> <li class=md-nav__item> <a href=../jenkins/ class=md-nav__link> Jenkins </a> </li> <li class=md-nav__item> <a href=../joomla/ class=md-nav__link> Joomla </a> </li> <li class=md-nav__item> <a href=../jupyterhub/ class=md-nav__link> Jupyterhub </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Kafka <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Kafka </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tldr class=md-nav__link> TL;DR </a> </li> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#installing-the-chart class=md-nav__link> Installing the Chart </a> </li> <li class=md-nav__item> <a href=#uninstalling-the-chart class=md-nav__link> Uninstalling the Chart </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> <nav class=md-nav aria-label=Parameters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#global-parameters class=md-nav__link> Global parameters </a> </li> <li class=md-nav__item> <a href=#common-parameters class=md-nav__link> Common parameters </a> </li> <li class=md-nav__item> <a href=#kafka-parameters class=md-nav__link> Kafka parameters </a> </li> <li class=md-nav__item> <a href=#statefulset-parameters class=md-nav__link> Statefulset parameters </a> </li> <li class=md-nav__item> <a href=#traffic-exposure-parameters class=md-nav__link> Traffic Exposure parameters </a> </li> <li class=md-nav__item> <a href=#persistence-parameters class=md-nav__link> Persistence parameters </a> </li> <li class=md-nav__item> <a href=#volume-permissions-parameters class=md-nav__link> Volume Permissions parameters </a> </li> <li class=md-nav__item> <a href=#other-parameters class=md-nav__link> Other Parameters </a> </li> <li class=md-nav__item> <a href=#metrics-parameters class=md-nav__link> Metrics parameters </a> </li> <li class=md-nav__item> <a href=#kafka-provisioning-parameters class=md-nav__link> Kafka provisioning parameters </a> </li> <li class=md-nav__item> <a href=#kraft-chart-parameters class=md-nav__link> Kraft chart parameters </a> </li> <li class=md-nav__item> <a href=#zookeeper-chart-parameters class=md-nav__link> ZooKeeper chart parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-and-installation-details class=md-nav__link> Configuration and installation details </a> <nav class=md-nav aria-label="Configuration and installation details"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rolling-vs-immutable-tags class=md-nav__link> Rolling VS Immutable tags </a> </li> <li class=md-nav__item> <a href=#setting-custom-parameters class=md-nav__link> Setting custom parameters </a> </li> <li class=md-nav__item> <a href=#listeners-configuration class=md-nav__link> Listeners configuration </a> </li> <li class=md-nav__item> <a href=#enable-security-for-kafka-and-zookeeper class=md-nav__link> Enable security for Kafka and Zookeeper </a> </li> <li class=md-nav__item> <a href=#accessing-kafka-brokers-from-outside-the-cluster class=md-nav__link> Accessing Kafka brokers from outside the cluster </a> <nav class=md-nav aria-label="Accessing Kafka brokers from outside the cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-loadbalancer-services class=md-nav__link> Using LoadBalancer services </a> </li> <li class=md-nav__item> <a href=#using-nodeport-services class=md-nav__link> Using NodePort services </a> </li> <li class=md-nav__item> <a href=#using-clusterip-services class=md-nav__link> Using ClusterIP services </a> </li> <li class=md-nav__item> <a href=#name-resolution-with-external-dns class=md-nav__link> Name resolution with External-DNS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sidecars class=md-nav__link> Sidecars </a> </li> <li class=md-nav__item> <a href=#setting-pods-affinity class=md-nav__link> Setting Pod's affinity </a> </li> <li class=md-nav__item> <a href=#deploying-extra-resources class=md-nav__link> Deploying extra resources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#persistence class=md-nav__link> Persistence </a> <nav class=md-nav aria-label=Persistence> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adjust-permissions-of-persistent-volume-mountpoint class=md-nav__link> Adjust permissions of persistent volume mountpoint </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=#upgrading class=md-nav__link> Upgrading </a> <nav class=md-nav aria-label=Upgrading> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-2200 class=md-nav__link> To 22.0.0 </a> </li> <li class=md-nav__item> <a href=#to-2100 class=md-nav__link> To 21.0.0 </a> </li> <li class=md-nav__item> <a href=#to-2000 class=md-nav__link> To 20.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1900 class=md-nav__link> To 19.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1800 class=md-nav__link> To 18.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1600 class=md-nav__link> To 16.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1500 class=md-nav__link> To 15.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1400 class=md-nav__link> To 14.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1300 class=md-nav__link> To 13.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1220 class=md-nav__link> To 12.2.0 </a> </li> <li class=md-nav__item> <a href=#to-1200 class=md-nav__link> To 12.0.0 </a> <nav class=md-nav aria-label="To 12.0.0"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-changes-were-introduced-in-this-major-version class=md-nav__link> What changes were introduced in this major version? </a> </li> <li class=md-nav__item> <a href=#considerations-when-upgrading-to-this-version class=md-nav__link> Considerations when upgrading to this version </a> </li> <li class=md-nav__item> <a href=#useful-links class=md-nav__link> Useful links </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#to-1180 class=md-nav__link> To 11.8.0 </a> </li> <li class=md-nav__item> <a href=#to-1170 class=md-nav__link> To 11.7.0 </a> </li> <li class=md-nav__item> <a href=#to-1100 class=md-nav__link> To 11.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1000 class=md-nav__link> To 10.0.0 </a> </li> <li class=md-nav__item> <a href=#to-900 class=md-nav__link> To 9.0.0 </a> </li> <li class=md-nav__item> <a href=#to-800 class=md-nav__link> To 8.0.0 </a> </li> <li class=md-nav__item> <a href=#to-700 class=md-nav__link> To 7.0.0 </a> </li> <li class=md-nav__item> <a href=#to-200 class=md-nav__link> To 2.0.0 </a> </li> <li class=md-nav__item> <a href=#to-100 class=md-nav__link> To 1.0.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../keycloak/ class=md-nav__link> Keycloak </a> </li> <li class=md-nav__item> <a href=../kiam/ class=md-nav__link> Kiam </a> </li> <li class=md-nav__item> <a href=../kibana/ class=md-nav__link> Kibana </a> </li> <li class=md-nav__item> <a href=../kong/ class=md-nav__link> Kong </a> </li> <li class=md-nav__item> <a href=../kube-prometheus/ class=md-nav__link> Kube prometheus </a> </li> <li class=md-nav__item> <a href=../kube-state-metrics/ class=md-nav__link> Kube state metrics </a> </li> <li class=md-nav__item> <a href=../kubeapps/ class=md-nav__link> Kubeapps </a> </li> <li class=md-nav__item> <a href=../kubernetes-event-exporter/ class=md-nav__link> Kubernetes event exporter </a> </li> <li class=md-nav__item> <a href=../logstash/ class=md-nav__link> Logstash </a> </li> <li class=md-nav__item> <a href=../magento/ class=md-nav__link> Magento </a> </li> <li class=md-nav__item> <a href=../mariadb-galera/ class=md-nav__link> Mariadb galera </a> </li> <li class=md-nav__item> <a href=../mariadb/ class=md-nav__link> Mariadb </a> </li> <li class=md-nav__item> <a href=../mastodon/ class=md-nav__link> Mastodon </a> </li> <li class=md-nav__item> <a href=../matomo/ class=md-nav__link> Matomo </a> </li> <li class=md-nav__item> <a href=../mediawiki/ class=md-nav__link> Mediawiki </a> </li> <li class=md-nav__item> <a href=../memcached/ class=md-nav__link> Memcached </a> </li> <li class=md-nav__item> <a href=../metallb/ class=md-nav__link> Metallb </a> </li> <li class=md-nav__item> <a href=../metrics-server/ class=md-nav__link> Metrics server </a> </li> <li class=md-nav__item> <a href=../minio/ class=md-nav__link> Minio </a> </li> <li class=md-nav__item> <a href=../mongodb-sharded/ class=md-nav__link> Mongodb sharded </a> </li> <li class=md-nav__item> <a href=../mongodb/ class=md-nav__link> Mongodb </a> </li> <li class=md-nav__item> <a href=../moodle/ class=md-nav__link> Moodle </a> </li> <li class=md-nav__item> <a href=../multus-cni/ class=md-nav__link> Multus cni </a> </li> <li class=md-nav__item> <a href=../mxnet/ class=md-nav__link> Mxnet </a> </li> <li class=md-nav__item> <a href=../mysql/ class=md-nav__link> Mysql </a> </li> <li class=md-nav__item> <a href=../nats/ class=md-nav__link> Nats </a> </li> <li class=md-nav__item> <a href=../nginx-ingress-controller/ class=md-nav__link> Nginx ingress controller </a> </li> <li class=md-nav__item> <a href=../nginx/ class=md-nav__link> Nginx </a> </li> <li class=md-nav__item> <a href=../node-exporter/ class=md-nav__link> Node exporter </a> </li> <li class=md-nav__item> <a href=../oauth2-proxy/ class=md-nav__link> Oauth2 proxy </a> </li> <li class=md-nav__item> <a href=../odoo/ class=md-nav__link> Odoo </a> </li> <li class=md-nav__item> <a href=../opencart/ class=md-nav__link> Opencart </a> </li> <li class=md-nav__item> <a href=../osclass/ class=md-nav__link> Osclass </a> </li> <li class=md-nav__item> <a href=../parse/ class=md-nav__link> Parse </a> </li> <li class=md-nav__item> <a href=../phpbb/ class=md-nav__link> Phpbb </a> </li> <li class=md-nav__item> <a href=../phpmyadmin/ class=md-nav__link> Phpmyadmin </a> </li> <li class=md-nav__item> <a href=../pinniped/ class=md-nav__link> Pinniped </a> </li> <li class=md-nav__item> <a href=../postgresql-ha/ class=md-nav__link> Postgresql ha </a> </li> <li class=md-nav__item> <a href=../postgresql/ class=md-nav__link> Postgresql </a> </li> <li class=md-nav__item> <a href=../prestashop/ class=md-nav__link> Prestashop </a> </li> <li class=md-nav__item> <a href=../prometheus/ class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../pytorch/ class=md-nav__link> Pytorch </a> </li> <li class=md-nav__item> <a href=../rabbitmq-cluster-operator/ class=md-nav__link> Rabbitmq cluster operator </a> </li> <li class=md-nav__item> <a href=../rabbitmq/ class=md-nav__link> Rabbitmq </a> </li> <li class=md-nav__item> <a href=../redis-cluster/ class=md-nav__link> Redis cluster </a> </li> <li class=md-nav__item> <a href=../redis/ class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=../redmine/ class=md-nav__link> Redmine </a> </li> <li class=md-nav__item> <a href=../schema-registry/ class=md-nav__link> Schema registry </a> </li> <li class=md-nav__item> <a href=../sealed-secrets/ class=md-nav__link> Sealed secrets </a> </li> <li class=md-nav__item> <a href=../solr/ class=md-nav__link> Solr </a> </li> <li class=md-nav__item> <a href=../sonarqube/ class=md-nav__link> Sonarqube </a> </li> <li class=md-nav__item> <a href=../spark/ class=md-nav__link> Spark </a> </li> <li class=md-nav__item> <a href=../spring-cloud-dataflow/ class=md-nav__link> Spring cloud dataflow </a> </li> <li class=md-nav__item> <a href=../suitecrm/ class=md-nav__link> Suitecrm </a> </li> <li class=md-nav__item> <a href=../supabase/ class=md-nav__link> Supabase </a> </li> <li class=md-nav__item> <a href=../tensorflow-resnet/ class=md-nav__link> Tensorflow resnet </a> </li> <li class=md-nav__item> <a href=../thanos/ class=md-nav__link> Thanos </a> </li> <li class=md-nav__item> <a href=../tomcat/ class=md-nav__link> Tomcat </a> </li> <li class=md-nav__item> <a href=../vault/ class=md-nav__link> Vault </a> </li> <li class=md-nav__item> <a href=../wavefront-hpa-adapter/ class=md-nav__link> Wavefront hpa adapter </a> </li> <li class=md-nav__item> <a href=../wavefront-prometheus-storage-adapter/ class=md-nav__link> Wavefront prometheus storage adapter </a> </li> <li class=md-nav__item> <a href=../whereabouts/ class=md-nav__link> Whereabouts </a> </li> <li class=md-nav__item> <a href=../wildfly/ class=md-nav__link> Wildfly </a> </li> <li class=md-nav__item> <a href=../wordpress/ class=md-nav__link> Wordpress </a> </li> <li class=md-nav__item> <a href=../zookeeper/ class=md-nav__link> Zookeeper </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../grafana/ >Grafana</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Grafana data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Grafana </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../grafana/agent-operator/ class=md-nav__link> grafana-agent-operator </a> </li> <li class=md-nav__item> <a href=../../grafana/enterprise-logs-simple/ class=md-nav__link> enterprise-logs-simple </a> </li> <li class=md-nav__item> <a href=../../grafana/enterprise-logs/ class=md-nav__link> Grafana Enterprise Logs Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/enterprise-metrics/ class=md-nav__link> Grafana Enterprise Metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/fluent-bit/ class=md-nav__link> Fluent Bit Loki chart </a> </li> <li class=md-nav__item> <a href=../../grafana/grafana-agent/ class=md-nav__link> Grafana Agent chart </a> </li> <li class=md-nav__item> <a href=../../grafana/grafana/ class=md-nav__link> Grafana Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/loki-canary/ class=md-nav__link> loki-canary </a> </li> <li class=md-nav__item> <a href=../../grafana/loki-distributed/ class=md-nav__link> loki-distributed </a> </li> <li class=md-nav__item> <a href=../../grafana/loki-stack/ class=md-nav__link> Loki-Stack Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/mimir-distributed/ class=md-nav__link> Notice of relocation </a> </li> <li class=md-nav__item> <a href=../../grafana/promtail/ class=md-nav__link> promtail </a> </li> <li class=md-nav__item> <a href=../../grafana/rollout-operator/ class=md-nav__link> Grafana rollout-operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/synthetic-monitoring-agent/ class=md-nav__link> synthetic-monitoring-agent </a> </li> <li class=md-nav__item> <a href=../../grafana/tempo-distributed/ class=md-nav__link> tempo-distributed </a> </li> <li class=md-nav__item> <a href=../../grafana/tempo-vulture/ class=md-nav__link> tempo-vulture </a> </li> <li class=md-nav__item> <a href=../../grafana/tempo/ class=md-nav__link> tempo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5 type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../ingress-nginx/ >Ingress nginx</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Ingress nginx" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Ingress nginx </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ingress-nginx/ingress-nginx/ class=md-nav__link> ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_6 type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../prometheus-community/ >Prometheus community</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Prometheus community" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Prometheus community </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager-snmp-notifier/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager/ class=md-nav__link> Alertmanager </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/jiralert/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-prometheus-stack/ class=md-nav__link> kube-prometheus-stack </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-state-metrics/ class=md-nav__link> kube-state-metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prom-label-proxy/ class=md-nav__link> prom-label-proxy </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-adapter/ class=md-nav__link> Prometheus Adapter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-blackbox-exporter/ class=md-nav__link> Prometheus Blackbox Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-cloudwatch-exporter/ class=md-nav__link> Prometheus Cloudwatch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-conntrack-stats-exporter/ class=md-nav__link> Conntrack Stats Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-consul-exporter/ class=md-nav__link> Prometheus Consul Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-couchdb-exporter/ class=md-nav__link> prometheus-couchdb-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-druid-exporter/ class=md-nav__link> Prometheus Druid Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-elasticsearch-exporter/ class=md-nav__link> Elasticsearch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-fastly-exporter/ class=md-nav__link> Prometheus Fastly Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-json-exporter/ class=md-nav__link> prometheus-json-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-kafka-exporter/ class=md-nav__link> prometheus-kafka-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mongodb-exporter/ class=md-nav__link> Prometheus MongoDB Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mysql-exporter/ class=md-nav__link> Prometheus Mysql Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nats-exporter/ class=md-nav__link> Prometheus NATS Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nginx-exporter/ class=md-nav__link> prometheus-nginx-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-node-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-admission-webhook/ class=md-nav__link> Prometheus Operator Admission Webhook </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-crds/ class=md-nav__link> Prometheus Operator CRDs </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pgbouncer-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingdom-exporter/ class=md-nav__link> Prometheus Pingdom Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingmesh-exporter/ class=md-nav__link> Prometheus Pingmesh Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-postgres-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pushgateway/ class=md-nav__link> Prometheus Pushgateway </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-rabbitmq-exporter/ class=md-nav__link> prometheus-rabbitmq-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-redis-exporter/ class=md-nav__link> prometheus-redis-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-smartctl-exporter/ class=md-nav__link> Prometheus smartctl Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-snmp-exporter/ class=md-nav__link> Prometheus SNMP Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-stackdriver-exporter/ class=md-nav__link> Stackdriver Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-statsd-exporter/ class=md-nav__link> prometheus-statsd-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-to-sd/ class=md-nav__link> prometheus-to-sd </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-windows-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus/ class=md-nav__link> Prometheus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../sir5kong/ >Sir5kong</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Sir5kong data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Sir5kong </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sir5kong/commonapp/ class=md-nav__link> commonapp helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/kafka/ class=md-nav__link> Kafka helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/nginx/ class=md-nav__link> nginx helm chart </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tldr class=md-nav__link> TL;DR </a> </li> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#installing-the-chart class=md-nav__link> Installing the Chart </a> </li> <li class=md-nav__item> <a href=#uninstalling-the-chart class=md-nav__link> Uninstalling the Chart </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> <nav class=md-nav aria-label=Parameters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#global-parameters class=md-nav__link> Global parameters </a> </li> <li class=md-nav__item> <a href=#common-parameters class=md-nav__link> Common parameters </a> </li> <li class=md-nav__item> <a href=#kafka-parameters class=md-nav__link> Kafka parameters </a> </li> <li class=md-nav__item> <a href=#statefulset-parameters class=md-nav__link> Statefulset parameters </a> </li> <li class=md-nav__item> <a href=#traffic-exposure-parameters class=md-nav__link> Traffic Exposure parameters </a> </li> <li class=md-nav__item> <a href=#persistence-parameters class=md-nav__link> Persistence parameters </a> </li> <li class=md-nav__item> <a href=#volume-permissions-parameters class=md-nav__link> Volume Permissions parameters </a> </li> <li class=md-nav__item> <a href=#other-parameters class=md-nav__link> Other Parameters </a> </li> <li class=md-nav__item> <a href=#metrics-parameters class=md-nav__link> Metrics parameters </a> </li> <li class=md-nav__item> <a href=#kafka-provisioning-parameters class=md-nav__link> Kafka provisioning parameters </a> </li> <li class=md-nav__item> <a href=#kraft-chart-parameters class=md-nav__link> Kraft chart parameters </a> </li> <li class=md-nav__item> <a href=#zookeeper-chart-parameters class=md-nav__link> ZooKeeper chart parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-and-installation-details class=md-nav__link> Configuration and installation details </a> <nav class=md-nav aria-label="Configuration and installation details"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rolling-vs-immutable-tags class=md-nav__link> Rolling VS Immutable tags </a> </li> <li class=md-nav__item> <a href=#setting-custom-parameters class=md-nav__link> Setting custom parameters </a> </li> <li class=md-nav__item> <a href=#listeners-configuration class=md-nav__link> Listeners configuration </a> </li> <li class=md-nav__item> <a href=#enable-security-for-kafka-and-zookeeper class=md-nav__link> Enable security for Kafka and Zookeeper </a> </li> <li class=md-nav__item> <a href=#accessing-kafka-brokers-from-outside-the-cluster class=md-nav__link> Accessing Kafka brokers from outside the cluster </a> <nav class=md-nav aria-label="Accessing Kafka brokers from outside the cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-loadbalancer-services class=md-nav__link> Using LoadBalancer services </a> </li> <li class=md-nav__item> <a href=#using-nodeport-services class=md-nav__link> Using NodePort services </a> </li> <li class=md-nav__item> <a href=#using-clusterip-services class=md-nav__link> Using ClusterIP services </a> </li> <li class=md-nav__item> <a href=#name-resolution-with-external-dns class=md-nav__link> Name resolution with External-DNS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sidecars class=md-nav__link> Sidecars </a> </li> <li class=md-nav__item> <a href=#setting-pods-affinity class=md-nav__link> Setting Pod's affinity </a> </li> <li class=md-nav__item> <a href=#deploying-extra-resources class=md-nav__link> Deploying extra resources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#persistence class=md-nav__link> Persistence </a> <nav class=md-nav aria-label=Persistence> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adjust-permissions-of-persistent-volume-mountpoint class=md-nav__link> Adjust permissions of persistent volume mountpoint </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=#upgrading class=md-nav__link> Upgrading </a> <nav class=md-nav aria-label=Upgrading> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-2200 class=md-nav__link> To 22.0.0 </a> </li> <li class=md-nav__item> <a href=#to-2100 class=md-nav__link> To 21.0.0 </a> </li> <li class=md-nav__item> <a href=#to-2000 class=md-nav__link> To 20.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1900 class=md-nav__link> To 19.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1800 class=md-nav__link> To 18.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1600 class=md-nav__link> To 16.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1500 class=md-nav__link> To 15.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1400 class=md-nav__link> To 14.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1300 class=md-nav__link> To 13.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1220 class=md-nav__link> To 12.2.0 </a> </li> <li class=md-nav__item> <a href=#to-1200 class=md-nav__link> To 12.0.0 </a> <nav class=md-nav aria-label="To 12.0.0"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-changes-were-introduced-in-this-major-version class=md-nav__link> What changes were introduced in this major version? </a> </li> <li class=md-nav__item> <a href=#considerations-when-upgrading-to-this-version class=md-nav__link> Considerations when upgrading to this version </a> </li> <li class=md-nav__item> <a href=#useful-links class=md-nav__link> Useful links </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#to-1180 class=md-nav__link> To 11.8.0 </a> </li> <li class=md-nav__item> <a href=#to-1170 class=md-nav__link> To 11.7.0 </a> </li> <li class=md-nav__item> <a href=#to-1100 class=md-nav__link> To 11.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1000 class=md-nav__link> To 10.0.0 </a> </li> <li class=md-nav__item> <a href=#to-900 class=md-nav__link> To 9.0.0 </a> </li> <li class=md-nav__item> <a href=#to-800 class=md-nav__link> To 8.0.0 </a> </li> <li class=md-nav__item> <a href=#to-700 class=md-nav__link> To 7.0.0 </a> </li> <li class=md-nav__item> <a href=#to-200 class=md-nav__link> To 2.0.0 </a> </li> <li class=md-nav__item> <a href=#to-100 class=md-nav__link> To 1.0.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> License </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!--- app-name: Apache Kafka --> <h1 id=apache-kafka-packaged-by-bitnami>Apache Kafka packaged by Bitnami<a class=headerlink href=#apache-kafka-packaged-by-bitnami title="Permanent link">&para;</a></h1> <p>Apache Kafka is a distributed streaming platform designed to build real-time pipelines and can be used as a message broker or as a replacement for a log aggregation solution for big data applications.</p> <p><a href=http://kafka.apache.org/ >Overview of Apache Kafka</a></p> <p>Trademarks: This software listing is packaged by Bitnami. The respective trademarks mentioned in the offering are owned by the respective companies, and use of them does not imply any affiliation or endorsement.</p> <h2 id=tldr>TL;DR<a class=headerlink href=#tldr title="Permanent link">&para;</a></h2> <blockquote> <p>使用加速地址添加仓库:</p> </blockquote> <div class="language-shell highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>bitnami<span class=w> </span><span class=s2>&quot;https://helm-charts.itboon.top/bitnami&quot;</span><span class=w> </span>--force-update
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>helm<span class=w> </span>update<span class=w> </span>bitnami
</span></code></pre></div> <div class="language-console highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=go>helm install my-release bitnami/kafka</span>
</span></code></pre></div> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>This chart bootstraps a <a href=https://github.com/bitnami/containers/tree/main/bitnami/kafka>Kafka</a> deployment on a <a href=https://kubernetes.io>Kubernetes</a> cluster using the <a href=https://helm.sh>Helm</a> package manager.</p> <p>Bitnami charts can be used with <a href=https://kubeapps.dev/ >Kubeapps</a> for deployment and management of Helm Charts in clusters.</p> <p>Looking to use Apache Kafka in production? Try <a href=https://bitnami.com/enterprise>VMware Application Catalog</a>, the enterprise edition of Bitnami Application Catalog.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ul> <li>Kubernetes 1.19+</li> <li>Helm 3.2.0+</li> <li>PV provisioner support in the underlying infrastructure</li> </ul> <h2 id=installing-the-chart>Installing the Chart<a class=headerlink href=#installing-the-chart title="Permanent link">&para;</a></h2> <p>To install the chart with the release name <code>my-release</code>:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=go>helm install my-release bitnami/kafka</span>
</span></code></pre></div> <p>These commands deploy Kafka on the Kubernetes cluster in the default configuration. The <a href=#parameters>Parameters</a> section lists the parameters that can be configured during installation.</p> <blockquote> <p><strong>Tip</strong>: List all releases using <code>helm list</code></p> </blockquote> <h2 id=uninstalling-the-chart>Uninstalling the Chart<a class=headerlink href=#uninstalling-the-chart title="Permanent link">&para;</a></h2> <p>To uninstall/delete the <code>my-release</code> deployment:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=go>helm delete my-release</span>
</span></code></pre></div> <p>The command removes all the Kubernetes components associated with the chart and deletes the release.</p> <h2 id=parameters>Parameters<a class=headerlink href=#parameters title="Permanent link">&para;</a></h2> <h3 id=global-parameters>Global parameters<a class=headerlink href=#global-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>global.imageRegistry</code></td> <td>Global Docker image registry</td> <td><code>""</code></td> </tr> <tr> <td><code>global.imagePullSecrets</code></td> <td>Global Docker registry secret names as an array</td> <td><code>[]</code></td> </tr> <tr> <td><code>global.storageClass</code></td> <td>Global StorageClass for Persistent Volume(s)</td> <td><code>""</code></td> </tr> </tbody> </table> <h3 id=common-parameters>Common parameters<a class=headerlink href=#common-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>kubeVersion</code></td> <td>Override Kubernetes version</td> <td><code>""</code></td> </tr> <tr> <td><code>nameOverride</code></td> <td>String to partially override common.names.fullname</td> <td><code>""</code></td> </tr> <tr> <td><code>fullnameOverride</code></td> <td>String to fully override common.names.fullname</td> <td><code>""</code></td> </tr> <tr> <td><code>clusterDomain</code></td> <td>Default Kubernetes cluster domain</td> <td><code>cluster.local</code></td> </tr> <tr> <td><code>commonLabels</code></td> <td>Labels to add to all deployed objects</td> <td><code>{}</code></td> </tr> <tr> <td><code>commonAnnotations</code></td> <td>Annotations to add to all deployed objects</td> <td><code>{}</code></td> </tr> <tr> <td><code>extraDeploy</code></td> <td>Array of extra objects to deploy with the release</td> <td><code>[]</code></td> </tr> <tr> <td><code>serviceBindings.enabled</code></td> <td>Create secret for service binding (Experimental)</td> <td><code>false</code></td> </tr> <tr> <td><code>diagnosticMode.enabled</code></td> <td>Enable diagnostic mode (all probes will be disabled and the command will be overridden)</td> <td><code>false</code></td> </tr> <tr> <td><code>diagnosticMode.command</code></td> <td>Command to override all containers in the statefulset</td> <td><code>["sleep"]</code></td> </tr> <tr> <td><code>diagnosticMode.args</code></td> <td>Args to override all containers in the statefulset</td> <td><code>["infinity"]</code></td> </tr> </tbody> </table> <h3 id=kafka-parameters>Kafka parameters<a class=headerlink href=#kafka-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>image.registry</code></td> <td>Kafka image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>image.repository</code></td> <td>Kafka image repository</td> <td><code>bitnami/kafka</code></td> </tr> <tr> <td><code>image.tag</code></td> <td>Kafka image tag (immutable tags are recommended)</td> <td><code>3.5.0-debian-11-r1</code></td> </tr> <tr> <td><code>image.digest</code></td> <td>Kafka image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>image.pullPolicy</code></td> <td>Kafka image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>image.pullSecrets</code></td> <td>Specify docker-registry secret names as an array</td> <td><code>[]</code></td> </tr> <tr> <td><code>image.debug</code></td> <td>Specify if debug values should be set</td> <td><code>false</code></td> </tr> <tr> <td><code>config</code></td> <td>Configuration file for Kafka. Auto-generated based on other parameters when not specified</td> <td><code>""</code></td> </tr> <tr> <td><code>existingConfigmap</code></td> <td>ConfigMap with Kafka Configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>log4j</code></td> <td>An optional log4j.properties file to overwrite the default of the Kafka brokers</td> <td><code>""</code></td> </tr> <tr> <td><code>existingLog4jConfigMap</code></td> <td>The name of an existing ConfigMap containing a log4j.properties file</td> <td><code>""</code></td> </tr> <tr> <td><code>heapOpts</code></td> <td>Kafka Java Heap size</td> <td><code>-Xmx1024m -Xms1024m</code></td> </tr> <tr> <td><code>deleteTopicEnable</code></td> <td>Switch to enable topic deletion or not</td> <td><code>false</code></td> </tr> <tr> <td><code>autoCreateTopicsEnable</code></td> <td>Switch to enable auto creation of topics. Enabling auto creation of topics not recommended for production or similar environments</td> <td><code>true</code></td> </tr> <tr> <td><code>logFlushIntervalMessages</code></td> <td>The number of messages to accept before forcing a flush of data to disk</td> <td><code>_10000</code></td> </tr> <tr> <td><code>logFlushIntervalMs</code></td> <td>The maximum amount of time a message can sit in a log before we force a flush</td> <td><code>1000</code></td> </tr> <tr> <td><code>logRetentionBytes</code></td> <td>A size-based retention policy for logs</td> <td><code>_1073741824</code></td> </tr> <tr> <td><code>logRetentionCheckIntervalMs</code></td> <td>The interval at which log segments are checked to see if they can be deleted</td> <td><code>300000</code></td> </tr> <tr> <td><code>logRetentionHours</code></td> <td>The minimum age of a log file to be eligible for deletion due to age</td> <td><code>168</code></td> </tr> <tr> <td><code>logSegmentBytes</code></td> <td>The maximum size of a log segment file. When this size is reached a new log segment will be created</td> <td><code>_1073741824</code></td> </tr> <tr> <td><code>logsDirs</code></td> <td>A comma separated list of directories in which kafka's log data is kept</td> <td><code>/bitnami/kafka/data</code></td> </tr> <tr> <td><code>maxMessageBytes</code></td> <td>The largest record batch size allowed by Kafka</td> <td><code>_1000012</code></td> </tr> <tr> <td><code>defaultReplicationFactor</code></td> <td>Default replication factors for automatically created topics</td> <td><code>1</code></td> </tr> <tr> <td><code>offsetsTopicReplicationFactor</code></td> <td>The replication factor for the offsets topic</td> <td><code>1</code></td> </tr> <tr> <td><code>transactionStateLogReplicationFactor</code></td> <td>The replication factor for the transaction topic</td> <td><code>1</code></td> </tr> <tr> <td><code>transactionStateLogMinIsr</code></td> <td>Overridden min.insync.replicas config for the transaction topic</td> <td><code>1</code></td> </tr> <tr> <td><code>numIoThreads</code></td> <td>The number of threads doing disk I/O</td> <td><code>8</code></td> </tr> <tr> <td><code>numNetworkThreads</code></td> <td>The number of threads handling network requests</td> <td><code>3</code></td> </tr> <tr> <td><code>numPartitions</code></td> <td>The default number of log partitions per topic</td> <td><code>1</code></td> </tr> <tr> <td><code>numRecoveryThreadsPerDataDir</code></td> <td>The number of threads per data directory to be used for log recovery at startup and flushing at shutdown</td> <td><code>1</code></td> </tr> <tr> <td><code>socketReceiveBufferBytes</code></td> <td>The receive buffer (SO_RCVBUF) used by the socket server</td> <td><code>102400</code></td> </tr> <tr> <td><code>socketRequestMaxBytes</code></td> <td>The maximum size of a request that the socket server will accept (protection against OOM)</td> <td><code>_104857600</code></td> </tr> <tr> <td><code>socketSendBufferBytes</code></td> <td>The send buffer (SO_SNDBUF) used by the socket server</td> <td><code>102400</code></td> </tr> <tr> <td><code>zookeeperConnectionTimeoutMs</code></td> <td>Timeout in ms for connecting to ZooKeeper</td> <td><code>6000</code></td> </tr> <tr> <td><code>zookeeperChrootPath</code></td> <td>Path which puts data under some path in the global ZooKeeper namespace</td> <td><code>""</code></td> </tr> <tr> <td><code>authorizerClassName</code></td> <td>The Authorizer is configured by setting authorizer.class.name=kafka.security.authorizer.AclAuthorizer in server.properties</td> <td><code>""</code></td> </tr> <tr> <td><code>allowEveryoneIfNoAclFound</code></td> <td>By default, if a resource has no associated ACLs, then no one is allowed to access that resource except super users</td> <td><code>true</code></td> </tr> <tr> <td><code>superUsers</code></td> <td>You can add super users in server.properties</td> <td><code>User:admin</code></td> </tr> <tr> <td><code>auth.clientProtocol</code></td> <td>Authentication protocol for communications with clients. Allowed protocols: <code>plaintext</code>, <code>tls</code>, <code>mtls</code>, <code>sasl</code> and <code>sasl_tls</code></td> <td><code>plaintext</code></td> </tr> <tr> <td><code>auth.externalClientProtocol</code></td> <td>Authentication protocol for communications with external clients. Defaults to value of <code>auth.clientProtocol</code>. Allowed protocols: <code>plaintext</code>, <code>tls</code>, <code>mtls</code>, <code>sasl</code> and <code>sasl_tls</code></td> <td><code>""</code></td> </tr> <tr> <td><code>auth.interBrokerProtocol</code></td> <td>Authentication protocol for inter-broker communications. Allowed protocols: <code>plaintext</code>, <code>tls</code>, <code>mtls</code>, <code>sasl</code> and <code>sasl_tls</code></td> <td><code>plaintext</code></td> </tr> <tr> <td><code>auth.controllerProtocol</code></td> <td>Controller protocol. It is used with Kraft mode only.</td> <td><code>plaintext</code></td> </tr> <tr> <td><code>auth.sasl.mechanisms</code></td> <td>SASL mechanisms when either <code>auth.interBrokerProtocol</code>, <code>auth.clientProtocol</code> or <code>auth.externalClientProtocol</code> are <code>sasl</code>. Allowed types: <code>plain</code>, <code>scram-sha-256</code>, <code>scram-sha-512</code></td> <td><code>plain,scram-sha-256,scram-sha-512</code></td> </tr> <tr> <td><code>auth.sasl.interBrokerMechanism</code></td> <td>SASL mechanism for inter broker communication.</td> <td><code>plain</code></td> </tr> <tr> <td><code>auth.sasl.jaas.clientUsers</code></td> <td>Kafka client user list</td> <td><code>["user"]</code></td> </tr> <tr> <td><code>auth.sasl.jaas.clientPasswords</code></td> <td>Kafka client passwords. This is mandatory if more than one user is specified in clientUsers</td> <td><code>[]</code></td> </tr> <tr> <td><code>auth.sasl.jaas.interBrokerUser</code></td> <td>Kafka inter broker communication user for SASL authentication</td> <td><code>admin</code></td> </tr> <tr> <td><code>auth.sasl.jaas.interBrokerPassword</code></td> <td>Kafka inter broker communication password for SASL authentication</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.sasl.jaas.zookeeperUser</code></td> <td>Kafka ZooKeeper user for SASL authentication</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.sasl.jaas.zookeeperPassword</code></td> <td>Kafka ZooKeeper password for SASL authentication</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.sasl.jaas.existingSecret</code></td> <td>Name of the existing secret containing credentials for clientUsers, interBrokerUser and zookeeperUser</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.tls.type</code></td> <td>Format to use for TLS certificates. Allowed types: <code>jks</code> and <code>pem</code></td> <td><code>jks</code></td> </tr> <tr> <td><code>auth.tls.pemChainIncluded</code></td> <td>Flag to denote that the Certificate Authority (CA) certificates are bundled with the endpoint cert.</td> <td><code>false</code></td> </tr> <tr> <td><code>auth.tls.existingSecrets</code></td> <td>Array existing secrets containing the TLS certificates for the Kafka brokers</td> <td><code>[]</code></td> </tr> <tr> <td><code>auth.tls.autoGenerated</code></td> <td>Generate automatically self-signed TLS certificates for Kafka brokers. Currently only supported if <code>auth.tls.type</code> is <code>pem</code></td> <td><code>false</code></td> </tr> <tr> <td><code>auth.tls.password</code></td> <td>Password to access the JKS files or PEM key when they are password-protected.</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.tls.existingSecret</code></td> <td>Name of the secret containing the password to access the JKS files or PEM key when they are password-protected. (<code>key</code>: <code>password</code>)</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.tls.jksTruststoreSecret</code></td> <td>Name of the existing secret containing your truststore if truststore not existing or different from the ones in the <code>auth.tls.existingSecrets</code></td> <td><code>""</code></td> </tr> <tr> <td><code>auth.tls.jksKeystoreSAN</code></td> <td>The secret key from the <code>auth.tls.existingSecrets</code> containing the keystore with a SAN certificate</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.tls.jksTruststore</code></td> <td>The secret key from the <code>auth.tls.existingSecrets</code> or <code>auth.tls.jksTruststoreSecret</code> containing the truststore</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.tls.endpointIdentificationAlgorithm</code></td> <td>The endpoint identification algorithm to validate server hostname using server certificate</td> <td><code>https</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.enabled</code></td> <td>Enable TLS for Zookeeper client connections.</td> <td><code>false</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.type</code></td> <td>Format to use for TLS certificates. Allowed types: <code>jks</code> and <code>pem</code>.</td> <td><code>jks</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.verifyHostname</code></td> <td>Hostname validation.</td> <td><code>true</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.existingSecret</code></td> <td>Name of the existing secret containing the TLS certificates for ZooKeeper client communications.</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.existingSecretKeystoreKey</code></td> <td>The secret key from the auth.zookeeper.tls.existingSecret containing the Keystore.</td> <td><code>zookeeper.keystore.jks</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.existingSecretTruststoreKey</code></td> <td>The secret key from the auth.zookeeper.tls.existingSecret containing the Truststore.</td> <td><code>zookeeper.truststore.jks</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.passwordsSecret</code></td> <td>Existing secret containing Keystore and Truststore passwords.</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.passwordsSecretKeystoreKey</code></td> <td>The secret key from the auth.zookeeper.tls.passwordsSecret containing the password for the Keystore.</td> <td><code>keystore-password</code></td> </tr> <tr> <td><code>auth.zookeeper.tls.passwordsSecretTruststoreKey</code></td> <td>The secret key from the auth.zookeeper.tls.passwordsSecret containing the password for the Truststore.</td> <td><code>truststore-password</code></td> </tr> <tr> <td><code>listeners</code></td> <td>The address(es) the socket server listens on. Auto-calculated it's set to an empty array</td> <td><code>[]</code></td> </tr> <tr> <td><code>advertisedListeners</code></td> <td>The address(es) (hostname:port) the broker will advertise to producers and consumers. Auto-calculated it's set to an empty array</td> <td><code>[]</code></td> </tr> <tr> <td><code>listenerSecurityProtocolMap</code></td> <td>The protocol-&gt;listener mapping. Auto-calculated it's set to nil</td> <td><code>""</code></td> </tr> <tr> <td><code>allowPlaintextListener</code></td> <td>Allow to use the PLAINTEXT listener</td> <td><code>true</code></td> </tr> <tr> <td><code>interBrokerListenerName</code></td> <td>The listener that the brokers should communicate on</td> <td><code>INTERNAL</code></td> </tr> <tr> <td><code>command</code></td> <td>Override Kafka container command</td> <td><code>["/scripts/setup.sh"]</code></td> </tr> <tr> <td><code>args</code></td> <td>Override Kafka container arguments</td> <td><code>[]</code></td> </tr> <tr> <td><code>extraEnvVars</code></td> <td>Extra environment variables to add to Kafka pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>extraEnvVarsCM</code></td> <td>ConfigMap with extra environment variables</td> <td><code>""</code></td> </tr> <tr> <td><code>extraEnvVarsSecret</code></td> <td>Secret with extra environment variables</td> <td><code>""</code></td> </tr> </tbody> </table> <h3 id=statefulset-parameters>Statefulset parameters<a class=headerlink href=#statefulset-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>replicaCount</code></td> <td>Number of Kafka nodes</td> <td><code>1</code></td> </tr> <tr> <td><code>minId</code></td> <td>Minimal node.id or broker.id values, nodes increment their value respectively</td> <td><code>0</code></td> </tr> <tr> <td><code>brokerRackAssignment</code></td> <td>Set Broker Assignment for multi tenant environment Allowed values: <code>aws-az</code></td> <td><code>""</code></td> </tr> <tr> <td><code>containerPorts.client</code></td> <td>Kafka client container port</td> <td><code>9092</code></td> </tr> <tr> <td><code>containerPorts.controller</code></td> <td>Kafka Controller listener port. It is used if "kraft.enabled: true"</td> <td><code>9093</code></td> </tr> <tr> <td><code>containerPorts.internal</code></td> <td>Kafka inter-broker container port</td> <td><code>9094</code></td> </tr> <tr> <td><code>containerPorts.external</code></td> <td>Kafka external container port</td> <td><code>9095</code></td> </tr> <tr> <td><code>livenessProbe.enabled</code></td> <td>Enable livenessProbe on Kafka containers</td> <td><code>true</code></td> </tr> <tr> <td><code>livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>3</code></td> </tr> <tr> <td><code>livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>readinessProbe.enabled</code></td> <td>Enable readinessProbe on Kafka containers</td> <td><code>true</code></td> </tr> <tr> <td><code>readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>startupProbe.enabled</code></td> <td>Enable startupProbe on Kafka containers</td> <td><code>false</code></td> </tr> <tr> <td><code>startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>lifecycleHooks</code></td> <td>lifecycleHooks for the Kafka container to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>resources.limits</code></td> <td>The resources limits for the container</td> <td><code>{}</code></td> </tr> <tr> <td><code>resources.requests</code></td> <td>The requested resources for the container</td> <td><code>{}</code></td> </tr> <tr> <td><code>podSecurityContext.enabled</code></td> <td>Enable security context for the pods</td> <td><code>true</code></td> </tr> <tr> <td><code>podSecurityContext.fsGroup</code></td> <td>Set Kafka pod's Security Context fsGroup</td> <td><code>1001</code></td> </tr> <tr> <td><code>containerSecurityContext.enabled</code></td> <td>Enable Kafka containers' Security Context</td> <td><code>true</code></td> </tr> <tr> <td><code>containerSecurityContext.runAsUser</code></td> <td>Set Kafka containers' Security Context runAsUser</td> <td><code>1001</code></td> </tr> <tr> <td><code>containerSecurityContext.runAsNonRoot</code></td> <td>Set Kafka containers' Security Context runAsNonRoot</td> <td><code>true</code></td> </tr> <tr> <td><code>containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Force the child process to be run as nonprivilege</td> <td><code>false</code></td> </tr> <tr> <td><code>hostAliases</code></td> <td>Kafka pods host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>hostNetwork</code></td> <td>Specify if host network should be enabled for Kafka pods</td> <td><code>false</code></td> </tr> <tr> <td><code>hostIPC</code></td> <td>Specify if host IPC should be enabled for Kafka pods</td> <td><code>false</code></td> </tr> <tr> <td><code>podLabels</code></td> <td>Extra labels for Kafka pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>podAnnotations</code></td> <td>Extra annotations for Kafka pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>podAffinityPreset</code></td> <td>Pod affinity preset. Ignored if <code>affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>podAntiAffinityPreset</code></td> <td>Pod anti-affinity preset. Ignored if <code>affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>nodeAffinityPreset.type</code></td> <td>Node affinity preset type. Ignored if <code>affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>nodeAffinityPreset.key</code></td> <td>Node label key to match Ignored if <code>affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>nodeAffinityPreset.values</code></td> <td>Node label values to match. Ignored if <code>affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>affinity</code></td> <td>Affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>nodeSelector</code></td> <td>Node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>tolerations</code></td> <td>Tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>topologySpreadConstraints</code></td> <td>Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template</td> <td><code>[]</code></td> </tr> <tr> <td><code>terminationGracePeriodSeconds</code></td> <td>Seconds the pod needs to gracefully terminate</td> <td><code>""</code></td> </tr> <tr> <td><code>podManagementPolicy</code></td> <td>StatefulSet controller supports relax its ordering guarantees while preserving its uniqueness and identity guarantees. There are two valid pod management policies: OrderedReady and Parallel</td> <td><code>Parallel</code></td> </tr> <tr> <td><code>priorityClassName</code></td> <td>Name of the existing priority class to be used by kafka pods</td> <td><code>""</code></td> </tr> <tr> <td><code>schedulerName</code></td> <td>Name of the k8s scheduler (other than default)</td> <td><code>""</code></td> </tr> <tr> <td><code>updateStrategy.type</code></td> <td>Kafka statefulset strategy type</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>updateStrategy.rollingUpdate</code></td> <td>Kafka statefulset rolling update configuration parameters</td> <td><code>{}</code></td> </tr> <tr> <td><code>extraVolumes</code></td> <td>Optionally specify extra list of additional volumes for the Kafka pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>extraVolumeMounts</code></td> <td>Optionally specify extra list of additional volumeMounts for the Kafka container(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>sidecars</code></td> <td>Add additional sidecar containers to the Kafka pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>initContainers</code></td> <td>Add additional Add init containers to the Kafka pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>pdb.create</code></td> <td>Deploy a pdb object for the Kafka pod</td> <td><code>false</code></td> </tr> <tr> <td><code>pdb.minAvailable</code></td> <td>Maximum number/percentage of unavailable Kafka replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>pdb.maxUnavailable</code></td> <td>Maximum number/percentage of unavailable Kafka replicas</td> <td><code>1</code></td> </tr> </tbody> </table> <h3 id=traffic-exposure-parameters>Traffic Exposure parameters<a class=headerlink href=#traffic-exposure-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>service.type</code></td> <td>Kubernetes Service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>service.ports.client</code></td> <td>Kafka svc port for client connections</td> <td><code>9092</code></td> </tr> <tr> <td><code>service.ports.controller</code></td> <td>Kafka svc port for controller connections. It is used if "kraft.enabled: true"</td> <td><code>9093</code></td> </tr> <tr> <td><code>service.ports.internal</code></td> <td>Kafka svc port for inter-broker connections</td> <td><code>9094</code></td> </tr> <tr> <td><code>service.ports.external</code></td> <td>Kafka svc port for external connections</td> <td><code>9095</code></td> </tr> <tr> <td><code>service.nodePorts.client</code></td> <td>Node port for the Kafka client connections</td> <td><code>""</code></td> </tr> <tr> <td><code>service.nodePorts.external</code></td> <td>Node port for the Kafka external connections</td> <td><code>""</code></td> </tr> <tr> <td><code>service.sessionAffinity</code></td> <td>Control where client requests go, to the same pod or round-robin</td> <td><code>None</code></td> </tr> <tr> <td><code>service.sessionAffinityConfig</code></td> <td>Additional settings for the sessionAffinity</td> <td><code>{}</code></td> </tr> <tr> <td><code>service.clusterIP</code></td> <td>Kafka service Cluster IP</td> <td><code>""</code></td> </tr> <tr> <td><code>service.loadBalancerIP</code></td> <td>Kafka service Load Balancer IP</td> <td><code>""</code></td> </tr> <tr> <td><code>service.loadBalancerSourceRanges</code></td> <td>Kafka service Load Balancer sources</td> <td><code>[]</code></td> </tr> <tr> <td><code>service.externalTrafficPolicy</code></td> <td>Kafka service external traffic policy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>service.annotations</code></td> <td>Additional custom annotations for Kafka service</td> <td><code>{}</code></td> </tr> <tr> <td><code>service.headless.publishNotReadyAddresses</code></td> <td>Indicates that any agent which deals with endpoints for this Service should disregard any indications of ready/not-ready</td> <td><code>false</code></td> </tr> <tr> <td><code>service.headless.annotations</code></td> <td>Annotations for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>service.headless.labels</code></td> <td>Labels for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>service.extraPorts</code></td> <td>Extra ports to expose in the Kafka service (normally used with the <code>sidecar</code> value)</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.enabled</code></td> <td>Enable Kubernetes external cluster access to Kafka brokers</td> <td><code>false</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.enabled</code></td> <td>Enable using an init container to auto-detect external IPs/ports by querying the K8s API</td> <td><code>false</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.image.registry</code></td> <td>Init container auto-discovery image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.image.repository</code></td> <td>Init container auto-discovery image repository</td> <td><code>bitnami/kubectl</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.image.tag</code></td> <td>Init container auto-discovery image tag (immutable tags are recommended)</td> <td><code>1.25.11-debian-11-r4</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.image.digest</code></td> <td>Kubectl image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.image.pullPolicy</code></td> <td>Init container auto-discovery image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.image.pullSecrets</code></td> <td>Init container auto-discovery image pull secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.resources.limits</code></td> <td>The resources limits for the auto-discovery init container</td> <td><code>{}</code></td> </tr> <tr> <td><code>externalAccess.autoDiscovery.resources.requests</code></td> <td>The requested resources for the auto-discovery init container</td> <td><code>{}</code></td> </tr> <tr> <td><code>externalAccess.service.type</code></td> <td>Kubernetes Service type for external access. It can be NodePort, LoadBalancer or ClusterIP</td> <td><code>LoadBalancer</code></td> </tr> <tr> <td><code>externalAccess.service.ports.external</code></td> <td>Kafka port used for external access when service type is LoadBalancer</td> <td><code>9094</code></td> </tr> <tr> <td><code>externalAccess.service.loadBalancerIPs</code></td> <td>Array of load balancer IPs for each Kafka broker. Length must be the same as replicaCount</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.service.loadBalancerNames</code></td> <td>Array of load balancer Names for each Kafka broker. Length must be the same as replicaCount</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.service.loadBalancerAnnotations</code></td> <td>Array of load balancer annotations for each Kafka broker. Length must be the same as replicaCount</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.service.loadBalancerSourceRanges</code></td> <td>Address(es) that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.service.nodePorts</code></td> <td>Array of node ports used for each Kafka broker. Length must be the same as replicaCount</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.service.externalIPs</code></td> <td>Use distinct service host IPs to configure Kafka external listener when service type is NodePort. Length must be the same as replicaCount</td> <td><code>[]</code></td> </tr> <tr> <td><code>externalAccess.service.useHostIPs</code></td> <td>Use service host IPs to configure Kafka external listener when service type is NodePort</td> <td><code>false</code></td> </tr> <tr> <td><code>externalAccess.service.usePodIPs</code></td> <td>using the MY_POD_IP address for external access.</td> <td><code>false</code></td> </tr> <tr> <td><code>externalAccess.service.domain</code></td> <td>Domain or external ip used to configure Kafka external listener when service type is NodePort or ClusterIP</td> <td><code>""</code></td> </tr> <tr> <td><code>externalAccess.service.publishNotReadyAddresses</code></td> <td>Indicates that any agent which deals with endpoints for this Service should disregard any indications of ready/not-ready</td> <td><code>false</code></td> </tr> <tr> <td><code>externalAccess.service.labels</code></td> <td>Service labels for external access</td> <td><code>{}</code></td> </tr> <tr> <td><code>externalAccess.service.annotations</code></td> <td>Service annotations for external access</td> <td><code>{}</code></td> </tr> <tr> <td><code>externalAccess.service.extraPorts</code></td> <td>Extra ports to expose in the Kafka external service</td> <td><code>[]</code></td> </tr> <tr> <td><code>networkPolicy.enabled</code></td> <td>Specifies whether a NetworkPolicy should be created</td> <td><code>false</code></td> </tr> <tr> <td><code>networkPolicy.allowExternal</code></td> <td>Don't require client label for connections</td> <td><code>true</code></td> </tr> <tr> <td><code>networkPolicy.explicitNamespacesSelector</code></td> <td>A Kubernetes LabelSelector to explicitly select namespaces from which traffic could be allowed</td> <td><code>{}</code></td> </tr> <tr> <td><code>networkPolicy.externalAccess.from</code></td> <td>customize the from section for External Access on tcp-external port</td> <td><code>[]</code></td> </tr> <tr> <td><code>networkPolicy.egressRules.customRules</code></td> <td>Custom network policy rule</td> <td><code>{}</code></td> </tr> </tbody> </table> <h3 id=persistence-parameters>Persistence parameters<a class=headerlink href=#persistence-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>persistence.enabled</code></td> <td>Enable Kafka data persistence using PVC, note that ZooKeeper persistence is unaffected</td> <td><code>true</code></td> </tr> <tr> <td><code>persistence.existingClaim</code></td> <td>A manually managed Persistent Volume and Claim</td> <td><code>""</code></td> </tr> <tr> <td><code>persistence.storageClass</code></td> <td>PVC Storage Class for Kafka data volume</td> <td><code>""</code></td> </tr> <tr> <td><code>persistence.accessModes</code></td> <td>Persistent Volume Access Modes</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>persistence.size</code></td> <td>PVC Storage Request for Kafka data volume</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>persistence.annotations</code></td> <td>Annotations for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>persistence.labels</code></td> <td>Labels for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>persistence.selector</code></td> <td>Selector to match an existing Persistent Volume for Kafka data PVC. If set, the PVC can't have a PV dynamically provisioned for it</td> <td><code>{}</code></td> </tr> <tr> <td><code>persistence.mountPath</code></td> <td>Mount path of the Kafka data volume</td> <td><code>/bitnami/kafka</code></td> </tr> <tr> <td><code>logPersistence.enabled</code></td> <td>Enable Kafka logs persistence using PVC, note that ZooKeeper persistence is unaffected</td> <td><code>false</code></td> </tr> <tr> <td><code>logPersistence.existingClaim</code></td> <td>A manually managed Persistent Volume and Claim</td> <td><code>""</code></td> </tr> <tr> <td><code>logPersistence.storageClass</code></td> <td>PVC Storage Class for Kafka logs volume</td> <td><code>""</code></td> </tr> <tr> <td><code>logPersistence.accessModes</code></td> <td>Persistent Volume Access Modes</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>logPersistence.size</code></td> <td>PVC Storage Request for Kafka logs volume</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>logPersistence.annotations</code></td> <td>Annotations for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>logPersistence.selector</code></td> <td>Selector to match an existing Persistent Volume for Kafka log data PVC. If set, the PVC can't have a PV dynamically provisioned for it</td> <td><code>{}</code></td> </tr> <tr> <td><code>logPersistence.mountPath</code></td> <td>Mount path of the Kafka logs volume</td> <td><code>/opt/bitnami/kafka/logs</code></td> </tr> </tbody> </table> <h3 id=volume-permissions-parameters>Volume Permissions parameters<a class=headerlink href=#volume-permissions-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>volumePermissions.enabled</code></td> <td>Enable init container that changes the owner and group of the persistent volume</td> <td><code>false</code></td> </tr> <tr> <td><code>volumePermissions.image.registry</code></td> <td>Init container volume-permissions image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>volumePermissions.image.repository</code></td> <td>Init container volume-permissions image repository</td> <td><code>bitnami/bitnami-shell</code></td> </tr> <tr> <td><code>volumePermissions.image.tag</code></td> <td>Init container volume-permissions image tag (immutable tags are recommended)</td> <td><code>11-debian-11-r130</code></td> </tr> <tr> <td><code>volumePermissions.image.digest</code></td> <td>Init container volume-permissions image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>volumePermissions.image.pullPolicy</code></td> <td>Init container volume-permissions image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>volumePermissions.image.pullSecrets</code></td> <td>Init container volume-permissions image pull secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>volumePermissions.resources.limits</code></td> <td>Init container volume-permissions resource limits</td> <td><code>{}</code></td> </tr> <tr> <td><code>volumePermissions.resources.requests</code></td> <td>Init container volume-permissions resource requests</td> <td><code>{}</code></td> </tr> <tr> <td><code>volumePermissions.containerSecurityContext.runAsUser</code></td> <td>User ID for the init container</td> <td><code>0</code></td> </tr> </tbody> </table> <h3 id=other-parameters>Other Parameters<a class=headerlink href=#other-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>serviceAccount.create</code></td> <td>Enable creation of ServiceAccount for Kafka pods</td> <td><code>true</code></td> </tr> <tr> <td><code>serviceAccount.name</code></td> <td>The name of the service account to use. If not set and <code>create</code> is <code>true</code>, a name is generated</td> <td><code>""</code></td> </tr> <tr> <td><code>serviceAccount.automountServiceAccountToken</code></td> <td>Allows auto mount of ServiceAccountToken on the serviceAccount created</td> <td><code>true</code></td> </tr> <tr> <td><code>serviceAccount.annotations</code></td> <td>Additional custom annotations for the ServiceAccount</td> <td><code>{}</code></td> </tr> <tr> <td><code>rbac.create</code></td> <td>Whether to create &amp; use RBAC resources or not</td> <td><code>false</code></td> </tr> </tbody> </table> <h3 id=metrics-parameters>Metrics parameters<a class=headerlink href=#metrics-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>metrics.kafka.enabled</code></td> <td>Whether or not to create a standalone Kafka exporter to expose Kafka metrics</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.kafka.image.registry</code></td> <td>Kafka exporter image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>metrics.kafka.image.repository</code></td> <td>Kafka exporter image repository</td> <td><code>bitnami/kafka-exporter</code></td> </tr> <tr> <td><code>metrics.kafka.image.tag</code></td> <td>Kafka exporter image tag (immutable tags are recommended)</td> <td><code>1.7.0-debian-11-r11</code></td> </tr> <tr> <td><code>metrics.kafka.image.digest</code></td> <td>Kafka exporter image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.image.pullPolicy</code></td> <td>Kafka exporter image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>metrics.kafka.image.pullSecrets</code></td> <td>Specify docker-registry secret names as an array</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.certificatesSecret</code></td> <td>Name of the existing secret containing the optional certificate and key files</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.tlsCert</code></td> <td>The secret key from the certificatesSecret if 'client-cert' key different from the default (cert-file)</td> <td><code>cert-file</code></td> </tr> <tr> <td><code>metrics.kafka.tlsKey</code></td> <td>The secret key from the certificatesSecret if 'client-key' key different from the default (key-file)</td> <td><code>key-file</code></td> </tr> <tr> <td><code>metrics.kafka.tlsCaSecret</code></td> <td>Name of the existing secret containing the optional ca certificate for Kafka exporter client authentication</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.tlsCaCert</code></td> <td>The secret key from the certificatesSecret or tlsCaSecret if 'ca-cert' key different from the default (ca-file)</td> <td><code>ca-file</code></td> </tr> <tr> <td><code>metrics.kafka.extraFlags</code></td> <td>Extra flags to be passed to Kafka exporter</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.command</code></td> <td>Override Kafka exporter container command</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.args</code></td> <td>Override Kafka exporter container arguments</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.containerPorts.metrics</code></td> <td>Kafka exporter metrics container port</td> <td><code>9308</code></td> </tr> <tr> <td><code>metrics.kafka.resources.limits</code></td> <td>The resources limits for the container</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.resources.requests</code></td> <td>The requested resources for the container</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.podSecurityContext.enabled</code></td> <td>Enable security context for the pods</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.kafka.podSecurityContext.fsGroup</code></td> <td>Set Kafka exporter pod's Security Context fsGroup</td> <td><code>1001</code></td> </tr> <tr> <td><code>metrics.kafka.containerSecurityContext.enabled</code></td> <td>Enable Kafka exporter containers' Security Context</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.kafka.containerSecurityContext.runAsUser</code></td> <td>Set Kafka exporter containers' Security Context runAsUser</td> <td><code>1001</code></td> </tr> <tr> <td><code>metrics.kafka.containerSecurityContext.runAsNonRoot</code></td> <td>Set Kafka exporter containers' Security Context runAsNonRoot</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.kafka.hostAliases</code></td> <td>Kafka exporter pods host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.podLabels</code></td> <td>Extra labels for Kafka exporter pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.podAnnotations</code></td> <td>Extra annotations for Kafka exporter pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.podAffinityPreset</code></td> <td>Pod affinity preset. Ignored if <code>metrics.kafka.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.podAntiAffinityPreset</code></td> <td>Pod anti-affinity preset. Ignored if <code>metrics.kafka.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>metrics.kafka.nodeAffinityPreset.type</code></td> <td>Node affinity preset type. Ignored if <code>metrics.kafka.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.nodeAffinityPreset.key</code></td> <td>Node label key to match Ignored if <code>metrics.kafka.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.nodeAffinityPreset.values</code></td> <td>Node label values to match. Ignored if <code>metrics.kafka.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.affinity</code></td> <td>Affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.nodeSelector</code></td> <td>Node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.tolerations</code></td> <td>Tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Kafka exporter</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.priorityClassName</code></td> <td>Kafka exporter pods' priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.extraVolumes</code></td> <td>Optionally specify extra list of additional volumes for the Kafka exporter pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.extraVolumeMounts</code></td> <td>Optionally specify extra list of additional volumeMounts for the Kafka exporter container(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.sidecars</code></td> <td>Add additional sidecar containers to the Kafka exporter pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.initContainers</code></td> <td>Add init containers to the Kafka exporter pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.kafka.service.ports.metrics</code></td> <td>Kafka exporter metrics service port</td> <td><code>9308</code></td> </tr> <tr> <td><code>metrics.kafka.service.clusterIP</code></td> <td>Static clusterIP or None for headless services</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.service.sessionAffinity</code></td> <td>Control where client requests go, to the same pod or round-robin</td> <td><code>None</code></td> </tr> <tr> <td><code>metrics.kafka.service.annotations</code></td> <td>Annotations for the Kafka exporter service</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.kafka.serviceAccount.create</code></td> <td>Enable creation of ServiceAccount for Kafka exporter pods</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.kafka.serviceAccount.name</code></td> <td>The name of the service account to use. If not set and <code>create</code> is <code>true</code>, a name is generated</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.kafka.serviceAccount.automountServiceAccountToken</code></td> <td>Allows auto mount of ServiceAccountToken on the serviceAccount created</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.jmx.enabled</code></td> <td>Whether or not to expose JMX metrics to Prometheus</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.jmx.image.registry</code></td> <td>JMX exporter image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>metrics.jmx.image.repository</code></td> <td>JMX exporter image repository</td> <td><code>bitnami/jmx-exporter</code></td> </tr> <tr> <td><code>metrics.jmx.image.tag</code></td> <td>JMX exporter image tag (immutable tags are recommended)</td> <td><code>0.18.0-debian-11-r34</code></td> </tr> <tr> <td><code>metrics.jmx.image.digest</code></td> <td>JMX exporter image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.jmx.image.pullPolicy</code></td> <td>JMX exporter image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>metrics.jmx.image.pullSecrets</code></td> <td>Specify docker-registry secret names as an array</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.jmx.containerSecurityContext.enabled</code></td> <td>Enable Prometheus JMX exporter containers' Security Context</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.jmx.containerSecurityContext.runAsUser</code></td> <td>Set Prometheus JMX exporter containers' Security Context runAsUser</td> <td><code>1001</code></td> </tr> <tr> <td><code>metrics.jmx.containerSecurityContext.runAsNonRoot</code></td> <td>Set Prometheus JMX exporter containers' Security Context runAsNonRoot</td> <td><code>true</code></td> </tr> <tr> <td><code>metrics.jmx.containerPorts.metrics</code></td> <td>Prometheus JMX exporter metrics container port</td> <td><code>5556</code></td> </tr> <tr> <td><code>metrics.jmx.resources.limits</code></td> <td>The resources limits for the JMX exporter container</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.jmx.resources.requests</code></td> <td>The requested resources for the JMX exporter container</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.jmx.service.ports.metrics</code></td> <td>Prometheus JMX exporter metrics service port</td> <td><code>5556</code></td> </tr> <tr> <td><code>metrics.jmx.service.clusterIP</code></td> <td>Static clusterIP or None for headless services</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.jmx.service.sessionAffinity</code></td> <td>Control where client requests go, to the same pod or round-robin</td> <td><code>None</code></td> </tr> <tr> <td><code>metrics.jmx.service.annotations</code></td> <td>Annotations for the Prometheus JMX exporter service</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.jmx.whitelistObjectNames</code></td> <td>Allows setting which JMX objects you want to expose to via JMX stats to JMX exporter</td> <td><code>["kafka.controller:*","kafka.server:*","java.lang:*","kafka.network:*","kafka.log:*"]</code></td> </tr> <tr> <td><code>metrics.jmx.config</code></td> <td>Configuration file for JMX exporter</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.jmx.existingConfigmap</code></td> <td>Name of existing ConfigMap with JMX exporter configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.jmx.extraRules</code></td> <td>Add extra rules to JMX exporter configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.enabled</code></td> <td>if <code>true</code>, creates a Prometheus Operator ServiceMonitor (requires <code>metrics.kafka.enabled</code> or <code>metrics.jmx.enabled</code> to be <code>true</code>)</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.namespace</code></td> <td>Namespace in which Prometheus is running</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.interval</code></td> <td>Interval at which metrics should be scraped</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.scrapeTimeout</code></td> <td>Timeout after which the scrape is ended</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.labels</code></td> <td>Additional labels that can be used so ServiceMonitor will be discovered by Prometheus</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.selector</code></td> <td>Prometheus instance selector labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.relabelings</code></td> <td>RelabelConfigs to apply to samples before scraping</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.metricRelabelings</code></td> <td>MetricRelabelConfigs to apply to samples before ingestion</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.honorLabels</code></td> <td>Specify honorLabels parameter to add the scrape endpoint</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.jobLabel</code></td> <td>The name of the label on the target service to use as the job name in prometheus.</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.prometheusRule.enabled</code></td> <td>if <code>true</code>, creates a Prometheus Operator PrometheusRule (requires <code>metrics.kafka.enabled</code> or <code>metrics.jmx.enabled</code> to be <code>true</code>)</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.prometheusRule.namespace</code></td> <td>Namespace in which Prometheus is running</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.prometheusRule.labels</code></td> <td>Additional labels that can be used so PrometheusRule will be discovered by Prometheus</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.prometheusRule.groups</code></td> <td>Prometheus Rule Groups for Kafka</td> <td><code>[]</code></td> </tr> </tbody> </table> <h3 id=kafka-provisioning-parameters>Kafka provisioning parameters<a class=headerlink href=#kafka-provisioning-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>provisioning.enabled</code></td> <td>Enable kafka provisioning Job</td> <td><code>false</code></td> </tr> <tr> <td><code>provisioning.numPartitions</code></td> <td>Default number of partitions for topics when unspecified</td> <td><code>1</code></td> </tr> <tr> <td><code>provisioning.replicationFactor</code></td> <td>Default replication factor for topics when unspecified</td> <td><code>1</code></td> </tr> <tr> <td><code>provisioning.topics</code></td> <td>Kafka topics to provision</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.nodeSelector</code></td> <td>Node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>provisioning.tolerations</code></td> <td>Tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.extraProvisioningCommands</code></td> <td>Extra commands to run to provision cluster resources</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.parallel</code></td> <td>Number of provisioning commands to run at the same time</td> <td><code>1</code></td> </tr> <tr> <td><code>provisioning.preScript</code></td> <td>Extra bash script to run before topic provisioning. $CLIENT_CONF is path to properties file with most needed configurations</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.postScript</code></td> <td>Extra bash script to run after topic provisioning. $CLIENT_CONF is path to properties file with most needed configurations</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.auth.tls.type</code></td> <td>Format to use for TLS certificates. Allowed types: <code>jks</code> and <code>pem</code>.</td> <td><code>jks</code></td> </tr> <tr> <td><code>provisioning.auth.tls.certificatesSecret</code></td> <td>Existing secret containing the TLS certificates for the Kafka provisioning Job.</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.auth.tls.cert</code></td> <td>The secret key from the certificatesSecret if 'cert' key different from the default (tls.crt)</td> <td><code>tls.crt</code></td> </tr> <tr> <td><code>provisioning.auth.tls.key</code></td> <td>The secret key from the certificatesSecret if 'key' key different from the default (tls.key)</td> <td><code>tls.key</code></td> </tr> <tr> <td><code>provisioning.auth.tls.caCert</code></td> <td>The secret key from the certificatesSecret if 'caCert' key different from the default (ca.crt)</td> <td><code>ca.crt</code></td> </tr> <tr> <td><code>provisioning.auth.tls.keystore</code></td> <td>The secret key from the certificatesSecret if 'keystore' key different from the default (keystore.jks)</td> <td><code>keystore.jks</code></td> </tr> <tr> <td><code>provisioning.auth.tls.truststore</code></td> <td>The secret key from the certificatesSecret if 'truststore' key different from the default (truststore.jks)</td> <td><code>truststore.jks</code></td> </tr> <tr> <td><code>provisioning.auth.tls.passwordsSecret</code></td> <td>Name of the secret containing passwords to access the JKS files or PEM key when they are password-protected.</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.auth.tls.keyPasswordSecretKey</code></td> <td>The secret key from the passwordsSecret if 'keyPasswordSecretKey' key different from the default (key-password)</td> <td><code>key-password</code></td> </tr> <tr> <td><code>provisioning.auth.tls.keystorePasswordSecretKey</code></td> <td>The secret key from the passwordsSecret if 'keystorePasswordSecretKey' key different from the default (keystore-password)</td> <td><code>keystore-password</code></td> </tr> <tr> <td><code>provisioning.auth.tls.truststorePasswordSecretKey</code></td> <td>The secret key from the passwordsSecret if 'truststorePasswordSecretKey' key different from the default (truststore-password)</td> <td><code>truststore-password</code></td> </tr> <tr> <td><code>provisioning.auth.tls.keyPassword</code></td> <td>Password to access the password-protected PEM key if necessary. Ignored if 'passwordsSecret' is provided.</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.auth.tls.keystorePassword</code></td> <td>Password to access the JKS keystore. Ignored if 'passwordsSecret' is provided.</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.auth.tls.truststorePassword</code></td> <td>Password to access the JKS truststore. Ignored if 'passwordsSecret' is provided.</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.command</code></td> <td>Override provisioning container command</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.args</code></td> <td>Override provisioning container arguments</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.extraEnvVars</code></td> <td>Extra environment variables to add to the provisioning pod</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.extraEnvVarsCM</code></td> <td>ConfigMap with extra environment variables</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.extraEnvVarsSecret</code></td> <td>Secret with extra environment variables</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.podAnnotations</code></td> <td>Extra annotations for Kafka provisioning pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>provisioning.podLabels</code></td> <td>Extra labels for Kafka provisioning pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>provisioning.serviceAccount.create</code></td> <td>Enable creation of ServiceAccount for Kafka provisioning pods</td> <td><code>false</code></td> </tr> <tr> <td><code>provisioning.serviceAccount.name</code></td> <td>The name of the service account to use. If not set and <code>create</code> is <code>true</code>, a name is generated</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.serviceAccount.automountServiceAccountToken</code></td> <td>Allows auto mount of ServiceAccountToken on the serviceAccount created</td> <td><code>true</code></td> </tr> <tr> <td><code>provisioning.resources.limits</code></td> <td>The resources limits for the Kafka provisioning container</td> <td><code>{}</code></td> </tr> <tr> <td><code>provisioning.resources.requests</code></td> <td>The requested resources for the Kafka provisioning container</td> <td><code>{}</code></td> </tr> <tr> <td><code>provisioning.podSecurityContext.enabled</code></td> <td>Enable security context for the pods</td> <td><code>true</code></td> </tr> <tr> <td><code>provisioning.podSecurityContext.fsGroup</code></td> <td>Set Kafka provisioning pod's Security Context fsGroup</td> <td><code>1001</code></td> </tr> <tr> <td><code>provisioning.containerSecurityContext.enabled</code></td> <td>Enable Kafka provisioning containers' Security Context</td> <td><code>true</code></td> </tr> <tr> <td><code>provisioning.containerSecurityContext.runAsUser</code></td> <td>Set Kafka provisioning containers' Security Context runAsUser</td> <td><code>1001</code></td> </tr> <tr> <td><code>provisioning.containerSecurityContext.runAsNonRoot</code></td> <td>Set Kafka provisioning containers' Security Context runAsNonRoot</td> <td><code>true</code></td> </tr> <tr> <td><code>provisioning.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for kafka provisioning</td> <td><code>""</code></td> </tr> <tr> <td><code>provisioning.extraVolumes</code></td> <td>Optionally specify extra list of additional volumes for the Kafka provisioning pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.extraVolumeMounts</code></td> <td>Optionally specify extra list of additional volumeMounts for the Kafka provisioning container(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.sidecars</code></td> <td>Add additional sidecar containers to the Kafka provisioning pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.initContainers</code></td> <td>Add additional Add init containers to the Kafka provisioning pod(s)</td> <td><code>[]</code></td> </tr> <tr> <td><code>provisioning.waitForKafka</code></td> <td>If true use an init container to wait until kafka is ready before starting provisioning</td> <td><code>true</code></td> </tr> </tbody> </table> <h3 id=kraft-chart-parameters>Kraft chart parameters<a class=headerlink href=#kraft-chart-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>kraft.enabled</code></td> <td>Switch to enable or disable the Kraft mode for Kafka</td> <td><code>true</code></td> </tr> <tr> <td><code>kraft.processRoles</code></td> <td>Roles of your Kafka nodes. Nodes can have 'broker', 'controller' roles or both of them.</td> <td><code>broker,controller</code></td> </tr> <tr> <td><code>kraft.controllerListenerNames</code></td> <td>Controller listener names</td> <td><code>CONTROLLER</code></td> </tr> <tr> <td><code>kraft.clusterId</code></td> <td>Kafka ClusterID. You must set it if your cluster contains more than one node.</td> <td><code>kafka_cluster_id_test1</code></td> </tr> <tr> <td><code>kraft.controllerQuorumVoters</code></td> <td>Quorum voters of Kafka Kraft cluster. Use it for nodes with 'broker' role only.</td> <td><code>""</code></td> </tr> </tbody> </table> <h3 id=zookeeper-chart-parameters>ZooKeeper chart parameters<a class=headerlink href=#zookeeper-chart-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>zookeeper.enabled</code></td> <td>Switch to enable or disable the ZooKeeper helm chart. Must be false if you use Kraft mode.</td> <td><code>false</code></td> </tr> <tr> <td><code>zookeeper.replicaCount</code></td> <td>Number of ZooKeeper nodes</td> <td><code>1</code></td> </tr> <tr> <td><code>zookeeper.auth.client.enabled</code></td> <td>Enable ZooKeeper auth</td> <td><code>false</code></td> </tr> <tr> <td><code>zookeeper.auth.client.clientUser</code></td> <td>User that will use ZooKeeper clients to auth</td> <td><code>""</code></td> </tr> <tr> <td><code>zookeeper.auth.client.clientPassword</code></td> <td>Password that will use ZooKeeper clients to auth</td> <td><code>""</code></td> </tr> <tr> <td><code>zookeeper.auth.client.serverUsers</code></td> <td>Comma, semicolon or whitespace separated list of user to be created. Specify them as a string, for example: "user1,user2,admin"</td> <td><code>""</code></td> </tr> <tr> <td><code>zookeeper.auth.client.serverPasswords</code></td> <td>Comma, semicolon or whitespace separated list of passwords to assign to users when created. Specify them as a string, for example: "pass4user1, pass4user2, pass4admin"</td> <td><code>""</code></td> </tr> <tr> <td><code>zookeeper.persistence.enabled</code></td> <td>Enable persistence on ZooKeeper using PVC(s)</td> <td><code>true</code></td> </tr> <tr> <td><code>zookeeper.persistence.storageClass</code></td> <td>Persistent Volume storage class</td> <td><code>""</code></td> </tr> <tr> <td><code>zookeeper.persistence.accessModes</code></td> <td>Persistent Volume access modes</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>zookeeper.persistence.size</code></td> <td>Persistent Volume size</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>externalZookeeper.servers</code></td> <td>List of external zookeeper servers to use. Typically used in combination with 'zookeeperChrootPath'. Must be empty if you use Kraft mode.</td> <td><code>[]</code></td> </tr> </tbody> </table> <div class="language-console highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=go>helm install my-release \</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=go>  --set replicaCount=3 \</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=go>  bitnami/kafka</span>
</span></code></pre></div> <p>The above command deploys Kafka with 3 brokers (replicas).</p> <p>Alternatively, a YAML file that specifies the values for the parameters can be provided while installing the chart. For example,</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=go>helm install my-release -f values.yaml bitnami/kafka</span>
</span></code></pre></div> <blockquote> <p><strong>Tip</strong>: You can use the default <a href=values.yaml>values.yaml</a></p> </blockquote> <h2 id=configuration-and-installation-details>Configuration and installation details<a class=headerlink href=#configuration-and-installation-details title="Permanent link">&para;</a></h2> <h3 id=rolling-vs-immutable-tags><a href=https://docs.bitnami.com/containers/how-to/understand-rolling-tags-containers/ >Rolling VS Immutable tags</a><a class=headerlink href=#rolling-vs-immutable-tags title="Permanent link">&para;</a></h3> <p>It is strongly recommended to use immutable tags in a production environment. This ensures your deployment does not change automatically if the same tag is updated with a different image.</p> <p>Bitnami will release a new chart updating its containers if a new version of the main container, significant changes, or critical vulnerabilities exist.</p> <h3 id=setting-custom-parameters>Setting custom parameters<a class=headerlink href=#setting-custom-parameters title="Permanent link">&para;</a></h3> <p>Any environment variable beginning with <code>KAFKA_CFG_</code> will be mapped to its corresponding Kafka key. For example, use <code>KAFKA_CFG_BACKGROUND_THREADS</code> in order to set <code>background.threads</code>. In order to pass custom environment variables use the <code>extraEnvVars</code> property.</p> <p>Using <code>extraEnvVars</code> with <code>KAFKA_CFG_</code> is the preferred and simplest way to add custom Kafka parameters not otherwise specified in this chart. Alternatively, you can provide a <em>full</em> Kafka configuration using <code>config</code> or <code>existingConfigmap</code>. Setting either <code>config</code> or <code>existingConfigmap</code> will cause the chart to disregard <code>KAFKA_CFG_</code> settings, which are used by many other Kafka-related chart values described above, as well as dynamically generated parameters such as <code>zookeeper.connect</code>. This can cause unexpected behavior.</p> <h3 id=listeners-configuration>Listeners configuration<a class=headerlink href=#listeners-configuration title="Permanent link">&para;</a></h3> <p>This chart allows you to automatically configure Kafka with 3 listeners:</p> <ul> <li>One for inter-broker communications.</li> <li>A second one for communications with clients within the K8s cluster.</li> <li>(optional) a third listener for communications with clients outside the K8s cluster. Check <a href=#accessing-kafka-brokers-from-outside-the-cluster>this section</a> for more information.</li> </ul> <p>For more complex configurations, set the <code>listeners</code>, <code>advertisedListeners</code> and <code>listenerSecurityProtocolMap</code> parameters as needed.</p> <h3 id=enable-security-for-kafka-and-zookeeper>Enable security for Kafka and Zookeeper<a class=headerlink href=#enable-security-for-kafka-and-zookeeper title="Permanent link">&para;</a></h3> <p>You can configure different authentication protocols for each listener you configure in Kafka. For instance, you can use <code>sasl_tls</code> authentication for client communications, while using <code>tls</code> for inter-broker communications. This table shows the available protocols and the security they provide:</p> <table> <thead> <tr> <th>Method</th> <th>Authentication</th> <th>Encryption via TLS</th> </tr> </thead> <tbody> <tr> <td>plaintext</td> <td>None</td> <td>No</td> </tr> <tr> <td>tls</td> <td>None</td> <td>Yes</td> </tr> <tr> <td>mtls</td> <td>Yes (two-way authentication)</td> <td>Yes</td> </tr> <tr> <td>sasl</td> <td>Yes (via SASL)</td> <td>No</td> </tr> <tr> <td>sasl_tls</td> <td>Yes (via SASL)</td> <td>Yes</td> </tr> </tbody> </table> <p>Learn more about how to configure Kafka to use the different authentication protocols in the <a href=https://docs.bitnami.com/kubernetes/infrastructure/kafka/administration/enable-security/ >chart documentation</a>.</p> <p>If you enabled SASL authentication on any listener, you can set the SASL credentials using the parameters below:</p> <ul> <li><code>auth.sasl.jaas.clientUsers</code>/<code>auth.sasl.jaas.clientPasswords</code>: when enabling SASL authentication for communications with clients.</li> <li><code>auth.sasl.jaas.interBrokerUser</code>/<code>auth.sasl.jaas.interBrokerPassword</code>: when enabling SASL authentication for inter-broker communications.</li> <li><code>auth.jaas.zookeeperUser</code>/<code>auth.jaas.zookeeperPassword</code>: In the case that the Zookeeper chart is deployed with SASL authentication enabled.</li> </ul> <p>In order to configure TLS authentication/encryption, you <strong>can</strong> create a secret per Kafka broker you have in the cluster containing the Java Key Stores (JKS) files: the truststore (<code>kafka.truststore.jks</code>) and the keystore (<code>kafka.keystore.jks</code>). Then, you need pass the secret names with the <code>auth.tls.existingSecrets</code> parameter when deploying the chart.</p> <blockquote> <p><strong>Note</strong>: If the JKS files are password protected (recommended), you will need to provide the password to get access to the keystores. To do so, use the <code>auth.tls.password</code> parameter to provide your password.</p> </blockquote> <p>For instance, to configure TLS authentication on a Kafka cluster with 2 Kafka brokers use the commands below to create the secrets:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=go>kubectl create secret generic kafka-jks-0 --from-file=kafka.truststore.jks=./kafka.truststore.jks --from-file=kafka.keystore.jks=./kafka-0.keystore.jks</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=go>kubectl create secret generic kafka-jks-1 --from-file=kafka.truststore.jks=./kafka.truststore.jks --from-file=kafka.keystore.jks=./kafka-1.keystore.jks</span>
</span></code></pre></div> <blockquote> <p><strong>Note</strong>: the command above assumes you already created the truststore and keystores files. This <a href=https://raw.githubusercontent.com/confluentinc/confluent-platform-security-tools/master/kafka-generate-ssl.sh>script</a> can help you with the JKS files generation.</p> </blockquote> <p>If, for some reason (like using Cert-Manager) you can not use the default JKS secret scheme, you can use the additional parameters:</p> <ul> <li><code>auth.tls.jksTruststoreSecret</code> to define additional secret, where the <code>kafka.truststore.jks</code> is being kept. The truststore password <strong>must</strong> be the same as in <code>auth.tls.password</code></li> <li><code>auth.tls.jksTruststore</code> to overwrite the default value of the truststore key (<code>kafka.truststore.jks</code>).</li> <li><code>auth.tls.jksKeystoreSAN</code> if you want to use a SAN certificate for your brokers. Setting this parameter would mean that the chart expects a existing key in the <code>auth.tls.jksTruststoreSecret</code> with the <code>auth.tls.jksKeystoreSAN</code> value and use this as a keystore for <strong>all</strong> brokers</li> </ul> <blockquote> <p><strong>Note</strong>: If you are using cert-manager, particularly when an ACME issuer is used, the <code>ca.crt</code> field is not put in the <code>Secret</code> that cert-manager creates. To handle this, the <code>auth.tls.pemChainIncluded</code> property can be set to <code>true</code> and the initContainer created by this Chart will attempt to extract the intermediate certs from the <code>tls.crt</code> field of the secret (which is a PEM chain) <strong>Note</strong>: The truststore/keystore from above <strong>must</strong> be protected with the same password as in <code>auth.tls.password</code></p> </blockquote> <p>You can deploy the chart with authentication using the following parameters:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=go>replicaCount=2</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=go>auth.clientProtocol=sasl</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=go>auth.interBrokerProtocol=tls</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=go>auth.tls.existingSecrets[0]=kafka-jks-0</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=go>auth.tls.existingSecrets[1]=kafka-jks-1</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=go>auth.tls.password=jksPassword</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=go>auth.sasl.jaas.clientUsers[0]=brokerUser</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=go>auth.sasl.jaas.clientPasswords[0]=brokerPassword</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=go>auth.sasl.jaas.zookeeperUser=zookeeperUser</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=go>auth.sasl.jaas.zookeeperPassword=zookeeperPassword</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=go>zookeeper.auth.enabled=true</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=go>zookeeper.auth.serverUsers=zookeeperUser</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=go>zookeeper.auth.serverPasswords=zookeeperPassword</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=go>zookeeper.auth.clientUser=zookeeperUser</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=go>zookeeper.auth.clientPassword=zookeeperPassword</span>
</span></code></pre></div> <p>You can deploy the chart with AclAuthorizer using the following parameters:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=go>replicaCount=2</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=go>auth.clientProtocol=sasl</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=go>auth.interBrokerProtocol=sasl_tls</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=go>auth.tls.existingSecrets[0]=kafka-jks-0</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=go>auth.tls.existingSecrets[1]=kafka-jks-1</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=go>auth.tls.password=jksPassword</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=go>auth.sasl.jaas.clientUsers[0]=brokerUser</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=go>auth.sasl.jaas.clientPasswords[0]=brokerPassword</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=go>auth.sasl.jaas.zookeeperUser=zookeeperUser</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=go>auth.sasl.jaas.zookeeperPassword=zookeeperPassword</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=go>zookeeper.auth.enabled=true</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=go>zookeeper.auth.serverUsers=zookeeperUser</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=go>zookeeper.auth.serverPasswords=zookeeperPassword</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=go>zookeeper.auth.clientUser=zookeeperUser</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=go>zookeeper.auth.clientPassword=zookeeperPassword</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=go>authorizerClassName=kafka.security.authorizer.AclAuthorizer</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=go>allowEveryoneIfNoAclFound=false</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=go>superUsers=User:admin</span>
</span></code></pre></div> <p>If you are using Kafka ACLs, you might encounter in kafka-authorizer.log the following event: <code>[...] Principal = User:ANONYMOUS is Allowed Operation [...]</code>.</p> <p>By setting the following parameter: <code>auth.clientProtocol=mtls</code>, it will set the configuration in Kafka to <code>ssl.client.auth=required</code>. This option will require the clients to authenticate to Kafka brokers.</p> <p>As result, we will be able to see in kafka-authorizer.log the events specific Subject: <code>[...] Principal = User:CN=kafka,OU=...,O=...,L=...,C=..,ST=... is [...]</code>.</p> <p>If you also enable exposing metrics using the Kafka exporter, and you are using <code>sasl_tls</code>, <code>tls</code>, or <code>mtls</code> authentication protocols, you need to mount the CA certificated used to sign the brokers certificates in the exporter so it can validate the Kafka brokers. To do so, create a secret containing the CA, and set the <code>metrics.certificatesSecret</code> parameter. As an alternative, you can skip TLS validation using extra flags:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=go>metrics.kafka.extraFlags={tls.insecure-skip-tls-verify: &quot;&quot;}</span>
</span></code></pre></div> <h3 id=accessing-kafka-brokers-from-outside-the-cluster>Accessing Kafka brokers from outside the cluster<a class=headerlink href=#accessing-kafka-brokers-from-outside-the-cluster title="Permanent link">&para;</a></h3> <p>In order to access Kafka Brokers from outside the cluster, an additional listener and advertised listener must be configured. Additionally, a specific service per kafka pod will be created.</p> <p>There are three ways of configuring external access. Using LoadBalancer services, using NodePort services or using ClusterIP services.</p> <h4 id=using-loadbalancer-services>Using LoadBalancer services<a class=headerlink href=#using-loadbalancer-services title="Permanent link">&para;</a></h4> <p>You have two alternatives to use LoadBalancer services:</p> <ul> <li>Option A) Use random load balancer IPs using an <strong>initContainer</strong> that waits for the IPs to be ready and discover them automatically.</li> </ul> <div class="language-console highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=go>externalAccess.enabled=true</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=go>externalAccess.service.type=LoadBalancer</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=go>externalAccess.service.ports.external=9094</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=go>externalAccess.autoDiscovery.enabled=true</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=go>serviceAccount.create=true</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=go>rbac.create=true</span>
</span></code></pre></div> <p>Note: This option requires creating RBAC rules on clusters where RBAC policies are enabled.</p> <ul> <li>Option B) Manually specify the load balancer IPs:</li> </ul> <div class="language-console highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=go>externalAccess.enabled=true</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=go>externalAccess.service.type=LoadBalancer</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=go>externalAccess.service.ports.external=9094</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=go>externalAccess.service.loadBalancerIPs[0]=&#39;external-ip-1&#39;</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=go>externalAccess.service.loadBalancerIPs[1]=&#39;external-ip-2&#39;}</span>
</span></code></pre></div> <p>Note: You need to know in advance the load balancer IPs so each Kafka broker advertised listener is configured with it.</p> <p>Following the aforementioned steps will also allow to connect the brokers from the outside using the cluster's default service (when <code>service.type</code> is <code>LoadBalancer</code> or <code>NodePort</code>). Use the property <code>service.externalPort</code> to specify the port used for external connections.</p> <h4 id=using-nodeport-services>Using NodePort services<a class=headerlink href=#using-nodeport-services title="Permanent link">&para;</a></h4> <p>You have two alternatives to use NodePort services:</p> <ul> <li>Option A) Use random node ports using an <strong>initContainer</strong> that discover them automatically.</li> </ul> <div class="language-console highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=go>externalAccess.enabled=true</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=go>externalAccess.service.type=NodePort</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=go>externalAccess.autoDiscovery.enabled=true</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=go>serviceAccount.create=true</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=go>rbac.create=true</span>
</span></code></pre></div> <p>Note: This option requires creating RBAC rules on clusters where RBAC policies are enabled.</p> <ul> <li>Option B) Manually specify the node ports:</li> </ul> <div class="language-console highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=go>externalAccess.enabled=true</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=go>externalAccess.service.type=NodePort</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=go>externalAccess.service.nodePorts[0]=&#39;node-port-1&#39;</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=go>externalAccess.service.nodePorts[1]=&#39;node-port-2&#39;</span>
</span></code></pre></div> <p>Note: You need to know in advance the node ports that will be exposed so each Kafka broker advertised listener is configured with it.</p> <p>The pod will try to get the external ip of the node using <code>curl -s https://ipinfo.io/ip</code> unless <code>externalAccess.service.domain</code> or <code>externalAccess.service.useHostIPs</code> is provided.</p> <ul> <li>Option C) Manually specify distinct external IPs</li> </ul> <div class="language-console highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=go>externalAccess.enabled=true</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=go>externalAccess.service.type=NodePort</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=go>externalAccess.service.externalIPs[0]=&#39;172.16.0.20&#39;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=go>externalAccess.service.externalIPs[1]=&#39;172.16.0.21&#39;</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=go>externalAccess.service.externalIPs[2]=&#39;172.16.0.22&#39;</span>
</span></code></pre></div> <p>Note: You need to know in advance the available IP of your cluster that will be exposed so each Kafka broker advertised listener is configured with it.</p> <h4 id=using-clusterip-services>Using ClusterIP services<a class=headerlink href=#using-clusterip-services title="Permanent link">&para;</a></h4> <p>Note: This option requires that an ingress is deployed within your cluster</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=go>externalAccess.enabled=true</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=go>externalAccess.service.type=ClusterIP</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=go>externalAccess.service.ports.external=9094</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=go>externalAccess.service.domain=&#39;ingress-ip&#39;</span>
</span></code></pre></div> <p>Note: the deployed ingress must contain the following block:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=go>tcp:</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=go>  9094: &quot;{{ .Release.Namespace }}/{{ include &quot;kafka.fullname&quot; . }}-0-external:9094&quot;</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=go>  9095: &quot;{{ .Release.Namespace }}/{{ include &quot;kafka.fullname&quot; . }}-1-external:9094&quot;</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=go>  9096: &quot;{{ .Release.Namespace }}/{{ include &quot;kafka.fullname&quot; . }}-2-external:9094&quot;</span>
</span></code></pre></div> <h4 id=name-resolution-with-external-dns>Name resolution with External-DNS<a class=headerlink href=#name-resolution-with-external-dns title="Permanent link">&para;</a></h4> <p>You can use the following values to generate External-DNS annotations which automatically creates DNS records for each ReplicaSet pod:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nt>externalAccess</span><span class=p>:</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>  </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>      </span><span class=nt>external-dns.alpha.kubernetes.io/hostname</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{{</span><span class=nv> </span><span class=s>.targetPod</span><span class=nv> </span><span class=s>}}.example.com&quot;</span>
</span></code></pre></div> <h3 id=sidecars>Sidecars<a class=headerlink href=#sidecars title="Permanent link">&para;</a></h3> <p>If you have a need for additional containers to run within the same pod as Kafka (e.g. an additional metrics or logging exporter), you can do so via the <code>sidecars</code> config parameter. Simply define your container according to the Kubernetes container spec.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=nt>sidecars</span><span class=p>:</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">your-image-name</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">your-image</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>    </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">portname</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>      </span><span class="w w-Error"> </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1234</span>
</span></code></pre></div> <h3 id=setting-pods-affinity>Setting Pod's affinity<a class=headerlink href=#setting-pods-affinity title="Permanent link">&para;</a></h3> <p>This chart allows you to set your custom affinity using the <code>affinity</code> parameter. Find more information about Pod's affinity in the <a href=https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity>kubernetes documentation</a>.</p> <p>As an alternative, you can use of the preset configurations for pod affinity, pod anti-affinity, and node affinity available at the <a href=https://github.com/bitnami/charts/tree/main/bitnami/common#affinities>bitnami/common</a> chart. To do so, set the <code>podAffinityPreset</code>, <code>podAntiAffinityPreset</code>, or <code>nodeAffinityPreset</code> parameters.</p> <h3 id=deploying-extra-resources>Deploying extra resources<a class=headerlink href=#deploying-extra-resources title="Permanent link">&para;</a></h3> <p>There are cases where you may want to deploy extra objects, such as Kafka Connect. For covering this case, the chart allows adding the full specification of other objects using the <code>extraDeploy</code> parameter. The following example would create a deployment including a Kafka Connect deployment so you can connect Kafka with MongoDB&reg;:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>## Extra objects to deploy (value evaluated as a template)</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=c1>##</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nt>extraDeploy</span><span class=p>:</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>    </span><span class=no>apiVersion: apps/v1</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=no>kind: Deployment</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>    </span><span class=no>metadata:</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>      </span><span class=no>name: {{ include &quot;kafka.fullname&quot; . }}-connect</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>      </span><span class=no>labels: {{- include &quot;common.labels.standard&quot; . | nindent 4 }}</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=w>        </span><span class=no>app.kubernetes.io/component: connector</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>    </span><span class=no>spec:</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>      </span><span class=no>replicas: 1</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>      </span><span class=no>selector:</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=w>        </span><span class=no>matchLabels: {{- include &quot;common.labels.matchLabels&quot; . | nindent 6 }}</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>          </span><span class=no>app.kubernetes.io/component: connector</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=w>      </span><span class=no>template:</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=w>        </span><span class=no>metadata:</span>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=w>          </span><span class=no>labels: {{- include &quot;common.labels.standard&quot; . | nindent 8 }}</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=w>            </span><span class=no>app.kubernetes.io/component: connector</span>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=w>        </span><span class=no>spec:</span>
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a><span class=w>          </span><span class=no>containers:</span>
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a><span class=w>            </span><span class=no>- name: connect</span>
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a><span class=w>              </span><span class=no>image: KAFKA-CONNECT-IMAGE</span>
</span><span id=__span-19-24><a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a><span class=w>              </span><span class=no>imagePullPolicy: IfNotPresent</span>
</span><span id=__span-19-25><a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a><span class=w>              </span><span class=no>ports:</span>
</span><span id=__span-19-26><a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a><span class=w>                </span><span class=no>- name: connector</span>
</span><span id=__span-19-27><a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a><span class=w>                  </span><span class=no>containerPort: 8083</span>
</span><span id=__span-19-28><a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a><span class=w>              </span><span class=no>volumeMounts:</span>
</span><span id=__span-19-29><a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a><span class=w>                </span><span class=no>- name: configuration</span>
</span><span id=__span-19-30><a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a><span class=w>                  </span><span class=no>mountPath: /bitnami/kafka/config</span>
</span><span id=__span-19-31><a id=__codelineno-19-31 name=__codelineno-19-31 href=#__codelineno-19-31></a><span class=w>          </span><span class=no>volumes:</span>
</span><span id=__span-19-32><a id=__codelineno-19-32 name=__codelineno-19-32 href=#__codelineno-19-32></a><span class=w>            </span><span class=no>- name: configuration</span>
</span><span id=__span-19-33><a id=__codelineno-19-33 name=__codelineno-19-33 href=#__codelineno-19-33></a><span class=w>              </span><span class=no>configMap:</span>
</span><span id=__span-19-34><a id=__codelineno-19-34 name=__codelineno-19-34 href=#__codelineno-19-34></a><span class=w>                </span><span class=no>name: {{ include &quot;kafka.fullname&quot; . }}-connect</span>
</span><span id=__span-19-35><a id=__codelineno-19-35 name=__codelineno-19-35 href=#__codelineno-19-35></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-19-36><a id=__codelineno-19-36 name=__codelineno-19-36 href=#__codelineno-19-36></a><span class=w>    </span><span class=no>apiVersion: v1</span>
</span><span id=__span-19-37><a id=__codelineno-19-37 name=__codelineno-19-37 href=#__codelineno-19-37></a><span class=w>    </span><span class=no>kind: ConfigMap</span>
</span><span id=__span-19-38><a id=__codelineno-19-38 name=__codelineno-19-38 href=#__codelineno-19-38></a><span class=w>    </span><span class=no>metadata:</span>
</span><span id=__span-19-39><a id=__codelineno-19-39 name=__codelineno-19-39 href=#__codelineno-19-39></a><span class=w>      </span><span class=no>name: {{ include &quot;kafka.fullname&quot; . }}-connect</span>
</span><span id=__span-19-40><a id=__codelineno-19-40 name=__codelineno-19-40 href=#__codelineno-19-40></a><span class=w>      </span><span class=no>labels: {{- include &quot;common.labels.standard&quot; . | nindent 4 }}</span>
</span><span id=__span-19-41><a id=__codelineno-19-41 name=__codelineno-19-41 href=#__codelineno-19-41></a><span class=w>        </span><span class=no>app.kubernetes.io/component: connector</span>
</span><span id=__span-19-42><a id=__codelineno-19-42 name=__codelineno-19-42 href=#__codelineno-19-42></a><span class=w>    </span><span class=no>data:</span>
</span><span id=__span-19-43><a id=__codelineno-19-43 name=__codelineno-19-43 href=#__codelineno-19-43></a><span class=w>      </span><span class=no>connect-standalone.properties: |-</span>
</span><span id=__span-19-44><a id=__codelineno-19-44 name=__codelineno-19-44 href=#__codelineno-19-44></a><span class=w>        </span><span class=no>bootstrap.servers = {{ include &quot;kafka.fullname&quot; . }}-0.{{ include &quot;kafka.fullname&quot; . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}:{{ .Values.service.port }}</span>
</span><span id=__span-19-45><a id=__codelineno-19-45 name=__codelineno-19-45 href=#__codelineno-19-45></a><span class=w>        </span><span class=no>...</span>
</span><span id=__span-19-46><a id=__codelineno-19-46 name=__codelineno-19-46 href=#__codelineno-19-46></a><span class=w>      </span><span class=no>mongodb.properties: |-</span>
</span><span id=__span-19-47><a id=__codelineno-19-47 name=__codelineno-19-47 href=#__codelineno-19-47></a><span class=w>        </span><span class=no>connection.uri=mongodb://root:password@mongodb-hostname:27017</span>
</span><span id=__span-19-48><a id=__codelineno-19-48 name=__codelineno-19-48 href=#__codelineno-19-48></a><span class=w>        </span><span class=no>...</span>
</span><span id=__span-19-49><a id=__codelineno-19-49 name=__codelineno-19-49 href=#__codelineno-19-49></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-19-50><a id=__codelineno-19-50 name=__codelineno-19-50 href=#__codelineno-19-50></a><span class=w>    </span><span class=no>apiVersion: v1</span>
</span><span id=__span-19-51><a id=__codelineno-19-51 name=__codelineno-19-51 href=#__codelineno-19-51></a><span class=w>    </span><span class=no>kind: Service</span>
</span><span id=__span-19-52><a id=__codelineno-19-52 name=__codelineno-19-52 href=#__codelineno-19-52></a><span class=w>    </span><span class=no>metadata:</span>
</span><span id=__span-19-53><a id=__codelineno-19-53 name=__codelineno-19-53 href=#__codelineno-19-53></a><span class=w>      </span><span class=no>name: {{ include &quot;kafka.fullname&quot; . }}-connect</span>
</span><span id=__span-19-54><a id=__codelineno-19-54 name=__codelineno-19-54 href=#__codelineno-19-54></a><span class=w>      </span><span class=no>labels: {{- include &quot;common.labels.standard&quot; . | nindent 4 }}</span>
</span><span id=__span-19-55><a id=__codelineno-19-55 name=__codelineno-19-55 href=#__codelineno-19-55></a><span class=w>        </span><span class=no>app.kubernetes.io/component: connector</span>
</span><span id=__span-19-56><a id=__codelineno-19-56 name=__codelineno-19-56 href=#__codelineno-19-56></a><span class=w>    </span><span class=no>spec:</span>
</span><span id=__span-19-57><a id=__codelineno-19-57 name=__codelineno-19-57 href=#__codelineno-19-57></a><span class=w>      </span><span class=no>ports:</span>
</span><span id=__span-19-58><a id=__codelineno-19-58 name=__codelineno-19-58 href=#__codelineno-19-58></a><span class=w>        </span><span class=no>- protocol: TCP</span>
</span><span id=__span-19-59><a id=__codelineno-19-59 name=__codelineno-19-59 href=#__codelineno-19-59></a><span class=w>          </span><span class=no>port: 8083</span>
</span><span id=__span-19-60><a id=__codelineno-19-60 name=__codelineno-19-60 href=#__codelineno-19-60></a><span class=w>          </span><span class=no>targetPort: connector</span>
</span><span id=__span-19-61><a id=__codelineno-19-61 name=__codelineno-19-61 href=#__codelineno-19-61></a><span class=w>      </span><span class=no>selector: {{- include &quot;common.labels.matchLabels&quot; . | nindent 4 }}</span>
</span><span id=__span-19-62><a id=__codelineno-19-62 name=__codelineno-19-62 href=#__codelineno-19-62></a><span class=w>        </span><span class=no>app.kubernetes.io/component: connector</span>
</span></code></pre></div> <p>You can create the Kafka Connect image using the Dockerfile below:</p> <div class="language-Dockerfile highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=k>FROM</span><span class=w> </span><span class=s>bitnami/kafka:latest</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=c># Download MongoDB&amp;reg; Connector for Apache Kafka https://www.confluent.io/hub/mongodb/kafka-connect-mongodb</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=k>RUN</span><span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>/opt/bitnami/kafka/plugins<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>    </span><span class=nb>cd</span><span class=w> </span>/opt/bitnami/kafka/plugins<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>    </span>curl<span class=w> </span>--remote-name<span class=w> </span>--location<span class=w> </span>--silent<span class=w> </span>https://search.maven.org/remotecontent?filepath<span class=o>=</span>org/mongodb/kafka/mongo-kafka-connect/1.2.0/mongo-kafka-connect-1.2.0-all.jar
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=k>CMD</span><span class=w> </span>/opt/bitnami/kafka/bin/connect-standalone.sh<span class=w> </span>/opt/bitnami/kafka/config/connect-standalone.properties<span class=w> </span>/opt/bitnami/kafka/config/mongo.properties
</span></code></pre></div> <h2 id=persistence>Persistence<a class=headerlink href=#persistence title="Permanent link">&para;</a></h2> <p>The <a href=https://github.com/bitnami/containers/tree/main/bitnami/kafka>Bitnami Kafka</a> image stores the Kafka data at the <code>/bitnami/kafka</code> path of the container.</p> <p>Persistent Volume Claims are used to keep the data across deployments. This is known to work in GCE, AWS, and minikube. See the <a href=#persistence-parameters>Parameters</a> section to configure the PVC or to disable persistence.</p> <h3 id=adjust-permissions-of-persistent-volume-mountpoint>Adjust permissions of persistent volume mountpoint<a class=headerlink href=#adjust-permissions-of-persistent-volume-mountpoint title="Permanent link">&para;</a></h3> <p>As the image run as non-root by default, it is necessary to adjust the ownership of the persistent volume so that the container can write data into it.</p> <p>By default, the chart is configured to use Kubernetes Security Context to automatically change the ownership of the volume. However, this feature does not work in all Kubernetes distributions. As an alternative, this chart supports using an initContainer to change the ownership of the volume before mounting it in the final destination.</p> <p>You can enable this initContainer by setting <code>volumePermissions.enabled</code> to <code>true</code>.</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <p>Find more information about how to deal with common errors related to Bitnami's Helm charts in <a href=https://docs.bitnami.com/general/how-to/troubleshoot-helm-chart-issues>this troubleshooting guide</a>.</p> <h2 id=upgrading>Upgrading<a class=headerlink href=#upgrading title="Permanent link">&para;</a></h2> <h3 id=to-2200>To 22.0.0<a class=headerlink href=#to-2200 title="Permanent link">&para;</a></h3> <p>This major updates the Kafka's configuration to use Kraft by default. You can learn more about this configuration <a href=https://developer.confluent.io/learn/kraft>here</a>. Apart from seting the <code>kraft.enabled</code> parameter to <code>true</code>, we also made the following changes:</p> <ul> <li>Renamed <code>minBrokerId</code> parameter to <code>minId</code> to set the minimum ID to use when configuring the node.id or broker.id parameter depending on the Kafka's configuration. This parameter sets the <code>KAFKA_CFG_NODE_ID</code> env var in the container.</li> <li>Updated the <code>containerPorts</code> and <code>service.ports</code> parameters to include the new controller port.</li> </ul> <h3 id=to-2100>To 21.0.0<a class=headerlink href=#to-2100 title="Permanent link">&para;</a></h3> <p>This major updates Kafka to its newest version, 3.4.x. For more information, please refer to <a href=https://kafka.apache.org/34/documentation.html#upgrade>kafka upgrade notes</a>.</p> <h3 id=to-2000>To 20.0.0<a class=headerlink href=#to-2000 title="Permanent link">&para;</a></h3> <p>This major updates the Zookeeper subchart to it newest major, 11.0.0. For more information on this subchart's major, please refer to <a href=https://github.com/bitnami/charts/tree/main/bitnami/zookeeper#to-1100>zookeeper upgrade notes</a>.</p> <h3 id=to-1900>To 19.0.0<a class=headerlink href=#to-1900 title="Permanent link">&para;</a></h3> <p>This major updates Kafka to its newest version, 3.3.x. For more information, please refer to <a href=https://kafka.apache.org/33/documentation.html#upgrade>kafka upgrade notes</a>.</p> <h3 id=to-1800>To 18.0.0<a class=headerlink href=#to-1800 title="Permanent link">&para;</a></h3> <p>This major updates the Zookeeper subchart to it newest major, 10.0.0. For more information on this subchart's major, please refer to <a href=https://github.com/bitnami/charts/tree/main/bitnami/zookeeper#to-1000>zookeeper upgrade notes</a>.</p> <h3 id=to-1600>To 16.0.0<a class=headerlink href=#to-1600 title="Permanent link">&para;</a></h3> <p>This major updates the Zookeeper subchart to it newest major, 9.0.0. For more information on this subchart's major, please refer to <a href=https://github.com/bitnami/charts/tree/main/bitnami/zookeeper#to-900>zookeeper upgrade notes</a>.</p> <h3 id=to-1500>To 15.0.0<a class=headerlink href=#to-1500 title="Permanent link">&para;</a></h3> <p>This major release bumps Kafka major version to <code>3.x</code> series. It also renames several values in this chart and adds missing features, in order to be inline with the rest of assets in the Bitnami charts repository. Some affected values are:</p> <ul> <li><code>service.port</code>, <code>service.internalPort</code> and <code>service.externalPort</code> have been regrouped under the <code>service.ports</code> map.</li> <li><code>metrics.kafka.service.port</code> has been regrouped under the <code>metrics.kafka.service.ports</code> map.</li> <li><code>metrics.jmx.service.port</code> has been regrouped under the <code>metrics.jmx.service.ports</code> map.</li> <li><code>updateStrategy</code> (string) and <code>rollingUpdatePartition</code> are regrouped under the <code>updateStrategy</code> map.</li> <li>Several parameters marked as deprecated <code>14.x.x</code> are not supported anymore.</li> </ul> <p>Additionally updates the ZooKeeper subchart to it newest major, <code>8.0.0</code>, which contains similar changes.</p> <h3 id=to-1400>To 14.0.0<a class=headerlink href=#to-1400 title="Permanent link">&para;</a></h3> <p>In this version, the <code>image</code> block is defined once and is used in the different templates, while in the previous version, the <code>image</code> block was duplicated for the main container and the provisioning one</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=nt>image</span><span class=p>:</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>  </span><span class=nt>registry</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker.io</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bitnami/kafka</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2.8.0</span>
</span></code></pre></div> <p>VS</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=nt>image</span><span class=p>:</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>registry</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker.io</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bitnami/kafka</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>  </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2.8.0</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=nn>...</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=nt>provisioning</span><span class=p>:</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>  </span><span class=nt>image</span><span class=p>:</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>    </span><span class=nt>registry</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker.io</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bitnami/kafka</span>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=w>    </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2.8.0</span>
</span></code></pre></div> <p>See <a href=https://github.com/bitnami/charts/pull/7114>PR#7114</a> for more info about the implemented changes</p> <h3 id=to-1300>To 13.0.0<a class=headerlink href=#to-1300 title="Permanent link">&para;</a></h3> <p>This major updates the Zookeeper subchart to it newest major, 7.0.0, which renames all TLS-related settings. For more information on this subchart's major, please refer to <a href=https://github.com/bitnami/charts/tree/main/bitnami/zookeeper#to-700>zookeeper upgrade notes</a>.</p> <h3 id=to-1220>To 12.2.0<a class=headerlink href=#to-1220 title="Permanent link">&para;</a></h3> <p>This version also introduces <code>bitnami/common</code>, a <a href=https://helm.sh/docs/topics/library_charts/#helm>library chart</a> as a dependency. More documentation about this new utility could be found <a href=https://github.com/bitnami/charts/tree/main/bitnami/common#bitnami-common-library-chart>here</a>. Please, make sure that you have updated the chart dependencies before executing any upgrade.</p> <h3 id=to-1200>To 12.0.0<a class=headerlink href=#to-1200 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/helm/charts#status-of-the-project>On November 13, 2020, Helm v2 support was formally finished</a>, this major version is the result of the required changes applied to the Helm Chart to be able to incorporate the different features added in Helm v3 and to be consistent with the Helm project itself regarding the Helm v2 EOL.</p> <h4 id=what-changes-were-introduced-in-this-major-version>What changes were introduced in this major version?<a class=headerlink href=#what-changes-were-introduced-in-this-major-version title="Permanent link">&para;</a></h4> <ul> <li>Previous versions of this Helm Chart use <code>apiVersion: v1</code> (installable by both Helm 2 and 3), this Helm Chart was updated to <code>apiVersion: v2</code> (installable by Helm 3 only). <a href=https://helm.sh/docs/topics/charts/#the-apiversion-field>Here</a> you can find more information about the <code>apiVersion</code> field.</li> <li>Move dependency information from the <em>requirements.yaml</em> to the <em>Chart.yaml</em></li> <li>After running <code>helm dependency update</code>, a <em>Chart.lock</em> file is generated containing the same structure used in the previous <em>requirements.lock</em></li> <li>The different fields present in the <em>Chart.yaml</em> file has been ordered alphabetically in a homogeneous way for all the Bitnami Helm Charts</li> </ul> <h4 id=considerations-when-upgrading-to-this-version>Considerations when upgrading to this version<a class=headerlink href=#considerations-when-upgrading-to-this-version title="Permanent link">&para;</a></h4> <ul> <li>If you want to upgrade to this version from a previous one installed with Helm v3, you shouldn't face any issues</li> <li>If you want to upgrade to this version using Helm v2, this scenario is not supported as this version doesn't support Helm v2 anymore</li> <li>If you installed the previous version with Helm v2 and wants to upgrade to this version with Helm v3, please refer to the <a href=https://helm.sh/docs/topics/v2_v3_migration/#migration-use-cases>official Helm documentation</a> about migrating from Helm v2 to v3</li> </ul> <h4 id=useful-links>Useful links<a class=headerlink href=#useful-links title="Permanent link">&para;</a></h4> <ul> <li><a href=https://docs.bitnami.com/tutorials/resolve-helm2-helm3-post-migration-issues/ >https://docs.bitnami.com/tutorials/resolve-helm2-helm3-post-migration-issues/</a></li> <li><a href=https://helm.sh/docs/topics/v2_v3_migration/ >https://helm.sh/docs/topics/v2_v3_migration/</a></li> <li><a href=https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/ >https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/</a></li> </ul> <h3 id=to-1180>To 11.8.0<a class=headerlink href=#to-1180 title="Permanent link">&para;</a></h3> <p>External access to brokers can now be achieved through the cluster's Kafka service.</p> <ul> <li><code>service.nodePort</code> -&gt; deprecated in favor of <code>service.nodePorts.client</code> and <code>service.nodePorts.external</code></li> </ul> <h3 id=to-1170>To 11.7.0<a class=headerlink href=#to-1170 title="Permanent link">&para;</a></h3> <p>The way to configure the users and passwords changed. Now it is allowed to create multiple users during the installation by providing the list of users and passwords.</p> <ul> <li><code>auth.jaas.clientUser</code> (string) -&gt; deprecated in favor of <code>auth.jaas.clientUsers</code> (array).</li> <li><code>auth.jaas.clientPassword</code> (string) -&gt; deprecated in favor of <code>auth.jaas.clientPasswords</code> (array).</li> </ul> <h3 id=to-1100>To 11.0.0<a class=headerlink href=#to-1100 title="Permanent link">&para;</a></h3> <p>The way to configure listeners and athentication on Kafka is totally refactored allowing users to configure different authentication protocols on different listeners. Please check the <a href=#listeners-configuration>Listeners Configuration</a> section for more information.</p> <p>Backwards compatibility is not guaranteed you adapt your values.yaml to the new format. Here you can find some parameters that were renamed or disappeared in favor of new ones on this major version:</p> <ul> <li><code>auth.enabled</code> -&gt; deprecated in favor of <code>auth.clientProtocol</code> and <code>auth.interBrokerProtocol</code> parameters.</li> <li><code>auth.ssl</code> -&gt; deprecated in favor of <code>auth.clientProtocol</code> and <code>auth.interBrokerProtocol</code> parameters.</li> <li><code>auth.certificatesSecret</code> -&gt; renamed to <code>auth.jksSecret</code>.</li> <li><code>auth.certificatesPassword</code> -&gt; renamed to <code>auth.jksPassword</code>.</li> <li><code>sslEndpointIdentificationAlgorithm</code> -&gt; renamedo to <code>auth.tlsEndpointIdentificationAlgorithm</code>.</li> <li><code>auth.interBrokerUser</code> -&gt; renamed to <code>auth.jaas.interBrokerUser</code></li> <li><code>auth.interBrokerPassword</code> -&gt; renamed to <code>auth.jaas.interBrokerPassword</code></li> <li><code>auth.zookeeperUser</code> -&gt; renamed to <code>auth.jaas.zookeeperUser</code></li> <li><code>auth.zookeeperPassword</code> -&gt; renamed to <code>auth.jaas.zookeeperPassword</code></li> <li><code>auth.existingSecret</code> -&gt; renamed to <code>auth.jaas.existingSecret</code></li> <li><code>service.sslPort</code> -&gt; deprecated in favor of <code>service.internalPort</code></li> <li><code>service.nodePorts.kafka</code> and <code>service.nodePorts.ssl</code> -&gt; deprecated in favor of <code>service.nodePort</code></li> <li><code>metrics.kafka.extraFlag</code> -&gt; new parameter</li> <li><code>metrics.kafka.certificatesSecret</code> -&gt; new parameter</li> </ul> <h3 id=to-1000>To 10.0.0<a class=headerlink href=#to-1000 title="Permanent link">&para;</a></h3> <p>If you are setting the <code>config</code> or <code>log4j</code> parameter, backwards compatibility is not guaranteed, because the <code>KAFKA_MOUNTED_CONFDIR</code> has moved from <code>/opt/bitnami/kafka/conf</code> to <code>/bitnami/kafka/config</code>. In order to continue using these parameters, you must also upgrade your image to <code>docker.io/bitnami/kafka:2.4.1-debian-10-r38</code> or later.</p> <h3 id=to-900>To 9.0.0<a class=headerlink href=#to-900 title="Permanent link">&para;</a></h3> <p>Backwards compatibility is not guaranteed you adapt your values.yaml to the new format. Here you can find some parameters that were renamed on this major version:</p> <div class="language-diff highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=gd>- securityContext.enabled</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=gd>- securityContext.fsGroup</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=gd>- securityContext.fsGroup</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=gi>+ podSecurityContext</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=gd>- externalAccess.service.loadBalancerIP</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=gi>+ externalAccess.service.loadBalancerIPs</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=gd>- externalAccess.service.nodePort</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=gi>+ externalAccess.service.nodePorts</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=gd>- metrics.jmx.configMap.enabled</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=gd>- metrics.jmx.configMap.overrideConfig</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=gi>+ metrics.jmx.config</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=gd>- metrics.jmx.configMap.overrideName</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=gi>+ metrics.jmx.existingConfigmap</span>
</span></code></pre></div> <p>Ports names were prefixed with the protocol to comply with Istio (see <a href=https://istio.io/docs/ops/deployment/requirements/ >https://istio.io/docs/ops/deployment/requirements/</a>).</p> <h3 id=to-800>To 8.0.0<a class=headerlink href=#to-800 title="Permanent link">&para;</a></h3> <p>There is not backwards compatibility since the brokerID changes to the POD_NAME. For more information see <a href=https://github.com/bitnami/charts/pull/2028>this PR</a>.</p> <h3 id=to-700>To 7.0.0<a class=headerlink href=#to-700 title="Permanent link">&para;</a></h3> <p>Backwards compatibility is not guaranteed when Kafka metrics are enabled, unless you modify the labels used on the exporter deployments. Use the workaround below to upgrade from versions previous to 7.0.0. The following example assumes that the release name is kafka:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=go>helm upgrade kafka bitnami/kafka --version 6.1.8 --set metrics.kafka.enabled=false</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=go>helm upgrade kafka bitnami/kafka --version 7.0.0 --set metrics.kafka.enabled=true</span>
</span></code></pre></div> <h3 id=to-200>To 2.0.0<a class=headerlink href=#to-200 title="Permanent link">&para;</a></h3> <p>Backwards compatibility is not guaranteed unless you modify the labels used on the chart's deployments. Use the workaround below to upgrade from versions previous to 2.0.0. The following example assumes that the release name is kafka:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=go>kubectl delete statefulset kafka-kafka --cascade=false</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=go>kubectl delete statefulset kafka-zookeeper --cascade=false</span>
</span></code></pre></div> <h3 id=to-100>To 1.0.0<a class=headerlink href=#to-100 title="Permanent link">&para;</a></h3> <p>Backwards compatibility is not guaranteed unless you modify the labels used on the chart's deployments. Use the workaround below to upgrade from versions previous to 1.0.0. The following example assumes that the release name is kafka:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=go>kubectl delete statefulset kafka-kafka --cascade=false</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=go>kubectl delete statefulset kafka-zookeeper --cascade=false</span>
</span></code></pre></div> <h2 id=license>License<a class=headerlink href=#license title="Permanent link">&para;</a></h2> <p>Copyright &copy; 2023 VMware, Inc.</p> <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> <p><a href=http://www.apache.org/licenses/LICENSE-2.0>http://www.apache.org/licenses/LICENSE-2.0</a></p> <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../jupyterhub/ class="md-footer__link md-footer__link--prev" aria-label="上一页: Jupyterhub" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> Jupyterhub </div> </div> </a> <a href=../keycloak/ class="md-footer__link md-footer__link--next" aria-label="下一页: Keycloak" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> Keycloak </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>