<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../tensorflow-resnet/ rel=prev><link href=../tomcat/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>Thanos - Helm Charts Hub</title><link rel=stylesheet href=../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-C5YHK472VS"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-C5YHK472VS",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-C5YHK472VS",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#thanos-packaged-by-bitnami class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../.. title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Helm Charts Hub </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Thanos </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Helm Charts Hub </a> </li> <li class=md-tabs__item> <a href=../../chart-list/ class=md-tabs__link> Chart 列表 </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Bitnami </a> </li> <li class=md-tabs__item> <a href=../../grafana/ class=md-tabs__link> Grafana </a> </li> <li class=md-tabs__item> <a href=../../ingress-nginx/ class=md-tabs__link> Ingress nginx </a> </li> <li class=md-tabs__item> <a href=../../prometheus-community/ class=md-tabs__link> Prometheus community </a> </li> <li class=md-tabs__item> <a href=../../sir5kong/ class=md-tabs__link> Sir5kong </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Helm Charts Hub </label> <div class=md-nav__source> <a href=https://github.com/sir5kong/helm-charts-hub title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> sir5kong/helm-charts-hub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Helm Charts Hub </a> </li> <li class=md-nav__item> <a href=../../chart-list/ class=md-nav__link> Chart 列表 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Bitnami</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Bitnami data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Bitnami </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../airflow/ class=md-nav__link> Airflow </a> </li> <li class=md-nav__item> <a href=../apache/ class=md-nav__link> Apache </a> </li> <li class=md-nav__item> <a href=../apisix/ class=md-nav__link> Apisix </a> </li> <li class=md-nav__item> <a href=../appsmith/ class=md-nav__link> Appsmith </a> </li> <li class=md-nav__item> <a href=../argo-cd/ class=md-nav__link> Argo cd </a> </li> <li class=md-nav__item> <a href=../argo-workflows/ class=md-nav__link> Argo workflows </a> </li> <li class=md-nav__item> <a href=../aspnet-core/ class=md-nav__link> Aspnet core </a> </li> <li class=md-nav__item> <a href=../cassandra/ class=md-nav__link> Cassandra </a> </li> <li class=md-nav__item> <a href=../cert-manager/ class=md-nav__link> Cert manager </a> </li> <li class=md-nav__item> <a href=../clickhouse/ class=md-nav__link> Clickhouse </a> </li> <li class=md-nav__item> <a href=../common/ class=md-nav__link> Bitnami Common Library Chart </a> </li> <li class=md-nav__item> <a href=../concourse/ class=md-nav__link> Concourse </a> </li> <li class=md-nav__item> <a href=../consul/ class=md-nav__link> Consul </a> </li> <li class=md-nav__item> <a href=../contour/ class=md-nav__link> Contour </a> </li> <li class=md-nav__item> <a href=../discourse/ class=md-nav__link> Discourse </a> </li> <li class=md-nav__item> <a href=../dokuwiki/ class=md-nav__link> Dokuwiki </a> </li> <li class=md-nav__item> <a href=../drupal/ class=md-nav__link> Drupal </a> </li> <li class=md-nav__item> <a href=../ejbca/ class=md-nav__link> Ejbca </a> </li> <li class=md-nav__item> <a href=../elasticsearch/ class=md-nav__link> Elasticsearch </a> </li> <li class=md-nav__item> <a href=../etcd/ class=md-nav__link> Etcd </a> </li> <li class=md-nav__item> <a href=../external-dns/ class=md-nav__link> External dns </a> </li> <li class=md-nav__item> <a href=../flink/ class=md-nav__link> Flink </a> </li> <li class=md-nav__item> <a href=../fluent-bit/ class=md-nav__link> Fluent bit </a> </li> <li class=md-nav__item> <a href=../fluentd/ class=md-nav__link> Fluentd </a> </li> <li class=md-nav__item> <a href=../flux/ class=md-nav__link> Flux </a> </li> <li class=md-nav__item> <a href=../ghost/ class=md-nav__link> Ghost </a> </li> <li class=md-nav__item> <a href=../gitea/ class=md-nav__link> Gitea </a> </li> <li class=md-nav__item> <a href=../grafana-loki/ class=md-nav__link> Grafana loki </a> </li> <li class=md-nav__item> <a href=../grafana-mimir/ class=md-nav__link> Grafana mimir </a> </li> <li class=md-nav__item> <a href=../grafana-operator/ class=md-nav__link> Grafana operator </a> </li> <li class=md-nav__item> <a href=../grafana-tempo/ class=md-nav__link> Grafana tempo </a> </li> <li class=md-nav__item> <a href=../grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../haproxy/ class=md-nav__link> Haproxy </a> </li> <li class=md-nav__item> <a href=../harbor/ class=md-nav__link> Harbor </a> </li> <li class=md-nav__item> <a href=../influxdb/ class=md-nav__link> Influxdb </a> </li> <li class=md-nav__item> <a href=../jaeger/ class=md-nav__link> Jaeger </a> </li> <li class=md-nav__item> <a href=../jasperreports/ class=md-nav__link> Jasperreports </a> </li> <li class=md-nav__item> <a href=../jenkins/ class=md-nav__link> Jenkins </a> </li> <li class=md-nav__item> <a href=../joomla/ class=md-nav__link> Joomla </a> </li> <li class=md-nav__item> <a href=../jupyterhub/ class=md-nav__link> Jupyterhub </a> </li> <li class=md-nav__item> <a href=../kafka/ class=md-nav__link> Kafka </a> </li> <li class=md-nav__item> <a href=../keycloak/ class=md-nav__link> Keycloak </a> </li> <li class=md-nav__item> <a href=../kiam/ class=md-nav__link> Kiam </a> </li> <li class=md-nav__item> <a href=../kibana/ class=md-nav__link> Kibana </a> </li> <li class=md-nav__item> <a href=../kong/ class=md-nav__link> Kong </a> </li> <li class=md-nav__item> <a href=../kube-prometheus/ class=md-nav__link> Kube prometheus </a> </li> <li class=md-nav__item> <a href=../kube-state-metrics/ class=md-nav__link> Kube state metrics </a> </li> <li class=md-nav__item> <a href=../kubeapps/ class=md-nav__link> Kubeapps </a> </li> <li class=md-nav__item> <a href=../kubernetes-event-exporter/ class=md-nav__link> Kubernetes event exporter </a> </li> <li class=md-nav__item> <a href=../logstash/ class=md-nav__link> Logstash </a> </li> <li class=md-nav__item> <a href=../magento/ class=md-nav__link> Magento </a> </li> <li class=md-nav__item> <a href=../mariadb-galera/ class=md-nav__link> Mariadb galera </a> </li> <li class=md-nav__item> <a href=../mariadb/ class=md-nav__link> Mariadb </a> </li> <li class=md-nav__item> <a href=../mastodon/ class=md-nav__link> Mastodon </a> </li> <li class=md-nav__item> <a href=../matomo/ class=md-nav__link> Matomo </a> </li> <li class=md-nav__item> <a href=../mediawiki/ class=md-nav__link> Mediawiki </a> </li> <li class=md-nav__item> <a href=../memcached/ class=md-nav__link> Memcached </a> </li> <li class=md-nav__item> <a href=../metallb/ class=md-nav__link> Metallb </a> </li> <li class=md-nav__item> <a href=../metrics-server/ class=md-nav__link> Metrics server </a> </li> <li class=md-nav__item> <a href=../minio/ class=md-nav__link> Minio </a> </li> <li class=md-nav__item> <a href=../mongodb-sharded/ class=md-nav__link> Mongodb sharded </a> </li> <li class=md-nav__item> <a href=../mongodb/ class=md-nav__link> Mongodb </a> </li> <li class=md-nav__item> <a href=../moodle/ class=md-nav__link> Moodle </a> </li> <li class=md-nav__item> <a href=../multus-cni/ class=md-nav__link> Multus cni </a> </li> <li class=md-nav__item> <a href=../mxnet/ class=md-nav__link> Mxnet </a> </li> <li class=md-nav__item> <a href=../mysql/ class=md-nav__link> Mysql </a> </li> <li class=md-nav__item> <a href=../nats/ class=md-nav__link> Nats </a> </li> <li class=md-nav__item> <a href=../nginx-ingress-controller/ class=md-nav__link> Nginx ingress controller </a> </li> <li class=md-nav__item> <a href=../nginx/ class=md-nav__link> Nginx </a> </li> <li class=md-nav__item> <a href=../node-exporter/ class=md-nav__link> Node exporter </a> </li> <li class=md-nav__item> <a href=../oauth2-proxy/ class=md-nav__link> Oauth2 proxy </a> </li> <li class=md-nav__item> <a href=../odoo/ class=md-nav__link> Odoo </a> </li> <li class=md-nav__item> <a href=../opencart/ class=md-nav__link> Opencart </a> </li> <li class=md-nav__item> <a href=../osclass/ class=md-nav__link> Osclass </a> </li> <li class=md-nav__item> <a href=../parse/ class=md-nav__link> Parse </a> </li> <li class=md-nav__item> <a href=../phpbb/ class=md-nav__link> Phpbb </a> </li> <li class=md-nav__item> <a href=../phpmyadmin/ class=md-nav__link> Phpmyadmin </a> </li> <li class=md-nav__item> <a href=../pinniped/ class=md-nav__link> Pinniped </a> </li> <li class=md-nav__item> <a href=../postgresql-ha/ class=md-nav__link> Postgresql ha </a> </li> <li class=md-nav__item> <a href=../postgresql/ class=md-nav__link> Postgresql </a> </li> <li class=md-nav__item> <a href=../prestashop/ class=md-nav__link> Prestashop </a> </li> <li class=md-nav__item> <a href=../prometheus/ class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../pytorch/ class=md-nav__link> Pytorch </a> </li> <li class=md-nav__item> <a href=../rabbitmq-cluster-operator/ class=md-nav__link> Rabbitmq cluster operator </a> </li> <li class=md-nav__item> <a href=../rabbitmq/ class=md-nav__link> Rabbitmq </a> </li> <li class=md-nav__item> <a href=../redis-cluster/ class=md-nav__link> Redis cluster </a> </li> <li class=md-nav__item> <a href=../redis/ class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=../redmine/ class=md-nav__link> Redmine </a> </li> <li class=md-nav__item> <a href=../schema-registry/ class=md-nav__link> Schema registry </a> </li> <li class=md-nav__item> <a href=../sealed-secrets/ class=md-nav__link> Sealed secrets </a> </li> <li class=md-nav__item> <a href=../solr/ class=md-nav__link> Solr </a> </li> <li class=md-nav__item> <a href=../sonarqube/ class=md-nav__link> Sonarqube </a> </li> <li class=md-nav__item> <a href=../spark/ class=md-nav__link> Spark </a> </li> <li class=md-nav__item> <a href=../spring-cloud-dataflow/ class=md-nav__link> Spring cloud dataflow </a> </li> <li class=md-nav__item> <a href=../suitecrm/ class=md-nav__link> Suitecrm </a> </li> <li class=md-nav__item> <a href=../supabase/ class=md-nav__link> Supabase </a> </li> <li class=md-nav__item> <a href=../tensorflow-resnet/ class=md-nav__link> Tensorflow resnet </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Thanos <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Thanos </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tldr class=md-nav__link> TL;DR </a> </li> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#installing-the-chart class=md-nav__link> Installing the Chart </a> </li> <li class=md-nav__item> <a href=#uninstalling-the-chart class=md-nav__link> Uninstalling the Chart </a> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> <nav class=md-nav aria-label=Parameters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#global-parameters class=md-nav__link> Global parameters </a> </li> <li class=md-nav__item> <a href=#common-parameters class=md-nav__link> Common parameters </a> </li> <li class=md-nav__item> <a href=#thanos-common-parameters class=md-nav__link> Thanos common parameters </a> </li> <li class=md-nav__item> <a href=#thanos-query-parameters class=md-nav__link> Thanos Query parameters </a> </li> <li class=md-nav__item> <a href=#thanos-query-frontend-parameters class=md-nav__link> Thanos Query Frontend parameters </a> </li> <li class=md-nav__item> <a href=#thanos-bucket-web-parameters class=md-nav__link> Thanos Bucket Web parameters </a> </li> <li class=md-nav__item> <a href=#thanos-compactor-parameters class=md-nav__link> Thanos Compactor parameters </a> </li> <li class=md-nav__item> <a href=#thanos-store-gateway-parameters class=md-nav__link> Thanos Store Gateway parameters </a> </li> <li class=md-nav__item> <a href=#thanos-ruler-parameters class=md-nav__link> Thanos Ruler parameters </a> </li> <li class=md-nav__item> <a href=#thanos-receive-parameters class=md-nav__link> Thanos Receive parameters </a> </li> <li class=md-nav__item> <a href=#thanos-receive-distributor-parameters class=md-nav__link> Thanos Receive Distributor parameters </a> </li> <li class=md-nav__item> <a href=#metrics-parameters class=md-nav__link> Metrics parameters </a> </li> <li class=md-nav__item> <a href=#volume-permissions-parameters class=md-nav__link> Volume Permissions parameters </a> </li> <li class=md-nav__item> <a href=#minio-chart-parameters class=md-nav__link> MinIO&reg; chart parameters </a> </li> <li class=md-nav__item> <a href=#networkpolicy-parameters class=md-nav__link> NetWorkPolicy parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-and-installation-details class=md-nav__link> Configuration and installation details </a> <nav class=md-nav aria-label="Configuration and installation details"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rolling-vs-immutable-tags class=md-nav__link> Rolling VS Immutable tags </a> </li> <li class=md-nav__item> <a href=#adding-extra-flags class=md-nav__link> Adding extra flags </a> </li> <li class=md-nav__item> <a href=#using-custom-objstore-configuration class=md-nav__link> Using custom Objstore configuration </a> </li> <li class=md-nav__item> <a href=#using-custom-query-service-discovery-configuration class=md-nav__link> Using custom Query Service Discovery configuration </a> </li> <li class=md-nav__item> <a href=#using-custom-ruler-configuration class=md-nav__link> Using custom Ruler configuration </a> </li> <li class=md-nav__item> <a href=#running-thanos-with-https-and-basic-authentication class=md-nav__link> Running Thanos with HTTPS and basic authentication </a> </li> <li class=md-nav__item> <a href=#store-time-partitions class=md-nav__link> Store time partitions </a> </li> <li class=md-nav__item> <a href=#integrate-thanos-with-prometheus-and-alertmanager class=md-nav__link> Integrate Thanos with Prometheus and Alertmanager </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#persistence class=md-nav__link> Persistence </a> <nav class=md-nav aria-label=Persistence> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adjust-permissions-of-persistent-volume-mountpoint class=md-nav__link> Adjust permissions of persistent volume mountpoint </a> </li> <li class=md-nav__item> <a href=#deploy-extra-resources class=md-nav__link> Deploy extra resources </a> </li> <li class=md-nav__item> <a href=#setting-pods-affinity class=md-nav__link> Setting Pod's affinity </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=#upgrading class=md-nav__link> Upgrading </a> <nav class=md-nav aria-label=Upgrading> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-1200 class=md-nav__link> To 12.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1000 class=md-nav__link> To 10.0.0 </a> </li> <li class=md-nav__item> <a href=#to-900 class=md-nav__link> To 9.0.0 </a> </li> <li class=md-nav__item> <a href=#to-800 class=md-nav__link> To 8.0.0 </a> </li> <li class=md-nav__item> <a href=#to-700 class=md-nav__link> To 7.0.0 </a> </li> <li class=md-nav__item> <a href=#to-600 class=md-nav__link> To 6.0.0 </a> </li> <li class=md-nav__item> <a href=#to-540 class=md-nav__link> To 5.4.0 </a> </li> <li class=md-nav__item> <a href=#to-530 class=md-nav__link> To 5.3.0 </a> </li> <li class=md-nav__item> <a href=#to-500 class=md-nav__link> To 5.0.0 </a> </li> <li class=md-nav__item> <a href=#to-400 class=md-nav__link> To 4.0.0 </a> </li> <li class=md-nav__item> <a href=#to-330 class=md-nav__link> To 3.3.0 </a> </li> <li class=md-nav__item> <a href=#to-310 class=md-nav__link> To 3.1.0 </a> </li> <li class=md-nav__item> <a href=#to-300 class=md-nav__link> To 3.0.0 </a> </li> <li class=md-nav__item> <a href=#to-240 class=md-nav__link> To 2.4.0 </a> </li> <li class=md-nav__item> <a href=#to-200 class=md-nav__link> To 2.0.0 </a> </li> <li class=md-nav__item> <a href=#to-100 class=md-nav__link> To 1.0.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../tomcat/ class=md-nav__link> Tomcat </a> </li> <li class=md-nav__item> <a href=../vault/ class=md-nav__link> Vault </a> </li> <li class=md-nav__item> <a href=../wavefront-hpa-adapter/ class=md-nav__link> Wavefront hpa adapter </a> </li> <li class=md-nav__item> <a href=../wavefront-prometheus-storage-adapter/ class=md-nav__link> Wavefront prometheus storage adapter </a> </li> <li class=md-nav__item> <a href=../whereabouts/ class=md-nav__link> Whereabouts </a> </li> <li class=md-nav__item> <a href=../wildfly/ class=md-nav__link> Wildfly </a> </li> <li class=md-nav__item> <a href=../wordpress/ class=md-nav__link> Wordpress </a> </li> <li class=md-nav__item> <a href=../zookeeper/ class=md-nav__link> Zookeeper </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../grafana/ >Grafana</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Grafana data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Grafana </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../grafana/agent-operator/ class=md-nav__link> grafana-agent-operator </a> </li> <li class=md-nav__item> <a href=../../grafana/enterprise-logs-simple/ class=md-nav__link> enterprise-logs-simple </a> </li> <li class=md-nav__item> <a href=../../grafana/enterprise-logs/ class=md-nav__link> Grafana Enterprise Logs Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/enterprise-metrics/ class=md-nav__link> Grafana Enterprise Metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/fluent-bit/ class=md-nav__link> Fluent Bit Loki chart </a> </li> <li class=md-nav__item> <a href=../../grafana/grafana-agent/ class=md-nav__link> Grafana Agent chart </a> </li> <li class=md-nav__item> <a href=../../grafana/grafana/ class=md-nav__link> Grafana Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/loki-canary/ class=md-nav__link> loki-canary </a> </li> <li class=md-nav__item> <a href=../../grafana/loki-distributed/ class=md-nav__link> loki-distributed </a> </li> <li class=md-nav__item> <a href=../../grafana/loki-stack/ class=md-nav__link> Loki-Stack Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/mimir-distributed/ class=md-nav__link> Notice of relocation </a> </li> <li class=md-nav__item> <a href=../../grafana/promtail/ class=md-nav__link> promtail </a> </li> <li class=md-nav__item> <a href=../../grafana/rollout-operator/ class=md-nav__link> Grafana rollout-operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../../grafana/synthetic-monitoring-agent/ class=md-nav__link> synthetic-monitoring-agent </a> </li> <li class=md-nav__item> <a href=../../grafana/tempo-distributed/ class=md-nav__link> tempo-distributed </a> </li> <li class=md-nav__item> <a href=../../grafana/tempo-vulture/ class=md-nav__link> tempo-vulture </a> </li> <li class=md-nav__item> <a href=../../grafana/tempo/ class=md-nav__link> tempo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5 type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../ingress-nginx/ >Ingress nginx</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Ingress nginx" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Ingress nginx </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ingress-nginx/ingress-nginx/ class=md-nav__link> ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_6 type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../prometheus-community/ >Prometheus community</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Prometheus community" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Prometheus community </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager-snmp-notifier/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/alertmanager/ class=md-nav__link> Alertmanager </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/jiralert/ class=md-nav__link> Prometheus SNMP Notifier </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-prometheus-stack/ class=md-nav__link> kube-prometheus-stack </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/kube-state-metrics/ class=md-nav__link> kube-state-metrics Helm Chart </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prom-label-proxy/ class=md-nav__link> prom-label-proxy </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-adapter/ class=md-nav__link> Prometheus Adapter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-blackbox-exporter/ class=md-nav__link> Prometheus Blackbox Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-cloudwatch-exporter/ class=md-nav__link> Prometheus Cloudwatch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-conntrack-stats-exporter/ class=md-nav__link> Conntrack Stats Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-consul-exporter/ class=md-nav__link> Prometheus Consul Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-couchdb-exporter/ class=md-nav__link> prometheus-couchdb-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-druid-exporter/ class=md-nav__link> Prometheus Druid Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-elasticsearch-exporter/ class=md-nav__link> Elasticsearch Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-fastly-exporter/ class=md-nav__link> Prometheus Fastly Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-json-exporter/ class=md-nav__link> prometheus-json-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-kafka-exporter/ class=md-nav__link> prometheus-kafka-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mongodb-exporter/ class=md-nav__link> Prometheus MongoDB Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-mysql-exporter/ class=md-nav__link> Prometheus Mysql Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nats-exporter/ class=md-nav__link> Prometheus NATS Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-nginx-exporter/ class=md-nav__link> prometheus-nginx-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-node-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-admission-webhook/ class=md-nav__link> Prometheus Operator Admission Webhook </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-operator-crds/ class=md-nav__link> Prometheus Operator CRDs </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pgbouncer-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingdom-exporter/ class=md-nav__link> Prometheus Pingdom Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pingmesh-exporter/ class=md-nav__link> Prometheus Pingmesh Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-postgres-exporter/ class=md-nav__link> Prometheus Postgres Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-pushgateway/ class=md-nav__link> Prometheus Pushgateway </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-rabbitmq-exporter/ class=md-nav__link> prometheus-rabbitmq-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-redis-exporter/ class=md-nav__link> prometheus-redis-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-smartctl-exporter/ class=md-nav__link> Prometheus smartctl Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-snmp-exporter/ class=md-nav__link> Prometheus SNMP Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-stackdriver-exporter/ class=md-nav__link> Stackdriver Exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-statsd-exporter/ class=md-nav__link> prometheus-statsd-exporter </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-to-sd/ class=md-nav__link> prometheus-to-sd </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus-windows-exporter/ class=md-nav__link> Prometheus `Node Exporter` </a> </li> <li class=md-nav__item> <a href=../../prometheus-community/prometheus/ class=md-nav__link> Prometheus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../sir5kong/ >Sir5kong</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Sir5kong data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Sir5kong </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sir5kong/commonapp/ class=md-nav__link> commonapp helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/kafka/ class=md-nav__link> Kafka helm chart </a> </li> <li class=md-nav__item> <a href=../../sir5kong/nginx/ class=md-nav__link> nginx helm chart </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tldr class=md-nav__link> TL;DR </a> </li> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#installing-the-chart class=md-nav__link> Installing the Chart </a> </li> <li class=md-nav__item> <a href=#uninstalling-the-chart class=md-nav__link> Uninstalling the Chart </a> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> <nav class=md-nav aria-label=Parameters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#global-parameters class=md-nav__link> Global parameters </a> </li> <li class=md-nav__item> <a href=#common-parameters class=md-nav__link> Common parameters </a> </li> <li class=md-nav__item> <a href=#thanos-common-parameters class=md-nav__link> Thanos common parameters </a> </li> <li class=md-nav__item> <a href=#thanos-query-parameters class=md-nav__link> Thanos Query parameters </a> </li> <li class=md-nav__item> <a href=#thanos-query-frontend-parameters class=md-nav__link> Thanos Query Frontend parameters </a> </li> <li class=md-nav__item> <a href=#thanos-bucket-web-parameters class=md-nav__link> Thanos Bucket Web parameters </a> </li> <li class=md-nav__item> <a href=#thanos-compactor-parameters class=md-nav__link> Thanos Compactor parameters </a> </li> <li class=md-nav__item> <a href=#thanos-store-gateway-parameters class=md-nav__link> Thanos Store Gateway parameters </a> </li> <li class=md-nav__item> <a href=#thanos-ruler-parameters class=md-nav__link> Thanos Ruler parameters </a> </li> <li class=md-nav__item> <a href=#thanos-receive-parameters class=md-nav__link> Thanos Receive parameters </a> </li> <li class=md-nav__item> <a href=#thanos-receive-distributor-parameters class=md-nav__link> Thanos Receive Distributor parameters </a> </li> <li class=md-nav__item> <a href=#metrics-parameters class=md-nav__link> Metrics parameters </a> </li> <li class=md-nav__item> <a href=#volume-permissions-parameters class=md-nav__link> Volume Permissions parameters </a> </li> <li class=md-nav__item> <a href=#minio-chart-parameters class=md-nav__link> MinIO&reg; chart parameters </a> </li> <li class=md-nav__item> <a href=#networkpolicy-parameters class=md-nav__link> NetWorkPolicy parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-and-installation-details class=md-nav__link> Configuration and installation details </a> <nav class=md-nav aria-label="Configuration and installation details"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rolling-vs-immutable-tags class=md-nav__link> Rolling VS Immutable tags </a> </li> <li class=md-nav__item> <a href=#adding-extra-flags class=md-nav__link> Adding extra flags </a> </li> <li class=md-nav__item> <a href=#using-custom-objstore-configuration class=md-nav__link> Using custom Objstore configuration </a> </li> <li class=md-nav__item> <a href=#using-custom-query-service-discovery-configuration class=md-nav__link> Using custom Query Service Discovery configuration </a> </li> <li class=md-nav__item> <a href=#using-custom-ruler-configuration class=md-nav__link> Using custom Ruler configuration </a> </li> <li class=md-nav__item> <a href=#running-thanos-with-https-and-basic-authentication class=md-nav__link> Running Thanos with HTTPS and basic authentication </a> </li> <li class=md-nav__item> <a href=#store-time-partitions class=md-nav__link> Store time partitions </a> </li> <li class=md-nav__item> <a href=#integrate-thanos-with-prometheus-and-alertmanager class=md-nav__link> Integrate Thanos with Prometheus and Alertmanager </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#persistence class=md-nav__link> Persistence </a> <nav class=md-nav aria-label=Persistence> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adjust-permissions-of-persistent-volume-mountpoint class=md-nav__link> Adjust permissions of persistent volume mountpoint </a> </li> <li class=md-nav__item> <a href=#deploy-extra-resources class=md-nav__link> Deploy extra resources </a> </li> <li class=md-nav__item> <a href=#setting-pods-affinity class=md-nav__link> Setting Pod's affinity </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=#upgrading class=md-nav__link> Upgrading </a> <nav class=md-nav aria-label=Upgrading> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-1200 class=md-nav__link> To 12.0.0 </a> </li> <li class=md-nav__item> <a href=#to-1000 class=md-nav__link> To 10.0.0 </a> </li> <li class=md-nav__item> <a href=#to-900 class=md-nav__link> To 9.0.0 </a> </li> <li class=md-nav__item> <a href=#to-800 class=md-nav__link> To 8.0.0 </a> </li> <li class=md-nav__item> <a href=#to-700 class=md-nav__link> To 7.0.0 </a> </li> <li class=md-nav__item> <a href=#to-600 class=md-nav__link> To 6.0.0 </a> </li> <li class=md-nav__item> <a href=#to-540 class=md-nav__link> To 5.4.0 </a> </li> <li class=md-nav__item> <a href=#to-530 class=md-nav__link> To 5.3.0 </a> </li> <li class=md-nav__item> <a href=#to-500 class=md-nav__link> To 5.0.0 </a> </li> <li class=md-nav__item> <a href=#to-400 class=md-nav__link> To 4.0.0 </a> </li> <li class=md-nav__item> <a href=#to-330 class=md-nav__link> To 3.3.0 </a> </li> <li class=md-nav__item> <a href=#to-310 class=md-nav__link> To 3.1.0 </a> </li> <li class=md-nav__item> <a href=#to-300 class=md-nav__link> To 3.0.0 </a> </li> <li class=md-nav__item> <a href=#to-240 class=md-nav__link> To 2.4.0 </a> </li> <li class=md-nav__item> <a href=#to-200 class=md-nav__link> To 2.0.0 </a> </li> <li class=md-nav__item> <a href=#to-100 class=md-nav__link> To 1.0.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> License </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!--- app-name: Thanos --> <h1 id=thanos-packaged-by-bitnami>Thanos packaged by Bitnami<a class=headerlink href=#thanos-packaged-by-bitnami title="Permanent link">&para;</a></h1> <p>Thanos is a highly available metrics system that can be added on top of existing Prometheus deployments, providing a global query view across all Prometheus installations.</p> <p><a href=https://thanos.io/ >Overview of Thanos</a></p> <p>Trademarks: This software listing is packaged by Bitnami. The respective trademarks mentioned in the offering are owned by the respective companies, and use of them does not imply any affiliation or endorsement.</p> <h2 id=tldr>TL;DR<a class=headerlink href=#tldr title="Permanent link">&para;</a></h2> <blockquote> <p>使用加速地址添加仓库:</p> </blockquote> <div class="language-shell highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>bitnami<span class=w> </span><span class=s2>&quot;https://helm-charts.itboon.top/bitnami&quot;</span><span class=w> </span>--force-update
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>helm<span class=w> </span>update<span class=w> </span>bitnami
</span></code></pre></div> <div class="language-console highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=go>helm install my-release bitnami/thanos</span>
</span></code></pre></div> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>This chart bootstraps a <a href=https://github.com/bitnami/containers/tree/main/bitnami/thanos>Thanos</a> deployment on a <a href=https://kubernetes.io>Kubernetes</a> cluster using the <a href=https://helm.sh>Helm</a> package manager.</p> <p>Bitnami charts can be used with <a href=https://kubeapps.dev/ >Kubeapps</a> for deployment and management of Helm Charts in clusters.</p> <p>Looking to use Thanos in production? Try <a href=https://bitnami.com/enterprise>VMware Application Catalog</a>, the enterprise edition of Bitnami Application Catalog.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ul> <li>Kubernetes 1.19+</li> <li>Helm 3.2.0+</li> <li>PV provisioner support in the underlying infrastructure</li> </ul> <h2 id=installing-the-chart>Installing the Chart<a class=headerlink href=#installing-the-chart title="Permanent link">&para;</a></h2> <p>To install the chart with the release name <code>my-release</code>:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=go>helm install my-release bitnami/thanos</span>
</span></code></pre></div> <p>These commands deploy Thanos on the Kubernetes cluster with the default configuration. The <a href=#configuration-and-installation-details>configuration</a> section lists the parameters that can be configured during installation.</p> <blockquote> <p><strong>Tip</strong>: List all releases using <code>helm list</code></p> </blockquote> <h2 id=uninstalling-the-chart>Uninstalling the Chart<a class=headerlink href=#uninstalling-the-chart title="Permanent link">&para;</a></h2> <p>To uninstall/delete the <code>my-release</code> chart:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=go>helm uninstall my-release</span>
</span></code></pre></div> <h2 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">&para;</a></h2> <p>This charts allows you install several Thanos components, so you deploy an architecture as the one below:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>                       +--------------+                  +--------------+      +--------------+
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>                       | Thanos       |----------------&gt; | Thanos Store |      | Thanos       |
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>                       | Query        |           |      | Gateway      |      | Compactor    |
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>                       +--------------+           |      +--------------+      +--------------+
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>                   push                           |             |                     |
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>+--------------+   alerts   +--------------+      |             | storages            | Downsample &amp;
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>| Alertmanager | &lt;----------| Thanos       | &lt;----|             | query metrics       | compact blocks
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>| (*)          |            | Ruler        |      |             |                     |
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>+--------------+            +--------------+      |             \/                    |
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>      ^                            |              |      +----------------+           |
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>      | push alerts                +--------------|----&gt; | MinIO&amp;reg; (*) | &lt;---------+
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>      |                                           |      |                |
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>+------------------------------+                  |      +----------------+
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>|+------------+  +------------+|                  |             ^
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>|| Prometheus |-&gt;| Thanos     || &lt;----------------+             |
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>|| (*)        |&lt;-| Sidecar (*)||    query                       | inspect
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>|+------------+  +------------+|    metrics                     | blocks
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>+------------------------------+                                |
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a>                                                         +--------------+
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>                                                         | Thanos       |
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a>                                                         | Bucket Web   |
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>                                                         +--------------+
</span></code></pre></div> <blockquote> <p>Note: Components marked with (*) are provided by subchart(s) (such as the <a href=https://github.com/bitnami/charts/tree/main/bitnami/minio>Bitnami MinIO&reg; chart</a>) or external charts (such as the <a href=https://github.com/bitnami/charts/tree/main/bitnami/kube-prometheus>Bitnami kube-prometheus chart</a>).</p> </blockquote> <p>Check the section <a href=#integrate-thanos-with-prometheus-and-alertmanager>Integrate Thanos with Prometheus and Alertmanager</a> for detailed instructions to deploy this architecture.</p> <h2 id=parameters>Parameters<a class=headerlink href=#parameters title="Permanent link">&para;</a></h2> <h3 id=global-parameters>Global parameters<a class=headerlink href=#global-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>global.imageRegistry</code></td> <td>Global Docker image registry</td> <td><code>""</code></td> </tr> <tr> <td><code>global.imagePullSecrets</code></td> <td>Global Docker registry secret names as an array</td> <td><code>[]</code></td> </tr> <tr> <td><code>global.storageClass</code></td> <td>Global StorageClass for Persistent Volume(s)</td> <td><code>""</code></td> </tr> </tbody> </table> <h3 id=common-parameters>Common parameters<a class=headerlink href=#common-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>kubeVersion</code></td> <td>Force target Kubernetes version (using Helm capabilities if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>nameOverride</code></td> <td>String to partially override common.names.fullname template (will maintain the release name)</td> <td><code>""</code></td> </tr> <tr> <td><code>fullnameOverride</code></td> <td>String to fully override common.names.fullname template</td> <td><code>""</code></td> </tr> <tr> <td><code>commonLabels</code></td> <td>Add labels to all the deployed resources</td> <td><code>{}</code></td> </tr> <tr> <td><code>commonAnnotations</code></td> <td>Add annotations to all the deployed resources</td> <td><code>{}</code></td> </tr> <tr> <td><code>clusterDomain</code></td> <td>Kubernetes Cluster Domain</td> <td><code>cluster.local</code></td> </tr> <tr> <td><code>extraDeploy</code></td> <td>Array of extra objects to deploy with the release</td> <td><code>[]</code></td> </tr> </tbody> </table> <h3 id=thanos-common-parameters>Thanos common parameters<a class=headerlink href=#thanos-common-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>image.registry</code></td> <td>Thanos image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>image.repository</code></td> <td>Thanos image repository</td> <td><code>bitnami/thanos</code></td> </tr> <tr> <td><code>image.tag</code></td> <td>Thanos image tag (immutable tags are recommended)</td> <td><code>0.31.0-scratch-r8</code></td> </tr> <tr> <td><code>image.digest</code></td> <td>Thanos image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>image.pullPolicy</code></td> <td>Thanos image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>image.pullSecrets</code></td> <td>Specify docker-registry secret names as an array</td> <td><code>[]</code></td> </tr> <tr> <td><code>objstoreConfig</code></td> <td>The <a href=https://thanos.io/tip/thanos/storage.md/ >objstore configuration</a></td> <td><code>""</code></td> </tr> <tr> <td><code>indexCacheConfig</code></td> <td>The <a href=https://thanos.io/tip/components/store.md/ >index cache configuration</a></td> <td><code>""</code></td> </tr> <tr> <td><code>bucketCacheConfig</code></td> <td>The <a href=https://thanos.io/tip/components/store.md/ >bucket cache configuration</a></td> <td><code>""</code></td> </tr> <tr> <td><code>existingObjstoreSecret</code></td> <td>Secret with Objstore Configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>existingObjstoreSecretItems</code></td> <td>Optional item list for specifying a custom Secret key. If so, path should be objstore.yml</td> <td><code>[]</code></td> </tr> <tr> <td><code>httpConfig</code></td> <td>The <a href=https://thanos.io/tip/operating/https.md/ >https and basic auth configuration</a></td> <td><code>""</code></td> </tr> <tr> <td><code>existingHttpConfigSecret</code></td> <td>Secret containing the HTTPS and Basic auth configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>https.enabled</code></td> <td>Set to true to enable HTTPS. Requires a secret containing the certificate and key.</td> <td><code>false</code></td> </tr> <tr> <td><code>https.autoGenerated</code></td> <td>Create self-signed TLS certificates.</td> <td><code>false</code></td> </tr> <tr> <td><code>https.existingSecret</code></td> <td>Existing secret containing your own server key and certificate</td> <td><code>""</code></td> </tr> <tr> <td><code>https.certFilename</code></td> <td></td> <td><code>tls.crt</code></td> </tr> <tr> <td><code>https.keyFilename</code></td> <td></td> <td><code>tls.key</code></td> </tr> <tr> <td><code>https.caFilename</code></td> <td></td> <td><code>ca.crt</code></td> </tr> <tr> <td><code>https.key</code></td> <td>TLS Key for Thanos HTTPS - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>https.cert</code></td> <td>TLS Certificate for Thanos HTTPS - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>https.ca</code></td> <td>(Optional, used for client) CA Certificate for Thanos HTTPS - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>https.clientAuthType</code></td> <td>Server policy for client authentication using certificates. Maps to ClientAuth Policies.</td> <td><code>""</code></td> </tr> <tr> <td><code>auth.basicAuthUsers</code></td> <td>Object containing <user>:<passwords> key-value pairs for each user that will have access via basic authentication</td> <td><code>{}</code></td> </tr> <tr> <td><code>serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>false</code></td> </tr> <tr> <td><code>serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>serviceAccount.automountServiceAccountToken</code></td> <td>Automount service account token for the server service account</td> <td><code>true</code></td> </tr> <tr> <td><code>serviceAccount.annotations</code></td> <td>Annotations for service account. Evaluated as a template. Only used if <code>create</code> is <code>true</code>.</td> <td><code>{}</code></td> </tr> </tbody> </table> <h3 id=thanos-query-parameters>Thanos Query parameters<a class=headerlink href=#thanos-query-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>query.enabled</code></td> <td>Set to true to enable Thanos Query component</td> <td><code>true</code></td> </tr> <tr> <td><code>query.logLevel</code></td> <td>Thanos Query log level</td> <td><code>info</code></td> </tr> <tr> <td><code>query.logFormat</code></td> <td>Thanos Query log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>query.replicaLabel</code></td> <td>Replica indicator(s) along which data is de-duplicated</td> <td><code>["replica"]</code></td> </tr> <tr> <td><code>query.dnsDiscovery.enabled</code></td> <td>Enable store APIs discovery via DNS</td> <td><code>true</code></td> </tr> <tr> <td><code>query.dnsDiscovery.sidecarsService</code></td> <td>Sidecars service name to discover them using DNS discovery</td> <td><code>""</code></td> </tr> <tr> <td><code>query.dnsDiscovery.sidecarsNamespace</code></td> <td>Sidecars namespace to discover them using DNS discovery</td> <td><code>""</code></td> </tr> <tr> <td><code>query.stores</code></td> <td>Statically configure store APIs to connect with Thanos Query</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.sdConfig</code></td> <td>Query Service Discovery Configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>query.existingSDConfigmap</code></td> <td>Name of existing ConfigMap with Ruler configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>query.extraEnvVars</code></td> <td>Extra environment variables for Thanos Query container</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Query nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>query.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Query nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>query.extraFlags</code></td> <td>Extra Flags to passed to Thanos Query</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.replicaCount</code></td> <td>Number of Thanos Query replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>query.updateStrategy.type</code></td> <td>Update strategy type for Thanos Query replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>query.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Query pods</td> <td><code>true</code></td> </tr> <tr> <td><code>query.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Query pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>query.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Query containers</td> <td><code>true</code></td> </tr> <tr> <td><code>query.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Query containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>query.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Query containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>query.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Query containers</td> <td><code>false</code></td> </tr> <tr> <td><code>query.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Query containers</td> <td><code>true</code></td> </tr> <tr> <td><code>query.resources.limits</code></td> <td>The resources limits for the Thanos Query container</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.resources.requests</code></td> <td>The requested resources for the Thanos Query container</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Query containers</td> <td><code>true</code></td> </tr> <tr> <td><code>query.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>query.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>query.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>query.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>query.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>query.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Query containers</td> <td><code>true</code></td> </tr> <tr> <td><code>query.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>query.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>query.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>query.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>query.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>query.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Query containers</td> <td><code>false</code></td> </tr> <tr> <td><code>query.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>query.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>query.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>query.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>query.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>query.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.initContainers</code></td> <td>Add additional init containers to the Thanos Query pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Query pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.extraVolumes</code></td> <td>Extra volumes to add to Thanos Query</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the query container</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.podAffinityPreset</code></td> <td>Thanos Query pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>query.podAntiAffinityPreset</code></td> <td>Thanos Query pod anti-affinity preset. Ignored if <code>query.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>query.podAntiAffinityPresetTopologyKey</code></td> <td>Thanos Query pod anti-affinity topologyKey. Ignored if <code>query.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>query.nodeAffinityPreset.type</code></td> <td>Thanos Query node affinity preset type. Ignored if <code>query.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>query.nodeAffinityPreset.key</code></td> <td>Thanos Query node label key to match Ignored if <code>query.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>query.nodeAffinityPreset.values</code></td> <td>Thanos Query node label values to match. Ignored if <code>query.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.affinity</code></td> <td>Thanos Query affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.nodeSelector</code></td> <td>Thanos Query node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.tolerations</code></td> <td>Thanos Query tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.podLabels</code></td> <td>Thanos Query pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.podAnnotations</code></td> <td>Annotations for Thanos Query pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.lifecycleHooks</code></td> <td>for the Thanos Query container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.priorityClassName</code></td> <td>Thanos Query priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>query.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Query pods</td> <td><code>""</code></td> </tr> <tr> <td><code>query.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Query pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.grpc.server.tls.enabled</code></td> <td>Enable TLS encryption in the GRPC server</td> <td><code>false</code></td> </tr> <tr> <td><code>query.grpc.server.tls.autoGenerated</code></td> <td>Create self-signed TLS certificates. Currently only supports PEM certificates</td> <td><code>false</code></td> </tr> <tr> <td><code>query.grpc.server.tls.cert</code></td> <td>TLS Certificate for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.server.tls.key</code></td> <td>TLS Key for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.server.tls.ca</code></td> <td>TLS CA to verify clients against - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.server.tls.existingSecret</code></td> <td>Existing secret containing your own TLS certificates</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.grpc.client.serverName</code></td> <td>Server name to verify the hostname on the returned GRPC certificates</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.client.tls.enabled</code></td> <td>Enable TLS encryption in the GRPC server</td> <td><code>false</code></td> </tr> <tr> <td><code>query.grpc.client.tls.autoGenerated</code></td> <td>Create self-signed TLS certificates. Currently only supports PEM certificates</td> <td><code>false</code></td> </tr> <tr> <td><code>query.grpc.client.tls.cert</code></td> <td>TLS Certificate for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.client.tls.key</code></td> <td>TLS Key for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.client.tls.ca</code></td> <td>TLS CA to verify clients against - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>query.grpc.client.tls.existingSecret</code></td> <td>Existing secret containing your own TLS certificates</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>query.service.ports.http</code></td> <td>Thanos Query service HTTP port</td> <td><code>9090</code></td> </tr> <tr> <td><code>query.service.nodePorts.http</code></td> <td>Specify the Thanos Query HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>query.service.clusterIP</code></td> <td>Thanos Query service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>query.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>query.service.loadBalancerSourceRanges</code></td> <td>Address that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.service.externalTrafficPolicy</code></td> <td>Thanos Query service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>query.service.labels</code></td> <td>Labels for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.service.annotations</code></td> <td>Annotations for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Query service</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.service.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.service.additionalHeadless</code></td> <td>Additional Headless service</td> <td><code>false</code></td> </tr> <tr> <td><code>query.service.headless.annotations</code></td> <td>Annotations for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.serviceGrpc.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>query.serviceGrpc.ports.grpc</code></td> <td>Thanos Query service GRPC port</td> <td><code>10901</code></td> </tr> <tr> <td><code>query.serviceGrpc.nodePorts.grpc</code></td> <td>Specify the Thanos Query GRPC nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>query.serviceGrpc.clusterIP</code></td> <td>Thanos Query service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>query.serviceGrpc.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>query.serviceGrpc.loadBalancerSourceRanges</code></td> <td>Address that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.serviceGrpc.externalTrafficPolicy</code></td> <td>Thanos Query service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>query.serviceGrpc.annotations</code></td> <td>Annotations for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.serviceGrpc.extraPorts</code></td> <td>Extra ports to expose in the Thanos Query service</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.serviceGrpc.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.serviceGrpc.additionalHeadless</code></td> <td>Additional Headless service</td> <td><code>false</code></td> </tr> <tr> <td><code>query.serviceGrpc.headless.annotations</code></td> <td>Annotations for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the deployment</td> <td><code>true</code></td> </tr> <tr> <td><code>query.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>query.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>query.serviceAccount.annotations</code></td> <td>Annotations for Thanos Query Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>query.rbac.create</code></td> <td>Create a ClusterRole and ClusterRoleBinding for the Thanos Query Service Account</td> <td><code>false</code></td> </tr> <tr> <td><code>query.rbac.rules</code></td> <td>Custom RBAC rules to set</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.pspEnabled</code></td> <td>Whether to create a PodSecurityPolicy for Thanos Query</td> <td><code>false</code></td> </tr> <tr> <td><code>query.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Query</td> <td><code>false</code></td> </tr> <tr> <td><code>query.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Query replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>query.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Query replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>query.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>query.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>query.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Query</td> <td><code>false</code></td> </tr> <tr> <td><code>query.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>query.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> <tr> <td><code>query.ingress.enabled</code></td> <td>Enable ingress controller resource</td> <td><code>false</code></td> </tr> <tr> <td><code>query.ingress.hostname</code></td> <td>Default host for the ingress resource</td> <td><code>thanos.local</code></td> </tr> <tr> <td><code>query.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>query.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>query.ingress.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>query.ingress.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>query.ingress.apiVersion</code></td> <td>Force Ingress API version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>query.ingress.path</code></td> <td>Ingress path</td> <td><code>/</code></td> </tr> <tr> <td><code>query.ingress.pathType</code></td> <td>Ingress path type</td> <td><code>ImplementationSpecific</code></td> </tr> <tr> <td><code>query.ingress.grpc.enabled</code></td> <td>Enable ingress controller resource (GRPC)</td> <td><code>false</code></td> </tr> <tr> <td><code>query.ingress.grpc.hostname</code></td> <td>Default host for the ingress resource (GRPC)</td> <td><code>thanos-grpc.local</code></td> </tr> <tr> <td><code>query.ingress.grpc.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>query.ingress.grpc.annotations</code></td> <td>Additional annotations for the Ingress resource (GRPC). To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>query.ingress.grpc.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.grpc.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.grpc.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.grpc.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>query.ingress.grpc.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>query.ingress.grpc.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>query.ingress.grpc.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>query.ingress.grpc.apiVersion</code></td> <td>Override API Version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>query.ingress.grpc.path</code></td> <td>Ingress Path</td> <td><code>/</code></td> </tr> <tr> <td><code>query.ingress.grpc.pathType</code></td> <td>Ingress Path type</td> <td><code>ImplementationSpecific</code></td> </tr> </tbody> </table> <h3 id=thanos-query-frontend-parameters>Thanos Query Frontend parameters<a class=headerlink href=#thanos-query-frontend-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>queryFrontend.enabled</code></td> <td>Enable/disable Thanos Query Frontend component</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.logLevel</code></td> <td>Thanos Query Frontend log level</td> <td><code>info</code></td> </tr> <tr> <td><code>queryFrontend.logFormat</code></td> <td>Thanos Query Frontend log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>queryFrontend.config</code></td> <td>Thanos Query Frontend configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.existingConfigmap</code></td> <td>Name of existing ConfigMap with Thanos Query Frontend configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.extraEnvVars</code></td> <td>Extra environment variables for Thanos Query Frontend container</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Query Frontend nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Query Frontend nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.extraFlags</code></td> <td>Extra Flags to passed to Thanos Query Frontend</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.replicaCount</code></td> <td>Number of Thanos Query Frontend replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>queryFrontend.updateStrategy.type</code></td> <td>Update strategy type for Thanos Query Frontend replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>queryFrontend.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Query Frontend pods</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Query Frontend pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>queryFrontend.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Query Frontend containers</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Query Frontend containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>queryFrontend.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Query Frontend containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Query Frontend containers</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Query Frontend containers</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.resources.limits</code></td> <td>The resources limits for the Thanos Query Frontend container</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.resources.requests</code></td> <td>The requested resources for the Thanos Query Frontend container</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Query Frontend containers</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>queryFrontend.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>queryFrontend.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>queryFrontend.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>queryFrontend.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>queryFrontend.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Query Frontend containers</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>queryFrontend.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>queryFrontend.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>queryFrontend.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>queryFrontend.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>queryFrontend.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Query Frontend containers</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>queryFrontend.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>queryFrontend.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>queryFrontend.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>queryFrontend.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>queryFrontend.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.initContainers</code></td> <td>Add additional init containers to the Thanos Query Frontend pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Query Frontend pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.extraVolumes</code></td> <td>Extra volumes to add to Thanos Query Frontend</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the query-frontend container</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.podAffinityPreset</code></td> <td>Thanos Query Frontend pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.podAntiAffinityPreset</code></td> <td>Thanos Query Frontend pod anti-affinity preset. Ignored if <code>queryFrontend.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>queryFrontend.nodeAffinityPreset.type</code></td> <td>Thanos Query Frontend node affinity preset type. Ignored if <code>queryFrontend.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.nodeAffinityPreset.key</code></td> <td>Thanos Query Frontend node label key to match. Ignored if <code>queryFrontend.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.nodeAffinityPreset.values</code></td> <td>Thanos Query Frontend node label values to match. Ignored if <code>queryFrontend.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.affinity</code></td> <td>Thanos Query Frontend affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.nodeSelector</code></td> <td>Thanos Query Frontend node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.tolerations</code></td> <td>Thanos Query Frontend tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.podLabels</code></td> <td>Thanos Query Frontend pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.podAnnotations</code></td> <td>Annotations for Thanos Query Frontend pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.lifecycleHooks</code></td> <td>for the Thanos Query Frontend container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.priorityClassName</code></td> <td>Thanos Query Frontend priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Query Frontend pods</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Query Frontend pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>queryFrontend.service.ports.http</code></td> <td>Thanos Query Frontend service HTTP port</td> <td><code>9090</code></td> </tr> <tr> <td><code>queryFrontend.service.nodePorts.http</code></td> <td>Specify the Thanos Query Frontend HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.service.clusterIP</code></td> <td>Thanos Query Frontend service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.service.loadBalancerSourceRanges</code></td> <td>Address that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.service.externalTrafficPolicy</code></td> <td>Thanos Query Frontend service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>queryFrontend.service.annotations</code></td> <td>Annotations for Thanos Query Frontend service</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.service.labels</code></td> <td>Labels for Thanos Query Frontend service</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Query Frontend service</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.service.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the deployment</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.serviceAccount.annotations</code></td> <td>Annotations for Thanos Query Frontend Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>queryFrontend.rbac.create</code></td> <td>Create a ClusterRole and ClusterRoleBinding for the Thanos Query Frontend Service Account</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.rbac.rules</code></td> <td>Custom RBAC rules to set</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.pspEnabled</code></td> <td>Whether to create a PodSecurityPolicy for Thanos Query Frontend</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Query Frontend</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Query Frontend replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Query Frontend replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Query Frontend</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>queryFrontend.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.ingress.enabled</code></td> <td>Enable ingress controller resource</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.ingress.hostname</code></td> <td>Default host for the ingress resource</td> <td><code>thanos.local</code></td> </tr> <tr> <td><code>queryFrontend.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>queryFrontend.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>queryFrontend.ingress.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>queryFrontend.ingress.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.ingress.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>queryFrontend.ingress.apiVersion</code></td> <td>Force Ingress API version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>queryFrontend.ingress.path</code></td> <td>Ingress path</td> <td><code>/</code></td> </tr> <tr> <td><code>queryFrontend.ingress.pathType</code></td> <td>Ingress path type</td> <td><code>ImplementationSpecific</code></td> </tr> </tbody> </table> <h3 id=thanos-bucket-web-parameters>Thanos Bucket Web parameters<a class=headerlink href=#thanos-bucket-web-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>bucketweb.enabled</code></td> <td>Enable/disable Thanos Bucket Web component</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.logLevel</code></td> <td>Thanos Bucket Web log level</td> <td><code>info</code></td> </tr> <tr> <td><code>bucketweb.logFormat</code></td> <td>Thanos Bucket Web log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>bucketweb.refresh</code></td> <td>Refresh interval to download metadata from remote storage</td> <td><code>30m</code></td> </tr> <tr> <td><code>bucketweb.timeout</code></td> <td>Timeout to download metadata from remote storage</td> <td><code>5m</code></td> </tr> <tr> <td><code>bucketweb.extraEnvVars</code></td> <td>Extra environment variables for Thanos Bucket Web container</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Bucket Web nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Bucket Web nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.extraFlags</code></td> <td>Extra Flags to passed to Thanos Bucket Web</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.replicaCount</code></td> <td>Number of Thanos Bucket Web replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>bucketweb.updateStrategy.type</code></td> <td>Update strategy type for Thanos Bucket Web replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>bucketweb.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Bucket Web pods</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Bucket Web pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>bucketweb.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Bucket Web containers</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Bucket Web containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>bucketweb.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Bucket Web containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Bucket Web containers</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Bucket Web containers</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.resources.limits</code></td> <td>The resources limits for the Thanos Bucket Web container</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.resources.requests</code></td> <td>The requested resources for the Thanos Bucket Web container</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Bucket Web containers</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>bucketweb.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>bucketweb.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>bucketweb.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>bucketweb.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>bucketweb.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Bucket Web containers</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>bucketweb.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>bucketweb.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>bucketweb.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>bucketweb.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>bucketweb.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Bucket Web containers</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>bucketweb.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>bucketweb.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>bucketweb.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>bucketweb.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>bucketweb.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.initContainers</code></td> <td>Add additional init containers to the Thanos Bucket Web pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Bucket Web pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.extraVolumes</code></td> <td>Extra volumes to add to Bucket Web</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the bucketweb container</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.podAffinityPreset</code></td> <td>Thanos Bucket Web pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.podAntiAffinityPreset</code></td> <td>Thanos Bucket Web pod anti-affinity preset. Ignored if <code>bucketweb.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>bucketweb.nodeAffinityPreset.type</code></td> <td>Thanos Bucket Web node affinity preset type. Ignored if <code>bucketweb.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.nodeAffinityPreset.key</code></td> <td>Thanos Bucket Web node label key to match. Ignored if <code>bucketweb.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.nodeAffinityPreset.values</code></td> <td>Thanos Bucket Web node label values to match. Ignored if <code>bucketweb.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.affinity</code></td> <td>Thanos Bucket Web affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.nodeSelector</code></td> <td>Thanos Bucket Web node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.tolerations</code></td> <td>Thanos Bucket Web tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.podLabels</code></td> <td>Thanos Bucket Web pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.podAnnotations</code></td> <td>Annotations for Thanos Bucket Web pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.lifecycleHooks</code></td> <td>for the Thanos Bucket Web container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.priorityClassName</code></td> <td>Thanos Bucket Web priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Bucket Web pods</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Bucket Web pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>bucketweb.service.ports.http</code></td> <td>Thanos Bucket Web service HTTP port</td> <td><code>8080</code></td> </tr> <tr> <td><code>bucketweb.service.nodePorts.http</code></td> <td>Specify the Thanos Bucket Web HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.service.clusterIP</code></td> <td>Thanos Bucket Web service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.service.loadBalancerSourceRanges</code></td> <td>Address that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.service.externalTrafficPolicy</code></td> <td>Thanos Bucket Web service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>bucketweb.service.labels</code></td> <td>Extra labels for Thanos Bucket Web service</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.service.annotations</code></td> <td>Annotations for Thanos Bucket Web service</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Bucket Web service</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.service.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the deployment</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.serviceAccount.annotations</code></td> <td>Annotations for Thanos Bucket Web Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>bucketweb.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Bucket Web</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Bucket Web replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Bucket Web replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Bucket Web</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>bucketweb.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.ingress.enabled</code></td> <td>Enable ingress controller resource</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.ingress.hostname</code></td> <td>Default host for the ingress resource</td> <td><code>thanos-bucketweb.local</code></td> </tr> <tr> <td><code>bucketweb.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>bucketweb.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>bucketweb.ingress.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>bucketweb.ingress.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.ingress.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>bucketweb.ingress.apiVersion</code></td> <td>Force Ingress API version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>bucketweb.ingress.path</code></td> <td>Ingress path</td> <td><code>/</code></td> </tr> <tr> <td><code>bucketweb.ingress.pathType</code></td> <td>Ingress path type</td> <td><code>ImplementationSpecific</code></td> </tr> </tbody> </table> <h3 id=thanos-compactor-parameters>Thanos Compactor parameters<a class=headerlink href=#thanos-compactor-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>compactor.enabled</code></td> <td>Enable/disable Thanos Compactor component</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.logLevel</code></td> <td>Thanos Compactor log level</td> <td><code>info</code></td> </tr> <tr> <td><code>compactor.logFormat</code></td> <td>Thanos Compactor log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>compactor.retentionResolutionRaw</code></td> <td>Resolution and Retention flag</td> <td><code>30d</code></td> </tr> <tr> <td><code>compactor.retentionResolution5m</code></td> <td>Resolution and Retention flag</td> <td><code>30d</code></td> </tr> <tr> <td><code>compactor.retentionResolution1h</code></td> <td>Resolution and Retention flag</td> <td><code>10y</code></td> </tr> <tr> <td><code>compactor.consistencyDelay</code></td> <td>Minimum age of fresh (non-compacted) blocks before they are being processed</td> <td><code>30m</code></td> </tr> <tr> <td><code>compactor.extraEnvVars</code></td> <td>Extra environment variables for Thanos Compactor container</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Compactor nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Compactor nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.extraFlags</code></td> <td>Extra Flags to passed to Thanos Compactor</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.cronJob.enabled</code></td> <td>Run compactor as a CronJob rather than a Deployment</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.cronJob.schedule</code></td> <td>The schedule in Cron format, see <a href=https://en.wikipedia.org/wiki/Cron>https://en.wikipedia.org/wiki/Cron</a></td> <td><code>0 */6 * * *</code></td> </tr> <tr> <td><code>compactor.cronJob.timeZone</code></td> <td>The time zone name for the given schedule, see <a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones>https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.cronJob.concurrencyPolicy</code></td> <td>Specifies how to treat concurrent executions of a Job</td> <td><code>Forbid</code></td> </tr> <tr> <td><code>compactor.cronJob.startingDeadlineSeconds</code></td> <td>Optional deadline in seconds for starting the job if it misses scheduled time for any reason</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.cronJob.suspend</code></td> <td>This flag tells the controller to suspend subsequent executions</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.cronJob.successfulJobsHistoryLimit</code></td> <td>The number of successful finished jobs to retain</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.cronJob.failedJobsHistoryLimit</code></td> <td>The number of failed finished jobs to retain</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.cronJob.backoffLimit</code></td> <td>Specifies the number of retries before marking this job failed</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.restartPolicy</code></td> <td>Compactor container restart policy.</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.updateStrategy.type</code></td> <td>Update strategy type for Thanos Compactor replicas</td> <td><code>Recreate</code></td> </tr> <tr> <td><code>compactor.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Compactor pods</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Compactor pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>compactor.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Compactor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Compactor containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>compactor.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Compactor containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Compactor containers</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Compactor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.resources.limits</code></td> <td>The resources limits for the Thanos Compactor container</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.resources.requests</code></td> <td>The requested resources for the Thanos Compactor container</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Compactor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>compactor.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>compactor.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>compactor.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>compactor.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>compactor.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Compactor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>compactor.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>compactor.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>compactor.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>compactor.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>compactor.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Compactor containers</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>compactor.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>compactor.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>compactor.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>compactor.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>compactor.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.initContainers</code></td> <td>Add additional init containers to the Thanos Compactor pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Compactor pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.extraVolumes</code></td> <td>Extra volumes to add to Thanos Compactor</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the compactor container</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.podAffinityPreset</code></td> <td>Thanos Compactor pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.podAntiAffinityPreset</code></td> <td>Thanos Compactor pod anti-affinity preset. Ignored if <code>compactor.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>compactor.nodeAffinityPreset.type</code></td> <td>Thanos Compactor node affinity preset type. Ignored if <code>compactor.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.nodeAffinityPreset.key</code></td> <td>Thanos Compactor node label key to match. Ignored if <code>compactor.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.nodeAffinityPreset.values</code></td> <td>Thanos Compactor node label values to match. Ignored if <code>compactor.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.affinity</code></td> <td>Thanos Compactor affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.nodeSelector</code></td> <td>Thanos Compactor node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.tolerations</code></td> <td>Thanos Compactor tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.podLabels</code></td> <td>Thanos Compactor pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.podAnnotations</code></td> <td>Annotations for Thanos Compactor pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.lifecycleHooks</code></td> <td>for the Thanos Compactor container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.priorityClassName</code></td> <td>Thanos Compactor priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Compactor pods</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Compactor pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>compactor.service.ports.http</code></td> <td>Thanos Compactor service HTTP port</td> <td><code>9090</code></td> </tr> <tr> <td><code>compactor.service.nodePorts.http</code></td> <td>Specify the Thanos Compactor HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.service.clusterIP</code></td> <td>Thanos Compactor service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.service.loadBalancerSourceRanges</code></td> <td>Addresses that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.service.externalTrafficPolicy</code></td> <td>Thanos Compactor service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>compactor.service.labels</code></td> <td>Labels for Thanos Compactor service</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.service.annotations</code></td> <td>Annotations for Thanos Compactor service</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Compactor service</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.service.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the deployment</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.serviceAccount.annotations</code></td> <td>Annotations for Thanos Compactor Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.ingress.enabled</code></td> <td>Enable ingress controller resource</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.ingress.hostname</code></td> <td>Default host for the ingress resource</td> <td><code>thanos-compactor.local</code></td> </tr> <tr> <td><code>compactor.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>compactor.ingress.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>compactor.ingress.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.ingress.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>compactor.ingress.apiVersion</code></td> <td>Force Ingress API version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.ingress.path</code></td> <td>Ingress path</td> <td><code>/</code></td> </tr> <tr> <td><code>compactor.ingress.pathType</code></td> <td>Ingress path type</td> <td><code>ImplementationSpecific</code></td> </tr> <tr> <td><code>compactor.persistence.enabled</code></td> <td>Enable data persistence using PVC(s) on Thanos Compactor pods</td> <td><code>true</code></td> </tr> <tr> <td><code>compactor.persistence.storageClass</code></td> <td>Specify the <code>storageClass</code> used to provision the volume</td> <td><code>""</code></td> </tr> <tr> <td><code>compactor.persistence.accessModes</code></td> <td>PVC Access Modes for data volume</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>compactor.persistence.size</code></td> <td>PVC Storage Request for data volume</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>compactor.persistence.labels</code></td> <td>Labels for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.persistence.annotations</code></td> <td>Annotations for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>compactor.persistence.existingClaim</code></td> <td>Name of an existing PVC to use</td> <td><code>""</code></td> </tr> </tbody> </table> <h3 id=thanos-store-gateway-parameters>Thanos Store Gateway parameters<a class=headerlink href=#thanos-store-gateway-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>storegateway.enabled</code></td> <td>Enable/disable Thanos Store Gateway component</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.logLevel</code></td> <td>Thanos Store Gateway log level</td> <td><code>info</code></td> </tr> <tr> <td><code>storegateway.logFormat</code></td> <td>Thanos Store Gateway log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>storegateway.config</code></td> <td>Thanos Store Gateway configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.existingConfigmap</code></td> <td>Name of existing ConfigMap with Thanos Store Gateway configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.grpc.server.tls.enabled</code></td> <td>Enable TLS encryption in the GRPC server</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.grpc.server.tls.autoGenerated</code></td> <td>Create self-signed TLS certificates. Currently only supports PEM certificates</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.grpc.server.tls.cert</code></td> <td>TLS Certificate for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.grpc.server.tls.key</code></td> <td>TLS Key for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.grpc.server.tls.ca</code></td> <td>TLS CA to verify clients against - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.grpc.server.tls.existingSecret</code></td> <td>Existing secret containing your own TLS certificates</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.extraEnvVars</code></td> <td>Extra environment variables for Thanos Store Gateway container</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Store Gateway nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Store Gateway nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.extraFlags</code></td> <td>Extra Flags to passed to Thanos Store Gateway</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.replicaCount</code></td> <td>Number of Thanos Store Gateway replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>storegateway.updateStrategy.type</code></td> <td>Update strategy type for Thanos Store Gateway replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>storegateway.podManagementPolicy</code></td> <td>Statefulset Pod management policy: OrderedReady (default) or Parallel</td> <td><code>OrderedReady</code></td> </tr> <tr> <td><code>storegateway.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Store Gateway pods</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Store Gateway pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>storegateway.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Store Gateway containers</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Store Gateway containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>storegateway.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Store Gateway containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Store Gateway containers</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Store Gateway containers</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.resources.limits</code></td> <td>The resources limits for the Thanos Store Gateway container</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.resources.requests</code></td> <td>The requested resources for the Thanos Store Gateway container</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Store Gateway containers</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>storegateway.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>storegateway.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>storegateway.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>storegateway.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>storegateway.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Store Gateway containers</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>storegateway.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>storegateway.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>storegateway.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>storegateway.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>storegateway.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Store Gateway containers</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>storegateway.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>storegateway.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>storegateway.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>storegateway.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>storegateway.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.initContainers</code></td> <td>Add additional init containers to the Thanos Store Gateway pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Store Gateway pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.extraVolumes</code></td> <td>Extra volumes to add to Thanos Store Gateway</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the storegateway container</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.podAffinityPreset</code></td> <td>Thanos Store Gateway pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.podAntiAffinityPreset</code></td> <td>Thanos Store Gateway pod anti-affinity preset. Ignored if <code>storegateway.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>storegateway.nodeAffinityPreset.type</code></td> <td>Thanos Store Gateway node affinity preset type. Ignored if <code>storegateway.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.nodeAffinityPreset.key</code></td> <td>Thanos Store Gateway node label key to match. Ignored if <code>storegateway.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.nodeAffinityPreset.values</code></td> <td>Thanos Store Gateway node label values to match. Ignored if <code>storegateway.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.affinity</code></td> <td>Thanos Store Gateway affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.nodeSelector</code></td> <td>Thanos Store Gateway node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.tolerations</code></td> <td>Thanos Store Gateway tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.podLabels</code></td> <td>Thanos Store Gateway pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.podAnnotations</code></td> <td>Annotations for Thanos Store Gateway pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.lifecycleHooks</code></td> <td>for the Thanos Store Gateway container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.priorityClassName</code></td> <td>Thanos Store Gateway priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Store Gateway pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Store Gateway pods</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>storegateway.service.ports.http</code></td> <td>Thanos Store Gateway service HTTP port</td> <td><code>9090</code></td> </tr> <tr> <td><code>storegateway.service.ports.grpc</code></td> <td>Thanos Store Gateway service GRPC port</td> <td><code>10901</code></td> </tr> <tr> <td><code>storegateway.service.nodePorts.http</code></td> <td>Specify the Thanos Store Gateway HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.service.nodePorts.grpc</code></td> <td>Specify the Thanos Store Gateway GRPC nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.service.clusterIP</code></td> <td>Thanos Store Gateway service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.service.loadBalancerSourceRanges</code></td> <td>Addresses that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.service.externalTrafficPolicy</code></td> <td>Thanos Store Gateway service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>storegateway.service.labels</code></td> <td>Extra labels for Thanos Store Gateway service</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.service.annotations</code></td> <td>Annotations for Thanos Store Gateway service</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Store Gateway service</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.service.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.service.additionalHeadless</code></td> <td>Additional Headless service</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.service.headless.annotations</code></td> <td>Annotations for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.persistence.enabled</code></td> <td>Enable data persistence using PVC(s) on Thanos Store Gateway pods</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.persistence.storageClass</code></td> <td>Specify the <code>storageClass</code> used to provision the volume</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.persistence.accessModes</code></td> <td>PVC Access Modes for data volume</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>storegateway.persistence.size</code></td> <td>PVC Storage Request for data volume</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>storegateway.persistence.labels</code></td> <td>Labels for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.persistence.annotations</code></td> <td>Annotations for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.persistence.existingClaim</code></td> <td>Name of an existing PVC to use</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the sts</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.serviceAccount.annotations</code></td> <td>Annotations for Thanos Store Gateway Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>storegateway.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Store Gateway</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Store Gateway replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Store Gateway replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Store Gateway</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>storegateway.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.ingress.enabled</code></td> <td>Enable ingress controller resource</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.ingress.hostname</code></td> <td>Default host for the ingress resource</td> <td><code>thanos-storegateway.local</code></td> </tr> <tr> <td><code>storegateway.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>storegateway.ingress.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.ingress.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.ingress.apiVersion</code></td> <td>Force Ingress API version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.ingress.path</code></td> <td>Ingress path</td> <td><code>/</code></td> </tr> <tr> <td><code>storegateway.ingress.pathType</code></td> <td>Ingress path type</td> <td><code>ImplementationSpecific</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.enabled</code></td> <td>Enable ingress controller resource (GRPC)</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.hostname</code></td> <td>Default host for the ingress resource (GRPC)</td> <td><code>thanos-grpc.local</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.annotations</code></td> <td>Additional annotations for the Ingress resource (GRPC). To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>storegateway.ingress.grpc.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.apiVersion</code></td> <td>Override API Version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.path</code></td> <td>Ingress Path</td> <td><code>/</code></td> </tr> <tr> <td><code>storegateway.ingress.grpc.pathType</code></td> <td>Ingress Path type</td> <td><code>ImplementationSpecific</code></td> </tr> <tr> <td><code>storegateway.sharded.enabled</code></td> <td>Enable sharding for Thanos Store Gateway</td> <td><code>false</code></td> </tr> <tr> <td><code>storegateway.sharded.hashPartitioning.shards</code></td> <td>Setting hashPartitioning will create multiple store statefulsets based on the number of shards specified using the hashmod of the blocks</td> <td><code>""</code></td> </tr> <tr> <td><code>storegateway.sharded.timePartitioning</code></td> <td>Setting time timePartitioning will create multiple store deployments based on the number of partitions</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.sharded.service.clusterIPs</code></td> <td>Array of cluster IPs for each Store Gateway service. Length must be the same as the number of shards</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.sharded.service.loadBalancerIPs</code></td> <td>Array of load balancer IPs for each Store Gateway service. Length must be the same as the number of shards</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.sharded.service.http.nodePorts</code></td> <td>Array of http node ports used for Store Gateway service. Length must be the same as the number of shards</td> <td><code>[]</code></td> </tr> <tr> <td><code>storegateway.sharded.service.grpc.nodePorts</code></td> <td>Array of grpc node ports used for Store Gateway service. Length must be the same as the number of shards</td> <td><code>[]</code></td> </tr> </tbody> </table> <h3 id=thanos-ruler-parameters>Thanos Ruler parameters<a class=headerlink href=#thanos-ruler-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>ruler.enabled</code></td> <td>Enable/disable Thanos Ruler component</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.logLevel</code></td> <td>Thanos Ruler log level</td> <td><code>info</code></td> </tr> <tr> <td><code>ruler.logFormat</code></td> <td>Thanos Ruler log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>ruler.replicaLabel</code></td> <td>Label to treat as a replica indicator along which data is de-duplicated</td> <td><code>replica</code></td> </tr> <tr> <td><code>ruler.dnsDiscovery.enabled</code></td> <td>Dynamically configure Query APIs using DNS discovery</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.queryURL</code></td> <td>Thanos query/query-frontend URL to link in Ruler UI.</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.alertmanagers</code></td> <td>Alert managers URLs array</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.alertmanagersConfig</code></td> <td>Alert managers configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.evalInterval</code></td> <td>The default evaluation interval to use</td> <td><code>1m</code></td> </tr> <tr> <td><code>ruler.clusterName</code></td> <td>Used to set the 'ruler_cluster' label</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.config</code></td> <td>Ruler configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.existingConfigmap</code></td> <td>Name of existing ConfigMap with Ruler configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.extraEnvVars</code></td> <td>Extra environment variables for Thanos Ruler container</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Ruler nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Ruler nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.extraFlags</code></td> <td>Extra Flags to passed to Thanos Ruler</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.replicaCount</code></td> <td>Number of Thanos Ruler replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>ruler.updateStrategy.type</code></td> <td>Update strategy type for Thanos Ruler replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>ruler.podManagementPolicy</code></td> <td>Statefulset Pod Management Policy Type</td> <td><code>OrderedReady</code></td> </tr> <tr> <td><code>ruler.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Ruler pods</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Ruler pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>ruler.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Ruler containers</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Ruler containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>ruler.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Ruler containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Ruler containers</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Ruler containers</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.resources.limits</code></td> <td>The resources limits for the Thanos Ruler container</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.resources.requests</code></td> <td>The requested resources for the Thanos Ruler container</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Ruler containers</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>ruler.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>ruler.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>ruler.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>ruler.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>ruler.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Ruler containers</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>ruler.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>ruler.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>ruler.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>ruler.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>ruler.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Ruler containers</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>ruler.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>ruler.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>ruler.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>ruler.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>ruler.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.initContainers</code></td> <td>Add additional init containers to the Thanos Ruler pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Ruler pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.extraVolumes</code></td> <td>Extra volumes to add to Thanos Ruler</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the ruler container</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.podAffinityPreset</code></td> <td>Thanos Ruler pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.podAntiAffinityPreset</code></td> <td>Thanos Ruler pod anti-affinity preset. Ignored if <code>ruler.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>ruler.nodeAffinityPreset.type</code></td> <td>Thanos Ruler node affinity preset type. Ignored if <code>ruler.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.nodeAffinityPreset.key</code></td> <td>Thanos Ruler node label key to match. Ignored if <code>ruler.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.nodeAffinityPreset.values</code></td> <td>Thanos Ruler node label values to match. Ignored if <code>ruler.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.affinity</code></td> <td>Thanos Ruler affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.nodeSelector</code></td> <td>Thanos Ruler node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.tolerations</code></td> <td>Thanos Ruler tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.podLabels</code></td> <td>Thanos Ruler pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.podAnnotations</code></td> <td>Annotations for Thanos Ruler pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.lifecycleHooks</code></td> <td>for the Thanos Ruler container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.priorityClassName</code></td> <td>Thanos Ruler priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Ruler pods</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Ruler pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>ruler.service.ports.http</code></td> <td>Thanos Ruler service HTTP port</td> <td><code>9090</code></td> </tr> <tr> <td><code>ruler.service.ports.grpc</code></td> <td>Thanos Ruler service GRPC port</td> <td><code>10901</code></td> </tr> <tr> <td><code>ruler.service.nodePorts.http</code></td> <td>Specify the Thanos Ruler HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.service.nodePorts.grpc</code></td> <td>Specify the Thanos Ruler GRPC nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.service.clusterIP</code></td> <td>Thanos Ruler service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.service.loadBalancerSourceRanges</code></td> <td>Address that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.service.externalTrafficPolicy</code></td> <td>Thanos Ruler service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>ruler.service.labels</code></td> <td>Extra labels for Thanos Ruler service</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.service.annotations</code></td> <td>Annotations for Thanos Ruler service</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Ruler service</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.service.labelSelectorsOverride</code></td> <td>Selector for Thanos Query service</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.service.additionalHeadless</code></td> <td>Additional Headless service</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.service.headless.annotations</code></td> <td>Annotations for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.persistence.enabled</code></td> <td>Enable data persistence using PVC(s) on Thanos Ruler pods</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.persistence.storageClass</code></td> <td>Specify the <code>storageClass</code> used to provision the volume</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.persistence.accessModes</code></td> <td>PVC Access Modes for data volume</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>ruler.persistence.size</code></td> <td>PVC Storage Request for data volume</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>ruler.persistence.annotations</code></td> <td>Annotations for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.persistence.existingClaim</code></td> <td>Name of an existing PVC to use</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the sts</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.serviceAccount.annotations</code></td> <td>Annotations for Thanos Ruler Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>ruler.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Ruler</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Ruler replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Ruler replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Ruler</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>ruler.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.ingress.enabled</code></td> <td>Enable ingress controller resource</td> <td><code>false</code></td> </tr> <tr> <td><code>ruler.ingress.hostname</code></td> <td>Default host for the ingress resource</td> <td><code>thanos-ruler.local</code></td> </tr> <tr> <td><code>ruler.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>ruler.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>ruler.ingress.apiVersion</code></td> <td>Force Ingress API version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>ruler.ingress.path</code></td> <td>Ingress path</td> <td><code>/</code></td> </tr> <tr> <td><code>ruler.ingress.pathType</code></td> <td>Ingress path type</td> <td><code>ImplementationSpecific</code></td> </tr> </tbody> </table> <h3 id=thanos-receive-parameters>Thanos Receive parameters<a class=headerlink href=#thanos-receive-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>receive.enabled</code></td> <td>Enable/disable Thanos Receive component</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.mode</code></td> <td>Mode to run receiver in. Valid options are "standalone" or "dual-mode"</td> <td><code>standalone</code></td> </tr> <tr> <td><code>receive.logLevel</code></td> <td>Thanos Receive log level</td> <td><code>info</code></td> </tr> <tr> <td><code>receive.logFormat</code></td> <td>Thanos Receive log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>receive.tsdbRetention</code></td> <td>Thanos Receive TSDB retention period</td> <td><code>15d</code></td> </tr> <tr> <td><code>receive.replicationFactor</code></td> <td>Thanos Receive replication-factor</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.config</code></td> <td>Receive Hashring configuration</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.existingConfigmap</code></td> <td>Name of existing ConfigMap with Thanos Receive Hashring configuration</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.replicaLabel</code></td> <td>Label to treat as a replica indicator along which data is de-duplicated</td> <td><code>replica</code></td> </tr> <tr> <td><code>receive.grpc.server.tls.enabled</code></td> <td>Enable TLS encryption in the GRPC server</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.grpc.server.tls.autoGenerated</code></td> <td>Create self-signed TLS certificates. Currently only supports PEM certificates</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.grpc.server.tls.cert</code></td> <td>TLS Certificate for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.grpc.server.tls.key</code></td> <td>TLS Key for GRPC server - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.grpc.server.tls.ca</code></td> <td>TLS CA to verify clients against - ignored if existingSecret is provided</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.grpc.server.tls.existingSecret</code></td> <td>Existing secret containing your own TLS certificates</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.extraEnvVars</code></td> <td>Extra environment variables for Thanos Receive container</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Receive nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Receive nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.extraFlags</code></td> <td>Extra Flags to passed to Thanos Receive</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.replicaCount</code></td> <td>Number of Thanos Receive replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.updateStrategy.type</code></td> <td>Update strategy type for Thanos Receive replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>receive.podManagementPolicy</code></td> <td></td> <td><code>OrderedReady</code></td> </tr> <tr> <td><code>receive.podManagementPolicy</code></td> <td>Statefulset Pod management policy: OrderedReady (default) or Parallel</td> <td><code>OrderedReady</code></td> </tr> <tr> <td><code>receive.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Receive pods</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Receive pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>receive.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Receive containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Receive containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>receive.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Receive containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Receive containers</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Receive containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.resources.limits</code></td> <td>The resources limits for the Thanos Receive container</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.resources.requests</code></td> <td>The requested resources for the Thanos Receive container</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Receive containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receive.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>receive.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receive.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>receive.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Receive containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receive.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>receive.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receive.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>receive.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Receive containers</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>receive.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>receive.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>receive.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.initContainers</code></td> <td>Add additional init containers to the Thanos Receive pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Receive pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.extraVolumes</code></td> <td>Extra volumes to add to Thanos Receive</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the receive container</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.podAffinityPreset</code></td> <td>Thanos Receive pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.podAntiAffinityPreset</code></td> <td>Thanos Receive pod anti-affinity preset. Ignored if <code>ruler.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>receive.nodeAffinityPreset.type</code></td> <td>Thanos Receive node affinity preset type. Ignored if <code>receive.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>receive.nodeAffinityPreset.key</code></td> <td>Thanos Receive node label key to match. Ignored if <code>receive.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.nodeAffinityPreset.values</code></td> <td>Thanos Receive node label values to match. Ignored if <code>receive.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.affinity</code></td> <td>Thanos Receive affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.nodeSelector</code></td> <td>Thanos Receive node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.tolerations</code></td> <td>Thanos Receive tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.podLabels</code></td> <td>Thanos Receive pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.podAnnotations</code></td> <td>Annotations for Thanos Receive pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.lifecycleHooks</code></td> <td>for the Thanos Receive container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.priorityClassName</code></td> <td>Thanos Receive priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Receive pods</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Receive pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.service.type</code></td> <td>Kubernetes service type</td> <td><code>ClusterIP</code></td> </tr> <tr> <td><code>receive.service.ports.http</code></td> <td>Thanos Ruler service HTTP port</td> <td><code>10902</code></td> </tr> <tr> <td><code>receive.service.ports.grpc</code></td> <td>Thanos Ruler service GRPC port</td> <td><code>10901</code></td> </tr> <tr> <td><code>receive.service.ports.remote</code></td> <td>Thanos Ruler service remote port</td> <td><code>19291</code></td> </tr> <tr> <td><code>receive.service.nodePorts.http</code></td> <td>Specify the Thanos Ruler HTTP nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.service.nodePorts.grpc</code></td> <td>Specify the Thanos Ruler GRPC nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.service.nodePorts.remote</code></td> <td>Specify the Thanos Ruler remote nodePort value for the LoadBalancer and NodePort service types</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.service.clusterIP</code></td> <td>Thanos Ruler service clusterIP IP</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.service.loadBalancerIP</code></td> <td>Load balancer IP if service type is <code>LoadBalancer</code></td> <td><code>""</code></td> </tr> <tr> <td><code>receive.service.loadBalancerSourceRanges</code></td> <td>Addresses that are allowed when service is LoadBalancer</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.service.externalTrafficPolicy</code></td> <td>Thanos Ruler service externalTrafficPolicy</td> <td><code>Cluster</code></td> </tr> <tr> <td><code>receive.service.labels</code></td> <td>Extra labels for Thanos Receive service</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.service.annotations</code></td> <td>Annotations for Thanos Receive service</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.service.extraPorts</code></td> <td>Extra ports to expose in the Thanos Receive service</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.service.labelSelectorsOverride</code></td> <td>Selector for Thanos receive service</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.service.additionalHeadless</code></td> <td>Additional Headless service</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.service.headless.annotations</code></td> <td>Annotations for the headless service.</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the sts</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.serviceAccount.annotations</code></td> <td>Annotations for Thanos Receive Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Receive</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Receive replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Receive replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Receive</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>receive.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.persistence.enabled</code></td> <td>Enable data persistence using PVC(s) on Thanos Receive pods</td> <td><code>true</code></td> </tr> <tr> <td><code>receive.persistence.storageClass</code></td> <td>Specify the <code>storageClass</code> used to provision the volume</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.persistence.accessModes</code></td> <td>PVC Access Modes for data volume</td> <td><code>["ReadWriteOnce"]</code></td> </tr> <tr> <td><code>receive.persistence.size</code></td> <td>PVC Storage Request for data volume</td> <td><code>8Gi</code></td> </tr> <tr> <td><code>receive.persistence.annotations</code></td> <td>Annotations for the PVC</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.persistence.existingClaim</code></td> <td>Name of an existing PVC to use</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.ingress.enabled</code></td> <td>Set to true to enable ingress record generation</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.ingress.hostname</code></td> <td>When the ingress is enabled, a host pointing to this will be created</td> <td><code>thanos-receive.local</code></td> </tr> <tr> <td><code>receive.ingress.ingressClassName</code></td> <td>IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.ingress.annotations</code></td> <td>Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.</td> <td><code>{}</code></td> </tr> <tr> <td><code>receive.ingress.extraHosts</code></td> <td>The list of additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.ingress.extraTls</code></td> <td>The tls configuration for additional hostnames to be covered with this ingress record.</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.ingress.secrets</code></td> <td>If you're providing your own certificates, please use this to add the certificates as secrets</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.ingress.extraRules</code></td> <td>Additional rules to be covered with this ingress record</td> <td><code>[]</code></td> </tr> <tr> <td><code>receive.ingress.tls</code></td> <td>Enable TLS configuration for the hostname defined at <code>receive.ingress.hostname</code> parameter</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.ingress.selfSigned</code></td> <td>Create a TLS secret for this ingress record using self-signed certificates generated by Helm</td> <td><code>false</code></td> </tr> <tr> <td><code>receive.ingress.apiVersion</code></td> <td>Override API Version (automatically detected if not set)</td> <td><code>""</code></td> </tr> <tr> <td><code>receive.ingress.path</code></td> <td>Ingress Path</td> <td><code>/</code></td> </tr> <tr> <td><code>receive.ingress.pathType</code></td> <td>Ingress Path type</td> <td><code>ImplementationSpecific</code></td> </tr> </tbody> </table> <h3 id=thanos-receive-distributor-parameters>Thanos Receive Distributor parameters<a class=headerlink href=#thanos-receive-distributor-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>receiveDistributor.enabled</code></td> <td>Enable/disable Thanos Receive Distributor component</td> <td><code>false</code></td> </tr> <tr> <td><code>receiveDistributor.logLevel</code></td> <td>Thanos Receive Distributor log level</td> <td><code>info</code></td> </tr> <tr> <td><code>receiveDistributor.logFormat</code></td> <td>Thanos Receive Distributor log format</td> <td><code>logfmt</code></td> </tr> <tr> <td><code>receiveDistributor.replicaLabel</code></td> <td>Label to treat as a replica indicator along which data is de-duplicated</td> <td><code>replica</code></td> </tr> <tr> <td><code>receiveDistributor.replicationFactor</code></td> <td>Thanos Receive Distributor replication-factor</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.extraEnvVars</code></td> <td>Extra environment variables for Thanos Receive Distributor container</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.extraEnvVarsCM</code></td> <td>Name of existing ConfigMap containing extra env vars for Thanos Receive Distributor nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.extraEnvVarsSecret</code></td> <td>Name of existing Secret containing extra env vars for Thanos Receive Distributor nodes</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.extraFlags</code></td> <td>Extra Flags to passed to Thanos Receive Distributor</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.command</code></td> <td>Override default container command (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.args</code></td> <td>Override default container args (useful when using custom images)</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.replicaCount</code></td> <td>Number of Thanos Receive Distributor replicas to deploy</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.updateStrategy.type</code></td> <td>Update strategy type for Thanos Receive Distributor replicas</td> <td><code>RollingUpdate</code></td> </tr> <tr> <td><code>receiveDistributor.podSecurityContext.enabled</code></td> <td>Enable security context for the Thanos Receive Distributor pods</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.podSecurityContext.fsGroup</code></td> <td>Group ID for the filesystem used by Thanos Receive Distributor pods</td> <td><code>1001</code></td> </tr> <tr> <td><code>receiveDistributor.containerSecurityContext.enabled</code></td> <td>Enable container security context for the Thanos Receive Distributor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.containerSecurityContext.runAsUser</code></td> <td>User ID for the service user running the Thanos Receive Distributor containers</td> <td><code>1001</code></td> </tr> <tr> <td><code>receiveDistributor.containerSecurityContext.runAsNonRoot</code></td> <td>Force the Thanos Receive Distributor containers to run as a non root user</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.containerSecurityContext.allowPrivilegeEscalation</code></td> <td>Switch privilegeEscalation possibility on or off for Thanos Receive Distributor containers</td> <td><code>false</code></td> </tr> <tr> <td><code>receiveDistributor.containerSecurityContext.readOnlyRootFilesystem</code></td> <td>mount / (root) as a readonly filesystem on Thanos Receive Distributor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.resources.limits</code></td> <td>The resources limits for the Thanos Receive container</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.resources.requests</code></td> <td>The requested resources for the Thanos Receive container</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.livenessProbe.enabled</code></td> <td>Enable livenessProbe on Thanos Receive Distributor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.livenessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receiveDistributor.livenessProbe.periodSeconds</code></td> <td>Period seconds for livenessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>receiveDistributor.livenessProbe.timeoutSeconds</code></td> <td>Timeout seconds for livenessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receiveDistributor.livenessProbe.failureThreshold</code></td> <td>Failure threshold for livenessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>receiveDistributor.livenessProbe.successThreshold</code></td> <td>Success threshold for livenessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.readinessProbe.enabled</code></td> <td>Enable readinessProbe on Thanos Receive Distributor containers</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.readinessProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receiveDistributor.readinessProbe.periodSeconds</code></td> <td>Period seconds for readinessProbe</td> <td><code>10</code></td> </tr> <tr> <td><code>receiveDistributor.readinessProbe.timeoutSeconds</code></td> <td>Timeout seconds for readinessProbe</td> <td><code>30</code></td> </tr> <tr> <td><code>receiveDistributor.readinessProbe.failureThreshold</code></td> <td>Failure threshold for readinessProbe</td> <td><code>6</code></td> </tr> <tr> <td><code>receiveDistributor.readinessProbe.successThreshold</code></td> <td>Success threshold for readinessProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.startupProbe.enabled</code></td> <td>Enable startupProbe on Thanos Receive Distributor containers</td> <td><code>false</code></td> </tr> <tr> <td><code>receiveDistributor.startupProbe.initialDelaySeconds</code></td> <td>Initial delay seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>receiveDistributor.startupProbe.periodSeconds</code></td> <td>Period seconds for startupProbe</td> <td><code>5</code></td> </tr> <tr> <td><code>receiveDistributor.startupProbe.timeoutSeconds</code></td> <td>Timeout seconds for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.startupProbe.failureThreshold</code></td> <td>Failure threshold for startupProbe</td> <td><code>15</code></td> </tr> <tr> <td><code>receiveDistributor.startupProbe.successThreshold</code></td> <td>Success threshold for startupProbe</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.customLivenessProbe</code></td> <td>Custom livenessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.customReadinessProbe</code></td> <td>Custom readinessProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.customStartupProbe</code></td> <td>Custom startupProbe that overrides the default one</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.initContainers</code></td> <td>Add additional init containers to the Thanos Receive Distributor pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.sidecars</code></td> <td>Extra containers running as sidecars to Thanos Receive Distributor pods</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.extraVolumes</code></td> <td>Extra volumes to add to Thanos Receive Distributor</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.extraVolumeMounts</code></td> <td>Extra volume mounts to add to the receive distributor container</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.podAffinityPreset</code></td> <td>Thanos Receive pod affinity preset</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.podAntiAffinityPreset</code></td> <td>Thanos Receive pod anti-affinity preset. Ignored if <code>receiveDistributor.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>soft</code></td> </tr> <tr> <td><code>receiveDistributor.nodeAffinityPreset.type</code></td> <td>Thanos Receive node affinity preset type. Ignored if <code>receiveDistributor.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.nodeAffinityPreset.key</code></td> <td>Thanos Receive node label key to match. Ignored if <code>receiveDistributor.affinity</code> is set.</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.nodeAffinityPreset.values</code></td> <td>Thanos Receive node label values to match. Ignored if <code>receiveDistributor.affinity</code> is set.</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.affinity</code></td> <td>Thanos Receive Distributor affinity for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.nodeSelector</code></td> <td>Thanos Receive Distributor node labels for pod assignment</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.tolerations</code></td> <td>Thanos Receive Distributor tolerations for pod assignment</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.podLabels</code></td> <td>Thanos Receive Distributor pod labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.podAnnotations</code></td> <td>Annotations for Thanos Receive Distributor pods</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.dnsConfig</code></td> <td>Deployment pod DNS config</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.hostAliases</code></td> <td>Deployment pod host aliases</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.lifecycleHooks</code></td> <td>for the Thanos Receive Distributor container(s) to automate configuration before or after startup</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.priorityClassName</code></td> <td>Thanos Receive Distributor priorityClassName</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.schedulerName</code></td> <td>Name of the k8s scheduler (other than default) for Thanos Receive Distributor pods</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.topologySpreadConstraints</code></td> <td>Topology Spread Constraints for Thanos Receive Distributor pods assignment spread across your cluster among failure-domains</td> <td><code>[]</code></td> </tr> <tr> <td><code>receiveDistributor.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token only for the deployment</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.serviceAccount.create</code></td> <td>Specifies whether a ServiceAccount should be created</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.serviceAccount.name</code></td> <td>Name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.serviceAccount.annotations</code></td> <td>Annotations for Thanos Receive Distributor Service Account</td> <td><code>{}</code></td> </tr> <tr> <td><code>receiveDistributor.serviceAccount.automountServiceAccountToken</code></td> <td>Enable/disable auto mounting of the service account token</td> <td><code>true</code></td> </tr> <tr> <td><code>receiveDistributor.autoscaling.enabled</code></td> <td>Enable autoscaling for Thanos Receive Distributor</td> <td><code>false</code></td> </tr> <tr> <td><code>receiveDistributor.autoscaling.minReplicas</code></td> <td>Minimum number of Thanos Receive Distributor replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.autoscaling.maxReplicas</code></td> <td>Maximum number of Thanos Receive Distributor replicas</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.autoscaling.targetCPU</code></td> <td>Target CPU utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.autoscaling.targetMemory</code></td> <td>Target Memory utilization percentage</td> <td><code>""</code></td> </tr> <tr> <td><code>receiveDistributor.pdb.create</code></td> <td>Enable/disable a Pod Disruption Budget creation for Thanos Receive Distributor</td> <td><code>false</code></td> </tr> <tr> <td><code>receiveDistributor.pdb.minAvailable</code></td> <td>Minimum number/percentage of pods that should remain scheduled</td> <td><code>1</code></td> </tr> <tr> <td><code>receiveDistributor.pdb.maxUnavailable</code></td> <td>Maximum number/percentage of pods that may be made unavailable</td> <td><code>""</code></td> </tr> </tbody> </table> <h3 id=metrics-parameters>Metrics parameters<a class=headerlink href=#metrics-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>metrics.enabled</code></td> <td>Enable the export of Prometheus metrics</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.enabled</code></td> <td>Specify if a ServiceMonitor will be deployed for Prometheus Operator</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.namespace</code></td> <td>Namespace in which Prometheus is running</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.labels</code></td> <td>Extra labels for the ServiceMonitor</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.jobLabel</code></td> <td>The name of the label on the target service to use as the job name in Prometheus</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.interval</code></td> <td>How frequently to scrape metrics</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.scrapeTimeout</code></td> <td>Timeout after which the scrape is ended</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.metricRelabelings</code></td> <td>Specify additional relabeling of metrics</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.relabelings</code></td> <td>Specify general relabeling</td> <td><code>[]</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.selector</code></td> <td>Prometheus instance selector labels</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.serviceMonitor.extraParameters</code></td> <td>Any extra parameter to be added to the endpoint configured in the ServiceMonitor</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.prometheusRule.enabled</code></td> <td>If <code>true</code>, creates a Prometheus Operator PrometheusRule (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.prometheusRule.default.absent_rules</code></td> <td>Enable absent_rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.compaction</code></td> <td>Enable compaction rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.query</code></td> <td>Enable query when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.receive</code></td> <td>Enable receive rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.replicate</code></td> <td>Enable replicate rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.ruler</code></td> <td>Enable ruler rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.sidecar</code></td> <td>Enable sidecar rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.store_gateway</code></td> <td>Enable store_gateway rules when metrics.prometheusRule.default.create is false (also requires <code>metrics.enabled</code> to be <code>true</code>)</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.create</code></td> <td>would create all default prometheus alerts</td> <td><code>false</code></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosCompactIsDown</code></td> <td>Disable ThanosCompactIsDown rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.absent_rules is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryIsDown</code></td> <td>Disable ThanosQueryIsDown rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.absent_rules is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveIsDown</code></td> <td>Disable ThanosReceiveIsDown rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.absent_rules is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleIsDown</code></td> <td>Disable ThanosRuleIsDown rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.absent_rules is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosSidecarIsDown</code></td> <td>Disable ThanosSidecarIsDown rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.absent_rules is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosStoreIsDown</code></td> <td>Disable ThanosStoreIsDown rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.absent_rules is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosCompactMultipleRunning</code></td> <td>Disable ThanosCompactMultipleRunning rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.compaction is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosCompactHalted</code></td> <td>Disable ThanosCompactMultipleRunning rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.compaction is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosCompactHighCompactionFailures</code></td> <td>Disable ThanosCompactMultipleRunning rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.compaction is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosCompactBucketHighOperationFailures</code></td> <td>Disable ThanosCompactMultipleRunning rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.compaction is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosCompactHasNotRun</code></td> <td>Disable ThanosCompactMultipleRunning rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.compaction is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryHttpRequestQueryErrorRateHigh</code></td> <td>Disable ThanosQueryHttpRequestQueryErrorRateHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryHttpRequestQueryRangeErrorRateHigh</code></td> <td>Disable ThanosQueryHttpRequestQueryRangeErrorRateHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryGrpcServerErrorRate</code></td> <td>Disable ThanosQueryGrpcServerErrorRate rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryGrpcClientErrorRate</code></td> <td>Disable ThanosQueryGrpcClientErrorRate rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryHighDNSFailures</code></td> <td>Disable ThanosQueryHighDNSFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryInstantLatencyHigh</code></td> <td>Disable ThanosQueryInstantLatencyHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryRangeLatencyHigh</code></td> <td>Disable ThanosQueryRangeLatencyHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosQueryOverload</code></td> <td>Disable ThanosQueryOverload rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.query is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveHttpRequestErrorRateHigh</code></td> <td>Disable ThanosReceiveHttpRequestErrorRateHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveHttpRequestLatencyHigh</code></td> <td>Disable ThanosReceiveHttpRequestLatencyHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveHighReplicationFailures</code></td> <td>Disable ThanosReceiveHighReplicationFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveHighForwardRequestFailures</code></td> <td>Disable ThanosReceiveHighForwardRequestFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveHighHashringFileRefreshFailures</code></td> <td>Disable ThanosReceiveHighHashringFileRefreshFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveConfigReloadFailure</code></td> <td>Disable ThanosReceiveConfigReloadFailure rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveNoUpload</code></td> <td>Disable ThanosReceiveNoUpload rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosReceiveTrafficBelowThreshold</code></td> <td>Disable ThanosReceiveTrafficBelowThreshold rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosBucketReplicateErrorRate</code></td> <td>Disable ThanosBucketReplicateErrorRate rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosBucketReplicateRunLatency</code></td> <td>Disable ThanosBucketReplicateRunLatency rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.receive is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleQueueIsDroppingAlerts</code></td> <td>Disable ThanosRuleQueueIsDroppingAlerts rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleSenderIsFailingAlerts</code></td> <td>Disable ThanosRuleSenderIsFailingAlerts rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleHighRuleEvaluationFailures</code></td> <td>Disable ThanosRuleHighRuleEvaluationFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleHighRuleEvaluationWarnings</code></td> <td>Disable ThanosRuleHighRuleEvaluationWarnings rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleRuleEvaluationLatencyHigh</code></td> <td>Disable ThanosRuleRuleEvaluationLatencyHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleGrpcErrorRate</code></td> <td>Disable ThanosRuleGrpcErrorRate rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleConfigReloadFailure</code></td> <td>Disable ThanosRuleConfigReloadFailure rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleQueryHighDNSFailures</code></td> <td>Disable ThanosRuleQueryHighDNSFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleAlertmanagerHighDNSFailures</code></td> <td>Disable ThanosRuleAlertmanagerHighDNSFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosRuleNoEvaluationFor10Intervals</code></td> <td>Disable ThanosRuleNoEvaluationFor10Intervals rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosNoRuleEvaluations</code></td> <td>Disable ThanosNoRuleEvaluations rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.ruler is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosSidecarBucketOperationsFailed</code></td> <td>Disable ThanosSidecarBucketOperationsFailed rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.sidecar is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosSidecarNoConnectionToStartedPrometheus</code></td> <td>Disable ThanosSidecarNoConnectionToStartedPrometheus rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.sidecar is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosStoreGrpcErrorRate</code></td> <td>Disable ThanosSidecarNoConnectionToStartedPrometheus rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.store_gateway is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosStoreSeriesGateLatencyHigh</code></td> <td>Disable ThanosStoreSeriesGateLatencyHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.store_gateway is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosStoreBucketHighOperationFailures</code></td> <td>Disable ThanosStoreBucketHighOperationFailures rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.store_gateway is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled.ThanosStoreObjstoreOperationLatencyHigh</code></td> <td>Disable ThanosStoreObjstoreOperationLatencyHigh rule when metrics.prometheusRule.default.create or metrics.prometheusRule.default.store_gateway is true</td> <td></td> </tr> <tr> <td><code>metrics.prometheusRule.default.disabled</code></td> <td>disable one specific prometheus alert rule</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.prometheusRule.namespace</code></td> <td>Namespace in which the PrometheusRule CRD is created</td> <td><code>""</code></td> </tr> <tr> <td><code>metrics.prometheusRule.additionalLabels</code></td> <td>Additional labels for the prometheusRule</td> <td><code>{}</code></td> </tr> <tr> <td><code>metrics.prometheusRule.groups</code></td> <td>Prometheus Rule Groups for Thanos components</td> <td><code>[]</code></td> </tr> </tbody> </table> <h3 id=volume-permissions-parameters>Volume Permissions parameters<a class=headerlink href=#volume-permissions-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>volumePermissions.enabled</code></td> <td>Enable init container that changes the owner/group of the PV mount point to <code>runAsUser:fsGroup</code></td> <td><code>false</code></td> </tr> <tr> <td><code>volumePermissions.image.registry</code></td> <td>Init container volume-permissions image registry</td> <td><code>docker.io</code></td> </tr> <tr> <td><code>volumePermissions.image.repository</code></td> <td>Init container volume-permissions image repository</td> <td><code>bitnami/bitnami-shell</code></td> </tr> <tr> <td><code>volumePermissions.image.tag</code></td> <td>Init container volume-permissions image tag</td> <td><code>11-debian-11-r128</code></td> </tr> <tr> <td><code>volumePermissions.image.digest</code></td> <td>Init container volume-permissions image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td> <td><code>""</code></td> </tr> <tr> <td><code>volumePermissions.image.pullPolicy</code></td> <td>Init container volume-permissions image pull policy</td> <td><code>IfNotPresent</code></td> </tr> <tr> <td><code>volumePermissions.image.pullSecrets</code></td> <td>Specify docker-registry secret names as an array</td> <td><code>[]</code></td> </tr> </tbody> </table> <h3 id=minio-chart-parameters>MinIO&reg; chart parameters<a class=headerlink href=#minio-chart-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>minio</code></td> <td>For full list of MinIO&reg; values configurations please refere <a href=https://github.com/bitnami/charts/tree/main/bitnami/minio>here</a></td> <td></td> </tr> <tr> <td><code>minio.enabled</code></td> <td>Enable/disable MinIO&reg; chart installation</td> <td><code>false</code></td> </tr> <tr> <td><code>minio.auth.rootUser</code></td> <td>MinIO&reg; root username</td> <td><code>admin</code></td> </tr> <tr> <td><code>minio.auth.rootPassword</code></td> <td>Password for MinIO&reg; root user</td> <td><code>""</code></td> </tr> <tr> <td><code>minio.defaultBuckets</code></td> <td>Comma, semi-colon or space separated list of MinIO&reg; buckets to create</td> <td><code>thanos</code></td> </tr> </tbody> </table> <h3 id=networkpolicy-parameters>NetWorkPolicy parameters<a class=headerlink href=#networkpolicy-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>networkPolicy.enabled</code></td> <td>Enable creation of NetworkPolicy resources. Only Ingress traffic is filtered for now.</td> <td><code>false</code></td> </tr> <tr> <td><code>networkPolicy.allowExternal</code></td> <td>Don't require client label for connections</td> <td><code>true</code></td> </tr> <tr> <td><code>networkPolicy.explicitNamespacesSelector</code></td> <td>A Kubernetes LabelSelector to explicitly select namespaces from which traffic could be allowed</td> <td><code>{}</code></td> </tr> </tbody> </table> <p>Specify each parameter using the <code>--set key=value[,key=value]</code> argument to <code>helm install</code>. For example,</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=go>helm install my-release --set query.replicaCount=2 bitnami/thanos</span>
</span></code></pre></div> <p>The above command install Thanos chart with 2 Thanos Query replicas.</p> <p>Alternatively, a YAML file that specifies the values for the parameters can be provided while installing the chart. For example,</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=go>helm install my-release -f values.yaml bitnami/thanos</span>
</span></code></pre></div> <blockquote> <p><strong>Tip</strong>: You can use the default <a href=values.yaml>values.yaml</a></p> </blockquote> <h2 id=configuration-and-installation-details>Configuration and installation details<a class=headerlink href=#configuration-and-installation-details title="Permanent link">&para;</a></h2> <h3 id=rolling-vs-immutable-tags><a href=https://docs.bitnami.com/containers/how-to/understand-rolling-tags-containers/ >Rolling VS Immutable tags</a><a class=headerlink href=#rolling-vs-immutable-tags title="Permanent link">&para;</a></h3> <p>It is strongly recommended to use immutable tags in a production environment. This ensures your deployment does not change automatically if the same tag is updated with a different image.</p> <p>Bitnami will release a new chart updating its containers if a new version of the main container, significant changes, or critical vulnerabilities exist.</p> <h3 id=adding-extra-flags>Adding extra flags<a class=headerlink href=#adding-extra-flags title="Permanent link">&para;</a></h3> <p>In case you want to add extra flags to any Thanos component, you can use <code>XXX.extraFlags</code> parameter(s), where XXX is placeholder you need to replace with the actual component(s). For instance, to add extra flags to Thanos Store Gateway, use:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>storegateway</span><span class=p>:</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>extraFlags</span><span class=p>:</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">--sync-block-duration=3m</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">--chunk-pool-size=2GB</span>
</span></code></pre></div> <p>This also works for multi-line flags. This can be useful when you want to configure caching for a particular component without using a configMap. For example, to configure the <a href=https://thanos.io/tip/components/query-frontend.md/#memcached>query-range response cache of the Thanos Query Frontend</a>, use:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>queryFrontend</span><span class=p>:</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>extraFlags</span><span class=p>:</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>      </span><span class=no>--query-range.response-cache-config=</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>      </span><span class=no>type: MEMCACHED</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>      </span><span class=no>config:</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>        </span><span class=no>addresses:</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>          </span><span class=no>- &lt;MEMCACHED_SERVER&gt;:11211</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>        </span><span class=no>timeout: 500ms</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>        </span><span class=no>max_idle_connections: 100</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>        </span><span class=no>max_async_concurrency: 10</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>        </span><span class=no>max_async_buffer_size: 10000</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>        </span><span class=no>max_get_multi_concurrency: 100</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>        </span><span class=no>max_get_multi_batch_size: 0</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=w>        </span><span class=no>dns_provider_update_interval: 10s</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=w>        </span><span class=no>expiration: 24h</span>
</span></code></pre></div> <h3 id=using-custom-objstore-configuration>Using custom Objstore configuration<a class=headerlink href=#using-custom-objstore-configuration title="Permanent link">&para;</a></h3> <p>This helm chart supports using custom Objstore configuration.</p> <p>You can specify the Objstore configuration using the <code>objstoreConfig</code> parameter.</p> <p>In addition, you can also set an external Secret with the configuration file. This is done by setting the <code>existingObjstoreSecret</code> parameter. Note that this will override the previous option. If needed you can also provide a custom Secret Key with <code>existingObjstoreSecretItems</code>, please be aware that the Path of your Secret should be <code>objstore.yml</code>.</p> <h3 id=using-custom-query-service-discovery-configuration>Using custom Query Service Discovery configuration<a class=headerlink href=#using-custom-query-service-discovery-configuration title="Permanent link">&para;</a></h3> <p>This helm chart supports using custom Service Discovery configuration for Query.</p> <p>You can specify the Service Discovery configuration using the <code>query.sdConfig</code> parameter.</p> <p>In addition, you can also set an external ConfigMap with the Service Discovery configuration file. This is done by setting the <code>query.existingSDConfigmap</code> parameter. Note that this will override the previous option.</p> <h3 id=using-custom-ruler-configuration>Using custom Ruler configuration<a class=headerlink href=#using-custom-ruler-configuration title="Permanent link">&para;</a></h3> <p>This helm chart supports using custom Ruler configuration.</p> <p>You can specify the Ruler configuration using the <code>ruler.config</code> parameter.</p> <p>In addition, you can also set an external ConfigMap with the configuration file. This is done by setting the <code>ruler.existingConfigmap</code> parameter. Note that this will override the previous option.</p> <h3 id=running-thanos-with-https-and-basic-authentication>Running Thanos with HTTPS and basic authentication<a class=headerlink href=#running-thanos-with-https-and-basic-authentication title="Permanent link">&para;</a></h3> <p>This helm charts supports using HTTPS and basic authentication. The underlying feature is experimental and might change in the future, so are the associated settings in the chart. For more information, please refer to <a href=https://thanos.io/tip/operating/https.md/#running-thanos-with-https-and-basic-authentication>Thanos documentation</a>.</p> <p>This feature can be enabled by using the following values:</p> <ul> <li> <p><code>https.enabled=true</code>. Enabling HTTPS requires the user to provide the TLS certificate and Key for Thanos, which can be done using one of the following options:</p> </li> <li> <p>Provide a secret using <code>https.existingSecret</code>. The secret must contain the keys <code>tls.crt</code> or <code>tls.key</code> (key names can be renamed using the values <code>https.keyFilename</code> and <code>https.certFilename</code>).</p> </li> <li>Provide the certificate and key in your values.yaml under the values <code>https.cert</code> and <code>https.key</code>.</li> <li> <p>Use <code>https.autoGenerated=true</code>, using this value Helm will generate a self-signed key pair during the chart initialization. Not recommended for production environments.</p> </li> <li> <p><code>auth.basicAuthUsers.*</code>. An dictionary of key / values, where the keys corresponds to the users that will have access to Thanos and the values are the plaintext passwords. Passwords will be later encrypted with bcrypt.</p> </li> <li>Alternatively, provide your own Thanos http config file using the value <code>httpConfig</code> or <code>existingHttpConfigSecret</code>. This may cause any settings under <code>https.*</code> or <code>auth.*</code> to be ignored, except for the settings related to the TLS certificates. When providing a configuration file using these parameters, the chart Probes will fail to initialize unless one of the following fixes are applied:</li> <li>Set <code>https.enabled</code> or <code>auth.basicAuthUsers</code> with at least one user, matching the configuration file you provided. That way Probes will be configured with HTTPS and/or basic authentication accordingly.</li> <li>Configure your own Probes using <code>&lt;component&gt;.customLivenessProbe</code>, <code>&lt;component&gt;.customReadinessProbe</code> and <code>&lt;component&gt;.customStartupProbe</code>.</li> <li><strong>Not recommended</strong>. Disable the Probes.</li> </ul> <h3 id=store-time-partitions>Store time partitions<a class=headerlink href=#store-time-partitions title="Permanent link">&para;</a></h3> <p>Thanos store supports partion based on time.</p> <p>Setting time partitions will create N number of store statefulsets based on the number of items in the <code>timePartitioning</code> list. Each item must contain the min and max time for querying in the supported format (find more details at <a href=https://thanos.io/tip/components/store.md/#time-based-partitioning>Thanos documentation</a>).</p> <blockquote> <p>Note: leaving the <code>timePartitioning</code> list empty (<code>[]</code>) will create a single store for all data.</p> </blockquote> <p>For instance, to use 3 stores you can use a <strong>values.yaml</strong> like the one below:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>timePartitioning</span><span class=p>:</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=c1># One store for data older than 6 weeks</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>min</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-6w</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>  </span><span class=c1># One store for data newer than 6 weeks and older than 2 weeks</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>min</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-6w</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-2w</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>  </span><span class=c1># One store for data newer than 2 weeks</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>min</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-2w</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span></code></pre></div> <p>You can also specify different resources and limits configurations for each storegateway statefulset. This is done by adding a <code>resources.requests</code> and <code>resources.limits</code> to each item you wish to change, as shown below:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>timePartitioning</span><span class=p>:</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=c1># One store for data older than 6 weeks</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>min</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-6w</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=c1># One store for data newer than 6 weeks and older than 2 weeks</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>min</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-6w</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-2w</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>    </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class=c1>#optional resources declaration for partition</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>      </span><span class=nt>requests</span><span class=p>:</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>        </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10m</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>        </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Mi</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>      </span><span class=nt>limits</span><span class=p>:</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>        </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">20m</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>        </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Mi</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>  </span><span class=c1># One store for data newer than 2 weeks</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>min</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-2w</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span></code></pre></div> <h3 id=integrate-thanos-with-prometheus-and-alertmanager>Integrate Thanos with Prometheus and Alertmanager<a class=headerlink href=#integrate-thanos-with-prometheus-and-alertmanager title="Permanent link">&para;</a></h3> <p>You can integrate Thanos with Prometheus &amp; Alertmanager using this chart and the <a href=https://github.com/bitnami/charts/tree/main/bitnami/kube-prometheus>Bitnami kube-prometheus chart</a> following the steps below:</p> <blockquote> <p>Note: in this example we will use MinIO&reg; (subchart) as the Objstore. Every component will be deployed in the "monitoring" namespace.</p> </blockquote> <ul> <li>Create a <strong>values.yaml</strong> like the one below:</li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>objstoreConfig</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=no>type: s3</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=no>config:</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class=no>bucket: thanos</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=no>endpoint: {{ include &quot;thanos.minio.fullname&quot; . }}.{{ .Release.Namespace }}.svc.cluster.local:9000</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=no>access_key: minio</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>    </span><span class=no>secret_key: minio123</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>    </span><span class=no>insecure: true</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=nt>query</span><span class=p>:</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>  </span><span class=nt>dnsDiscovery</span><span class=p>:</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>    </span><span class=nt>sidecarsService</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-prometheus-prometheus-thanos</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>    </span><span class=nt>sidecarsNamespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">monitoring</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=nt>bucketweb</span><span class=p>:</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=nt>compactor</span><span class=p>:</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=nt>storegateway</span><span class=p>:</span>
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=nt>ruler</span><span class=p>:</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=w>  </span><span class=nt>alertmanagers</span><span class=p>:</span>
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22 href=#__codelineno-11-22></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://kube-prometheus-alertmanager.monitoring.svc.cluster.local:9093</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23 href=#__codelineno-11-23></a><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span>
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24 href=#__codelineno-11-24></a><span class=w>    </span><span class=no>groups:</span>
</span><span id=__span-11-25><a id=__codelineno-11-25 name=__codelineno-11-25 href=#__codelineno-11-25></a><span class=w>      </span><span class=no>- name: &quot;metamonitoring&quot;</span>
</span><span id=__span-11-26><a id=__codelineno-11-26 name=__codelineno-11-26 href=#__codelineno-11-26></a><span class=w>        </span><span class=no>rules:</span>
</span><span id=__span-11-27><a id=__codelineno-11-27 name=__codelineno-11-27 href=#__codelineno-11-27></a><span class=w>          </span><span class=no>- alert: &quot;PrometheusDown&quot;</span>
</span><span id=__span-11-28><a id=__codelineno-11-28 name=__codelineno-11-28 href=#__codelineno-11-28></a><span class=w>            </span><span class=no>expr: absent(up{prometheus=&quot;monitoring/kube-prometheus&quot;})</span>
</span><span id=__span-11-29><a id=__codelineno-11-29 name=__codelineno-11-29 href=#__codelineno-11-29></a><span class=nt>metrics</span><span class=p>:</span>
</span><span id=__span-11-30><a id=__codelineno-11-30 name=__codelineno-11-30 href=#__codelineno-11-30></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-31><a id=__codelineno-11-31 name=__codelineno-11-31 href=#__codelineno-11-31></a><span class=w>  </span><span class=nt>serviceMonitor</span><span class=p>:</span>
</span><span id=__span-11-32><a id=__codelineno-11-32 name=__codelineno-11-32 href=#__codelineno-11-32></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-33><a id=__codelineno-11-33 name=__codelineno-11-33 href=#__codelineno-11-33></a><span class=nt>minio</span><span class=p>:</span>
</span><span id=__span-11-34><a id=__codelineno-11-34 name=__codelineno-11-34 href=#__codelineno-11-34></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-11-35><a id=__codelineno-11-35 name=__codelineno-11-35 href=#__codelineno-11-35></a><span class=w>  </span><span class=nt>auth</span><span class=p>:</span>
</span><span id=__span-11-36><a id=__codelineno-11-36 name=__codelineno-11-36 href=#__codelineno-11-36></a><span class=w>    </span><span class=nt>rootPassword</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">minio123</span>
</span><span id=__span-11-37><a id=__codelineno-11-37 name=__codelineno-11-37 href=#__codelineno-11-37></a><span class=w>    </span><span class=nt>rootUser</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">minio</span>
</span><span id=__span-11-38><a id=__codelineno-11-38 name=__codelineno-11-38 href=#__codelineno-11-38></a><span class=w>  </span><span class=nt>monitoringBuckets</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">thanos</span>
</span><span id=__span-11-39><a id=__codelineno-11-39 name=__codelineno-11-39 href=#__codelineno-11-39></a><span class=w>  </span><span class=nt>accessKey</span><span class=p>:</span>
</span><span id=__span-11-40><a id=__codelineno-11-40 name=__codelineno-11-40 href=#__codelineno-11-40></a><span class=w>    </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">minio</span>
</span><span id=__span-11-41><a id=__codelineno-11-41 name=__codelineno-11-41 href=#__codelineno-11-41></a><span class=w>  </span><span class=nt>secretKey</span><span class=p>:</span>
</span><span id=__span-11-42><a id=__codelineno-11-42 name=__codelineno-11-42 href=#__codelineno-11-42></a><span class=w>    </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">minio123</span>
</span></code></pre></div> <ul> <li>Install Prometheus Operator and Thanos charts:</li> </ul> <p>For Helm 3:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=gp>$ </span>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span>monitoring
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=go>helm install kube-prometheus \</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=go>    --set prometheus.thanos.create=true \</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=go>    --namespace monitoring \</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=go>    bitnami/kube-prometheus</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=go>helm install thanos \</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=go>    --values values.yaml \</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=go>    --namespace monitoring \</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=go>    bitnami/thanos</span>
</span></code></pre></div> <p>That's all! Now you have Thanos fully integrated with Prometheus and Alertmanager.</p> <h2 id=persistence>Persistence<a class=headerlink href=#persistence title="Permanent link">&para;</a></h2> <p>The data is persisted by default using PVC(s) on Thanos components. You can disable the persistence setting the <code>XXX.persistence.enabled</code> parameter(s) to <code>false</code>. A default <code>StorageClass</code> is needed in the Kubernetes cluster to dynamically provision the volumes. Specify another StorageClass in the <code>XXX.persistence.storageClass</code> parameter(s) or set <code>XXX.persistence.existingClaim</code> if you have already existing persistent volumes to use.</p> <blockquote> <p>Note: you need to substitute the XXX placeholders above with the actual component(s) you want to configure.</p> </blockquote> <h3 id=adjust-permissions-of-persistent-volume-mountpoint>Adjust permissions of persistent volume mountpoint<a class=headerlink href=#adjust-permissions-of-persistent-volume-mountpoint title="Permanent link">&para;</a></h3> <p>As the images run as non-root by default, it is necessary to adjust the ownership of the persistent volumes so that the containers can write data into it.</p> <p>By default, the chart is configured to use Kubernetes Security Context to automatically change the ownership of the volumes. However, this feature does not work in all Kubernetes distributions. As an alternative, this chart supports using an initContainer to change the ownership of the volumes before mounting it in the final destination.</p> <p>You can enable this initContainer by setting <code>volumePermissions.enabled</code> to <code>true</code>.</p> <h3 id=deploy-extra-resources>Deploy extra resources<a class=headerlink href=#deploy-extra-resources title="Permanent link">&para;</a></h3> <p>There are cases where you may want to deploy extra objects, such a ConfigMap containing your app's configuration or some extra deployment with a micro service used by your app. For covering this case, the chart allows adding the full specification of other objects using the <code>extraDeploy</code> parameter.</p> <h3 id=setting-pods-affinity>Setting Pod's affinity<a class=headerlink href=#setting-pods-affinity title="Permanent link">&para;</a></h3> <p>This chart allows you to set your custom affinity using the <code>XXX.affinity</code> parameter(s). Find more information about Pod's affinity in the <a href=https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity>kubernetes documentation</a>.</p> <p>As an alternative, you can use of the preset configurations for pod affinity, pod anti-affinity, and node affinity available at the <a href=https://github.com/bitnami/charts/tree/main/bitnami/common#affinities>bitnami/common</a> chart. To do so, set the <code>XXX.podAffinityPreset</code>, <code>XXX.podAntiAffinityPreset</code>, or <code>XXX.nodeAffinityPreset</code> parameters.</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <p>Find more information about how to deal with common errors related to Bitnami's Helm charts in <a href=https://docs.bitnami.com/general/how-to/troubleshoot-helm-chart-issues>this troubleshooting guide</a>.</p> <h2 id=upgrading>Upgrading<a class=headerlink href=#upgrading title="Permanent link">&para;</a></h2> <h3 id=to-1200>To 12.0.0<a class=headerlink href=#to-1200 title="Permanent link">&para;</a></h3> <p>This major updates the MinIO&reg; subchart to its newest major, 12.0.0. This subchart's major doesn't include any changes affecting its use as a subchart for Thanos, so no major issues are expected during the upgrade.</p> <h3 id=to-1000>To 10.0.0<a class=headerlink href=#to-1000 title="Permanent link">&para;</a></h3> <p>This version deprecates the usage of <code>MINIO_ACCESS_KEY</code> and <code>MINIO_SECRET_KEY</code> environment variables in MINIO&reg; container in favor of <code>MINIO_ROOT_USER</code> and <code>MINIO_ROOT_PASSWORD</code>.</p> <p>If you were already using the new variables, no issues are expected during upgrade.</p> <h3 id=to-900>To 9.0.0<a class=headerlink href=#to-900 title="Permanent link">&para;</a></h3> <p>This major updates the MinIO&reg; subchart to its newest major, 10.0.0. This subchart's major doesn't include any changes affecting its use as a subchart for Thanos, only needing the standard upgrade process from chart's version <code>8.X</code>.</p> <h3 id=to-800>To 8.0.0<a class=headerlink href=#to-800 title="Permanent link">&para;</a></h3> <p>The chart was changed to adapt to the common Bitnami chart standards. Now it includes common elements such as sidecar and init container support, custom commands, custom liveness/readiness probes, extra environment variables support, extra pod annotations and labels, among others. In addition, other remarkable changes were to harmonize the values structure:</p> <ul> <li>The <code>receive.distributor.*</code> parameters have been renamed to <code>receiveDistributor.*</code>, and the associated manifests have been moved into its own folder. This way, Thanos Receive Distributor is treated as any other component.</li> <li>The parameter to configure TLS in the GRPC server have been restructured so they follow the <code>XXX.grpc.server.tls</code> and <code>XXX.grpc.client.tls</code> format. Previous to this change, we had different structures depending on the component.</li> </ul> <h3 id=to-700>To 7.0.0<a class=headerlink href=#to-700 title="Permanent link">&para;</a></h3> <p>This major updates the MinIO&reg; subchart to its newest major, 9.0.0, which updates authentication parameters. Check <a href=https://github.com/bitnami/charts/tree/main/bitnami/minio#to-900>MinIO&reg; Upgrading Notes</a> for more information. This major release renames several values in this chart and adds missing features, in order to be inline with the rest of assets in the Bitnami charts repositor. Some of the affected values are:</p> <ul> <li><code>XXX.extraEnv</code> parameters were renamed to <code>XXX.extraEnvVars</code>.</li> <li><code>XXX.extraContainers</code> parameters were renamed to <code>XXX.sidecars</code>.</li> <li><code>XXX.service.PROTOCOL.port</code> parameters were renamed to <code>XXX.service.ports.PROTOCOL</code> (e.g. <code>query.service.http.port</code> is now <code>query.service.ports.http</code>).</li> <li><code>XXX.service.PROTOCOL.nodePort</code>parameters were renamed to <code>XXX.service.nodePorts.PROTOCOL</code> (e.g. <code>query.service.http.nodePort</code> is now <code>query.service.nodePorts.http</code>).</li> <li><code>XXX.ingress.certManager</code> parameters were deprecated, use <code>XXX.ingress.annotations</code> to set the required annotations for CertManager instead.</li> </ul> <h3 id=to-600>To 6.0.0<a class=headerlink href=#to-600 title="Permanent link">&para;</a></h3> <p>This major updates the MinIO&reg; subchart to its newest major, 8.0.0, which now has two separated services for MinIO&reg; Console and MinIO&reg; API. Check <a href=https://github.com/bitnami/charts/tree/main/bitnami/minio#to-800>MinIO&reg; Upgrading Notes</a> for more information.</p> <h3 id=to-540>To 5.4.0<a class=headerlink href=#to-540 title="Permanent link">&para;</a></h3> <p>This version introduces support for the receiver dual-mode implementation for Thanos <a href=https://github.com/thanos-io/thanos/releases/tag/v0.22.0>v0.22+</a></p> <h3 id=to-530>To 5.3.0<a class=headerlink href=#to-530 title="Permanent link">&para;</a></h3> <p>This version introduces hash and time partitioning for the store gateway.</p> <h3 id=to-500>To 5.0.0<a class=headerlink href=#to-500 title="Permanent link">&para;</a></h3> <p>This major update changes the <code>securityContext</code> interface in the <code>values.yaml</code> file.</p> <p>Please note if you have changes in the <code>securityContext</code> fields those need to be migrated to <code>podSecurityContext</code>.</p> <div class="language-diff highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=w># ...</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=gd>- securityContext:</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=gi>+ podSecurityContext:</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w># ...</span>
</span></code></pre></div> <p>Other than that a new <code>securityContext</code> interface for containers got introduced <code>containerSecurityContext</code>. It's default is enabled so if you do not need it you need to opt out of it.</p> <div class="language-diff highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=w># ...</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=gi>+ containerSecurityContext</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=gi>+   enabled: true  # opt out by enabled: false</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=gi>+   capabilities:</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=gi>+     drop:</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=gi>+     - ALL</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=gi>+   runAsNonRoot: true</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=gi>+   allowPrivilegeEscalation: false</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=gi>+   readOnlyRootFilesystem: false</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w># ...</span>
</span></code></pre></div> <h3 id=to-400>To 4.0.0<a class=headerlink href=#to-400 title="Permanent link">&para;</a></h3> <p>This major updates the MinIO subchart to its newest major, 7.0.0, which removes previous configuration of <code>securityContext</code> and moves to <code>podSecurityContext</code> and <code>containerSecurityContext</code>.</p> <h3 id=to-330>To 3.3.0<a class=headerlink href=#to-330 title="Permanent link">&para;</a></h3> <p>This version introduces <code>bitnami/common</code>, a <a href=https://helm.sh/docs/topics/library_charts/#helm>library chart</a> as a dependency. More documentation about this new utility could be found <a href=https://github.com/bitnami/charts/tree/main/bitnami/common#bitnami-common-library-chart>here</a>. Please, make sure that you have updated the chart dependencies before executing any upgrade.</p> <h3 id=to-310>To 3.1.0<a class=headerlink href=#to-310 title="Permanent link">&para;</a></h3> <p>The querier component and its settings have been renamed to query. Configuration of the query component by using keys under <code>querier</code> in your <code>values.yaml</code> will continue to work. Support for keys under <code>querier</code> will be dropped in a future release.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>querier.enabled                               -&gt; query.enabled
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>querier.logLevel                              -&gt; query.logLevel
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>querier.replicaLabel                          -&gt; query.replicaLabel
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>querier.dnsDiscovery.enabled                  -&gt; query.dnsDiscovery.enabled
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>querier.dnsDiscovery.sidecarsService          -&gt; query.dnsDiscovery.sidecarsService
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>querier.dnsDiscovery.sidecarsNamespace        -&gt; query.dnsDiscovery.sidecarsNamespace
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>querier.stores                                -&gt; query.stores
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>querier.sdConfig                              -&gt; query.sdConfig
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>querier.existingSDConfigmap                   -&gt; query.existingSDConfigmap
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>querier.extraFlags                            -&gt; query.extraFlags
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>querier.replicaCount                          -&gt; query.replicaCount
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>querier.strategyType                          -&gt; query.strategyType
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>querier.affinity                              -&gt; query.affinity
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a>querier.nodeSelector                          -&gt; query.nodeSelector
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>querier.tolerations                           -&gt; query.tolerations
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a>querier.podLabels                             -&gt; query.podLabels
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a>querier.priorityClassName                     -&gt; query.priorityClassName
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a>querier.securityContext.enabled               -&gt; query.securityContext.enabled
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a>querier.securityContext.fsGroup               -&gt; query.securityContext.fsGroup
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a>querier.securityContext.runAsUser             -&gt; query.securityContext.runAsUser
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a>querier.resources.limits                      -&gt; query.resources.limits
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a>querier.resources.requests                    -&gt; query.resources.requests
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a>querier.podAnnotations                        -&gt; query.podAnnotations
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a>querier.livenessProbe                         -&gt; query.livenessProbe
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a>querier.readinessProbe                        -&gt; query.readinessProbe
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a>querier.grpcTLS.server.secure                 -&gt; query.grpcTLS.server.secure
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a>querier.grpcTLS.server.cert                   -&gt; query.grpcTLS.server.cert
</span><span id=__span-15-28><a id=__codelineno-15-28 name=__codelineno-15-28 href=#__codelineno-15-28></a>querier.grpcTLS.server.key                    -&gt; query.grpcTLS.server.key
</span><span id=__span-15-29><a id=__codelineno-15-29 name=__codelineno-15-29 href=#__codelineno-15-29></a>querier.grpcTLS.server.ca                     -&gt; query.grpcTLS.server.ca
</span><span id=__span-15-30><a id=__codelineno-15-30 name=__codelineno-15-30 href=#__codelineno-15-30></a>querier.grpcTLS.client.secure                 -&gt; query.grpcTLS.client.secure
</span><span id=__span-15-31><a id=__codelineno-15-31 name=__codelineno-15-31 href=#__codelineno-15-31></a>querier.grpcTLS.client.cert                   -&gt; query.grpcTLS.client.cert
</span><span id=__span-15-32><a id=__codelineno-15-32 name=__codelineno-15-32 href=#__codelineno-15-32></a>querier.grpcTLS.client.key                    -&gt; query.grpcTLS.client.key
</span><span id=__span-15-33><a id=__codelineno-15-33 name=__codelineno-15-33 href=#__codelineno-15-33></a>querier.grpcTLS.client.ca                     -&gt; query.grpcTLS.client.ca
</span><span id=__span-15-34><a id=__codelineno-15-34 name=__codelineno-15-34 href=#__codelineno-15-34></a>querier.grpcTLS.client.servername             -&gt; query.grpcTLS.client.servername
</span><span id=__span-15-35><a id=__codelineno-15-35 name=__codelineno-15-35 href=#__codelineno-15-35></a>querier.service.type                          -&gt; query.service.type
</span><span id=__span-15-36><a id=__codelineno-15-36 name=__codelineno-15-36 href=#__codelineno-15-36></a>querier.service.clusterIP                     -&gt; query.service.clusterIP
</span><span id=__span-15-37><a id=__codelineno-15-37 name=__codelineno-15-37 href=#__codelineno-15-37></a>querier.service.http.port                     -&gt; query.service.http.port
</span><span id=__span-15-38><a id=__codelineno-15-38 name=__codelineno-15-38 href=#__codelineno-15-38></a>querier.service.http.nodePort                 -&gt; query.service.http.nodePort
</span><span id=__span-15-39><a id=__codelineno-15-39 name=__codelineno-15-39 href=#__codelineno-15-39></a>querier.service.grpc.port                     -&gt; query.service.grpc.port
</span><span id=__span-15-40><a id=__codelineno-15-40 name=__codelineno-15-40 href=#__codelineno-15-40></a>querier.service.grpc.nodePort                 -&gt; query.service.grpc.nodePort
</span><span id=__span-15-41><a id=__codelineno-15-41 name=__codelineno-15-41 href=#__codelineno-15-41></a>querier.service.loadBalancerIP                -&gt; query.service.loadBalancerIP
</span><span id=__span-15-42><a id=__codelineno-15-42 name=__codelineno-15-42 href=#__codelineno-15-42></a>querier.service.loadBalancerSourceRanges      -&gt; query.service.loadBalancerSourceRanges
</span><span id=__span-15-43><a id=__codelineno-15-43 name=__codelineno-15-43 href=#__codelineno-15-43></a>querier.service.annotations                   -&gt; query.service.annotations
</span><span id=__span-15-44><a id=__codelineno-15-44 name=__codelineno-15-44 href=#__codelineno-15-44></a>querier.service.labelSelectorsOverride        -&gt; query.service.labelSelectorsOverride
</span><span id=__span-15-45><a id=__codelineno-15-45 name=__codelineno-15-45 href=#__codelineno-15-45></a>querier.serviceAccount.annotations            -&gt; query.serviceAccount.annotations
</span><span id=__span-15-46><a id=__codelineno-15-46 name=__codelineno-15-46 href=#__codelineno-15-46></a>querier.rbac.create                           -&gt; query.rbac.create
</span><span id=__span-15-47><a id=__codelineno-15-47 name=__codelineno-15-47 href=#__codelineno-15-47></a>querier.pspEnabled                            -&gt; query.pspEnabled
</span><span id=__span-15-48><a id=__codelineno-15-48 name=__codelineno-15-48 href=#__codelineno-15-48></a>querier.autoscaling.enabled                   -&gt; query.autoscaling.enabled
</span><span id=__span-15-49><a id=__codelineno-15-49 name=__codelineno-15-49 href=#__codelineno-15-49></a>querier.autoscaling.minReplicas               -&gt; query.autoscaling.minReplicas
</span><span id=__span-15-50><a id=__codelineno-15-50 name=__codelineno-15-50 href=#__codelineno-15-50></a>querier.autoscaling.maxReplicas               -&gt; query.autoscaling.maxReplicas
</span><span id=__span-15-51><a id=__codelineno-15-51 name=__codelineno-15-51 href=#__codelineno-15-51></a>querier.autoscaling.targetCPU                 -&gt; query.autoscaling.targetCPU
</span><span id=__span-15-52><a id=__codelineno-15-52 name=__codelineno-15-52 href=#__codelineno-15-52></a>querier.autoscaling.targetMemory              -&gt; query.autoscaling.targetMemory
</span><span id=__span-15-53><a id=__codelineno-15-53 name=__codelineno-15-53 href=#__codelineno-15-53></a>querier.pdb.create                            -&gt; query.pdb.create
</span><span id=__span-15-54><a id=__codelineno-15-54 name=__codelineno-15-54 href=#__codelineno-15-54></a>querier.pdb.minAvailable                      -&gt; query.pdb.minAvailable
</span><span id=__span-15-55><a id=__codelineno-15-55 name=__codelineno-15-55 href=#__codelineno-15-55></a>querier.pdb.maxUnavailable                    -&gt; query.pdb.maxUnavailable
</span><span id=__span-15-56><a id=__codelineno-15-56 name=__codelineno-15-56 href=#__codelineno-15-56></a>querier.ingress.enabled                       -&gt; query.ingress.enabled
</span><span id=__span-15-57><a id=__codelineno-15-57 name=__codelineno-15-57 href=#__codelineno-15-57></a>querier.ingress.certManager                   -&gt; query.ingress.certManager
</span><span id=__span-15-58><a id=__codelineno-15-58 name=__codelineno-15-58 href=#__codelineno-15-58></a>querier.ingress.hostname                      -&gt; query.ingress.hostname
</span><span id=__span-15-59><a id=__codelineno-15-59 name=__codelineno-15-59 href=#__codelineno-15-59></a>querier.ingress.annotations                   -&gt; query.ingress.annotations
</span><span id=__span-15-60><a id=__codelineno-15-60 name=__codelineno-15-60 href=#__codelineno-15-60></a>querier.ingress.tls                           -&gt; query.ingress.tls
</span><span id=__span-15-61><a id=__codelineno-15-61 name=__codelineno-15-61 href=#__codelineno-15-61></a>querier.ingress.extraHosts[0].name            -&gt; query.ingress.extraHosts[0].name
</span><span id=__span-15-62><a id=__codelineno-15-62 name=__codelineno-15-62 href=#__codelineno-15-62></a>querier.ingress.extraHosts[0].path            -&gt; query.ingress.extraHosts[0].path
</span><span id=__span-15-63><a id=__codelineno-15-63 name=__codelineno-15-63 href=#__codelineno-15-63></a>querier.ingress.extraTls[0].hosts[0]          -&gt; query.ingress.extraTls[0].hosts[0]
</span><span id=__span-15-64><a id=__codelineno-15-64 name=__codelineno-15-64 href=#__codelineno-15-64></a>querier.ingress.extraTls[0].secretName        -&gt; query.ingress.extraTls[0].secretName
</span><span id=__span-15-65><a id=__codelineno-15-65 name=__codelineno-15-65 href=#__codelineno-15-65></a>querier.ingress.secrets[0].name               -&gt; query.ingress.secrets[0].name
</span><span id=__span-15-66><a id=__codelineno-15-66 name=__codelineno-15-66 href=#__codelineno-15-66></a>querier.ingress.secrets[0].certificate        -&gt; query.ingress.secrets[0].certificate
</span><span id=__span-15-67><a id=__codelineno-15-67 name=__codelineno-15-67 href=#__codelineno-15-67></a>querier.ingress.secrets[0].key                -&gt; query.ingress.secrets[0].key
</span><span id=__span-15-68><a id=__codelineno-15-68 name=__codelineno-15-68 href=#__codelineno-15-68></a>querier.ingress.grpc.enabled                  -&gt; query.ingress.grpc.enabled
</span><span id=__span-15-69><a id=__codelineno-15-69 name=__codelineno-15-69 href=#__codelineno-15-69></a>querier.ingress.grpc.certManager              -&gt; query.ingress.grpc.certManager
</span><span id=__span-15-70><a id=__codelineno-15-70 name=__codelineno-15-70 href=#__codelineno-15-70></a>querier.ingress.grpc.hostname                 -&gt; query.ingress.grpc.hostname
</span><span id=__span-15-71><a id=__codelineno-15-71 name=__codelineno-15-71 href=#__codelineno-15-71></a>querier.ingress.grpc.annotations              -&gt; query.ingress.grpc.annotations
</span><span id=__span-15-72><a id=__codelineno-15-72 name=__codelineno-15-72 href=#__codelineno-15-72></a>querier.ingress.grpc.extraHosts[0].name       -&gt; query.ingress.grpc.extraHosts[0].name
</span><span id=__span-15-73><a id=__codelineno-15-73 name=__codelineno-15-73 href=#__codelineno-15-73></a>querier.ingress.grpc.extraHosts[0].path       -&gt; query.ingress.grpc.extraHosts[0].path
</span><span id=__span-15-74><a id=__codelineno-15-74 name=__codelineno-15-74 href=#__codelineno-15-74></a>querier.ingress.grpc.extraTls[0].hosts[0]     -&gt; query.ingress.grpc.extraTls[0].hosts[0]
</span><span id=__span-15-75><a id=__codelineno-15-75 name=__codelineno-15-75 href=#__codelineno-15-75></a>querier.ingress.grpc.extraTls[0].secretName   -&gt; query.ingress.grpc.extraTls[0].secretName
</span><span id=__span-15-76><a id=__codelineno-15-76 name=__codelineno-15-76 href=#__codelineno-15-76></a>querier.ingress.grpc.secrets[0].name          -&gt; query.ingress.grpc.secrets[0].name
</span><span id=__span-15-77><a id=__codelineno-15-77 name=__codelineno-15-77 href=#__codelineno-15-77></a>querier.ingress.grpc.secrets[0].certificate   -&gt; query.ingress.grpc.secrets[0].certificate
</span><span id=__span-15-78><a id=__codelineno-15-78 name=__codelineno-15-78 href=#__codelineno-15-78></a>querier.ingress.grpc.secrets[0].key           -&gt; query.ingress.grpc.secrets[0].key
</span></code></pre></div> <h3 id=to-300>To 3.0.0<a class=headerlink href=#to-300 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/helm/charts#status-of-the-project>On November 13, 2020, Helm v2 support was formally finished</a>, this major version is the result of the required changes applied to the Helm Chart to be able to incorporate the different features added in Helm v3 and to be consistent with the Helm project itself regarding the Helm v2 EOL.</p> <p><a href=https://docs.bitnami.com/kubernetes/infrastructure/mariadb/administration/upgrade-helm3/ >Learn more about this change and related upgrade considerations</a>.</p> <h3 id=to-240>To 2.4.0<a class=headerlink href=#to-240 title="Permanent link">&para;</a></h3> <p>The Ingress API object name for Querier changes from <code>{{ include "common.names.fullname" . }}</code> to <code>{{ include "common.names.fullname" . }}-querier</code>.</p> <blockquote> <p><strong>NOTE</strong>: Which in most cases (depending on any set values in <code>fullnameOverride</code> or <code>nameOverride</code>) resolves to the used Helm release name (<code>.Release.Name</code>).</p> </blockquote> <h3 id=to-200>To 2.0.0<a class=headerlink href=#to-200 title="Permanent link">&para;</a></h3> <p>The format of the chart's <code>extraFlags</code> option has been updated to be an array (instead of an object), to support passing multiple flags with the same name to Thanos.</p> <p>Now you need to specify the flags in the following way in your values file (where component is one of <code>querier/bucketweb/compactor/storegateway/ruler</code>):</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nt>component</span><span class=p>:</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">extraFlags</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class="l l-Scalar l-Scalar-Plain">- --sync-block-duration=3m</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class="l l-Scalar l-Scalar-Plain">- --chunk-pool-size=2GB</span>
</span></code></pre></div> <p>To specify the values via CLI::</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=go>--set &#39;component.extraFlags[0]=--sync-block-duration=3m&#39; --set &#39;ruler.extraFlags[1]=--chunk-pool-size=2GB&#39;</span>
</span></code></pre></div> <h3 id=to-100>To 1.0.0<a class=headerlink href=#to-100 title="Permanent link">&para;</a></h3> <p>If you are upgrading from a <code>&lt;1.0.0</code> release you need to move your Querier Ingress information to the new values settings:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>ingress.enabled -&gt; querier.ingress.enabled
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>ingress.certManager -&gt; querier.ingress.certManager
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>ingress.hostname -&gt; querier.ingress.hostname
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>ingress.annotations -&gt; querier.ingress.annotations
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>ingress.extraHosts[0].name -&gt; querier.ingress.extraHosts[0].name
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>ingress.extraHosts[0].path -&gt; querier.ingress.extraHosts[0].path
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>ingress.extraHosts[0].hosts[0] -&gt; querier.ingress.extraHosts[0].hosts[0]
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>ingress.extraHosts[0].secretName -&gt; querier.ingress.extraHosts[0].secretName
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>ingress.secrets[0].name -&gt; querier.ingress.secrets[0].name
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>ingress.secrets[0].certificate -&gt; querier.ingress.secrets[0].certificate
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>ingress.secrets[0].key -&gt; querier.ingress.secrets[0].key
</span></code></pre></div> <h2 id=license>License<a class=headerlink href=#license title="Permanent link">&para;</a></h2> <p>Copyright &copy; 2023 VMware, Inc.</p> <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> <p><a href=http://www.apache.org/licenses/LICENSE-2.0>http://www.apache.org/licenses/LICENSE-2.0</a></p> <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../tensorflow-resnet/ class="md-footer__link md-footer__link--prev" aria-label="上一页: Tensorflow resnet" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> Tensorflow resnet </div> </div> </a> <a href=../tomcat/ class="md-footer__link md-footer__link--next" aria-label="下一页: Tomcat" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> Tomcat </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>