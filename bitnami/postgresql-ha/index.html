
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../pinniped/">
      
      
        <link rel="next" href="../postgresql/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Postgresql ha - Helm Charts Hub</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#postgresql-ha-packaged-by-bitnami" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Helm Charts Hub" class="md-header__button md-logo" aria-label="Helm Charts Hub" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Helm Charts Hub
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Postgresql ha
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sir5kong/helm-charts-hub" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sir5kong/helm-charts-hub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Helm Charts Hub
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../chart-list/" class="md-tabs__link">
      Chart 列表
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Bitnami
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../grafana/" class="md-tabs__link">
        Grafana
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ingress-nginx/" class="md-tabs__link">
        Ingress nginx
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../prometheus-community/" class="md-tabs__link">
        Prometheus community
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../sir5kong/" class="md-tabs__link">
        Sir5kong
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Helm Charts Hub" class="md-nav__button md-logo" aria-label="Helm Charts Hub" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Helm Charts Hub
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sir5kong/helm-charts-hub" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sir5kong/helm-charts-hub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Helm Charts Hub
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../chart-list/" class="md-nav__link">
        Chart 列表
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Bitnami</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Bitnami" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Bitnami
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apache/" class="md-nav__link">
        Apache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apisix/" class="md-nav__link">
        Apisix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appsmith/" class="md-nav__link">
        Appsmith
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-cd/" class="md-nav__link">
        Argo cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-workflows/" class="md-nav__link">
        Argo workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aspnet-core/" class="md-nav__link">
        Aspnet core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cassandra/" class="md-nav__link">
        Cassandra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cert-manager/" class="md-nav__link">
        Cert manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clickhouse/" class="md-nav__link">
        Clickhouse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        Bitnami Common Library Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concourse/" class="md-nav__link">
        Concourse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consul/" class="md-nav__link">
        Consul
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contour/" class="md-nav__link">
        Contour
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../discourse/" class="md-nav__link">
        Discourse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dokuwiki/" class="md-nav__link">
        Dokuwiki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../drupal/" class="md-nav__link">
        Drupal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ejbca/" class="md-nav__link">
        Ejbca
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch/" class="md-nav__link">
        Elasticsearch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../etcd/" class="md-nav__link">
        Etcd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../external-dns/" class="md-nav__link">
        External dns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flink/" class="md-nav__link">
        Flink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fluent-bit/" class="md-nav__link">
        Fluent bit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fluentd/" class="md-nav__link">
        Fluentd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flux/" class="md-nav__link">
        Flux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ghost/" class="md-nav__link">
        Ghost
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gitea/" class="md-nav__link">
        Gitea
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-loki/" class="md-nav__link">
        Grafana loki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-mimir/" class="md-nav__link">
        Grafana mimir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-operator/" class="md-nav__link">
        Grafana operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana-tempo/" class="md-nav__link">
        Grafana tempo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grafana/" class="md-nav__link">
        Grafana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../haproxy/" class="md-nav__link">
        Haproxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../harbor/" class="md-nav__link">
        Harbor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../influxdb/" class="md-nav__link">
        Influxdb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jaeger/" class="md-nav__link">
        Jaeger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jasperreports/" class="md-nav__link">
        Jasperreports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jenkins/" class="md-nav__link">
        Jenkins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../joomla/" class="md-nav__link">
        Joomla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jupyterhub/" class="md-nav__link">
        Jupyterhub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kafka/" class="md-nav__link">
        Kafka
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keycloak/" class="md-nav__link">
        Keycloak
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kiam/" class="md-nav__link">
        Kiam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kibana/" class="md-nav__link">
        Kibana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kong/" class="md-nav__link">
        Kong
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kube-prometheus/" class="md-nav__link">
        Kube prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kube-state-metrics/" class="md-nav__link">
        Kube state metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubeapps/" class="md-nav__link">
        Kubeapps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes-event-exporter/" class="md-nav__link">
        Kubernetes event exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../logstash/" class="md-nav__link">
        Logstash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../magento/" class="md-nav__link">
        Magento
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb-galera/" class="md-nav__link">
        Mariadb galera
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb/" class="md-nav__link">
        Mariadb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mastodon/" class="md-nav__link">
        Mastodon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../matomo/" class="md-nav__link">
        Matomo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mediawiki/" class="md-nav__link">
        Mediawiki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memcached/" class="md-nav__link">
        Memcached
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metallb/" class="md-nav__link">
        Metallb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metrics-server/" class="md-nav__link">
        Metrics server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../minio/" class="md-nav__link">
        Minio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb-sharded/" class="md-nav__link">
        Mongodb sharded
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb/" class="md-nav__link">
        Mongodb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../moodle/" class="md-nav__link">
        Moodle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multus-cni/" class="md-nav__link">
        Multus cni
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mxnet/" class="md-nav__link">
        Mxnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql/" class="md-nav__link">
        Mysql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nats/" class="md-nav__link">
        Nats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nginx-ingress-controller/" class="md-nav__link">
        Nginx ingress controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nginx/" class="md-nav__link">
        Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-exporter/" class="md-nav__link">
        Node exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oauth2-proxy/" class="md-nav__link">
        Oauth2 proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../odoo/" class="md-nav__link">
        Odoo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../opencart/" class="md-nav__link">
        Opencart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../osclass/" class="md-nav__link">
        Osclass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parse/" class="md-nav__link">
        Parse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../phpbb/" class="md-nav__link">
        Phpbb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../phpmyadmin/" class="md-nav__link">
        Phpmyadmin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pinniped/" class="md-nav__link">
        Pinniped
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Postgresql ha
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Postgresql ha
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    TL;DR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-chart" class="md-nav__link">
    Installing the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstalling-the-chart" class="md-nav__link">
    Uninstalling the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
    <nav class="md-nav" aria-label="Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-parameters" class="md-nav__link">
    Global parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-parameters" class="md-nav__link">
    Common parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-with-repmgr-parameters" class="md-nav__link">
    PostgreSQL with Repmgr parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pgpool-parameters" class="md-nav__link">
    Pgpool parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ldap-parameters" class="md-nav__link">
    LDAP parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-parameters" class="md-nav__link">
    Other Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-parameters" class="md-nav__link">
    Metrics parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-permissions-parameters" class="md-nav__link">
    Volume permissions parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-parameters" class="md-nav__link">
    Persistence parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traffic-exposure-parameters" class="md-nav__link">
    Traffic Exposure parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-and-installation-details" class="md-nav__link">
    Configuration and installation details
  </a>
  
    <nav class="md-nav" aria-label="Configuration and installation details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rolling-vs-immutable-tags" class="md-nav__link">
    Rolling VS Immutable tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-postgresql-version" class="md-nav__link">
    Use a different PostgreSQL version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-volume-for-devshm" class="md-nav__link">
    Use a volume for /dev/shm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-way-how-to-expose-postgresql" class="md-nav__link">
    Configure the way how to expose PostgreSQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adjust-permissions-of-persistent-volume-mountpoint" class="md-nav__link">
    Adjust permissions of persistent volume mountpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-traffic-using-tls" class="md-nav__link">
    Securing traffic using TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ldap" class="md-nav__link">
    LDAP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repmgrconf-postgresqlconf-pg_hbaconf-pgpoolconf-files-as-configmap" class="md-nav__link">
    repmgr.conf / postgresql.conf / pg_hba.conf / pgpool.conf files as configMap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-settings-to-be-loaded-from-files-other-than-the-default-postgresqlconf" class="md-nav__link">
    Allow settings to be loaded from files other than the default postgresql.conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-a-fresh-instance" class="md-nav__link">
    Initialize a fresh instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-of-global-variables" class="md-nav__link">
    Use of global variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#persistence" class="md-nav__link">
    Persistence
  </a>
  
    <nav class="md-nav" aria-label="Persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-pods-affinity" class="md-nav__link">
    Setting Pod's affinity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading" class="md-nav__link">
    Upgrading
  </a>
  
    <nav class="md-nav" aria-label="Upgrading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-1000" class="md-nav__link">
    To 10.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-900" class="md-nav__link">
    To 9.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-800" class="md-nav__link">
    To 8.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-640" class="md-nav__link">
    To 6.4.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-600" class="md-nav__link">
    To 6.0.0
  </a>
  
    <nav class="md-nav" aria-label="To 6.0.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-changes-were-introduced-in-this-major-version" class="md-nav__link">
    What changes were introduced in this major version?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-when-upgrading-to-this-version" class="md-nav__link">
    Considerations when upgrading to this version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    Useful links
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-520" class="md-nav__link">
    To 5.2.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-500" class="md-nav__link">
    To 5.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-40x" class="md-nav__link">
    To 4.0.x
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-300" class="md-nav__link">
    To 3.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-200" class="md-nav__link">
    To 2.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-100" class="md-nav__link">
    To 1.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-040" class="md-nav__link">
    To 0.4.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitnami-kubernetes-documentation" class="md-nav__link">
    Bitnami Kubernetes Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../postgresql/" class="md-nav__link">
        Postgresql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prestashop/" class="md-nav__link">
        Prestashop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rabbitmq-cluster-operator/" class="md-nav__link">
        Rabbitmq cluster operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rabbitmq/" class="md-nav__link">
        Rabbitmq
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redis-cluster/" class="md-nav__link">
        Redis cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redmine/" class="md-nav__link">
        Redmine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schema-registry/" class="md-nav__link">
        Schema registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sealed-secrets/" class="md-nav__link">
        Sealed secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../solr/" class="md-nav__link">
        Solr
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sonarqube/" class="md-nav__link">
        Sonarqube
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spring-cloud-dataflow/" class="md-nav__link">
        Spring cloud dataflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../suitecrm/" class="md-nav__link">
        Suitecrm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../supabase/" class="md-nav__link">
        Supabase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow-resnet/" class="md-nav__link">
        Tensorflow resnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../thanos/" class="md-nav__link">
        Thanos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tomcat/" class="md-nav__link">
        Tomcat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault/" class="md-nav__link">
        Vault
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wavefront-hpa-adapter/" class="md-nav__link">
        Wavefront hpa adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wavefront-prometheus-storage-adapter/" class="md-nav__link">
        Wavefront prometheus storage adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../whereabouts/" class="md-nav__link">
        Whereabouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wildfly/" class="md-nav__link">
        Wildfly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wordpress/" class="md-nav__link">
        Wordpress
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../zookeeper/" class="md-nav__link">
        Zookeeper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../grafana/">Grafana</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Grafana" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Grafana
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/agent-operator/" class="md-nav__link">
        grafana-agent-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/enterprise-logs-simple/" class="md-nav__link">
        enterprise-logs-simple
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/enterprise-logs/" class="md-nav__link">
        Grafana Enterprise Logs Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/enterprise-metrics/" class="md-nav__link">
        Grafana Enterprise Metrics Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/fluent-bit/" class="md-nav__link">
        Fluent Bit Loki chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/grafana-agent/" class="md-nav__link">
        Grafana Agent chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/grafana/" class="md-nav__link">
        Grafana Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/loki-canary/" class="md-nav__link">
        loki-canary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/loki-distributed/" class="md-nav__link">
        loki-distributed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/loki-stack/" class="md-nav__link">
        Loki-Stack Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/mimir-distributed/" class="md-nav__link">
        Notice of relocation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/promtail/" class="md-nav__link">
        promtail
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/rollout-operator/" class="md-nav__link">
        Grafana rollout-operator Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/synthetic-monitoring-agent/" class="md-nav__link">
        synthetic-monitoring-agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/tempo-distributed/" class="md-nav__link">
        tempo-distributed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/tempo-vulture/" class="md-nav__link">
        tempo-vulture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grafana/tempo/" class="md-nav__link">
        tempo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../ingress-nginx/">Ingress nginx</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ingress nginx" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Ingress nginx
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ingress-nginx/ingress-nginx/" class="md-nav__link">
        ingress-nginx
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../prometheus-community/">Prometheus community</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Prometheus community" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Prometheus community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/alertmanager-snmp-notifier/" class="md-nav__link">
        Prometheus SNMP Notifier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/alertmanager/" class="md-nav__link">
        Alertmanager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/jiralert/" class="md-nav__link">
        Prometheus SNMP Notifier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/kube-prometheus-stack/" class="md-nav__link">
        kube-prometheus-stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/kube-state-metrics/" class="md-nav__link">
        kube-state-metrics Helm Chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prom-label-proxy/" class="md-nav__link">
        prom-label-proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-adapter/" class="md-nav__link">
        Prometheus Adapter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-blackbox-exporter/" class="md-nav__link">
        Prometheus Blackbox Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-cloudwatch-exporter/" class="md-nav__link">
        Prometheus Cloudwatch Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-conntrack-stats-exporter/" class="md-nav__link">
        Conntrack Stats Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-consul-exporter/" class="md-nav__link">
        Prometheus Consul Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-couchdb-exporter/" class="md-nav__link">
        prometheus-couchdb-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-druid-exporter/" class="md-nav__link">
        Prometheus Druid Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-elasticsearch-exporter/" class="md-nav__link">
        Elasticsearch Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-fastly-exporter/" class="md-nav__link">
        Prometheus Fastly Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-json-exporter/" class="md-nav__link">
        prometheus-json-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-kafka-exporter/" class="md-nav__link">
        prometheus-kafka-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-mongodb-exporter/" class="md-nav__link">
        Prometheus MongoDB Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-mysql-exporter/" class="md-nav__link">
        Prometheus Mysql Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-nats-exporter/" class="md-nav__link">
        Prometheus NATS Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-nginx-exporter/" class="md-nav__link">
        prometheus-nginx-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-node-exporter/" class="md-nav__link">
        Prometheus `Node Exporter`
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-operator-admission-webhook/" class="md-nav__link">
        Prometheus Operator Admission Webhook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-operator-crds/" class="md-nav__link">
        Prometheus Operator CRDs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pgbouncer-exporter/" class="md-nav__link">
        Prometheus Postgres Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pingdom-exporter/" class="md-nav__link">
        Prometheus Pingdom Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pingmesh-exporter/" class="md-nav__link">
        Prometheus Pingmesh Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-postgres-exporter/" class="md-nav__link">
        Prometheus Postgres Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-pushgateway/" class="md-nav__link">
        Prometheus Pushgateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-rabbitmq-exporter/" class="md-nav__link">
        prometheus-rabbitmq-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-redis-exporter/" class="md-nav__link">
        prometheus-redis-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-smartctl-exporter/" class="md-nav__link">
        Prometheus smartctl Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-snmp-exporter/" class="md-nav__link">
        Prometheus SNMP Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-stackdriver-exporter/" class="md-nav__link">
        Stackdriver Exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-statsd-exporter/" class="md-nav__link">
        prometheus-statsd-exporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-to-sd/" class="md-nav__link">
        prometheus-to-sd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus-windows-exporter/" class="md-nav__link">
        Prometheus `Node Exporter`
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus-community/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../sir5kong/">Sir5kong</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Sir5kong" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Sir5kong
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/commonapp/" class="md-nav__link">
        commonapp helm chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/ingress-nginx/" class="md-nav__link">
        ingress-nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/kafka/" class="md-nav__link">
        Kafka helm chart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sir5kong/nginx/" class="md-nav__link">
        nginx helm chart
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    TL;DR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-chart" class="md-nav__link">
    Installing the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstalling-the-chart" class="md-nav__link">
    Uninstalling the Chart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
    <nav class="md-nav" aria-label="Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-parameters" class="md-nav__link">
    Global parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-parameters" class="md-nav__link">
    Common parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-with-repmgr-parameters" class="md-nav__link">
    PostgreSQL with Repmgr parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pgpool-parameters" class="md-nav__link">
    Pgpool parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ldap-parameters" class="md-nav__link">
    LDAP parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-parameters" class="md-nav__link">
    Other Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-parameters" class="md-nav__link">
    Metrics parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-permissions-parameters" class="md-nav__link">
    Volume permissions parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-parameters" class="md-nav__link">
    Persistence parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traffic-exposure-parameters" class="md-nav__link">
    Traffic Exposure parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-and-installation-details" class="md-nav__link">
    Configuration and installation details
  </a>
  
    <nav class="md-nav" aria-label="Configuration and installation details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rolling-vs-immutable-tags" class="md-nav__link">
    Rolling VS Immutable tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-postgresql-version" class="md-nav__link">
    Use a different PostgreSQL version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-volume-for-devshm" class="md-nav__link">
    Use a volume for /dev/shm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-way-how-to-expose-postgresql" class="md-nav__link">
    Configure the way how to expose PostgreSQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adjust-permissions-of-persistent-volume-mountpoint" class="md-nav__link">
    Adjust permissions of persistent volume mountpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-traffic-using-tls" class="md-nav__link">
    Securing traffic using TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ldap" class="md-nav__link">
    LDAP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repmgrconf-postgresqlconf-pg_hbaconf-pgpoolconf-files-as-configmap" class="md-nav__link">
    repmgr.conf / postgresql.conf / pg_hba.conf / pgpool.conf files as configMap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-settings-to-be-loaded-from-files-other-than-the-default-postgresqlconf" class="md-nav__link">
    Allow settings to be loaded from files other than the default postgresql.conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-a-fresh-instance" class="md-nav__link">
    Initialize a fresh instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-of-global-variables" class="md-nav__link">
    Use of global variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#persistence" class="md-nav__link">
    Persistence
  </a>
  
    <nav class="md-nav" aria-label="Persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-pods-affinity" class="md-nav__link">
    Setting Pod's affinity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading" class="md-nav__link">
    Upgrading
  </a>
  
    <nav class="md-nav" aria-label="Upgrading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-1000" class="md-nav__link">
    To 10.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-900" class="md-nav__link">
    To 9.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-800" class="md-nav__link">
    To 8.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-640" class="md-nav__link">
    To 6.4.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-600" class="md-nav__link">
    To 6.0.0
  </a>
  
    <nav class="md-nav" aria-label="To 6.0.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-changes-were-introduced-in-this-major-version" class="md-nav__link">
    What changes were introduced in this major version?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-when-upgrading-to-this-version" class="md-nav__link">
    Considerations when upgrading to this version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    Useful links
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-520" class="md-nav__link">
    To 5.2.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-500" class="md-nav__link">
    To 5.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-40x" class="md-nav__link">
    To 4.0.x
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-300" class="md-nav__link">
    To 3.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-200" class="md-nav__link">
    To 2.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-100" class="md-nav__link">
    To 1.0.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-040" class="md-nav__link">
    To 0.4.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitnami-kubernetes-documentation" class="md-nav__link">
    Bitnami Kubernetes Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<!--- app-name: PostgreSQL HA -->

<h1 id="postgresql-ha-packaged-by-bitnami">PostgreSQL HA packaged by Bitnami<a class="headerlink" href="#postgresql-ha-packaged-by-bitnami" title="Permanent link">&para;</a></h1>
<p>This PostgreSQL cluster solution includes the PostgreSQL replication manager, an open-source tool for managing replication and failover on PostgreSQL clusters.</p>
<p><a href="https://www.postgresql.org/">Overview of PostgreSQL HA</a></p>
<p>Trademarks: This software listing is packaged by Bitnami. The respective trademarks mentioned in the offering are owned by the respective companies, and use of them does not imply any affiliation or endorsement.</p>
<h2 id="tldr">TL;DR<a class="headerlink" href="#tldr" title="Permanent link">&para;</a></h2>
<blockquote>
<p>使用加速地址添加仓库:</p>
</blockquote>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bitnami<span class="w"> </span><span class="s2">&quot;https://helm-charts.itboon.top/bitnami&quot;</span><span class="w"> </span>--force-update
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>helm<span class="w"> </span>update<span class="w"> </span>bitnami
</span></code></pre></div>
<div class="language-console highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="go">helm install my-release bitnami/postgresql-ha</span>
</span></code></pre></div>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This <a href="https://github.com/kubernetes/helm">Helm</a> chart installs <a href="https://www.postgresql.org/">PostgreSQL</a> with HA architecture in a Kubernetes cluster. Welcome to <a href="https://github.com/bitnami/charts/blob/main/CONTRIBUTING.md">contribute</a> to Helm Chart for PostgreSQL HA.</p>
<p>This Helm chart has been developed based on <a href="https://github.com/bitnami/charts/tree/main/bitnami/postgresql">bitnami/postgresql</a> chart but including some changes to guarantee high availability such as:</p>
<ul>
<li>A new deployment, service have been added to deploy <a href="https://pgpool.net/mediawiki/index.php/Main_Page">Pgpool-II</a> to act as proxy for PostgreSQL backend. It helps to reduce connection overhead, acts as a load balancer for PostgreSQL, and ensures database node failover.</li>
<li>Replacing <code>bitnami/postgresql</code> with <code>bitnami/postgresql-repmgr</code> which includes and configures <a href="https://repmgr.org/">repmgr</a>. Repmgr ensures standby nodes assume the primary role when the primary node is unhealthy.</li>
</ul>
<p>Bitnami charts can be used with <a href="https://kubeapps.dev/">Kubeapps</a> for deployment and management of Helm Charts in clusters.</p>
<p>Looking to use PostgreSQL HA in production? Try <a href="https://bitnami.com/enterprise">VMware Application Catalog</a>, the enterprise edition of Bitnami Application Catalog.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Kubernetes 1.19+</li>
<li>Helm 3.2.0+</li>
</ul>
<h2 id="installing-the-chart">Installing the Chart<a class="headerlink" href="#installing-the-chart" title="Permanent link">&para;</a></h2>
<p>To install the chart with the release name <code>my-release</code>:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="go">helm install my-release bitnami/postgresql-ha</span>
</span></code></pre></div>
<h2 id="uninstalling-the-chart">Uninstalling the Chart<a class="headerlink" href="#uninstalling-the-chart" title="Permanent link">&para;</a></h2>
<p>To uninstall/delete the <code>my-release</code> deployment:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="go">helm delete --purge my-release</span>
</span></code></pre></div>
<p>Additionally, if <code>persistence.resourcePolicy</code> is set to <code>keep</code>, you should manually delete the PVCs.</p>
<h2 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h2>
<h3 id="global-parameters">Global parameters<a class="headerlink" href="#global-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>global.imageRegistry</code></td>
<td>Global Docker image registry</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.imagePullSecrets</code></td>
<td>Global Docker registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>global.storageClass</code></td>
<td>Global StorageClass for Persistent Volume(s)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.username</code></td>
<td>PostgreSQL username (overrides <code>postgresql.username</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.password</code></td>
<td>PostgreSQL password (overrides <code>postgresql.password</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.database</code></td>
<td>PostgreSQL database (overrides <code>postgresql.database</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.repmgrUsername</code></td>
<td>PostgreSQL repmgr username (overrides <code>postgresql.repmgrUsername</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.repmgrPassword</code></td>
<td>PostgreSQL repmgr password (overrides <code>postgresql.repmgrpassword</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.repmgrDatabase</code></td>
<td>PostgreSQL repmgr database (overrides <code>postgresql.repmgrDatabase</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.postgresql.existingSecret</code></td>
<td>Name of existing secret to use for PostgreSQL passwords (overrides <code>postgresql.existingSecret</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.ldap.bindpw</code></td>
<td>LDAP bind password (overrides <code>ldap.bindpw</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.ldap.existingSecret</code></td>
<td>Name of existing secret to use for LDAP passwords (overrides <code>ldap.existingSecret</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.pgpool.adminUsername</code></td>
<td>Pgpool Admin username (overrides <code>pgpool.adminUsername</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.pgpool.adminPassword</code></td>
<td>Pgpool Admin password (overrides <code>pgpool.adminPassword</code>)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>global.pgpool.existingSecret</code></td>
<td>Pgpool existing secret</td>
<td><code>""</code></td>
</tr>
</tbody>
</table>
<h3 id="common-parameters">Common parameters<a class="headerlink" href="#common-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>kubeVersion</code></td>
<td>Override Kubernetes version</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>nameOverride</code></td>
<td>String to partially override common.names.fullname template (will maintain the release name)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>fullnameOverride</code></td>
<td>String to fully override common.names.fullname template</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>namespaceOverride</code></td>
<td>String to fully override common.names.namespace</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>commonLabels</code></td>
<td>Common labels to add to all resources (sub-charts are not considered). Evaluated as a template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>commonAnnotations</code></td>
<td>Common annotations to add to all resources (sub-charts are not considered). Evaluated as a template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>clusterDomain</code></td>
<td>Kubernetes Cluster Domain</td>
<td><code>cluster.local</code></td>
</tr>
<tr>
<td><code>extraDeploy</code></td>
<td>Array of extra objects to deploy with the release (evaluated as a template)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>diagnosticMode.enabled</code></td>
<td>Enable diagnostic mode (all probes will be disabled and the command will be overridden)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>diagnosticMode.command</code></td>
<td>Command to override all containers in the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>diagnosticMode.args</code></td>
<td>Args to override all containers in the deployment</td>
<td><code>[]</code></td>
</tr>
</tbody>
</table>
<h3 id="postgresql-with-repmgr-parameters">PostgreSQL with Repmgr parameters<a class="headerlink" href="#postgresql-with-repmgr-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>postgresql.image.registry</code></td>
<td>PostgreSQL with Repmgr image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>postgresql.image.repository</code></td>
<td>PostgreSQL with Repmgr image repository</td>
<td><code>bitnami/postgresql-repmgr</code></td>
</tr>
<tr>
<td><code>postgresql.image.tag</code></td>
<td>PostgreSQL with Repmgr image tag</td>
<td><code>15.3.0-debian-11-r16</code></td>
</tr>
<tr>
<td><code>postgresql.image.digest</code></td>
<td>PostgreSQL image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.image.pullPolicy</code></td>
<td>PostgreSQL with Repmgr image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>postgresql.image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.image.debug</code></td>
<td>Specify if debug logs should be enabled</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.labels</code></td>
<td>Labels to add to the StatefulSet. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.podLabels</code></td>
<td>Labels to add to the StatefulSet pods. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.serviceAnnotations</code></td>
<td>Provide any additional annotations for PostgreSQL service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.replicaCount</code></td>
<td>Number of replicas to deploy. Use an odd number. Having 3 replicas is the minimum to get quorum when promoting a new primary.</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>postgresql.updateStrategy.type</code></td>
<td>Postgresql statefulset strategy type</td>
<td><code>RollingUpdate</code></td>
</tr>
<tr>
<td><code>postgresql.containerPorts.postgresql</code></td>
<td>PostgreSQL port</td>
<td><code>5432</code></td>
</tr>
<tr>
<td><code>postgresql.hostAliases</code></td>
<td>Deployment pod host aliases</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.hostNetwork</code></td>
<td>Specify if host network should be enabled for PostgreSQL pod</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.hostIPC</code></td>
<td>Specify if host IPC should be enabled for PostgreSQL pod</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.podAnnotations</code></td>
<td>Additional pod annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.podAffinityPreset</code></td>
<td>PostgreSQL pod affinity preset. Ignored if <code>postgresql.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.podAntiAffinityPreset</code></td>
<td>PostgreSQL pod anti-affinity preset. Ignored if <code>postgresql.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>soft</code></td>
</tr>
<tr>
<td><code>postgresql.nodeAffinityPreset.type</code></td>
<td>PostgreSQL node affinity preset type. Ignored if <code>postgresql.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.nodeAffinityPreset.key</code></td>
<td>PostgreSQL node label key to match Ignored if <code>postgresql.affinity</code> is set.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.nodeAffinityPreset.values</code></td>
<td>PostgreSQL node label values to match. Ignored if <code>postgresql.affinity</code> is set.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.affinity</code></td>
<td>Affinity for PostgreSQL pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.nodeSelector</code></td>
<td>Node labels for PostgreSQL pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.tolerations</code></td>
<td>Tolerations for PostgreSQL pods assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.topologySpreadConstraints</code></td>
<td>Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.priorityClassName</code></td>
<td>Pod priority class</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.schedulerName</code></td>
<td>Use an alternate scheduler, e.g. "stork".</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.terminationGracePeriodSeconds</code></td>
<td>Seconds PostgreSQL pod needs to terminate gracefully</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.podSecurityContext.enabled</code></td>
<td>Enable security context for PostgreSQL with Repmgr</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.podSecurityContext.fsGroup</code></td>
<td>Group ID for the PostgreSQL with Repmgr filesystem</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>postgresql.containerSecurityContext.enabled</code></td>
<td>Enable container security context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.containerSecurityContext.runAsUser</code></td>
<td>User ID for the PostgreSQL with Repmgr container</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>postgresql.containerSecurityContext.runAsNonRoot</code></td>
<td>Set PostgreSQL with Repmgr containers' Security Context runAsNonRoot</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.containerSecurityContext.readOnlyRootFilesystem</code></td>
<td>Set PostgreSQL with Repmgr containers' Security Context runAsNonRoot</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.command</code></td>
<td>Override default container command (useful when using custom images)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.args</code></td>
<td>Override default container args (useful when using custom images)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.lifecycleHooks</code></td>
<td>LifecycleHook to set additional configuration at startup, e.g. LDAP settings via REST API. Evaluated as a template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.extraEnvVars</code></td>
<td>Array containing extra environment variables</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.extraEnvVarsCM</code></td>
<td>ConfigMap with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.extraEnvVarsSecret</code></td>
<td>Secret with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.extraVolumes</code></td>
<td>Extra volumes to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.extraVolumeMounts</code></td>
<td>Extra volume mounts to add to the container. Normally used with <code>extraVolumes</code>.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.initContainers</code></td>
<td>Extra init containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.sidecars</code></td>
<td>Extra sidecar containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.livenessProbe.enabled</code></td>
<td>Enable livenessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.livenessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for livenessProbe</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>postgresql.livenessProbe.periodSeconds</code></td>
<td>Period seconds for livenessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>postgresql.livenessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.livenessProbe.failureThreshold</code></td>
<td>Failure threshold for livenessProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>postgresql.livenessProbe.successThreshold</code></td>
<td>Success threshold for livenessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>postgresql.readinessProbe.enabled</code></td>
<td>Enable readinessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.readinessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.readinessProbe.periodSeconds</code></td>
<td>Period seconds for readinessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>postgresql.readinessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.readinessProbe.failureThreshold</code></td>
<td>Failure threshold for readinessProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>postgresql.readinessProbe.successThreshold</code></td>
<td>Success threshold for readinessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>postgresql.startupProbe.enabled</code></td>
<td>Enable startupProbe</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.startupProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.startupProbe.periodSeconds</code></td>
<td>Period seconds for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>postgresql.startupProbe.timeoutSeconds</code></td>
<td>Timeout seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.startupProbe.failureThreshold</code></td>
<td>Failure threshold for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>postgresql.startupProbe.successThreshold</code></td>
<td>Success threshold for startupProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>postgresql.customLivenessProbe</code></td>
<td>Override default liveness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.customReadinessProbe</code></td>
<td>Override default readiness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.customStartupProbe</code></td>
<td>Override default startup probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.pdb.create</code></td>
<td>Specifies whether to create a Pod disruption budget for PostgreSQL with Repmgr</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.pdb.minAvailable</code></td>
<td>Minimum number / percentage of pods that should remain scheduled</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>postgresql.pdb.maxUnavailable</code></td>
<td>Maximum number / percentage of pods that may be made unavailable</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.username</code></td>
<td>PostgreSQL username</td>
<td><code>postgres</code></td>
</tr>
<tr>
<td><code>postgresql.password</code></td>
<td>PostgreSQL password</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.database</code></td>
<td>PostgreSQL database</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.existingSecret</code></td>
<td>PostgreSQL password using existing secret</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.postgresPassword</code></td>
<td>PostgreSQL password for the <code>postgres</code> user when <code>username</code> is not <code>postgres</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.usePasswordFile</code></td>
<td>Set to <code>true</code> to mount PostgreSQL secret as a file instead of passing environment variable</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrUsePassfile</code></td>
<td>Set to <code>true</code> to configure repmgrl to use <code>passfile</code> instead of <code>password</code> vars*:<em>:</em>:username:password" and use it to configure Repmgr instead of using password (Requires Postgresql 10+, otherwise ignored)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrPassfilePath</code></td>
<td>Custom path where <code>passfile</code> will be stored</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.upgradeRepmgrExtension</code></td>
<td>Upgrade repmgr extension in the database</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.pgHbaTrustAll</code></td>
<td>Configures PostgreSQL HBA to trust every user</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.syncReplication</code></td>
<td>Make the replication synchronous. This will wait until the data is synchronized in all the replicas before other query can be run. This ensures the data availability at the expenses of speed.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.syncReplicationMode</code></td>
<td>This specifies the method to choose synchronous standbys from the listed servers. Valid values: empty, FIRST, ANY.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrUsername</code></td>
<td>PostgreSQL Repmgr username</td>
<td><code>repmgr</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrPassword</code></td>
<td>PostgreSQL Repmgr password</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrDatabase</code></td>
<td>PostgreSQL Repmgr database</td>
<td><code>repmgr</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrLogLevel</code></td>
<td>Repmgr log level (DEBUG, INFO, NOTICE, WARNING, ERROR, ALERT, CRIT or EMERG)</td>
<td><code>NOTICE</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrConnectTimeout</code></td>
<td>Repmgr backend connection timeout (in seconds)</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrReconnectAttempts</code></td>
<td>Repmgr backend reconnection attempts</td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrReconnectInterval</code></td>
<td>Repmgr backend reconnection interval (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrFenceOldPrimary</code></td>
<td>Set if fencing of old primary in multiple primary situation is desired</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrChildNodesCheckInterval</code></td>
<td>Repmgr child nodes check interval (in seconds)</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrChildNodesConnectedMinCount</code></td>
<td>Repmgr minimum number of connected child nodes before being considered as failed primary for fencing</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrChildNodesDisconnectTimeout</code></td>
<td>Repmgr time before node will be fenced when insufficient child nodes are detected (in seconds)</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>postgresql.usePgRewind</code></td>
<td>Use pg_rewind for standby failover (experimental)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.audit.logHostname</code></td>
<td>Add client hostnames to the log file</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.audit.logConnections</code></td>
<td>Add client log-in operations to the log file</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.audit.logDisconnections</code></td>
<td>Add client log-outs operations to the log file</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.audit.pgAuditLog</code></td>
<td>Add operations to log using the pgAudit extension</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.audit.pgAuditLogCatalog</code></td>
<td>Log catalog using pgAudit</td>
<td><code>off</code></td>
</tr>
<tr>
<td><code>postgresql.audit.clientMinMessages</code></td>
<td>Message log level to share with the user</td>
<td><code>error</code></td>
</tr>
<tr>
<td><code>postgresql.audit.logLinePrefix</code></td>
<td>Template string for the log line prefix</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.audit.logTimezone</code></td>
<td>Timezone for the log timestamps</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.sharedPreloadLibraries</code></td>
<td>Shared preload libraries (comma-separated list)</td>
<td><code>pgaudit, repmgr</code></td>
</tr>
<tr>
<td><code>postgresql.maxConnections</code></td>
<td>Maximum total connections</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.postgresConnectionLimit</code></td>
<td>Maximum connections for the postgres user</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.dbUserConnectionLimit</code></td>
<td>Maximum connections for the created user</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.tcpKeepalivesInterval</code></td>
<td>TCP keepalives interval</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.tcpKeepalivesIdle</code></td>
<td>TCP keepalives idle</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.tcpKeepalivesCount</code></td>
<td>TCP keepalives count</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.statementTimeout</code></td>
<td>Statement timeout</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.pghbaRemoveFilters</code></td>
<td>Comma-separated list of patterns to remove from the pg_hba.conf file</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.extraInitContainers</code></td>
<td>Extra init containers</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>postgresql.repmgrConfiguration</code></td>
<td>Repmgr configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.configuration</code></td>
<td>PostgreSQL configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.pgHbaConfiguration</code></td>
<td>PostgreSQL client authentication configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.configurationCM</code></td>
<td>Name of existing ConfigMap with configuration files</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.extendedConf</code></td>
<td>Extended PostgreSQL configuration (appended to main or default configuration). Implies <code>volumePermissions.enabled</code>.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.extendedConfCM</code></td>
<td>ConfigMap with PostgreSQL extended configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.initdbScripts</code></td>
<td>Dictionary of initdb scripts</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>postgresql.initdbScriptsCM</code></td>
<td>ConfigMap with scripts to be run at first boot</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.initdbScriptsSecret</code></td>
<td>Secret with scripts to be run at first boot</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.tls.enabled</code></td>
<td>Enable TLS traffic support for end-client connections</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>postgresql.tls.preferServerCiphers</code></td>
<td>Whether to use the server's TLS cipher preferences rather than the client's</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>postgresql.tls.certificatesSecret</code></td>
<td>Name of an existing secret that contains the certificates</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.tls.certFilename</code></td>
<td>Certificate filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.tls.certKeyFilename</code></td>
<td>Certificate key filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>postgresql.preStopDelayAfterPgStopSeconds</code></td>
<td>Minimal number of seconds preStop hook waits after postgres instance is stopped</td>
<td><code>25</code></td>
</tr>
<tr>
<td><code>postgresql.headlessWithNotReadyAddresses</code></td>
<td>set postgres headless service into publishNotReadyAddresses mode</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.create</code></td>
<td>Create PostgreSQL witness nodes</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.labels</code></td>
<td>Labels to add to the StatefulSet. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.podLabels</code></td>
<td>Labels to add to the StatefulSet pods. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.replicaCount</code></td>
<td>Number of replicas to deploy.</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>witness.updateStrategy.type</code></td>
<td>Postgresql statefulset strategy type</td>
<td><code>RollingUpdate</code></td>
</tr>
<tr>
<td><code>witness.containerPorts.postgresql</code></td>
<td>PostgreSQL witness port</td>
<td><code>5432</code></td>
</tr>
<tr>
<td><code>witness.hostAliases</code></td>
<td>Deployment pod host aliases</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.hostNetwork</code></td>
<td>Specify if host network should be enabled for PostgreSQL witness pod</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.hostIPC</code></td>
<td>Specify if host IPC should be enabled for PostgreSQL witness pod</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.podAnnotations</code></td>
<td>Additional pod annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.podAffinityPreset</code></td>
<td>PostgreSQL witness pod affinity preset. Ignored if <code>witness.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.podAntiAffinityPreset</code></td>
<td>PostgreSQL witness pod anti-affinity preset. Ignored if <code>witness.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>soft</code></td>
</tr>
<tr>
<td><code>witness.nodeAffinityPreset.type</code></td>
<td>PostgreSQL witness node affinity preset type. Ignored if <code>witness.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.nodeAffinityPreset.key</code></td>
<td>PostgreSQL witness node label key to match Ignored if <code>witness.affinity</code> is set.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.nodeAffinityPreset.values</code></td>
<td>PostgreSQL witness node label values to match. Ignored if <code>witness.affinity</code> is set.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.affinity</code></td>
<td>Affinity for PostgreSQL witness pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.nodeSelector</code></td>
<td>Node labels for PostgreSQL witness pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.tolerations</code></td>
<td>Tolerations for PostgreSQL witness pods assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.topologySpreadConstraints</code></td>
<td>Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.priorityClassName</code></td>
<td>Pod priority class</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.schedulerName</code></td>
<td>Use an alternate scheduler, e.g. "stork".</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.terminationGracePeriodSeconds</code></td>
<td>Seconds PostgreSQL witness pod needs to terminate gracefully</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.podSecurityContext.enabled</code></td>
<td>Enable security context for PostgreSQL witness with Repmgr</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>witness.podSecurityContext.fsGroup</code></td>
<td>Group ID for the PostgreSQL witness with Repmgr filesystem</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>witness.containerSecurityContext.enabled</code></td>
<td>Enable container security context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>witness.containerSecurityContext.runAsUser</code></td>
<td>User ID for the PostgreSQL witness with Repmgr container</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>witness.containerSecurityContext.runAsNonRoot</code></td>
<td>Set PostgreSQL witness with Repmgr containers' Security Context runAsNonRoot</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>witness.containerSecurityContext.readOnlyRootFilesystem</code></td>
<td>Set PostgreSQL witness with Repmgr containers' Security Context runAsNonRoot</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.command</code></td>
<td>Override default container command (useful when using custom images)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.args</code></td>
<td>Override default container args (useful when using custom images)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.lifecycleHooks</code></td>
<td>LifecycleHook to set additional configuration at startup, e.g. LDAP settings via REST API. Evaluated as a template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.extraEnvVars</code></td>
<td>Array containing extra environment variables</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.extraEnvVarsCM</code></td>
<td>ConfigMap with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.extraEnvVarsSecret</code></td>
<td>Secret with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.extraVolumes</code></td>
<td>Extra volumes to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.extraVolumeMounts</code></td>
<td>Extra volume mounts to add to the container. Normally used with <code>extraVolumes</code>.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.initContainers</code></td>
<td>Extra init containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.sidecars</code></td>
<td>Extra sidecar containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.livenessProbe.enabled</code></td>
<td>Enable livenessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>witness.livenessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for livenessProbe</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>witness.livenessProbe.periodSeconds</code></td>
<td>Period seconds for livenessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>witness.livenessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>witness.livenessProbe.failureThreshold</code></td>
<td>Failure threshold for livenessProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>witness.livenessProbe.successThreshold</code></td>
<td>Success threshold for livenessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>witness.readinessProbe.enabled</code></td>
<td>Enable readinessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>witness.readinessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>witness.readinessProbe.periodSeconds</code></td>
<td>Period seconds for readinessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>witness.readinessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>witness.readinessProbe.failureThreshold</code></td>
<td>Failure threshold for readinessProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>witness.readinessProbe.successThreshold</code></td>
<td>Success threshold for readinessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>witness.startupProbe.enabled</code></td>
<td>Enable startupProbe</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.startupProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>witness.startupProbe.periodSeconds</code></td>
<td>Period seconds for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>witness.startupProbe.timeoutSeconds</code></td>
<td>Timeout seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>witness.startupProbe.failureThreshold</code></td>
<td>Failure threshold for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>witness.startupProbe.successThreshold</code></td>
<td>Success threshold for startupProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>witness.customLivenessProbe</code></td>
<td>Override default liveness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.customReadinessProbe</code></td>
<td>Override default readiness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.customStartupProbe</code></td>
<td>Override default startup probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.pdb.create</code></td>
<td>Specifies whether to create a Pod disruption budget for PostgreSQL witness with Repmgr</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.pdb.minAvailable</code></td>
<td>Minimum number / percentage of pods that should remain scheduled</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>witness.pdb.maxUnavailable</code></td>
<td>Maximum number / percentage of pods that may be made unavailable</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.upgradeRepmgrExtension</code></td>
<td>Upgrade repmgr extension in the database</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.pgHbaTrustAll</code></td>
<td>Configures PostgreSQL HBA to trust every user</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.repmgrLogLevel</code></td>
<td>Repmgr log level (DEBUG, INFO, NOTICE, WARNING, ERROR, ALERT, CRIT or EMERG)</td>
<td><code>NOTICE</code></td>
</tr>
<tr>
<td><code>witness.repmgrConnectTimeout</code></td>
<td>Repmgr backend connection timeout (in seconds)</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>witness.repmgrReconnectAttempts</code></td>
<td>Repmgr backend reconnection attempts</td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>witness.repmgrReconnectInterval</code></td>
<td>Repmgr backend reconnection interval (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>witness.audit.logHostname</code></td>
<td>Add client hostnames to the log file</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>witness.audit.logConnections</code></td>
<td>Add client log-in operations to the log file</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.audit.logDisconnections</code></td>
<td>Add client log-outs operations to the log file</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>witness.audit.pgAuditLog</code></td>
<td>Add operations to log using the pgAudit extension</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.audit.pgAuditLogCatalog</code></td>
<td>Log catalog using pgAudit</td>
<td><code>off</code></td>
</tr>
<tr>
<td><code>witness.audit.clientMinMessages</code></td>
<td>Message log level to share with the user</td>
<td><code>error</code></td>
</tr>
<tr>
<td><code>witness.audit.logLinePrefix</code></td>
<td>Template string for the log line prefix</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.audit.logTimezone</code></td>
<td>Timezone for the log timestamps</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.maxConnections</code></td>
<td>Maximum total connections</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.postgresConnectionLimit</code></td>
<td>Maximum connections for the postgres user</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.dbUserConnectionLimit</code></td>
<td>Maximum connections for the created user</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.tcpKeepalivesInterval</code></td>
<td>TCP keepalives interval</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.tcpKeepalivesIdle</code></td>
<td>TCP keepalives idle</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.tcpKeepalivesCount</code></td>
<td>TCP keepalives count</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.statementTimeout</code></td>
<td>Statement timeout</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.pghbaRemoveFilters</code></td>
<td>Comma-separated list of patterns to remove from the pg_hba.conf file</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.extraInitContainers</code></td>
<td>Extra init containers</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>witness.repmgrConfiguration</code></td>
<td>Repmgr configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.configuration</code></td>
<td>PostgreSQL configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.pgHbaConfiguration</code></td>
<td>PostgreSQL client authentication configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.configurationCM</code></td>
<td>Name of existing ConfigMap with configuration files</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.extendedConf</code></td>
<td>Extended PostgreSQL configuration (appended to main or default configuration). Implies <code>volumePermissions.enabled</code>.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.extendedConfCM</code></td>
<td>ConfigMap with PostgreSQL extended configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.initdbScripts</code></td>
<td>Dictionary of initdb scripts</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>witness.initdbScriptsCM</code></td>
<td>ConfigMap with scripts to be run at first boot</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>witness.initdbScriptsSecret</code></td>
<td>Secret with scripts to be run at first boot</td>
<td><code>""</code></td>
</tr>
</tbody>
</table>
<h3 id="pgpool-parameters">Pgpool parameters<a class="headerlink" href="#pgpool-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pgpool.image.registry</code></td>
<td>Pgpool image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>pgpool.image.repository</code></td>
<td>Pgpool image repository</td>
<td><code>bitnami/pgpool</code></td>
</tr>
<tr>
<td><code>pgpool.image.tag</code></td>
<td>Pgpool image tag</td>
<td><code>4.4.3-debian-11-r10</code></td>
</tr>
<tr>
<td><code>pgpool.image.digest</code></td>
<td>Pgpool image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.image.pullPolicy</code></td>
<td>Pgpool image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>pgpool.image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.image.debug</code></td>
<td>Specify if debug logs should be enabled</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.customUsers.usernames</code></td>
<td>Comma or semicolon separated list of additional users that will be performing connections to the database using pgpool.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.customUsers.passwords</code></td>
<td>Comma or semicolon separated list of the associated passwords for the users above. Must have the same number of elements as the usernames list.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.hostAliases</code></td>
<td>Deployment pod host aliases</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.customUsersSecret</code></td>
<td>Name of a secret containing the usernames and passwords of accounts that will be added to pgpool_passwd</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.existingSecret</code></td>
<td>Pgpool admin password using existing secret</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.srCheckDatabase</code></td>
<td>Name of the database to perform streaming replication checks</td>
<td><code>postgres</code></td>
</tr>
<tr>
<td><code>pgpool.labels</code></td>
<td>Labels to add to the Deployment. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.podLabels</code></td>
<td>Labels to add to the pods. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.serviceLabels</code></td>
<td>Labels to add to the service. Evaluated as template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.serviceAnnotations</code></td>
<td>Provide any additional annotations for Pgpool service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.customLivenessProbe</code></td>
<td>Override default liveness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.customReadinessProbe</code></td>
<td>Override default readiness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.customStartupProbe</code></td>
<td>Override default startup probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.command</code></td>
<td>Override default container command (useful when using custom images)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.args</code></td>
<td>Override default container args (useful when using custom images)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.lifecycleHooks</code></td>
<td>LifecycleHook to set additional configuration at startup, e.g. LDAP settings via REST API. Evaluated as a template</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.extraEnvVars</code></td>
<td>Array containing extra environment variables</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.extraEnvVarsCM</code></td>
<td>ConfigMap with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.extraEnvVarsSecret</code></td>
<td>Secret with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.extraVolumes</code></td>
<td>Extra volumes to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.extraVolumeMounts</code></td>
<td>Extra volume mounts to add to the container. Normally used with <code>extraVolumes</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.initContainers</code></td>
<td>Extra init containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.sidecars</code></td>
<td>Extra sidecar containers to add to the deployment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.replicaCount</code></td>
<td>The number of replicas to deploy</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>pgpool.podAnnotations</code></td>
<td>Additional pod annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.priorityClassName</code></td>
<td>Pod priority class</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.schedulerName</code></td>
<td>Use an alternate scheduler, e.g. "stork".</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.terminationGracePeriodSeconds</code></td>
<td>Seconds pgpool pod needs to terminate gracefully</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.topologySpreadConstraints</code></td>
<td>Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.podAffinityPreset</code></td>
<td>Pgpool pod affinity preset. Ignored if <code>pgpool.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.podAntiAffinityPreset</code></td>
<td>Pgpool pod anti-affinity preset. Ignored if <code>pgpool.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>soft</code></td>
</tr>
<tr>
<td><code>pgpool.nodeAffinityPreset.type</code></td>
<td>Pgpool node affinity preset type. Ignored if <code>pgpool.affinity</code> is set. Allowed values: <code>soft</code> or <code>hard</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.nodeAffinityPreset.key</code></td>
<td>Pgpool node label key to match Ignored if <code>pgpool.affinity</code> is set.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.nodeAffinityPreset.values</code></td>
<td>Pgpool node label values to match. Ignored if <code>pgpool.affinity</code> is set.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.affinity</code></td>
<td>Affinity for Pgpool pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.nodeSelector</code></td>
<td>Node labels for Pgpool pods assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.tolerations</code></td>
<td>Tolerations for Pgpool pods assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>pgpool.podSecurityContext.enabled</code></td>
<td>Enable security context for Pgpool</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.podSecurityContext.fsGroup</code></td>
<td>Group ID for the Pgpool filesystem</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>pgpool.containerSecurityContext.enabled</code></td>
<td>Enable container security context</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.containerSecurityContext.runAsUser</code></td>
<td>User ID for the Pgpool container</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>pgpool.containerSecurityContext.runAsNonRoot</code></td>
<td>Set Pgpool containers' Security Context runAsNonRoot</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.containerSecurityContext.readOnlyRootFilesystem</code></td>
<td>Set Pgpool containers' Security Context runAsNonRoot</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.livenessProbe.enabled</code></td>
<td>Enable livenessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.livenessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for livenessProbe</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>pgpool.livenessProbe.periodSeconds</code></td>
<td>Period seconds for livenessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>pgpool.livenessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.livenessProbe.failureThreshold</code></td>
<td>Failure threshold for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.livenessProbe.successThreshold</code></td>
<td>Success threshold for livenessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>pgpool.readinessProbe.enabled</code></td>
<td>Enable readinessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.readinessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.readinessProbe.periodSeconds</code></td>
<td>Period seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.readinessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.readinessProbe.failureThreshold</code></td>
<td>Failure threshold for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.readinessProbe.successThreshold</code></td>
<td>Success threshold for readinessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>pgpool.startupProbe.enabled</code></td>
<td>Enable startupProbe</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.startupProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.startupProbe.periodSeconds</code></td>
<td>Period seconds for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>pgpool.startupProbe.timeoutSeconds</code></td>
<td>Timeout seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>pgpool.startupProbe.failureThreshold</code></td>
<td>Failure threshold for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>pgpool.startupProbe.successThreshold</code></td>
<td>Success threshold for startupProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>pgpool.pdb.create</code></td>
<td>Specifies whether a Pod disruption budget should be created for Pgpool pods</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.pdb.minAvailable</code></td>
<td>Minimum number / percentage of pods that should remain scheduled</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>pgpool.pdb.maxUnavailable</code></td>
<td>Maximum number / percentage of pods that may be made unavailable</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.updateStrategy</code></td>
<td>Strategy used to replace old Pods by new ones</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.containerPorts.postgresql</code></td>
<td>Pgpool port</td>
<td><code>5432</code></td>
</tr>
<tr>
<td><code>pgpool.minReadySeconds</code></td>
<td>How many seconds a pod needs to be ready before killing the next, during update</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.adminUsername</code></td>
<td>Pgpool Admin username</td>
<td><code>admin</code></td>
</tr>
<tr>
<td><code>pgpool.adminPassword</code></td>
<td>Pgpool Admin password</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.usePasswordFile</code></td>
<td>Set to <code>true</code> to mount pgpool secret as a file instead of passing environment variable</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.authenticationMethod</code></td>
<td>Pgpool authentication method. Use 'md5' for PSQL &lt; 14.</td>
<td><code>scram-sha-256</code></td>
</tr>
<tr>
<td><code>pgpool.logConnections</code></td>
<td>Log all client connections (PGPOOL_ENABLE_LOG_CONNECTIONS)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.logHostname</code></td>
<td>Log the client hostname instead of IP address (PGPOOL_ENABLE_LOG_HOSTNAME)</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.logPerNodeStatement</code></td>
<td>Log every SQL statement for each DB node separately (PGPOOL_ENABLE_LOG_PER_NODE_STATEMENT)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.logLinePrefix</code></td>
<td>Format of the log entry lines (PGPOOL_LOG_LINE_PREFIX)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.clientMinMessages</code></td>
<td>Log level for clients</td>
<td><code>error</code></td>
</tr>
<tr>
<td><code>pgpool.numInitChildren</code></td>
<td>The number of preforked Pgpool-II server processes. It is also the concurrent</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.reservedConnections</code></td>
<td>Number of reserved connections. When zero, excess connection block. When non-zero, excess connections are refused with an error message.</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>pgpool.maxPool</code></td>
<td>The maximum number of cached connections in each child process (PGPOOL_MAX_POOL)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.childMaxConnections</code></td>
<td>The maximum number of client connections in each child process (PGPOOL_CHILD_MAX_CONNECTIONS)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.childLifeTime</code></td>
<td>The time in seconds to terminate a Pgpool-II child process if it remains idle (PGPOOL_CHILD_LIFE_TIME)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.clientIdleLimit</code></td>
<td>The time in seconds to disconnect a client if it remains idle since the last query (PGPOOL_CLIENT_IDLE_LIMIT)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.connectionLifeTime</code></td>
<td>The time in seconds to terminate the cached connections to the PostgreSQL backend (PGPOOL_CONNECTION_LIFE_TIME)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.useLoadBalancing</code></td>
<td>Use Pgpool Load-Balancing</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.loadBalancingOnWrite</code></td>
<td>LoadBalancer on write actions behavior</td>
<td><code>transaction</code></td>
</tr>
<tr>
<td><code>pgpool.configuration</code></td>
<td>Pgpool configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.configurationCM</code></td>
<td>ConfigMap with Pgpool configuration</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.initdbScripts</code></td>
<td>Dictionary of initdb scripts</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>pgpool.initdbScriptsCM</code></td>
<td>ConfigMap with scripts to be run every time Pgpool container is initialized</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.initdbScriptsSecret</code></td>
<td>Secret with scripts to be run every time Pgpool container is initialized</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.tls.enabled</code></td>
<td>Enable TLS traffic support for end-client connections</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.tls.autoGenerated</code></td>
<td>Create self-signed TLS certificates. Currently only supports PEM certificates</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>pgpool.tls.preferServerCiphers</code></td>
<td>Whether to use the server's TLS cipher preferences rather than the client's</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>pgpool.tls.certificatesSecret</code></td>
<td>Name of an existing secret that contains the certificates</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.tls.certFilename</code></td>
<td>Certificate filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.tls.certKeyFilename</code></td>
<td>Certificate key filename</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>pgpool.tls.certCAFilename</code></td>
<td>CA Certificate filename</td>
<td><code>""</code></td>
</tr>
</tbody>
</table>
<h3 id="ldap-parameters">LDAP parameters<a class="headerlink" href="#ldap-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ldap.enabled</code></td>
<td>Enable LDAP support</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>ldap.existingSecret</code></td>
<td>Name of existing secret to use for LDAP passwords</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.uri</code></td>
<td>LDAP URL beginning in the form <code>ldap[s]://&lt;hostname&gt;:&lt;port&gt;</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.basedn</code></td>
<td>LDAP base DN</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.binddn</code></td>
<td>LDAP bind DN</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.bindpw</code></td>
<td>LDAP bind password</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.bslookup</code></td>
<td>LDAP base lookup</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.scope</code></td>
<td>LDAP search scope</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.tlsReqcert</code></td>
<td>LDAP TLS check on server certificates</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>ldap.nssInitgroupsIgnoreusers</code></td>
<td>LDAP ignored users</td>
<td><code>root,nslcd</code></td>
</tr>
</tbody>
</table>
<h3 id="other-parameters">Other Parameters<a class="headerlink" href="#other-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rbac.create</code></td>
<td>Create Role and RoleBinding (required for PSP to work)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>rbac.rules</code></td>
<td>Custom RBAC rules to set</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>serviceAccount.create</code></td>
<td>Enable creation of ServiceAccount for Airflow pods</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>serviceAccount.name</code></td>
<td>The name of the ServiceAccount to use.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>serviceAccount.annotations</code></td>
<td>Additional custom annotations for the ServiceAccount</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>serviceAccount.automountServiceAccountToken</code></td>
<td>Allows auto mount of ServiceAccountToken on the serviceAccount created</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>psp.create</code></td>
<td>Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="metrics-parameters">Metrics parameters<a class="headerlink" href="#metrics-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metrics.enabled</code></td>
<td>Enable PostgreSQL Prometheus exporter</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.image.registry</code></td>
<td>PostgreSQL Prometheus exporter image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>metrics.image.repository</code></td>
<td>PostgreSQL Prometheus exporter image repository</td>
<td><code>bitnami/postgres-exporter</code></td>
</tr>
<tr>
<td><code>metrics.image.tag</code></td>
<td>PostgreSQL Prometheus exporter image tag</td>
<td><code>0.13.1-debian-11-r0</code></td>
</tr>
<tr>
<td><code>metrics.image.digest</code></td>
<td>PostgreSQL Prometheus exporter image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.image.pullPolicy</code></td>
<td>PostgreSQL Prometheus exporter image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>metrics.image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.image.debug</code></td>
<td>Specify if debug logs should be enabled</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.podSecurityContext.enabled</code></td>
<td>Enable security context for PostgreSQL Prometheus exporter</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>metrics.podSecurityContext.runAsUser</code></td>
<td>User ID for the PostgreSQL Prometheus exporter container</td>
<td><code>1001</code></td>
</tr>
<tr>
<td><code>metrics.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.containerPorts.http</code></td>
<td>Prometheus metrics exporter port</td>
<td><code>9187</code></td>
</tr>
<tr>
<td><code>metrics.livenessProbe.enabled</code></td>
<td>Enable livenessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>metrics.livenessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for livenessProbe</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>metrics.livenessProbe.periodSeconds</code></td>
<td>Period seconds for livenessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>metrics.livenessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for livenessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>metrics.livenessProbe.failureThreshold</code></td>
<td>Failure threshold for livenessProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>metrics.livenessProbe.successThreshold</code></td>
<td>Success threshold for livenessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>metrics.readinessProbe.enabled</code></td>
<td>Enable readinessProbe</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>metrics.readinessProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>metrics.readinessProbe.periodSeconds</code></td>
<td>Period seconds for readinessProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>metrics.readinessProbe.timeoutSeconds</code></td>
<td>Timeout seconds for readinessProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>metrics.readinessProbe.failureThreshold</code></td>
<td>Failure threshold for readinessProbe</td>
<td><code>6</code></td>
</tr>
<tr>
<td><code>metrics.readinessProbe.successThreshold</code></td>
<td>Success threshold for readinessProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>metrics.startupProbe.enabled</code></td>
<td>Enable startupProbe</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.startupProbe.initialDelaySeconds</code></td>
<td>Initial delay seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>metrics.startupProbe.periodSeconds</code></td>
<td>Period seconds for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>metrics.startupProbe.timeoutSeconds</code></td>
<td>Timeout seconds for startupProbe</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>metrics.startupProbe.failureThreshold</code></td>
<td>Failure threshold for startupProbe</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>metrics.startupProbe.successThreshold</code></td>
<td>Success threshold for startupProbe</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>metrics.customLivenessProbe</code></td>
<td>Override default liveness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.customReadinessProbe</code></td>
<td>Override default readiness probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.customStartupProbe</code></td>
<td>Override default startup probe</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.service.type</code></td>
<td>PostgreSQL Prometheus exporter metrics service type</td>
<td><code>ClusterIP</code></td>
</tr>
<tr>
<td><code>metrics.service.ports.metrics</code></td>
<td>PostgreSQL Prometheus exporter metrics service port</td>
<td><code>9187</code></td>
</tr>
<tr>
<td><code>metrics.service.nodePorts.metrics</code></td>
<td>PostgreSQL Prometheus exporter Node Port</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.service.clusterIP</code></td>
<td>PostgreSQL Prometheus exporter metrics service Cluster IP</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.service.loadBalancerIP</code></td>
<td>PostgreSQL Prometheus exporter service Load Balancer IP</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.service.loadBalancerSourceRanges</code></td>
<td>PostgreSQL Prometheus exporter service Load Balancer sources</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.service.externalTrafficPolicy</code></td>
<td>PostgreSQL Prometheus exporter service external traffic policy</td>
<td><code>Cluster</code></td>
</tr>
<tr>
<td><code>metrics.annotations</code></td>
<td>Annotations for PostgreSQL Prometheus exporter service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.customMetrics</code></td>
<td>Additional custom metrics</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.extraEnvVars</code></td>
<td>Array containing extra environment variables</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.extraEnvVarsCM</code></td>
<td>ConfigMap with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.extraEnvVarsSecret</code></td>
<td>Secret with extra environment variables</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.enabled</code></td>
<td>if <code>true</code>, creates a Prometheus Operator ServiceMonitor (also requires <code>metrics.enabled</code> to be <code>true</code>)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.namespace</code></td>
<td>Optional namespace which Prometheus is running in</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.interval</code></td>
<td>How frequently to scrape metrics (use by default, falling back to Prometheus' default)</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.scrapeTimeout</code></td>
<td>Service monitor scrape timeout</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.annotations</code></td>
<td>Additional annotations for the ServiceMonitor</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.labels</code></td>
<td>Additional labels that can be used so ServiceMonitor will be discovered by Prometheus</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.selector</code></td>
<td>Defaults to what's used if you follow CoreOS Prometheus Install Instructions (<a href="https://github.com/bitnami/charts/tree/main/bitnami/kube-prometheus#tldr">https://github.com/bitnami/charts/tree/main/bitnami/kube-prometheus#tldr</a>)</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.relabelings</code></td>
<td>ServiceMonitor relabelings. Value is evaluated as a template</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.metricRelabelings</code></td>
<td>ServiceMonitor metricRelabelings. Value is evaluated as a template</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.honorLabels</code></td>
<td>Specify honorLabels parameter to add the scrape endpoint</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>metrics.serviceMonitor.jobLabel</code></td>
<td>The name of the label on the target service to use as the job name in prometheus.</td>
<td><code>""</code></td>
</tr>
</tbody>
</table>
<h3 id="volume-permissions-parameters">Volume permissions parameters<a class="headerlink" href="#volume-permissions-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>volumePermissions.enabled</code></td>
<td>Enable init container to adapt volume permissions</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.registry</code></td>
<td>Init container volume-permissions image registry</td>
<td><code>docker.io</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.repository</code></td>
<td>Init container volume-permissions image repository</td>
<td><code>bitnami/bitnami-shell</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.tag</code></td>
<td>Init container volume-permissions image tag</td>
<td><code>11-debian-11-r130</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.digest</code></td>
<td>Init container volume-permissions image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.pullPolicy</code></td>
<td>Init container volume-permissions image pull policy</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>volumePermissions.image.pullSecrets</code></td>
<td>Specify docker-registry secret names as an array</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>volumePermissions.podSecurityContext.runAsUser</code></td>
<td>Init container volume-permissions User ID</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>volumePermissions.resources.limits</code></td>
<td>The resources limits for the container</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>volumePermissions.resources.requests</code></td>
<td>The requested resources for the container</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="persistence-parameters">Persistence parameters<a class="headerlink" href="#persistence-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>persistence.enabled</code></td>
<td>Enable data persistence</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>persistence.existingClaim</code></td>
<td>A manually managed Persistent Volume and Claim</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>persistence.storageClass</code></td>
<td>Persistent Volume Storage Class</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>persistence.mountPath</code></td>
<td>The path the volume will be mounted at, useful when using different PostgreSQL images.</td>
<td><code>/bitnami/postgresql</code></td>
</tr>
<tr>
<td><code>persistence.accessModes</code></td>
<td>List of access modes of data volume</td>
<td><code>["ReadWriteOnce"]</code></td>
</tr>
<tr>
<td><code>persistence.size</code></td>
<td>Persistent Volume Claim size</td>
<td><code>8Gi</code></td>
</tr>
<tr>
<td><code>persistence.annotations</code></td>
<td>Persistent Volume Claim annotations</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>persistence.labels</code></td>
<td>Persistent Volume Claim labels</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>persistence.selector</code></td>
<td>Selector to match an existing Persistent Volume (this value is evaluated as a template)</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="traffic-exposure-parameters">Traffic Exposure parameters<a class="headerlink" href="#traffic-exposure-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>service.type</code></td>
<td>Kubernetes service type (<code>ClusterIP</code>, <code>NodePort</code> or <code>LoadBalancer</code>)</td>
<td><code>ClusterIP</code></td>
</tr>
<tr>
<td><code>service.ports.postgresql</code></td>
<td>PostgreSQL port</td>
<td><code>5432</code></td>
</tr>
<tr>
<td><code>service.portName</code></td>
<td>PostgreSQL service port name</td>
<td><code>postgresql</code></td>
</tr>
<tr>
<td><code>service.nodePorts.postgresql</code></td>
<td>Kubernetes service nodePort</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.loadBalancerIP</code></td>
<td>Load balancer IP if service type is <code>LoadBalancer</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.loadBalancerSourceRanges</code></td>
<td>Addresses that are allowed when service is LoadBalancer</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>service.clusterIP</code></td>
<td>Set the Cluster IP to use</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>service.externalTrafficPolicy</code></td>
<td>Enable client source IP preservation</td>
<td><code>Cluster</code></td>
</tr>
<tr>
<td><code>service.extraPorts</code></td>
<td>Extra ports to expose (normally used with the <code>sidecar</code> value)</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>service.sessionAffinity</code></td>
<td>Control where client requests go, to the same pod or round-robin</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>service.sessionAffinityConfig</code></td>
<td>Additional settings for the sessionAffinity</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>service.annotations</code></td>
<td>Provide any additional annotations both for PostgreSQL and Pgpool services</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>service.serviceLabels</code></td>
<td>Labels for PostgreSQL service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>service.headless.annotations</code></td>
<td>Annotations for the headless service.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>networkPolicy.enabled</code></td>
<td>Enable NetworkPolicy</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>networkPolicy.allowExternal</code></td>
<td>Don't require client label for connections</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>networkPolicy.egressRules.denyConnectionsToExternal</code></td>
<td>Enable egress rule that denies outgoing traffic outside the cluster, except for DNS (port 53)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>networkPolicy.egressRules.customRules</code></td>
<td>Custom network policy rule</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<p>Specify each parameter using the <code>--set key=value[,key=value]</code> argument to <code>helm install</code>. For example,</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="go">helm install my-release \</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="go">    --set postgresql.password=password \</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="go">    bitnami/postgresql-ha</span>
</span></code></pre></div>
<p>The above command sets the password for user <code>postgres</code> to <code>password</code>.</p>
<blockquote>
<p>NOTE: Once this chart is deployed, it is not possible to change the application's access credentials, such as usernames or passwords, using Helm. To change these application credentials after deployment, delete any persistent volumes (PVs) used by the chart and re-deploy it, or use the application's built-in administrative tools if available.</p>
</blockquote>
<p>Alternatively, a YAML file that specifies the values for the above parameters can be provided while installing the chart. For example,</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="go">helm install my-release \</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="go">    -f values.yaml \</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="go">    bitnami/postgresql-ha</span>
</span></code></pre></div>
<h2 id="configuration-and-installation-details">Configuration and installation details<a class="headerlink" href="#configuration-and-installation-details" title="Permanent link">&para;</a></h2>
<h3 id="rolling-vs-immutable-tags"><a href="https://docs.bitnami.com/containers/how-to/understand-rolling-tags-containers/">Rolling VS Immutable tags</a><a class="headerlink" href="#rolling-vs-immutable-tags" title="Permanent link">&para;</a></h3>
<p>It is strongly recommended to use immutable tags in a production environment. This ensures your deployment does not change automatically if the same tag is updated with a different image.</p>
<p>Bitnami will release a new chart updating its containers if a new version of the main container, significant changes, or critical vulnerabilities exist.</p>
<h3 id="use-a-different-postgresql-version">Use a different PostgreSQL version<a class="headerlink" href="#use-a-different-postgresql-version" title="Permanent link">&para;</a></h3>
<p>To modify the application version used in this chart, specify a different version of the image using the <code>image.tag</code> parameter and/or a different repository using the <code>image.repository</code> parameter. Refer to the <a href="https://docs.bitnami.com/kubernetes/infrastructure/postgresql-ha/configuration/change-image-version/">chart documentation for more information on these parameters and how to use them with images from a private registry</a>.</p>
<h3 id="use-a-volume-for-devshm">Use a volume for /dev/shm<a class="headerlink" href="#use-a-volume-for-devshm" title="Permanent link">&para;</a></h3>
<p>When working with huge databeses, <code>/dev/shm</code> can run out of space. A way to fix this is to use the <code>postgresql.extraVolumes</code> and <code>postgresql.extraVolumeMounts</code> values. In the example below, we set an <code>emptyDir</code> volume with 512Mb:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">postgresql</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">extraVolumes</span><span class="p">:</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dshm</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">        </span><span class="nt">medium</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Memory</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">        </span><span class="nt">sizeLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512Mi</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">  </span><span class="nt">extraVolumeMounts</span><span class="p">:</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dshm</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">      </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dev/shm</span>
</span></code></pre></div>
<h3 id="configure-the-way-how-to-expose-postgresql">Configure the way how to expose PostgreSQL<a class="headerlink" href="#configure-the-way-how-to-expose-postgresql" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ClusterIP</strong>: Exposes the service on a cluster-internal IP. Choosing this value makes the service only reachable from within the cluster. Set <code>service.type=ClusterIP</code> to choose this service type.</li>
<li><strong>NodePort</strong>: Exposes the service on each Node's IP at a static port (the NodePort). You will be able to contact the NodePort service, from outside the cluster, by requesting <code>NodeIP:NodePort</code>. Set <code>service.type=NodePort</code> to choose this service type.</li>
<li><strong>LoadBalancer</strong>: Exposes the service externally using a cloud provider's load balancer. Set <code>service.type=LoadBalancer</code> to choose this service type.</li>
</ul>
<h3 id="adjust-permissions-of-persistent-volume-mountpoint">Adjust permissions of persistent volume mountpoint<a class="headerlink" href="#adjust-permissions-of-persistent-volume-mountpoint" title="Permanent link">&para;</a></h3>
<p>As the images run as non-root by default, it is necessary to adjust the ownership of the persistent volumes so that the containers can write data into it.</p>
<p>By default, the chart is configured to use Kubernetes Security Context to automatically change the ownership of the volume. However, this feature does not work in all Kubernetes distributions.
As an alternative, this chart supports using an initContainer to change the ownership of the volume before mounting it in the final destination.</p>
<p>You can enable this initContainer by setting <code>volumePermissions.enabled</code> to <code>true</code>.</p>
<h3 id="securing-traffic-using-tls">Securing traffic using TLS<a class="headerlink" href="#securing-traffic-using-tls" title="Permanent link">&para;</a></h3>
<p>Learn how to <a href="/&lt;%= platform_path %&gt;/infrastructure/postgresql-ha/administration/enable-tls-ingress/">configure TLS authentication</a></p>
<h3 id="ldap">LDAP<a class="headerlink" href="#ldap" title="Permanent link">&para;</a></h3>
<p>LDAP support can be enabled in the chart by specifying the <code>ldap.</code> parameters while creating a release. The following parameters should be configured to properly enable the LDAP support in the chart.</p>
<ul>
<li><strong>ldap.enabled</strong>: Enable LDAP support. Defaults to <code>false</code>.</li>
<li><strong>ldap.uri</strong>: LDAP URL beginning in the form <code>ldap[s]://&lt;hostname&gt;:&lt;port&gt;</code>. No defaults.</li>
<li><strong>ldap.base</strong>: LDAP base DN. No defaults.</li>
<li><strong>ldap.binddn</strong>: LDAP bind DN. No defaults.</li>
<li><strong>ldap.bindpw</strong>: LDAP bind password. No defaults.</li>
<li><strong>ldap.bslookup</strong>: LDAP base lookup. No defaults.</li>
<li><strong>ldap.nss_initgroups_ignoreusers</strong>: LDAP ignored users. <code>root,nslcd</code>.</li>
<li><strong>ldap.scope</strong>: LDAP search scope. No defaults.</li>
<li><strong>ldap.tls_reqcert</strong>: LDAP TLS check on server certificates. No defaults.</li>
</ul>
<p>For example:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ldap.enabled=&quot;true&quot;
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ldap.uri=&quot;ldap://my_ldap_server&quot;
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ldap.base=&quot;dc=example\,dc=org&quot;
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>ldap.binddn=&quot;cn=admin\,dc=example\,dc=org&quot;
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>ldap.bindpw=&quot;admin&quot;
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>ldap.bslookup=&quot;ou=group-ok\,dc=example\,dc=org&quot;
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>ldap.nss_initgroups_ignoreusers=&quot;root\,nslcd&quot;
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>ldap.scope=&quot;sub&quot;
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>ldap.tls_reqcert=&quot;demand&quot;
</span></code></pre></div>
<p>Next, login to the PostgreSQL server using the <code>psql</code> client and add the PAM authenticated LDAP users.</p>
<blockquote>
<p>Note: Parameters including commas must be escaped as shown in the above example.</p>
</blockquote>
<h3 id="repmgrconf-postgresqlconf-pg_hbaconf-pgpoolconf-files-as-configmap">repmgr.conf / postgresql.conf / pg_hba.conf / pgpool.conf files as configMap<a class="headerlink" href="#repmgrconf-postgresqlconf-pg_hbaconf-pgpoolconf-files-as-configmap" title="Permanent link">&para;</a></h3>
<p>This helm chart also supports to customize the whole configuration file.</p>
<p>You can specify the Pgpool, PostgreSQL and Repmgr configuration using the <code>pgpool.configuration</code>, <code>postgresql.configuration</code>, <code>postgresql.pgHbaConfiguration</code>, and <code>postgresql.repmgrConfiguration</code> parameters. The corresponding files will be mounted as ConfigMap to the containers and it will be used for configuring Pgpool, Repmgr and the PostgreSQL server.</p>
<p>In addition to this option, you can also set an external ConfigMap(s) with all the configuration files. This is done by setting the <code>postgresql.configurationCM</code> and <code>pgpool.configurationCM</code> parameters. Note that this will override the previous options.</p>
<h3 id="allow-settings-to-be-loaded-from-files-other-than-the-default-postgresqlconf">Allow settings to be loaded from files other than the default <code>postgresql.conf</code><a class="headerlink" href="#allow-settings-to-be-loaded-from-files-other-than-the-default-postgresqlconf" title="Permanent link">&para;</a></h3>
<p>If you don't want to provide the whole PostgreSQL configuration file and only specify certain parameters, you can specify the extended configuration using the <code>postgresql.extendedConf</code> parameter. A file will be mounted as configMap to the containers adding/overwriting the default configuration using the <code>include_dir</code> directive that allows settings to be loaded from files other than the default <code>postgresql.conf</code>.</p>
<p>In addition to this option, you can also set an external ConfigMap with all the extra configuration files. This is done by setting the <code>postgresql.extendedConfCM</code> parameter. Note that this will override the previous option.</p>
<h3 id="initialize-a-fresh-instance">Initialize a fresh instance<a class="headerlink" href="#initialize-a-fresh-instance" title="Permanent link">&para;</a></h3>
<p>The <a href="https://github.com/bitnami/containers/tree/main/bitnami/postgresql-repmgr">Bitnami PostgreSQL with Repmgr</a> image allows you to use your custom scripts to initialize a fresh instance. You can specify custom scripts using the <code>initdbScripts</code> parameter as dict so they can be consumed as a ConfigMap.</p>
<p>In addition to this option, you can also set an external ConfigMap with all the initialization scripts. This is done by setting the <code>initdbScriptsCM</code> parameter. Note that this will override the two previous options. If your initialization scripts contain sensitive information such as credentials or passwords, you can use the <code>initdbScriptsSecret</code> parameter.</p>
<p>The above parameters (<code>initdbScripts</code>, <code>initdbScriptsCM</code>, and <code>initdbScriptsSecret</code>) are supported in both StatefulSet by prepending <code>postgresql</code> or <code>pgpool</code> to the parameter, depending on the use case (see above parameters table).</p>
<p>The allowed extensions are <code>.sh</code>, <code>.sql</code> and <code>.sql.gz</code> in the <strong>postgresql</strong> container while only <code>.sh</code> in the case of the <strong>pgpool</strong> one.</p>
<p>+info: <a href="https://github.com/bitnami/containers/tree/main/bitnami/postgresql#initializing-a-new-instance">https://github.com/bitnami/containers/tree/main/bitnami/postgresql#initializing-a-new-instance</a> and <a href="https://github.com/bitnami/containers/tree/main/bitnami/pgpool#initializing-with-custom-scripts">https://github.com/bitnami/containers/tree/main/bitnami/pgpool#initializing-with-custom-scripts</a></p>
<h3 id="use-of-global-variables">Use of global variables<a class="headerlink" href="#use-of-global-variables" title="Permanent link">&para;</a></h3>
<p>In more complex scenarios, we may have the following tree of dependencies</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>                     +--------------+
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>                     |              |
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>        +------------+   Chart 1    +-----------+
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>        |            |              |           |
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>        |            --------+------+           |
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>        |                    |                  |
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>        |                    |                  |
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>        |                    |                  |
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>        |                    |                  |
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>        v                    v                  v
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>+-------+------+    +--------+------+  +--------+------+
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>|              |    |               |  |               |
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>| PostgreSQL HA |  | Sub-chart 1 |  | Sub-chart 2 |
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>|---------------|--|-------------|--|-------------|
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>+--------------+    +---------------+  +---------------+
</span></code></pre></div>
<p>The three charts below depend on the parent chart Chart 1. However, subcharts 1 and 2 may need to connect to PostgreSQL HA as well. In order to do so, subcharts 1 and 2 need to know the PostgreSQL HA credentials, so one option for deploying could be deploy Chart 1 with the following parameters:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>postgresql.postgresqlPassword=testtest
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>subchart1.postgresql.postgresqlPassword=testtest
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>subchart2.postgresql.postgresqlPassword=testtest
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>postgresql.postgresqlDatabase=db1
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>subchart1.postgresql.postgresqlDatabase=db1
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>subchart2.postgresql.postgresqlDatabase=db1
</span></code></pre></div>
<p>If the number of dependent sub-charts increases, installing the chart with parameters can become increasingly difficult. An alternative would be to set the credentials using global variables as follows:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>global.postgresql.postgresqlPassword=testtest
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>global.postgresql.postgresqlDatabase=db1
</span></code></pre></div>
<p>This way, the credentials will be available in all of the subcharts.</p>
<h2 id="persistence">Persistence<a class="headerlink" href="#persistence" title="Permanent link">&para;</a></h2>
<p>The data is persisted by default using PVC templates in the PostgreSQL statefulset. You can disable the persistence setting the <code>persistence.enabled</code> parameter to <code>false</code>.
A default <code>StorageClass</code> is needed in the Kubernetes cluster to dynamically provision the volumes. Specify another StorageClass in the <code>persistence.storageClass</code> or set <code>persistence.existingClaim</code> if you have already existing persistent volumes to use.</p>
<h3 id="setting-pods-affinity">Setting Pod's affinity<a class="headerlink" href="#setting-pods-affinity" title="Permanent link">&para;</a></h3>
<p>This chart allows you to set your custom affinity using the <code>XXX.affinity</code> paremeter(s). Find more information about Pod's affinity in the <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity">kubernetes documentation</a>.</p>
<p>As an alternative, you can use of the preset configurations for pod affinity, pod anti-affinity, and node affinity available at the <a href="https://github.com/bitnami/charts/tree/main/bitnami/common#affinities">bitnami/common</a> chart. To do so, set the <code>XXX.podAffinityPreset</code>, <code>XXX.podAntiAffinityPreset</code>, or <code>XXX.nodeAffinityPreset</code> parameters.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<p>Find more information about how to deal with common errors related to Bitnami's Helm charts in <a href="https://docs.bitnami.com/general/how-to/troubleshoot-helm-chart-issues">this troubleshooting guide</a>.</p>
<h2 id="upgrading">Upgrading<a class="headerlink" href="#upgrading" title="Permanent link">&para;</a></h2>
<p>It's necessary to specify the existing passwords while performing a upgrade to ensure the secrets are not updated with invalid randomly generated passwords. Remember to specify the existing values of the <code>postgresql.password</code> and <code>postgresql.repmgrPassword</code> parameters when upgrading the chart:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="go">helm upgrade my-release bitnami/postgresql-ha \</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="go">    --set postgresql.password=[POSTGRES_PASSWORD] \</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD]</span>
</span></code></pre></div>
<blockquote>
<p>Note: you need to substitute the placeholders <em>[POSTGRES_PASSWORD]</em>, and <em>[REPMGR_PASSWORD]</em> with the values obtained from instructions in the installation notes.
Note: As general rule, it is always wise to do a backup before the upgrading procedures.</p>
</blockquote>
<h3 id="to-1000">To 10.0.0<a class="headerlink" href="#to-1000" title="Permanent link">&para;</a></h3>
<p>This major version changes the default PostgreSQL image from 14.x to 15.x. Follow the <a href="https://www.postgresql.org/docs/15/upgrading.html">official instructions</a> to upgrade to 15.x.</p>
<h3 id="to-900">To 9.0.0<a class="headerlink" href="#to-900" title="Permanent link">&para;</a></h3>
<p>This chart major version updates the PostgreSQL image's version to the latest major, <code>v14</code>, as well as standarizes the templates and values. These changes can be sumarised in the following:</p>
<ul>
<li>Image parameters that used <code>imageNameImage</code> are now under <code>imageName.image</code></li>
<li><code>containerPort</code> parameters are now found by <code>containerPorts.xxxx</code></li>
<li><code>service.port</code> parameters are now found by <code>service.ports.xxxx</code></li>
<li><code>imageName.securityContext</code> parameters are now under <code>imageName.podSecurityContext</code></li>
<li><code>serviceAccount.enabled</code> parameter has been renamed to <code>serviceAccount.create</code></li>
<li><code>postgresql.updateStrategyType</code> parameter has been renamed to <code>postgresql.updateStrategy.type</code></li>
<li>Added the <code>pgpool.authenticationMethod</code> parameter. Use "md5" for older PSQL versions and the default value of "scram-sha-256" when using PSQL &gt; v14.</li>
</ul>
<blockquote>
<p>Note: Keep in mind you will find an error such as the one below when upgrading since the new chart major version also bumps the application version. To workaround this issue you need to upgrade the database, please refer to the <a href="https://www.postgresql.org/docs/current/upgrading.html">official PostgreSQL documentation</a> for more information about this.</p>
</blockquote>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>postgresql-repmgr 14:41:21.00 INFO  ==&gt; Setting up streaming replication slave...
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>postgresql-repmgr 14:41:21.04 INFO  ==&gt; Starting PostgreSQL in background...
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>waiting for server to start....2022-04-12 14:41:21.069 GMT [220] FATAL:  database files are incompatible with server
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>2022-04-12 14:41:21.069 GMT [220] DETAIL:  The data directory was initialized by PostgreSQL version 11, which is not compatible with this version 14.2.
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>pg_ctl: could not start server
</span></code></pre></div>
<h3 id="to-800">To 8.0.0<a class="headerlink" href="#to-800" title="Permanent link">&para;</a></h3>
<p>A new major version of repmgr (5.3) was included. To upgrade to this major version, it's necessary to upgrade the repmgr extension installed on the database. To do so, follow the steps below:</p>
<ul>
<li>Reduce your PostgreSQL setup to one replica (primary node) and upgrade to <code>8.0.0</code>, enabling the repmgr extension upgrade:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="go">helm upgrade my-release --version 8.0.0 bitnami/postgresql-ha \</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="go">    --set postgresql.replicaCount=1 \</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="go">    --set postgresql.upgradeRepmgrExtension=true</span>
</span></code></pre></div>
<ul>
<li>Scale your PostgreSQL setup to the original number of replicas:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="go">helm upgrade my-release --version 8.0.0 bitnami/postgresql-ha \</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="go">    --set postgresql.replicaCount=[NUMBER_OF_REPLICAS]</span>
</span></code></pre></div>
<blockquote>
<p>Note: you need to substitute the placeholders <em>[POSTGRESQL_PASSWORD]</em>, and <em>[REPMGR_PASSWORD]</em> with the values obtained from instructions in the installation notes.</p>
</blockquote>
<h3 id="to-640">To 6.4.0<a class="headerlink" href="#to-640" title="Permanent link">&para;</a></h3>
<p>Support for adding custom configuration files or initialization scripts by placing them under the "files" directory in the working directory was removed. This functionality was very confusing for users since they do not usually clone the repo nor they fetch the charts to their working directories.
As an alternative to this feature, users can still use the equivalent parameters available in the <code>values.yaml</code> to load their custom configuration &amp; scripts.</p>
<h3 id="to-600">To 6.0.0<a class="headerlink" href="#to-600" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/helm/charts#status-of-the-project">On November 13, 2020, Helm v2 support was formally finished</a>, this major version is the result of the required changes applied to the Helm Chart to be able to incorporate the different features added in Helm v3 and to be consistent with the Helm project itself regarding the Helm v2 EOL.</p>
<h4 id="what-changes-were-introduced-in-this-major-version">What changes were introduced in this major version?<a class="headerlink" href="#what-changes-were-introduced-in-this-major-version" title="Permanent link">&para;</a></h4>
<ul>
<li>Previous versions of this Helm Chart use <code>apiVersion: v1</code> (installable by both Helm 2 and 3), this Helm Chart was updated to <code>apiVersion: v2</code> (installable by Helm 3 only). <a href="https://helm.sh/docs/topics/charts/#the-apiversion-field">Here</a> you can find more information about the <code>apiVersion</code> field.</li>
<li>Move dependency information from the <em>requirements.yaml</em> to the <em>Chart.yaml</em></li>
<li>After running <code>helm dependency update</code>, a <em>Chart.lock</em> file is generated containing the same structure used in the previous <em>requirements.lock</em></li>
<li>The different fields present in the <em>Chart.yaml</em> file has been ordered alphabetically in a homogeneous way for all the Bitnami Helm Charts</li>
</ul>
<h4 id="considerations-when-upgrading-to-this-version">Considerations when upgrading to this version<a class="headerlink" href="#considerations-when-upgrading-to-this-version" title="Permanent link">&para;</a></h4>
<ul>
<li>If you want to upgrade to this version from a previous one installed with Helm v3, you shouldn't face any issues</li>
<li>If you want to upgrade to this version using Helm v2, this scenario is not supported as this version doesn't support Helm v2 anymore</li>
<li>If you installed the previous version with Helm v2 and wants to upgrade to this version with Helm v3, please refer to the <a href="https://helm.sh/docs/topics/v2_v3_migration/#migration-use-cases">official Helm documentation</a> about migrating from Helm v2 to v3</li>
</ul>
<h4 id="useful-links">Useful links<a class="headerlink" href="#useful-links" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://docs.bitnami.com/tutorials/resolve-helm2-helm3-post-migration-issues/">https://docs.bitnami.com/tutorials/resolve-helm2-helm3-post-migration-issues/</a></li>
<li><a href="https://helm.sh/docs/topics/v2_v3_migration/">https://helm.sh/docs/topics/v2_v3_migration/</a></li>
<li><a href="https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/">https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/</a></li>
</ul>
<h3 id="to-520">To 5.2.0<a class="headerlink" href="#to-520" title="Permanent link">&para;</a></h3>
<p>A new  version of repmgr (5.2.0) was included. To upgrade to this version, it's necessary to upgrade the repmgr extension installed on the database. To do so, follow the steps below:</p>
<ul>
<li>Reduce your PostgreSQL setup to one replica (primary node) and upgrade to <code>5.2.0</code>, enabling the repmgr extension upgrade:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="go">helm upgrade my-release --version 5.2.0 bitnami/postgresql-ha \</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="go">    --set postgresql.replicaCount=1 \</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="go">    --set postgresql.upgradeRepmgrExtension=true</span>
</span></code></pre></div>
<ul>
<li>Scale your PostgreSQL setup to the original number of replicas:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="go">helm upgrade my-release --version 5.2.0 bitnami/postgresql-ha \</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="go">    --set postgresql.replicaCount=[NUMBER_OF_REPLICAS]</span>
</span></code></pre></div>
<blockquote>
<p>Note: you need to substitute the placeholders <em>[POSTGRESQL_PASSWORD]</em>, and <em>[REPMGR_PASSWORD]</em> with the values obtained from instructions in the installation notes (<code>helm get notes RELEASE_NAME</code>).</p>
</blockquote>
<h3 id="to-500">To 5.0.0<a class="headerlink" href="#to-500" title="Permanent link">&para;</a></h3>
<p>This release uses parallel deployment for the postgresql statefullset. This should fix the issues related to not being able to restart the cluster under some contions where the master node is not longer node <code>-0</code>.
This version is next major version to v3.x.y</p>
<ul>
<li>To upgrade to this version you will need to delete the deployment, keep the PVCs and launch a new deployment keeping the deployment name.</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="gp">$ </span><span class="c1"># e.g. Previous deployment v3.9.1</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="go">helm install my-release \</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="go">    bitnami/postgresql-ha --version 3.9.1</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="gp">$ </span><span class="c1"># Update repository information</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="go">helm repo update</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="gp">$ </span><span class="c1"># upgrade to v5.0.0</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="go">helm delete my-release</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="go">helm install my-release \</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="go">    bitnami/postgresql-ha --version 5.0.0</span>
</span></code></pre></div>
<h3 id="to-40x">To 4.0.x<a class="headerlink" href="#to-40x" title="Permanent link">&para;</a></h3>
<p>Due to an error handling the version numbers these versions are actually part of the 3.x versions and not a new major version.</p>
<h3 id="to-300">To 3.0.0<a class="headerlink" href="#to-300" title="Permanent link">&para;</a></h3>
<p>A new major version of repmgr (5.1.0) was included. To upgrade to this major version, it's necessary to upgrade the repmgr extension installed on the database. To do so, follow the steps below:</p>
<ul>
<li>Reduce your PostgreSQL setup to one replica (primary node) and upgrade to <code>3.0.0</code>, enabling the repmgr extension upgrade:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="go">helm upgrade my-release --version 3.0.0 bitnami/postgresql-ha \</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="go">    --set postgresql.replicaCount=1 \</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="go">    --set postgresql.upgradeRepmgrExtension=true</span>
</span></code></pre></div>
<ul>
<li>Scale your PostgreSQL setup to the original number of replicas:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="go">helm upgrade my-release --version 3.0.0 bitnami/postgresql-ha \</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="go">    --set postgresql.replicaCount=[NUMBER_OF_REPLICAS]</span>
</span></code></pre></div>
<blockquote>
<p>Note: you need to substitute the placeholders <em>[POSTGRESQL_PASSWORD]</em>, and <em>[REPMGR_PASSWORD]</em> with the values obtained from instructions in the installation notes.</p>
</blockquote>
<h3 id="to-200">To 2.0.0<a class="headerlink" href="#to-200" title="Permanent link">&para;</a></h3>
<p>The <a href="https://github.com/bitnami/containers/tree/main/bitnami/pgpool">Bitnami Pgpool</a> image was migrated to a "non-root" user approach. Previously the container ran as the <code>root</code> user and the Pgpool daemon was started as the <code>pgpool</code> user. From now on, both the container and the Pgpool daemon run as user <code>1001</code>. You can revert this behavior by setting the parameters <code>pgpool.containerSecurityContext.runAsUser</code>, and <code>pgpool.securityContext.fsGroup</code> to <code>0</code>.</p>
<p>Consequences:</p>
<ul>
<li>No backwards compatibility issues are expected since all the data is at PostgreSQL pods, and Pgpool uses a deployment without persistence. Therefore, upgrades should work smoothly from <code>1.x.x</code> versions.</li>
<li>Environment variables related to LDAP configuration were renamed removing the <code>PGPOOL_</code> prefix. For instance, to indicate the LDAP URI to use, you must set <code>LDAP_URI</code> instead of <code>PGPOOL_LDAP_URI</code></li>
</ul>
<h3 id="to-100">To 1.0.0<a class="headerlink" href="#to-100" title="Permanent link">&para;</a></h3>
<p>A new major version of repmgr (5.0.0) was included. To upgrade to this major version, it's necessary to upgrade the repmgr extension installed on the database. To do so, follow the steps below:</p>
<ul>
<li>Reduce your PostgreSQL setup to one replica (primary node) and upgrade to <code>1.0.0</code>, enabling the repmgr extension upgrade:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="go">helm upgrade my-release --version 1.0.0 bitnami/postgresql-ha \</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="go">    --set postgresql.replicaCount=1 \</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="go">    --set postgresql.upgradeRepmgrExtension=true</span>
</span></code></pre></div>
<ul>
<li>Scale your PostgreSQL setup to the original number of replicas:</li>
</ul>
<div class="language-console highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="go">helm upgrade my-release --version 1.0.0 bitnami/postgresql-ha \</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="go">    --set postgresql.password=[POSTGRESQL_PASSWORD] \</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="go">    --set postgresql.repmgrPassword=[REPMGR_PASSWORD] \</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="go">    --set postgresql.replicaCount=[NUMBER_OF_REPLICAS]</span>
</span></code></pre></div>
<blockquote>
<p>Note: you need to substitute the placeholders <em>[POSTGRESQL_PASSWORD]</em>, and <em>[REPMGR_PASSWORD]</em> with the values obtained from instructions in the installation notes.</p>
</blockquote>
<h3 id="to-040">To 0.4.0<a class="headerlink" href="#to-040" title="Permanent link">&para;</a></h3>
<p>In this version, the chart will use PostgreSQL-Repmgr container images with the Postgis extension included. The version used in Postgresql version 10, 11 and 12 is Postgis 2.5, and in Postgresql 9.6 is Postgis 2.3. Postgis has been compiled with the following dependencies:</p>
<ul>
<li>protobuf</li>
<li>protobuf-c</li>
<li>json-c</li>
<li>geos</li>
<li>proj</li>
<li>gdal</li>
</ul>
<h2 id="bitnami-kubernetes-documentation">Bitnami Kubernetes Documentation<a class="headerlink" href="#bitnami-kubernetes-documentation" title="Permanent link">&para;</a></h2>
<p>Bitnami Kubernetes documentation is available at <a href="https://docs.bitnami.com/">https://docs.bitnami.com/</a>. You can find there the following resources:</p>
<ul>
<li><a href="https://docs.bitnami.com/kubernetes/infrastructure/postgresql-ha/">Documentation for PostgreSQL HA Helm chart</a></li>
<li><a href="https://docs.bitnami.com/kubernetes/">Get Started with Kubernetes guides</a></li>
<li><a href="https://docs.bitnami.com/kubernetes/apps/">Bitnami Helm charts documentation</a></li>
<li><a href="https://docs.bitnami.com/kubernetes/faq/">Kubernetes FAQs</a></li>
<li><a href="https://docs.bitnami.com/tutorials/">Kubernetes Developer guides</a></li>
</ul>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p>Copyright &copy; 2023 VMware, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../pinniped/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Pinniped" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  上一页
                </span>
                Pinniped
              </div>
            </div>
          </a>
        
        
          
          <a href="../postgresql/" class="md-footer__link md-footer__link--next" aria-label="下一页: Postgresql" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  下一页
                </span>
                Postgresql
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>